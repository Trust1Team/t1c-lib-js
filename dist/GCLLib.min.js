var GCLLib=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(1),e.exports=r(329)},function(e,t,r){(function(e){"use strict";function t(e,t,r){e[t]||Object[n](e,t,{writable:!0,configurable:!0,value:r})}if(r(2),r(325),r(326),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var n="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,r){r(3),r(52),r(53),r(54),r(55),r(57),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(68),r(70),r(72),r(74),r(76),r(79),r(80),r(81),r(85),r(87),r(89),r(92),r(93),r(94),r(95),r(97),r(98),r(99),r(100),r(101),r(102),r(103),r(105),r(106),r(107),r(109),r(110),r(111),r(113),r(115),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(125),r(126),r(127),r(132),r(133),r(137),r(138),r(139),r(140),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(158),r(159),r(161),r(162),r(168),r(169),r(171),r(172),r(173),r(177),r(178),r(179),r(180),r(181),r(183),r(184),r(185),r(186),r(189),r(191),r(192),r(193),r(195),r(197),r(199),r(200),r(201),r(203),r(204),r(205),r(206),r(216),r(220),r(221),r(223),r(224),r(228),r(229),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(251),r(252),r(253),r(254),r(255),r(257),r(258),r(259),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(270),r(271),r(273),r(274),r(275),r(276),r(279),r(280),r(282),r(283),r(284),r(285),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(323),r(324),e.exports=r(9)},function(e,t,r){"use strict";var n=r(4),i=r(5),a=r(6),o=r(8),s=r(18),u=r(22).KEY,c=r(7),l=r(23),f=r(24),h=r(19),m=r(25),d=r(26),p=r(27),v=r(29),g=r(42),y=r(45),b=r(12),w=r(32),S=r(16),k=r(17),P=r(46),A=r(49),C=r(51),_=r(11),O=r(30),E=C.f,I=_.f,B=A.f,x=n.Symbol,N=n.JSON,j=N&&N.stringify,R="prototype",V=m("_hidden"),T=m("toPrimitive"),D={}.propertyIsEnumerable,U=l("symbol-registry"),K=l("symbols"),M=l("op-symbols"),H=Object[R],L="function"==typeof x,q=n.QObject,F=!q||!q[R]||!q[R].findChild,J=a&&c(function(){return 7!=P(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=E(H,t);n&&delete H[t],I(e,t,r),n&&e!==H&&I(H,t,n)}:I,W=function(e){var t=K[e]=P(x[R]);return t._k=e,t},G=L&&"symbol"==typeof x.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof x},z=function(e,t,r){return e===H&&z(M,t,r),b(e),t=S(t,!0),b(r),i(K,t)?(r.enumerable?(i(e,V)&&e[V][t]&&(e[V][t]=!1),r=P(r,{enumerable:k(0,!1)})):(i(e,V)||I(e,V,k(1,{})),e[V][t]=!0),J(e,t,r)):I(e,t,r)},$=function(e,t){b(e);for(var r,n=g(t=w(t)),i=0,a=n.length;a>i;)z(e,r=n[i++],t[r]);return e},Y=function(e,t){return void 0===t?P(e):$(P(e),t)},Z=function(e){var t=D.call(this,e=S(e,!0));return!(this===H&&i(K,e)&&!i(M,e))&&(!(t||!i(this,e)||!i(K,e)||i(this,V)&&this[V][e])||t)},X=function(e,t){if(e=w(e),t=S(t,!0),e!==H||!i(K,t)||i(M,t)){var r=E(e,t);return!r||!i(K,t)||i(e,V)&&e[V][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=B(w(e)),n=[],a=0;r.length>a;)i(K,t=r[a++])||t==V||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===H,n=B(r?M:w(e)),a=[],o=0;n.length>o;)!i(K,t=n[o++])||r&&!i(H,t)||a.push(K[t]);return a};L||(x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===H&&t.call(M,r),i(this,V)&&i(this[V],e)&&(this[V][e]=!1),J(this,e,k(1,r))};return a&&F&&J(H,e,{configurable:!0,set:t}),W(e)},s(x[R],"toString",function(){return this._k}),C.f=X,_.f=z,r(50).f=A.f=Q,r(44).f=Z,r(43).f=ee,a&&!r(28)&&s(H,"propertyIsEnumerable",Z,!0),d.f=function(e){return W(m(e))}),o(o.G+o.W+o.F*!L,{Symbol:x});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)m(te[re++]);for(var ne=O(m.store),ie=0;ne.length>ie;)p(ne[ie++]);o(o.S+o.F*!L,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=x(e)},keyFor:function(e){if(G(e))return v(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){F=!0},useSimple:function(){F=!1}}),o(o.S+o.F*!L,"Object",{create:Y,defineProperty:z,defineProperties:$,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),N&&o(o.S+o.F*(!L||c(function(){var e=x();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!G(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!G(t))return t}),n[1]=t,j.apply(N,n)}}}),x[R][T]||r(10)(x[R],T,x[R].valueOf),f(x,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){e.exports=!r(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(4),i=r(9),a=r(10),o=r(18),s=r(20),u="prototype",c=function(e,t,r){var l,f,h,m,d=e&c.F,p=e&c.G,v=e&c.S,g=e&c.P,y=e&c.B,b=p?n:v?n[t]||(n[t]={}):(n[t]||{})[u],w=p?i:i[t]||(i[t]={}),S=w[u]||(w[u]={});p&&(r=t);for(l in r)f=!d&&b&&void 0!==b[l],h=(f?b:r)[l],m=y&&f?s(h,n):g&&"function"==typeof h?s(Function.call,h):h,b&&o(b,l,h,e&c.U),w[l]!=h&&a(w,l,m),g&&S[l]!=h&&(S[l]=h)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var r=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(11),i=r(17);e.exports=r(6)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(12),i=r(14),a=r(16),o=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(13);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(6)&&!r(7)(function(){return 7!=Object.defineProperty(r(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(13),i=r(4).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(4),i=r(10),a=r(5),o=r(19)("src"),s="toString",u=Function[s],c=(""+u).split(s);r(9).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,r,s){var u="function"==typeof r;u&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(a(r,o)||i(r,o,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||u.call(this)})},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(21);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(19)("meta"),i=r(13),a=r(5),o=r(11).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(7)(function(){return u(Object.preventExtensions({}))}),l=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},h=function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},m=function(e){return c&&d.NEED&&u(e)&&!a(e,n)&&l(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:h,onFreeze:m}},function(e,t,r){var n=r(4),i="__core-js_shared__",a=n[i]||(n[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,r){var n=r(11).f,i=r(5),a=r(25)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(23)("wks"),i=r(19),a=r(4).Symbol,o="function"==typeof a,s=e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))};s.store=n},function(e,t,r){t.f=r(25)},function(e,t,r){var n=r(4),i=r(9),a=r(28),o=r(26),s=r(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){e.exports=!1},function(e,t,r){var n=r(30),i=r(32);e.exports=function(e,t){for(var r,a=i(e),o=n(a),s=o.length,u=0;s>u;)if(a[r=o[u++]]===t)return r}},function(e,t,r){var n=r(31),i=r(41);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(5),i=r(32),a=r(36)(!1),o=r(40)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,c=[];for(r in s)r!=o&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(c,r)||c.push(r));return c}},function(e,t,r){var n=r(33),i=r(35);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(32),i=r(37),a=r(39);e.exports=function(e){return function(t,r,o){var s,u=n(t),c=i(u.length),l=a(o,c);if(e&&r!=r){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(38),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(38),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(23)("keys"),i=r(19);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(30),i=r(43),a=r(44);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),u=a.f,c=0;s.length>c;)u.call(e,o=s[c++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(34);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(12),i=r(47),a=r(41),o=r(40)("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,t=r(15)("iframe"),n=a.length,i="<",o=">";for(t.style.display="none",r(48).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+o+"document.F=Object"+i+"/script"+o),e.close(),c=e.F;n--;)delete c[u][a[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(s[u]=n(e),r=new s,s[u]=null,r[o]=e):r=c(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(11),i=r(12),a=r(30);e.exports=r(6)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,u=0;s>u;)n.f(e,r=o[u++],t[r]);return e}},function(e,t,r){var n=r(4).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(32),i=r(50).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(31),i=r(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(44),i=r(17),a=r(32),o=r(16),s=r(5),u=r(14),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=a(e),t=o(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(8);n(n.S,"Object",{create:r(46)})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(6),"Object",{defineProperty:r(11).f})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(6),"Object",{defineProperties:r(47)})},function(e,t,r){var n=r(32),i=r(51).f;r(56)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){var n=r(8),i=r(9),a=r(7);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){var n=r(58),i=r(59);r(56)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(35);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(5),i=r(58),a=r(40)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(58),i=r(30);r(56)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){r(56)("getOwnPropertyNames",function(){return r(49).f})},function(e,t,r){var n=r(13),i=r(22).onFreeze;r(56)("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(13),i=r(22).onFreeze;r(56)("seal",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(13),i=r(22).onFreeze;r(56)("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(13);r(56)("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(13);r(56)("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(13);r(56)("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},function(e,t,r){var n=r(8);n(n.S+n.F,"Object",{assign:r(69)})},function(e,t,r){"use strict";var n=r(30),i=r(43),a=r(44),o=r(58),s=r(33),u=Object.assign;e.exports=!u||r(7)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=o(e),u=arguments.length,c=1,l=i.f,f=a.f;u>c;)for(var h,m=s(arguments[c++]),d=l?n(m).concat(l(m)):n(m),p=d.length,v=0;p>v;)f.call(m,h=d[v++])&&(r[h]=m[h]);return r}:u},function(e,t,r){var n=r(8);n(n.S,"Object",{is:r(71)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,r){var n=r(8);n(n.S,"Object",{setPrototypeOf:r(73).set})},function(e,t,r){var n=r(13),i=r(12),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(20)(Function.call,r(51).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){"use strict";var n=r(75),i={};i[r(25)("toStringTag")]="z",i+""!="[object z]"&&r(18)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){var n=r(34),i=r(25)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){var n=r(8);n(n.P,"Function",{bind:r(77)})},function(e,t,r){"use strict";var n=r(21),i=r(13),a=r(78),o=[].slice,s={},u=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),s=function(){var n=r.concat(o.call(arguments));return this instanceof s?u(t,n.length,n):a(t,n,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(11).f,i=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in i||r(6)&&n(i,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(13),i=r(59),a=r(25)("hasInstance"),o=Function.prototype;a in o||r(11).f(o,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(8),i=r(82);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(e,t,r){var n=r(4).parseInt,i=r(83).trim,a=r(84),o=/^[-+]?0[xX]/;e.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},function(e,t,r){var n=r(8),i=r(35),a=r(7),o=r(84),s="["+o+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,r){var i={},s=a(function(){return!!o[e]()||u[e]()!=u}),c=i[e]=s?t(h):o[e];r&&(i[r]=c),n(n.P+n.F*s,"String",i)},h=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(8),i=r(86);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(e,t,r){var n=r(4).parseFloat,i=r(83).trim;e.exports=1/n(r(84)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){"use strict";var n=r(4),i=r(5),a=r(34),o=r(88),s=r(16),u=r(7),c=r(50).f,l=r(51).f,f=r(11).f,h=r(83).trim,m="Number",d=n[m],p=d,v=d.prototype,g=a(r(46)(v))==m,y="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():h(t,3);var r,n,i,a=t.charCodeAt(0);if(43===a||45===a){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,u=t.slice(2),c=0,l=u.length;c<l;c++)if(o=u.charCodeAt(c),o<48||o>i)return NaN;return parseInt(u,n)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof d&&(g?u(function(){v.valueOf.call(r)}):a(r)!=m)?o(new p(b(t)),r,d):b(t)};for(var w,S=r(6)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;S.length>k;k++)i(p,w=S[k])&&!i(d,w)&&f(d,w,l(p,w));d.prototype=v,v.constructor=d,r(18)(n,m,d)}},function(e,t,r){var n=r(13),i=r(73).set;e.exports=function(e,t,r){var a,o=t.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(e,a),e}},function(e,t,r){"use strict";var n=r(8),i=r(38),a=r(90),o=r(91),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",h=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*c[r],c[r]=n%1e7,n=u(n/1e7)},m=function(e){for(var t=6,r=0;--t>=0;)r+=c[t],c[t]=u(r/e),r=r%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var r=String(c[e]);t=""===t?r:t+o.call(f,7-r.length)+r}return t},p=function(e,t,r){return 0===t?r:t%2===1?p(e,t-1,r*e):p(e*e,t/2,r)},v=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(7)(function(){s.call({})})),"Number",{toFixed:function(e){var t,r,n,s,u=a(this,l),c=i(e),g="",y=f;if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(t=v(u*p(2,69,1))-69,r=t<0?u*p(2,-t,1):u/p(2,t,1),r*=4503599627370496,t=52-t,t>0){for(h(0,r),n=c;n>=7;)h(1e7,0),n-=7;for(h(p(10,n,1),0),n=t-1;n>=23;)m(1<<23),n-=23;m(1<<n),h(1,1),m(2),y=d()}else h(0,r),h(1<<-t,0),y=d()+o.call(f,c);return c>0?(s=y.length,y=g+(s<=c?"0."+o.call(f,c-s)+y:y.slice(0,s-c)+"."+y.slice(s-c))):y=g+y,y}})},function(e,t,r){var n=r(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){"use strict";var n=r(38),i=r(35);e.exports=function(e){var t=String(i(this)),r="",a=n(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},function(e,t,r){"use strict";var n=r(8),i=r(7),a=r(90),o=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==o.call(1,void 0)})||!i(function(){o.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,r){var n=r(8);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(8),i=r(4).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(8);n(n.S,"Number",{isInteger:r(96)})},function(e,t,r){var n=r(13),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){var n=r(8);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(8),i=r(96),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},function(e,t,r){var n=r(8);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(8);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(8),i=r(86);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,r){var n=r(8),i=r(82);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,r){var n=r(8),i=r(104),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=r(8),a=Math.asinh;i(i.S+i.F*!(a&&1/a(0)>0),"Math",{asinh:n})},function(e,t,r){var n=r(8),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(8),i=r(108);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(8);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(8),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(8),i=r(112);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(8);n(n.S,"Math",{fround:r(114)})},function(e,t,r){var n=r(108),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126),c=function(e){return e+1/a-1/a};e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),l=n(e);return i<u?l*c(i/u/o)*u*o:(t=(1+o/a)*i,r=t-(t-i),r>s||r!=r?l*(1/0):l*r)}},function(e,t,r){var n=r(8),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,a=0,o=0,s=arguments.length,u=0;o<s;)r=i(arguments[o++]),u<r?(n=u/r,a=a*n*n+1,u=r):r>0?(n=r/u,a+=n*n):a+=r;return u===1/0?1/0:u*Math.sqrt(a)}})},function(e,t,r){var n=r(8),i=Math.imul;n(n.S+n.F*r(7)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var r=65535,n=+e,i=+t,a=r&n,o=r&i;return 0|a*o+((r&n>>>16)*o+a*(r&i>>>16)<<16>>>0)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(8);n(n.S,"Math",{log1p:r(104)})},function(e,t,r){var n=r(8);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(8);n(n.S,"Math",{sign:r(108)})},function(e,t,r){var n=r(8),i=r(112),a=Math.exp;n(n.S+n.F*r(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(8),i=r(112),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},function(e,t,r){var n=r(8);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(8),i=r(39),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(((t-=65536)>>10)+55296,t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(8),i=r(32),a=r(37);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=a(t.length),n=arguments.length,o=[],s=0;r>s;)o.push(String(t[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,r){"use strict";r(83)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){"use strict";var n=r(128)(!0);r(129)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(38),i=r(35);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):(a-55296<<10)+(o-56320)+65536)}}},function(e,t,r){"use strict";var n=r(28),i=r(8),a=r(18),o=r(10),s=r(5),u=r(130),c=r(131),l=r(24),f=r(59),h=r(25)("iterator"),m=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",v="values",g=function(){return this};e.exports=function(e,t,r,y,b,w,S){c(r,t,y);var k,P,A,C=function(e){if(!m&&e in I)return I[e];switch(e){case p:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},_=t+" Iterator",O=b==v,E=!1,I=e.prototype,B=I[h]||I[d]||b&&I[b],x=B||C(b),N=b?O?C("entries"):x:void 0,j="Array"==t?I.entries||B:B;if(j&&(A=f(j.call(new e)),A!==Object.prototype&&A.next&&(l(A,_,!0),n||s(A,h)||o(A,h,g))),O&&B&&B.name!==v&&(E=!0,x=function(){return B.call(this)}),n&&!S||!m&&!E&&I[h]||o(I,h,x),u[t]=x,u[_]=g,b)if(k={values:O?x:C(v),keys:w?x:C(p),entries:N},S)for(P in k)P in I||a(I,P,k[P]);else i(i.P+i.F*(m||E),t,k);return k}},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(46),i=r(17),a=r(24),o={};r(10)(o,r(25)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){"use strict";var n=r(8),i=r(128)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(8),i=r(37),a=r(134),o="endsWith",s=""[o];n(n.P+n.F*r(136)(o),"String",{endsWith:function(e){var t=a(this,e,o),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),u=void 0===r?n:Math.min(i(r),n),c=String(e);return s?s.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,r){var n=r(135),i=r(35);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n=r(13),i=r(34),a=r(25)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){"use strict";var n=r(8),i=r(134),a="includes";n(n.P+n.F*r(136)(a),"String",{includes:function(e){return!!~i(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(8);n(n.P,"String",{repeat:r(91)})},function(e,t,r){"use strict";var n=r(8),i=r(37),a=r(134),o="startsWith",s=""[o];n(n.P+n.F*r(136)(o),"String",{startsWith:function(e){var t=a(this,e,o),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(141)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,r){var n=r(8),i=r(7),a=r(35),o=/"/g,s=function(e,t,r,n){var i=String(a(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(o,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},function(e,t,r){"use strict";r(141)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,r){"use strict";r(141)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,r){"use strict";r(141)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,r){"use strict";r(141)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,r){"use strict";r(141)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,r){"use strict";r(141)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,r){"use strict";r(141)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,r){"use strict";r(141)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,r){"use strict";r(141)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,r){"use strict";r(141)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,r){"use strict";r(141)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,r){"use strict";r(141)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,r){var n=r(8);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(8),i=r(58),a=r(16);n(n.P+n.F*r(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),r=a(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(8),i=r(157);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,r){"use strict";var n=r(7),i=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!n(function(){
a.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(r>99?r:"0"+o(r))+"Z"}:a},function(e,t,r){var n=Date.prototype,i="Invalid Date",a="toString",o=n[a],s=n.getTime;new Date(NaN)+""!=i&&r(18)(n,a,function(){var e=s.call(this);return e===e?o.call(this):i})},function(e,t,r){var n=r(25)("toPrimitive"),i=Date.prototype;n in i||r(10)(i,n,r(160))},function(e,t,r){"use strict";var n=r(12),i=r(16),a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),e!=a)}},function(e,t,r){var n=r(8);n(n.S,"Array",{isArray:r(45)})},function(e,t,r){"use strict";var n=r(20),i=r(8),a=r(58),o=r(163),s=r(164),u=r(37),c=r(165),l=r(166);i(i.S+i.F*!r(167)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,h=a(e),m="function"==typeof this?this:Array,d=arguments.length,p=d>1?arguments[1]:void 0,v=void 0!==p,g=0,y=l(h);if(v&&(p=n(p,d>2?arguments[2]:void 0,2)),void 0==y||m==Array&&s(y))for(t=u(h.length),r=new m(t);t>g;g++)c(r,g,v?p(h[g],g):h[g]);else for(f=y.call(h),r=new m;!(i=f.next()).done;g++)c(r,g,v?o(f,p,[i.value,g],!0):i.value);return r.length=g,r}})},function(e,t,r){var n=r(12);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(130),i=r(25)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){"use strict";var n=r(11),i=r(17);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(75),i=r(25)("iterator"),a=r(130);e.exports=r(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(25)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(8),i=r(165);n(n.S+n.F*r(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(8),i=r(32),a=[].join;n(n.P+n.F*(r(33)!=Object||!r(170)(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){"use strict";var n=r(8),i=r(48),a=r(34),o=r(39),s=r(37),u=[].slice;n(n.P+n.F*r(7)(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var r=s(this.length),n=a(this);if(t=void 0===t?r:t,"Array"==n)return u.call(this,e,t);for(var i=o(e,r),c=o(t,r),l=s(c-i),f=Array(l),h=0;h<l;h++)f[h]="String"==n?this.charAt(i+h):this[i+h];return f}})},function(e,t,r){"use strict";var n=r(8),i=r(21),a=r(58),o=r(7),s=[].sort,u=[1,2,3];n(n.P+n.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!r(170)(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),i(e))}})},function(e,t,r){"use strict";var n=r(8),i=r(174)(0),a=r(170)([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(20),i=r(33),a=r(58),o=r(37),s=r(175);e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,m=t||s;return function(t,s,d){for(var p,v,g=a(t),y=i(g),b=n(s,d,3),w=o(y.length),S=0,k=r?m(t,w):u?m(t,0):void 0;w>S;S++)if((h||S in y)&&(p=y[S],v=b(p,S,g),e))if(r)k[S]=v;else if(v)switch(e){case 3:return!0;case 5:return p;case 6:return S;case 2:k.push(p)}else if(l)return!1;return f?-1:c||l?l:k}}},function(e,t,r){var n=r(176);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(13),i=r(45),a=r(25)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(8),i=r(174)(1);n(n.P+n.F*!r(170)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(174)(2);n(n.P+n.F*!r(170)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(174)(3);n(n.P+n.F*!r(170)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(174)(4);n(n.P+n.F*!r(170)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(182);n(n.P+n.F*!r(170)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){var n=r(21),i=r(58),a=r(33),o=r(37);e.exports=function(e,t,r,s,u){n(t);var c=i(e),l=a(c),f=o(c.length),h=u?f-1:0,m=u?-1:1;if(r<2)for(;;){if(h in l){s=l[h],h+=m;break}if(h+=m,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=m)h in l&&(s=t(s,l[h],h,c));return s}},function(e,t,r){"use strict";var n=r(8),i=r(182);n(n.P+n.F*!r(170)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(8),i=r(36)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!r(170)(a)),"Array",{indexOf:function(e){return o?a.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(32),a=r(38),o=r(37),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!r(170)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),r=o(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(8);n(n.P,"Array",{copyWithin:r(187)}),r(188)("copyWithin")},function(e,t,r){"use strict";var n=r(58),i=r(39),a=r(37);e.exports=[].copyWithin||function(e,t){var r=n(this),o=a(r.length),s=i(e,o),u=i(t,o),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?o:i(c,o))-u,o-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in r?r[s]=r[u]:delete r[s],s+=f,u+=f;return r}},function(e,t,r){var n=r(25)("unscopables"),i=Array.prototype;void 0==i[n]&&r(10)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t,r){var n=r(8);n(n.P,"Array",{fill:r(190)}),r(188)("fill")},function(e,t,r){"use strict";var n=r(58),i=r(39),a=r(37);e.exports=function(e){for(var t=n(this),r=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),u=o>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);c>s;)t[s++]=e;return t}},function(e,t,r){"use strict";var n=r(8),i=r(174)(5),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(188)(a)},function(e,t,r){"use strict";var n=r(8),i=r(174)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(188)(a)},function(e,t,r){r(194)("Array")},function(e,t,r){"use strict";var n=r(4),i=r(11),a=r(6),o=r(25)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(188),i=r(196),a=r(130),o=r(32);e.exports=r(129)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(4),i=r(88),a=r(11).f,o=r(50).f,s=r(135),u=r(198),c=n.RegExp,l=c,f=c.prototype,h=/a/g,m=/a/g,d=new c(h)!==h;if(r(6)&&(!d||r(7)(function(){return m[r(25)("match")]=!1,c(h)!=h||c(m)==m||"/a/i"!=c(h,"i")}))){c=function(e,t){var r=this instanceof c,n=s(e),a=void 0===t;return!r&&n&&e.constructor===c&&a?e:i(d?new l(n&&!a?e.source:e,t):l((n=e instanceof c)?e.source:e,n&&a?u.call(e):t),r?this:f,c)};for(var p=(function(e){e in c||a(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),v=o(l),g=0;v.length>g;)p(v[g++]);f.constructor=c,c.prototype=f,r(18)(n,"RegExp",c)}r(194)("RegExp")},function(e,t,r){"use strict";var n=r(12);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";r(200);var n=r(12),i=r(198),a=r(6),o="toString",s=/./[o],u=function(e){r(18)(RegExp.prototype,o,e,!0)};r(7)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?i.call(e):void 0)}):s.name!=o&&u(function(){return s.call(this)})},function(e,t,r){r(6)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(198)})},function(e,t,r){r(202)("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){"use strict";var n=r(10),i=r(18),a=r(7),o=r(35),s=r(25);e.exports=function(e,t,r){var u=s(e),c=r(o,u,""[e]),l=c[0],f=c[1];a(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,l),n(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,r){r(202)("replace",2,function(e,t,r){return[function(n,i){"use strict";var a=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(e,t,r){r(202)("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(202)("split",2,function(e,t,n){"use strict";var i=r(135),a=n,o=[].push,s="split",u="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var l=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(r,e,t);var n,s,f,h,m,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,p+"g");for(l||(n=new RegExp("^"+y.source+"$(?!\\s)",p));(s=y.exec(r))&&(f=s.index+s[0][u],!(f>v&&(d.push(r.slice(v,s.index)),!l&&s[u]>1&&s[0].replace(n,function(){for(m=1;m<arguments[u]-2;m++)void 0===arguments[m]&&(s[m]=void 0)}),s[u]>1&&s.index<r[u]&&o.apply(d,s.slice(1)),h=s[0][u],v=f,d[u]>=g)));)y[c]===s.index&&y[c]++;return v===r[u]?!h&&y.test("")||d.push(""):d.push(r.slice(v)),d[u]>g?d.slice(0,g):d}}else"0"[s](void 0,0)[u]&&(n=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(r,i){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(e,t,r){"use strict";var n,i,a,o,s=r(28),u=r(4),c=r(20),l=r(75),f=r(8),h=r(13),m=r(21),d=r(207),p=r(208),v=r(209),g=r(210).set,y=r(211)(),b=r(212),w=r(213),S=r(214),k="Promise",P=u.TypeError,A=u.process,C=u[k],_="process"==l(A),O=function(){},E=i=b.f,I=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[r(25)("species")]=function(e){e(O,O)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),B=s?function(e,t){return e===t||e===C&&t===o}:function(e,t){return e===t},x=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{o?(i||(2==e._h&&V(e),e._h=1),o===!0?r=n:(c&&c.enter(),r=o(n),c&&c.exit()),r===t.promise?u(P("Promise-chain cycle")):(a=x(r))?a.call(r,s,u):s(r)):u(n)}catch(e){u(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){g.call(u,function(){var t,r,n,i=e._v,a=R(e);if(a&&(t=w(function(){_?A.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=_||R(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},R=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!R(t.promise))return!1;return!0},V=function(e){g.call(u,function(){var t;_?A.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw P("Promise can't be resolved itself");(t=x(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,c(D,n,1),c(T,n,1))}catch(e){T.call(n,e)}}):(r._v=e,r._s=1,N(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};I||(C=function(e){d(this,C,k,"_h"),m(e),n.call(this);try{e(c(D,this,1),c(T,this,1))}catch(e){T.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(215)(C.prototype,{then:function(e,t){var r=E(v(this,C));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=_?A.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&N(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(D,e,1),this.reject=c(T,e,1)},b.f=E=function(e){return B(C,e)?new a(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:C}),r(24)(C,k),r(194)(k),o=r(9)[k],f(f.S+f.F*!I,k,{reject:function(e){var t=E(this),r=t.reject;return r(e),t.promise}}),f(f.S+f.F*(s||!I),k,{resolve:function(e){return e instanceof C&&B(e.constructor,this)?e:S(this,e)}}),f(f.S+f.F*!(I&&r(167)(function(e){C.all(e).catch(O)})),k,{all:function(e){var t=this,r=E(t),n=r.resolve,i=r.reject,a=w(function(){var r=[],a=0,o=1;p(e,!1,function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=E(t),n=r.reject,i=w(function(){p(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(20),i=r(163),a=r(164),o=r(12),s=r(37),u=r(166),c={},l={},t=e.exports=function(e,t,r,f,h){var m,d,p,v,g=h?function(){return e}:u(e),y=n(r,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(m=s(e.length);m>b;b++)if(v=t?y(o(d=e[b])[0],d[1]):y(e[b]),v===c||v===l)return v}else for(p=g.call(e);!(d=p.next()).done;)if(v=i(p,y,d.value,t),v===c||v===l)return v};t.BREAK=c,t.RETURN=l},function(e,t,r){var n=r(12),i=r(21),a=r(25)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){var n,i,a,o=r(20),s=r(78),u=r(48),c=r(15),l=r(4),f=l.process,h=l.setImmediate,m=l.clearImmediate,d=l.MessageChannel,p=l.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},w=function(e){b.call(e.data)};h&&m||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},m=function(e){delete g[e]},"process"==r(34)(f)?n=function(e){f.nextTick(o(b,e,1))}:p&&p.now?n=function(e){p.now(o(b,e,1))}:d?(i=new d,a=i.port2,i.port1.onmessage=w,n=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",w,!1)):n=y in c("script")?function(e){u.appendChild(c("script"))[y]=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(o(b,e,1),0)}),e.exports={set:h,clear:m}},function(e,t,r){var n=r(4),i=r(210).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(34)(o);e.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(c)};else if(a){var l=!0,f=document.createTextNode("");new a(c).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(c)}}else r=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(21);e.exports.f=function(e){return new n(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(212);e.exports=function(e,t){var r=n.f(e),i=r.resolve;return i(t),r.promise}},function(e,t,r){var n=r(18);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){"use strict";var n=r(217),i=r(218),a="Map";e.exports=r(219)(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,a),e);return t&&t.v},set:function(e,t){return n.def(i(this,a),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(11).f,i=r(46),a=r(215),o=r(20),s=r(207),u=r(208),c=r(129),l=r(196),f=r(194),h=r(6),m=r(22).fastKey,d=r(218),p=h?"_s":"size",v=function(e,t){var r,n=m(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=n&&u(n,r,e[c],e)});return a(l.prototype,{clear:function(){for(var e=d(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var r=d(this,t),n=v(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[p]--}return!!n},forEach:function(e){d(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(d(this,t),e)}}),h&&n(l.prototype,"size",{get:function(){return d(this,t)[p]}}),l},def:function(e,t,r){var n,i,a=v(e,t);return a?a.v=r:(e._l=a={i:i=m(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[p]++,"F"!==i&&(e._i[i]=a)),e},getEntry:v,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=d(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";var n=r(4),i=r(8),a=r(18),o=r(215),s=r(22),u=r(208),c=r(207),l=r(13),f=r(7),h=r(167),m=r(24),d=r(88);e.exports=function(e,t,r,p,v,g){var y=n[e],b=y,w=v?"set":"add",S=b&&b.prototype,k={},P=function(e){var t=S[e];a(S,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(g||S.forEach&&!f(function(){(new b).entries().next()}))){var A=new b,C=A[w](g?{}:-0,1)!=A,_=f(function(){A.has(1)}),O=h(function(e){new b(e)}),E=!g&&f(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});O||(b=t(function(t,r){c(t,b,e);var n=d(new y,t,b);return void 0!=r&&u(r,v,n[w],n),n}),b.prototype=S,S.constructor=b),(_||E)&&(P("delete"),P("has"),v&&P("get")),(E||C)&&P(w),g&&S.clear&&delete S.clear}else b=p.getConstructor(t,e,v,w),o(b.prototype,r),s.NEED=!0;return m(b,e),k[e]=b,i(i.G+i.W+i.F*(b!=y),k),g||p.setStrong(b,e,v),b}},function(e,t,r){"use strict";var n=r(217),i=r(218),a="Set";e.exports=r(219)(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,a),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,i=r(174)(0),a=r(18),o=r(22),s=r(69),u=r(222),c=r(13),l=r(7),f=r(218),h="WeakMap",m=o.getWeak,d=Object.isExtensible,p=u.ufstore,v={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=m(e);return t===!0?p(f(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(f(this,h),e,t)}},b=e.exports=r(219)(h,g,y,u,!0,!0);l(function(){return 7!=(new b).set((Object.freeze||Object)(v),7).get(v)})&&(n=u.getConstructor(g,h),s(n.prototype,y),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=b.prototype,r=t[e];a(t,e,function(t,i){if(c(t)&&!d(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){"use strict";var n=r(215),i=r(22).getWeak,a=r(12),o=r(13),s=r(207),u=r(208),c=r(174),l=r(5),f=r(218),h=c(5),m=c(6),d=0,p=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return h(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=m(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=d++,e._l=void 0,void 0!=n&&u(n,r,e[a],e)});return n(c.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return r===!0?p(f(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return r===!0?p(f(this,t)).has(e):r&&l(r,this._i)}}),c},def:function(e,t,r){var n=i(a(t),!0);return n===!0?p(e).set(t,r):n[e._i]=r,e},ufstore:p}},function(e,t,r){"use strict";var n=r(222),i=r(218),a="WeakSet";r(219)(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,a),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(8),i=r(225),a=r(226),o=r(12),s=r(39),u=r(37),c=r(13),l=r(4).ArrayBuffer,f=r(209),h=a.ArrayBuffer,m=a.DataView,d=i.ABV&&l.isView,p=h.prototype.slice,v=i.VIEW,g="ArrayBuffer";n(n.G+n.W+n.F*(l!==h),{ArrayBuffer:h}),n(n.S+n.F*!i.CONSTR,g,{isView:function(e){return d&&d(e)||c(e)&&v in e}}),n(n.P+n.U+n.F*r(7)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(o(this),e);for(var r=o(this).byteLength,n=s(e,r),i=s(void 0===t?r:t,r),a=new(f(this,h))(u(i-n)),c=new m(this),l=new m(a),d=0;n<i;)l.setUint8(d++,c.getUint8(n++));return a}}),r(194)(g)},function(e,t,r){for(var n,i=r(4),a=r(10),o=r(19),s=o("typed_array"),u=o("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h=9,m="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<h;)(n=i[m[f++]])?(a(n.prototype,s,!0),a(n.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,r){"use strict";function n(e,t,r){var n,i,a,o=Array(r),s=8*r-t-1,u=(1<<s)-1,c=u>>1,l=23===t?H(2,-24)-H(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for(e=M(e),e!=e||e===U?(i=e!=e?1:0,n=u):(n=L(q(e)/F),e*(a=H(2,-n))<1&&(n--,a*=2),e+=n+c>=1?l/a:l*H(2,1-c),e*a>=2&&(n++,a/=2),n+c>=u?(i=0,n=u):n+c>=1?(i=(e*a-1)*H(2,t),n+=c):(i=e*H(2,c-1)*H(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*h,o}function i(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:c?-U:U;n+=H(2,t),l-=o}return(c?-1:1)*n*H(2,l-t)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function o(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return n(e,52,8)}function l(e){return n(e,23,4)}function f(e,t,r){_(e[x],t,{get:function(){return this[r]}})}function h(e,t,r,n){var i=+r,a=A(i);if(a+t>e[$])throw D(j);var o=e[z]._b,s=a+e[Y],u=o.slice(s,s+t);return n?u:u.reverse()}function m(e,t,r,n,i,a){var o=+r,s=A(o);if(s+t>e[$])throw D(j);for(var u=e[z]._b,c=s+e[Y],l=n(+i),f=0;f<t;f++)u[c+f]=l[a?f:t-f-1]}var d=r(4),p=r(6),v=r(28),g=r(225),y=r(10),b=r(215),w=r(7),S=r(207),k=r(38),P=r(37),A=r(227),C=r(50).f,_=r(11).f,O=r(190),E=r(24),I="ArrayBuffer",B="DataView",x="prototype",N="Wrong length!",j="Wrong index!",R=d[I],V=d[B],T=d.Math,D=d.RangeError,U=d.Infinity,K=R,M=T.abs,H=T.pow,L=T.floor,q=T.log,F=T.LN2,J="buffer",W="byteLength",G="byteOffset",z=p?"_b":J,$=p?"_l":W,Y=p?"_o":G;if(g.ABV){if(!w(function(){R(1)})||!w(function(){new R(-1)})||w(function(){return new R,new R(1.5),new R(NaN),R.name!=I})){R=function(e){return S(this,R),new K(A(e))};for(var Z,X=R[x]=K[x],Q=C(K),ee=0;Q.length>ee;)(Z=Q[ee++])in R||y(R,Z,K[Z]);v||(X.constructor=R)}var te=new V(new R(2)),re=V[x].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||b(V[x],{setInt8:function(e,t){re.call(this,e,t<<24>>24)},setUint8:function(e,t){re.call(this,e,t<<24>>24)}},!0)}else R=function(e){S(this,R,I);var t=A(e);this._b=O.call(Array(t),0),this[$]=t},V=function(e,t,r){S(this,V,B),S(e,R,B);var n=e[$],i=k(t);if(i<0||i>n)throw D("Wrong offset!");if(r=void 0===r?n-i:P(r),i+r>n)throw D(N);this[z]=e,this[Y]=i,this[$]=r},p&&(f(R,W,"_l"),f(V,J,"_b"),f(V,W,"_l"),f(V,G,"_o")),b(V[x],{getInt8:function(e){return h(this,1,e)[0]<<24>>24},getUint8:function(e){return h(this,1,e)[0]},getInt16:function(e){var t=h(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=h(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(h(this,4,e,arguments[1]))},getUint32:function(e){return a(h(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(h(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(h(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){m(this,1,e,o,t)},setUint8:function(e,t){m(this,1,e,o,t)},setInt16:function(e,t){m(this,2,e,s,t,arguments[2])},setUint16:function(e,t){m(this,2,e,s,t,arguments[2])},setInt32:function(e,t){m(this,4,e,u,t,arguments[2])},setUint32:function(e,t){m(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){m(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){m(this,8,e,c,t,arguments[2])}});E(R,I),E(V,B),y(V[x],g.VIEW,!0),t[I]=R,t[B]=V},function(e,t,r){var n=r(38),i=r(37);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(8);n(n.G+n.W+n.F*!r(225).ABV,{DataView:r(226).DataView})},function(e,t,r){r(230)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){"use strict";if(r(6)){var n=r(28),i=r(4),a=r(7),o=r(8),s=r(225),u=r(226),c=r(20),l=r(207),f=r(17),h=r(10),m=r(215),d=r(38),p=r(37),v=r(227),g=r(39),y=r(16),b=r(5),w=r(75),S=r(13),k=r(58),P=r(164),A=r(46),C=r(59),_=r(50).f,O=r(166),E=r(19),I=r(25),B=r(174),x=r(36),N=r(209),j=r(195),R=r(130),V=r(167),T=r(194),D=r(190),U=r(187),K=r(11),M=r(51),H=K.f,L=M.f,q=i.RangeError,F=i.TypeError,J=i.Uint8Array,W="ArrayBuffer",G="Shared"+W,z="BYTES_PER_ELEMENT",$="prototype",Y=Array[$],Z=u.ArrayBuffer,X=u.DataView,Q=B(0),ee=B(2),te=B(3),re=B(4),ne=B(5),ie=B(6),ae=x(!0),oe=x(!1),se=j.values,ue=j.keys,ce=j.entries,le=Y.lastIndexOf,fe=Y.reduce,he=Y.reduceRight,me=Y.join,de=Y.sort,pe=Y.slice,ve=Y.toString,ge=Y.toLocaleString,ye=I("iterator"),be=I("toStringTag"),we=E("typed_constructor"),Se=E("def_constructor"),ke=s.CONSTR,Pe=s.TYPED,Ae=s.VIEW,Ce="Wrong length!",_e=B(1,function(e,t){return xe(N(e,e[Se]),t)}),Oe=a(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Ee=!!J&&!!J[$].set&&a(function(){new J(1).set({})}),Ie=function(e,t){var r=d(e);if(r<0||r%t)throw q("Wrong offset!");return r},Be=function(e){if(S(e)&&Pe in e)return e;throw F(e+" is not a typed array!")},xe=function(e,t){if(!(S(e)&&we in e))throw F("It is not a typed array constructor!");return new e(t)},Ne=function(e,t){return je(N(e,e[Se]),t)},je=function(e,t){for(var r=0,n=t.length,i=xe(e,n);n>r;)i[r]=t[r++];return i},Re=function(e,t,r){H(e,t,{get:function(){return this._d[r]}})},Ve=function(e){var t,r,n,i,a,o,s=k(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=O(s);if(void 0!=h&&!P(h)){for(o=h.call(s),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);s=n}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,r=p(s.length),i=xe(this,r);r>t;t++)i[t]=f?l(s[t],t):s[t];return i},Te=function(){for(var e=0,t=arguments.length,r=xe(this,t);t>e;)r[e]=arguments[e++];return r},De=!!J&&a(function(){ge.call(new J(1))}),Ue=function(){return ge.apply(De?pe.call(Be(this)):Be(this),arguments)},Ke={copyWithin:function(e,t){return U.call(Be(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(Be(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return D.apply(Be(this),arguments)},filter:function(e){return Ne(this,ee(Be(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ne(Be(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ie(Be(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Be(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return oe(Be(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(Be(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return me.apply(Be(this),arguments)},lastIndexOf:function(e){return le.apply(Be(this),arguments)},map:function(e){return _e(Be(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Be(this),arguments)},reduceRight:function(e){return he.apply(Be(this),arguments)},reverse:function(){for(var e,t=this,r=Be(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return te(Be(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(Be(this),e)},subarray:function(e,t){var r=Be(this),n=r.length,i=g(e,n);return new(N(r,r[Se]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,p((void 0===t?n:g(t,n))-i))}},Me=function(e,t){return Ne(this,pe.call(Be(this),e,t))},He=function(e){Be(this);var t=Ie(arguments[1],1),r=this.length,n=k(e),i=p(n.length),a=0;if(i+t>r)throw q(Ce);for(;a<i;)this[t+a]=n[a++]},Le={entries:function(){return ce.call(Be(this))},keys:function(){return ue.call(Be(this))},values:function(){return se.call(Be(this))}},qe=function(e,t){return S(e)&&e[Pe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return qe(e,t=y(t,!0))?f(2,e[t]):L(e,t)},Je=function(e,t,r){return!(qe(e,t=y(t,!0))&&S(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?H(e,t,r):(e[t]=r.value,e)};ke||(M.f=Fe,K.f=Je),o(o.S+o.F*!ke,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Je}),a(function(){ve.call({})})&&(ve=ge=function(){return me.call(this)});var We=m({},Ke);m(We,Le),h(We,ye,Le.values),m(We,{slice:Me,set:He,constructor:function(){},toString:ve,toLocaleString:Ue}),Re(We,"buffer","b"),Re(We,"byteOffset","o"),Re(We,"byteLength","l"),Re(We,"length","e"),H(We,be,{get:function(){return this[Pe]}}),e.exports=function(e,t,r,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",f="get"+e,m="set"+e,d=i[c],g=d||{},y=d&&C(d),b=!d||!s.ABV,k={},P=d&&d[$],O=function(e,r){
var n=e._d;return n.v[f](r*t+n.o,Oe)},E=function(e,r,n){var i=e._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[m](r*t+i.o,n,Oe)},I=function(e,t){H(e,t,{get:function(){return O(this,t)},set:function(e){return E(this,t,e)},enumerable:!0})};b?(d=r(function(e,r,n,i){l(e,d,c,"_d");var a,o,s,u,f=0,m=0;if(S(r)){if(!(r instanceof Z||(u=w(r))==W||u==G))return Pe in r?je(d,r):Ve.call(d,r);a=r,m=Ie(n,t);var g=r.byteLength;if(void 0===i){if(g%t)throw q(Ce);if(o=g-m,o<0)throw q(Ce)}else if(o=p(i)*t,o+m>g)throw q(Ce);s=o/t}else s=v(r),o=s*t,a=new Z(o);for(h(e,"_d",{b:a,o:m,l:o,e:s,v:new X(a)});f<s;)I(e,f++)}),P=d[$]=A(We),h(P,"constructor",d)):a(function(){d(1)})&&a(function(){new d(-1)})&&V(function(e){new d,new d(null),new d(1.5),new d(e)},!0)||(d=r(function(e,r,n,i){l(e,d,c);var a;return S(r)?r instanceof Z||(a=w(r))==W||a==G?void 0!==i?new g(r,Ie(n,t),i):void 0!==n?new g(r,Ie(n,t)):new g(r):Pe in r?je(d,r):Ve.call(d,r):new g(v(r))}),Q(y!==Function.prototype?_(g).concat(_(y)):_(g),function(e){e in d||h(d,e,g[e])}),d[$]=P,n||(P.constructor=d));var B=P[ye],x=!!B&&("values"==B.name||void 0==B.name),N=Le.values;h(d,we,!0),h(P,Pe,c),h(P,Ae,!0),h(P,Se,d),(u?new d(1)[be]==c:be in P)||H(P,be,{get:function(){return c}}),k[c]=d,o(o.G+o.W+o.F*(d!=g),k),o(o.S,c,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*a(function(){g.of.call(d,1)}),c,{from:Ve,of:Te}),z in P||h(P,z,t),o(o.P,c,Ke),T(c),o(o.P+o.F*Ee,c,{set:He}),o(o.P+o.F*!x,c,Le),n||P.toString==ve||(P.toString=ve),o(o.P+o.F*a(function(){new d(1).slice()}),c,{slice:Me}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!a(function(){P.toLocaleString.call([1,2])})),c,{toLocaleString:Ue}),R[c]=x?B:N,n||x||h(P,ye,N)}}else e.exports=function(){}},function(e,t,r){r(230)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){r(230)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){var n=r(8),i=r(21),a=r(12),o=(r(4).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(7)(function(){o(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),u=a(r);return o?o(n,t,u):s.call(n,t,u)}})},function(e,t,r){var n=r(8),i=r(46),a=r(21),o=r(12),s=r(13),u=r(7),c=r(77),l=(r(4).Reflect||{}).construct,f=u(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),h=!u(function(){l(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(e,t){a(e),o(t);var r=arguments.length<3?e:a(arguments[2]);if(h&&!f)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var u=r.prototype,m=i(s(u)?u:Object.prototype),d=Function.apply.call(e,m,t);return s(d)?d:m}})},function(e,t,r){var n=r(11),i=r(8),a=r(12),o=r(16);i(i.S+i.F*r(7)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){a(e),t=o(t,!0),a(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(8),i=r(51).f,a=r(12);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(8),i=r(12),a=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(131)(a,"Object",function(){var e,t=this,r=t._k;do if(t._i>=r.length)return{value:void 0,done:!0};while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,r){function n(e,t){var r,s,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(r=i.f(e,t))?o(r,"value")?r.value:void 0!==r.get?r.get.call(l):void 0:u(s=a(e))?n(s,t,l):void 0}var i=r(51),a=r(59),o=r(5),s=r(8),u=r(13),c=r(12);s(s.S,"Reflect",{get:n})},function(e,t,r){var n=r(51),i=r(8),a=r(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},function(e,t,r){var n=r(8),i=r(59),a=r(12);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},function(e,t,r){var n=r(8);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(8),i=r(12),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,r){var n=r(8);n(n.S,"Reflect",{ownKeys:r(250)})},function(e,t,r){var n=r(50),i=r(43),a=r(12),o=r(4).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(8),i=r(12),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,r){function n(e,t,r){var u,h,m=arguments.length<4?e:arguments[3],d=a.f(l(e),t);if(!d){if(f(h=o(e)))return n(h,t,r,m);d=c(0)}return s(d,"value")?!(d.writable===!1||!f(m))&&(u=a.f(m,t)||c(0),u.value=r,i.f(m,t,u),!0):void 0!==d.set&&(d.set.call(m,r),!0)}var i=r(11),a=r(51),o=r(59),s=r(5),u=r(8),c=r(17),l=r(12),f=r(13);u(u.S,"Reflect",{set:n})},function(e,t,r){var n=r(8),i=r(73);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){"use strict";var n=r(8),i=r(36)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(188)("includes")},function(e,t,r){"use strict";var n=r(8),i=r(256),a=r(58),o=r(37),s=r(21),u=r(175);n(n.P,"Array",{flatMap:function(e){var t,r,n=a(this);return s(e),t=o(n.length),r=u(n,0),i(r,n,n,t,0,1,e,arguments[1]),r}}),r(188)("flatMap")},function(e,t,r){"use strict";function n(e,t,r,c,l,f,h,m){for(var d,p,v=l,g=0,y=!!h&&s(h,m,3);g<c;){if(g in r){if(d=y?y(r[g],g,t):r[g],p=!1,a(d)&&(p=d[u],p=void 0!==p?!!p:i(d)),p&&f>0)v=n(e,t,d,o(d.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=d}v++}g++}return v}var i=r(45),a=r(13),o=r(37),s=r(20),u=r(25)("isConcatSpreadable");e.exports=n},function(e,t,r){"use strict";var n=r(8),i=r(256),a=r(58),o=r(37),s=r(38),u=r(175);n(n.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),r=o(t.length),n=u(t,0);return i(n,t,t,r,0,void 0===e?1:s(e)),n}}),r(188)("flatten")},function(e,t,r){"use strict";var n=r(8),i=r(128)(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(8),i=r(260);n(n.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){var n=r(37),i=r(91),a=r(35);e.exports=function(e,t,r,o){var s=String(a(e)),u=s.length,c=void 0===r?" ":String(r),l=n(t);if(l<=u||""==c)return s;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),o?h+s:s+h}},function(e,t,r){"use strict";var n=r(8),i=r(260);n(n.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(83)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,r){"use strict";r(83)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,r){"use strict";var n=r(8),i=r(35),a=r(37),o=r(135),s=r(198),u=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};r(131)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in u?String(e.flags):s.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=a(e.lastIndex),new c(n,t)}})},function(e,t,r){r(27)("asyncIterator")},function(e,t,r){r(27)("observable")},function(e,t,r){var n=r(8),i=r(250),a=r(32),o=r(51),s=r(165);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),u=o.f,c=i(n),l={},f=0;c.length>f;)r=u(n,t=c[f++]),void 0!==r&&s(l,t,r);return l}})},function(e,t,r){var n=r(8),i=r(269)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){var n=r(30),i=r(32),a=r(44).f;e.exports=function(e){return function(t){for(var r,o=i(t),s=n(o),u=s.length,c=0,l=[];u>c;)a.call(o,r=s[c++])&&l.push(e?[r,o[r]]:o[r]);return l}}},function(e,t,r){var n=r(8),i=r(269)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(8),i=r(58),a=r(21),o=r(11);r(6)&&n(n.P+r(272),"Object",{__defineGetter__:function(e,t){o.f(i(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";e.exports=r(28)||!r(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(4)[e]})},function(e,t,r){"use strict";var n=r(8),i=r(58),a=r(21),o=r(11);r(6)&&n(n.P+r(272),"Object",{__defineSetter__:function(e,t){o.f(i(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(8),i=r(58),a=r(16),o=r(59),s=r(51).f;r(6)&&n(n.P+r(272),"Object",{__lookupGetter__:function(e){var t,r=i(this),n=a(e,!0);do if(t=s(r,n))return t.get;while(r=o(r))}})},function(e,t,r){"use strict";var n=r(8),i=r(58),a=r(16),o=r(59),s=r(51).f;r(6)&&n(n.P+r(272),"Object",{__lookupSetter__:function(e){var t,r=i(this),n=a(e,!0);do if(t=s(r,n))return t.set;while(r=o(r))}})},function(e,t,r){var n=r(8);n(n.P+n.R,"Map",{toJSON:r(277)("Map")})},function(e,t,r){var n=r(75),i=r(278);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){var n=r(208);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(8);n(n.P+n.R,"Set",{toJSON:r(277)("Set")})},function(e,t,r){r(281)("Map")},function(e,t,r){"use strict";var n=r(8);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(281)("Set")},function(e,t,r){r(281)("WeakMap")},function(e,t,r){r(281)("WeakSet")},function(e,t,r){r(286)("Map")},function(e,t,r){"use strict";var n=r(8),i=r(21),a=r(20),o=r(208);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(r=[],t?(n=0,s=a(u,arguments[2],2),o(e,!1,function(e){r.push(s(e,n++))})):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){r(286)("Set")},function(e,t,r){r(286)("WeakMap")},function(e,t,r){r(286)("WeakSet")},function(e,t,r){var n=r(8);n(n.G,{global:r(4)})},function(e,t,r){var n=r(8);n(n.S,"System",{global:r(4)})},function(e,t,r){var n=r(8),i=r(34);n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},function(e,t,r){var n=r(8);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,r){var n=r(8),i=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*i}})},function(e,t,r){var n=r(8),i=r(297),a=r(114);n(n.S,"Math",{fscale:function(e,t,r,n,o){return a(i(e,t,r,n,o))}})},function(e,t){e.exports=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-(1/0)?e:(e-t)*(i-n)/(r-t)+n}},function(e,t,r){var n=r(8);n(n.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,a=t>>>0,o=r>>>0;return a+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,r){var n=r(8);n(n.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,a=t>>>0,o=r>>>0;return a-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,r){var n=r(8);n(n.S,"Math",{imulh:function(e,t){var r=65535,n=+e,i=+t,a=n&r,o=i&r,s=n>>16,u=i>>16,c=(s*o>>>0)+(a*o>>>16);return s*u+(c>>16)+((a*u>>>0)+(c&r)>>16)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,r){var n=r(8),i=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*i}})},function(e,t,r){var n=r(8);n(n.S,"Math",{scale:r(297)})},function(e,t,r){var n=r(8);n(n.S,"Math",{umulh:function(e,t){var r=65535,n=+e,i=+t,a=n&r,o=i&r,s=n>>>16,u=i>>>16,c=(s*o>>>0)+(a*o>>>16);return s*u+(c>>>16)+((a*u>>>0)+(c&r)>>>16)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,r){"use strict";var n=r(8),i=r(9),a=r(4),o=r(209),s=r(214);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(8),i=r(212),a=r(213);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){var n=r(309),i=r(12),a=n.key,o=n.set;n.exp({defineMetadata:function(e,t,r,n){o(e,t,i(r),a(n))}})},function(e,t,r){var n=r(216),i=r(8),a=r(23)("metadata"),o=a.store||(a.store=new(r(221))),s=function(e,t,r){var i=o.get(e);if(!i){if(!r)return;o.set(e,i=new n)}var a=i.get(t);if(!a){if(!r)return;i.set(t,a=new n)}return a},u=function(e,t,r){var n=s(t,r,!1);return void 0!==n&&n.has(e)},c=function(e,t,r){var n=s(t,r,!1);return void 0===n?void 0:n.get(e)},l=function(e,t,r,n){s(r,n,!0).set(e,t)},f=function(e,t){var r=s(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},m=function(e){i(i.S,"Reflect",e)};e.exports={store:o,map:s,has:u,get:c,set:l,keys:f,key:h,exp:m}},function(e,t,r){var n=r(309),i=r(12),a=n.key,o=n.map,s=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:a(arguments[2]),n=o(i(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var u=s.get(t);return u.delete(r),!!u.size||s.delete(t)}})},function(e,t,r){var n=r(309),i=r(12),a=r(59),o=n.has,s=n.get,u=n.key,c=function(e,t,r){var n=o(e,t,r);if(n)return s(e,t,r);var i=a(t);return null!==i?c(e,i,r):void 0};n.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,r){var n=r(220),i=r(278),a=r(309),o=r(12),s=r(59),u=a.keys,c=a.key,l=function(e,t){var r=u(e,t),a=s(e);if(null===a)return r;var o=l(a,t);return o.length?r.length?i(new n(r.concat(o))):o:r};a.exp({getMetadataKeys:function(e){return l(o(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,r){var n=r(309),i=r(12),a=n.get,o=n.key;n.exp({getOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(309),i=r(12),a=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(e){return a(i(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,r){var n=r(309),i=r(12),a=r(59),o=n.has,s=n.key,u=function(e,t,r){var n=o(e,t,r);if(n)return!0;var i=a(t);return null!==i&&u(e,i,r)};n.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,r){var n=r(309),i=r(12),a=n.has,o=n.key;n.exp({hasOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(309),i=r(12),a=r(21),o=n.key,s=n.set;n.exp({metadata:function(e,t){return function(r,n){s(e,t,(void 0!==n?i:a)(r),o(n))}}})},function(e,t,r){var n=r(8),i=r(211)(),a=r(4).process,o="process"==r(34)(a);n(n.G,{asap:function(e){var t=o&&a.domain;i(t?t.bind(e):e)}})},function(e,t,r){"use strict";var n=r(8),i=r(4),a=r(9),o=r(211)(),s=r(25)("observable"),u=r(21),c=r(12),l=r(207),f=r(215),h=r(10),m=r(208),d=m.RETURN,p=function(e){return null==e?void 0:u(e)},v=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,v(e))},b=function(e,t){c(e),this._c=void 0,this._o=e,e=new w(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(t){return void e.error(t)}g(this)&&v(this)};b.prototype=f({},{unsubscribe:function(){y(this)}});var w=function(e){this._s=e};w.prototype=f({},{next:function(e){var t=this._s;if(!g(t)){var r=t._o;try{var n=p(r.next);if(n)return n.call(r,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var r=t._o;t._o=void 0;try{var n=p(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!g(t)){var r=t._o;t._o=void 0;try{var n=p(r.complete);e=n?n.call(r,e):void 0}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var S=function(e){l(this,S,"Observable","_f")._f=u(e)};f(S.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||i.Promise)(function(r,n){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),f(S,{from:function(e){var t="function"==typeof this?this:S,r=p(c(e)[s]);if(r){var n=c(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return o(function(){if(!r){try{if(m(e,!1,function(e){if(t.next(e),r)return d})===d)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:S)(function(e){var t=!1;return o(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),h(S.prototype,s,function(){return this}),n(n.G,{Observable:S}),r(194)("Observable")},function(e,t,r){var n=r(4),i=r(8),a=r(78),o=r(321),s=n.navigator,u=!!s&&/MSIE .\./.test(s.userAgent),c=function(e){return u?function(t,r){return e(a(o,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),r)}:e};i(i.G+i.B+i.F*u,{setTimeout:c(n.setTimeout),setInterval:c(n.setInterval)})},function(e,t,r){"use strict";var n=r(322),i=r(78),a=r(21);e.exports=function(){for(var e=a(this),t=arguments.length,r=Array(t),o=0,s=n._,u=!1;t>o;)(r[o]=arguments[o++])===s&&(u=!0);return function(){var n,a=this,o=arguments.length,c=0,l=0;if(!u&&!o)return i(e,r,a);if(n=r.slice(),u)for(;t>c;c++)n[c]===s&&(n[c]=arguments[l++]);for(;o>l;)n.push(arguments[l++]);return i(e,n,a)}}},function(e,t,r){e.exports=r(4)},function(e,t,r){var n=r(8),i=r(210);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){for(var n=r(195),i=r(30),a=r(18),o=r(4),s=r(10),u=r(130),c=r(25),l=c("iterator"),f=c("toStringTag"),h=u.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(m),p=0;p<d.length;p++){var v,g=d[p],y=m[g],b=o[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,h),w[f]||s(w,f,g),u[g]=h,y))for(v in n)w[v]||a(w,v,n[v],!0)}},function(e,t){(function(t){!function(t){"use strict";function r(e,t,r,n){var a=t&&t.prototype instanceof i?t:i,o=Object.create(a.prototype),s=new m(n||[]);return o._invoke=c(e,r,s),o}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function o(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function r(t,i,a,o){var s=n(e[t],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(c).then(function(e){u.value=e,a(u)},o)}o(s.arg)}function i(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return a=a?a.then(n,n):n()}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var a;this._invoke=i}function c(e,t,r){var i=C;return function(a,o){if(i===O)throw new Error("Generator is already running");if(i===E){if("throw"===a)throw o;return p()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=l(s,r);if(u){if(u===I)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===C)throw i=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=O;var c=n(e,t,r);if("normal"===c.type){if(i=r.done?E:_,c.arg===I)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=E,r.method="throw",r.arg=c.arg)}}}function l(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,l(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,I;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,I):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function d(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=v,t.done=!0,t};return n.next=n}}return{next:p}}function p(){return{value:v,done:!0}}var v,g=Object.prototype,y=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",S=b.asyncIterator||"@@asyncIterator",k=b.toStringTag||"@@toStringTag",P="object"==typeof e,A=t.regeneratorRuntime;if(A)return void(P&&(e.exports=A));A=t.regeneratorRuntime=P?e.exports:{},A.wrap=r;var C="suspendedStart",_="suspendedYield",O="executing",E="completed",I={},B={};B[w]=function(){return this};var x=Object.getPrototypeOf,N=x&&x(x(d([])));N&&N!==g&&y.call(N,w)&&(B=N);var j=o.prototype=i.prototype=Object.create(B);a.prototype=j.constructor=o,o.constructor=a,o[k]=a.displayName="GeneratorFunction",A.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},A.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,k in e||(e[k]="GeneratorFunction")),e.prototype=Object.create(j),e},A.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[S]=function(){return this},A.AsyncIterator=u,A.async=function(e,t,n,i){var a=new u(r(e,t,n,i));return A.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(j),j[k]="Generator",j[w]=function(){return this},j.toString=function(){return"[object Generator]"},A.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},A.values=d,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=v),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=v),I}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},function(e,t,r){r(327),e.exports=r(9).RegExp.escape},function(e,t,r){var n=r(8),i=r(328)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330);t.GCLConfig=n.GCLConfig;var i=r(332),a=r(340),o=r(374),s=r(375),u=r(335),c=r(376),l=r(509),f=r(339),h=r(367),m=r(511),d=r(512),p=r(516),v=function(){function e(t,r){var n=this;this.admin=function(){return n.adminService},this.core=function(){return n.coreService},this.config=function(){return n.cfg},this.agent=function(){return n.agentClient},this.ds=function(){return n.dsClient},this.ocv=function(){return n.ocvClient},this.pf=function(){return n.pluginFactory},this.beid=function(e){return n.pluginFactory.createEidBE(e)},this.dnie=function(e){return n.pluginFactory.createDNIe(e)},this.luxeid=function(e,t){return n.pluginFactory.createEidLUX(e,t)},this.luxtrust=function(e,t){return n.pluginFactory.createLuxTrust(e)},this.emv=function(e){return n.pluginFactory.createEmv(e)},this.mobib=function(e){return n.pluginFactory.createMobib(e)},this.ocra=function(e){return n.pluginFactory.createOcra(e)},this.aventra=function(e){return n.pluginFactory.createAventraNO(e)},this.oberthur=function(e){return n.pluginFactory.createOberthurNO(e)},this.piv=function(e){return n.pluginFactory.createPIV(e)},this.pteid=function(e){return n.pluginFactory.createEidPT(e)},this.pkcs11=function(){return n.pluginFactory.createPKCS11()},this.readerapi=function(e){return n.pluginFactory.createRemoteLoading(e)},this.belfius=function(e){return n.pluginFactory.createBelfius(e)},this.cfg=e.resolveConfig(t),this.connection=new a.LocalConnection(this.cfg),this.authConnection=new a.LocalAuthConnection(this.cfg),this.remoteConnection=new a.RemoteConnection(this.cfg),this.localTestConnection=new a.LocalTestConnection(this.cfg),this.pluginFactory=new c.PluginFactory(this.cfg.gclUrl,this.connection),this.adminService=new m.AdminService(this.cfg.gclUrl,this.authConnection),this.coreService=new i.CoreService(this.cfg.gclUrl,this.authConnection),this.agentClient=new h.AgentClient(this.cfg.gclUrl,this.connection),this.cfg.localTestMode?this.dsClient=new o.DSClient(this.cfg.dsUrl,this.localTestConnection,this.cfg):this.dsClient=new o.DSClient(this.cfg.dsUrl,this.remoteConnection,this.cfg),this.ocvClient=new s.OCVClient(this.cfg.ocvUrl,this.remoteConnection),p.ClientService.setClient(this),this.cfg.implicitDownload&&this.implicitDownload(),r||e.initLibrary()}return e.initialize=function(t,r){return new u.Promise(function(n,i){var a=new e(t,!0);p.ClientService.setClient(a),a.GCLInstalled=!0,e.initLibrary().then(function(){r&&"function"==typeof r&&r(null,a),n(a)},function(e){r&&"function"==typeof r&&r(e,null),i(e)})})},e.initLibrary=function(){return d.InitUtil.initializeLibrary(p.ClientService.getClient())},e.resolveConfig=function(e){var t=new n.GCLConfig(e.dsUrlBase,e.apiKey,e.pkcs11Config);return t.allowAutoUpdate=e.allowAutoUpdate,t.client_id=e.client_id,t.client_secret=e.client_secret,t.jwt=e.jwt,t.gclUrl=e.gclUrl,t.ocvUrl=e.ocvUrl,t.implicitDownload=e.implicitDownload,t.localTestMode=e.localTestMode,t.forceHardwarePinpad=e.forceHardwarePinpad,t.defaultSessionTimeout=e.defaultSessionTimeout,t.defaultConsentDuration=e.defaultConsentDuration,t.defaultConsentTimeout=e.defaultConsentTimeout,t.citrix=e.citrix,t.agentPort=e.agentPort,t.syncManaged=e.syncManaged,t},e.prototype.containerFor=function(e,t){return l.GenericService.containerForReader(this,e,t)},e.prototype.download=function(e){var t=this;return this.core().infoBrowser().then(function(r){return t.ds().downloadLink(r.data,e)},function(t){return f.ResponseHandler.error(t,e)})},e.prototype.dumpData=function(e,t,r){return l.GenericService.dumpData(this,e,t,r)},e.prototype.readersCanAuthenticate=function(e){return l.GenericService.authenticateCapable(this,e)},e.prototype.authenticate=function(e,t,r){return l.GenericService.authenticate(this,e,t,r)},e.prototype.readersCanSign=function(e){return l.GenericService.signCapable(this,e)},e.prototype.sign=function(e,t,r){return l.GenericService.sign(this,e,t,r)},e.prototype.readersCanVerifyPin=function(e){return l.GenericService.verifyPinCapable(this,e)},e.prototype.verifyPin=function(e,t,r){return l.GenericService.verifyPin(this,e,t,r)},e.prototype.updateAuthConnection=function(e){this.authConnection=new a.LocalAuthConnection(e),this.coreService=new i.CoreService(e.gclUrl,this.authConnection)},e.prototype.implicitDownload=function(){var e=this;this.core().info(function(t){if(t){var r=e.core().infoBrowserSync();e.ds().downloadLink(r.data,function(e,t){window.open(t.url)})}})},e}();t.GCLClient=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i="https://localhost:10443/v1",a="/trust1team/gclds/v1",o="/trust1team/ocv-api/v1",s="/gcl-ds-web/v1",u="/trust1team/gclds-file/v1",c=!0,l=!1,f=!1,h=function(){function e(e,t,r){this._gclUrl=i,this._dsUrl=e+a,this._ocvUrl=e+o,this._dsFileDownloadUrl=e+u,this._dsUrlBase=e,this._apiKey=t,this._jwt="none",this._citrix=!1,this._agentPort=-1,this._allowAutoUpdate=c,this._implicitDownload=l,this._localTestMode=f,this._forceHardwarePinpad=!1,this._defaultSessionTimeout=5,this._defaultConsentDuration=1,this._defaultConsentTimeout=10,this._syncManaged=!0,this._pkcs11Config=r}return Object.defineProperty(e.prototype,"ocvUrl",{get:function(){return this._ocvUrl},set:function(e){this._ocvUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gclUrl",{get:function(){return this._gclUrl},set:function(e){this._gclUrl=e||i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsUrl",{get:function(){return this._dsUrl},set:function(e){n.endsWith(e,a)?(this._dsUrlBase=n.replace(e,a,""),this._dsUrl=e,this._dsFileDownloadUrl=this._dsUrlBase+u,this._ocvUrl=this._dsUrlBase+o):(this._dsUrl=e+a,this._dsFileDownloadUrl=e+u,this._dsUrlBase=e,this._ocvUrl=e+o)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){return this._apiKey},set:function(e){this._apiKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowAutoUpdate",{get:function(){return this._allowAutoUpdate;
},set:function(e){this._allowAutoUpdate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_id",{get:function(){return this._client_id},set:function(e){this._client_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_secret",{get:function(){return this._client_secret},set:function(e){this._client_secret=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jwt",{get:function(){return this._jwt},set:function(e){this._jwt=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citrix",{get:function(){return this._citrix},set:function(e){this._citrix=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"agentPort",{get:function(){return this._agentPort},set:function(e){this._agentPort=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implicitDownload",{get:function(){return this._implicitDownload},set:function(e){this._implicitDownload=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsFileDownloadUrl",{get:function(){return this._dsFileDownloadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsUrlBase",{get:function(){return this._dsUrlBase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localTestMode",{get:function(){return this._localTestMode},set:function(e){this._localTestMode=e,this._localTestMode&&(this._dsUrl=this._dsUrlBase+s)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceHardwarePinpad",{get:function(){return this._forceHardwarePinpad},set:function(e){this._forceHardwarePinpad=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultSessionTimeout",{get:function(){return this._defaultSessionTimeout},set:function(e){this._defaultSessionTimeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenCompatible",{get:function(){return this._tokenCompatible},set:function(e){this._tokenCompatible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"v2Compatible",{get:function(){return this._v2Compatible},set:function(e){this._v2Compatible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultConsentDuration",{get:function(){return this._defaultConsentDuration},set:function(e){this._defaultConsentDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultConsentTimeout",{get:function(){return this._defaultConsentTimeout},set:function(e){this._defaultConsentTimeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"syncManaged",{get:function(){return this._syncManaged},set:function(e){this._syncManaged=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pkcs11Config",{get:function(){return this._pkcs11Config},set:function(e){this._pkcs11Config=e},enumerable:!0,configurable:!0}),e}();t.GCLConfig=h},function(e,t){(function(){function r(e,t){return e.set(t[0],t[1]),e}function n(e,t){return e.add(t),e}function i(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function a(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}function o(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function s(e,t){for(var r=null==e?0:e.length;r--&&t(e[r],r,e)!==!1;);return e}function u(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function c(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function l(e,t){var r=null==e?0:e.length;return!!r&&S(e,t,0)>-1}function f(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function h(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function m(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function d(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function p(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function v(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function g(e){return e.split("")}function y(e){return e.match(Mt)||[]}function b(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function w(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function S(e,t,r){return t===t?z(e,t,r):w(e,P,r)}function k(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function P(e){return e!==e}function A(e,t){var r=null==e?0:e.length;return r?I(e,t)/r:Re}function C(e){return function(t){return null==t?te:t[e]}}function _(e){return function(t){return null==e?te:e[t]}}function O(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r}function E(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function I(e,t){for(var r,n=-1,i=e.length;++n<i;){var a=t(e[n]);a!==te&&(r=r===te?a:r+a)}return r}function B(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function x(e,t){return h(t,function(t){return[t,e[t]]})}function N(e){return function(t){return e(t)}}function j(e,t){return h(t,function(t){return e[t]})}function R(e,t){return e.has(t)}function V(e,t){for(var r=-1,n=e.length;++r<n&&S(t,e[r],0)>-1;);return r}function T(e,t){for(var r=e.length;r--&&S(t,e[r],0)>-1;);return r}function D(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}function U(e){return"\\"+Xr[e]}function K(e,t){return null==e?te:e[t]}function M(e){return qr.test(e)}function H(e){return Fr.test(e)}function L(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function q(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function F(e,t){return function(r){return e(t(r))}}function J(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==ue||(e[r]=ue,a[i++]=r)}return a}function W(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function G(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function z(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function $(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}function Y(e){return M(e)?X(e):vn(e)}function Z(e){return M(e)?Q(e):g(e)}function X(e){for(var t=Hr.lastIndex=0;Hr.test(e);)++t;return t}function Q(e){return e.match(Hr)||[]}function ee(e){return e.match(Lr)||[]}var te,re="4.17.4",ne=200,ie="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",oe="__lodash_hash_undefined__",se=500,ue="__lodash_placeholder__",ce=1,le=2,fe=4,he=1,me=2,de=1,pe=2,ve=4,ge=8,ye=16,be=32,we=64,Se=128,ke=256,Pe=512,Ae=30,Ce="...",_e=800,Oe=16,Ee=1,Ie=2,Be=3,xe=1/0,Ne=9007199254740991,je=1.7976931348623157e308,Re=NaN,Ve=4294967295,Te=Ve-1,De=Ve>>>1,Ue=[["ary",Se],["bind",de],["bindKey",pe],["curry",ge],["curryRight",ye],["flip",Pe],["partial",be],["partialRight",we],["rearg",ke]],Ke="[object Arguments]",Me="[object Array]",He="[object AsyncFunction]",Le="[object Boolean]",qe="[object Date]",Fe="[object DOMException]",Je="[object Error]",We="[object Function]",Ge="[object GeneratorFunction]",ze="[object Map]",$e="[object Number]",Ye="[object Null]",Ze="[object Object]",Xe="[object Promise]",Qe="[object Proxy]",et="[object RegExp]",tt="[object Set]",rt="[object String]",nt="[object Symbol]",it="[object Undefined]",at="[object WeakMap]",ot="[object WeakSet]",st="[object ArrayBuffer]",ut="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",ht="[object Int16Array]",mt="[object Int32Array]",dt="[object Uint8Array]",pt="[object Uint8ClampedArray]",vt="[object Uint16Array]",gt="[object Uint32Array]",yt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,St=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,Pt=RegExp(St.source),At=RegExp(kt.source),Ct=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g,Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/,Bt=/^\./,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Nt.source),Rt=/^\s+|\s+$/g,Vt=/^\s+/,Tt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Kt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ht=/\\(\\)?/g,Lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qt=/\w*$/,Ft=/^[-+]0x[0-9a-f]+$/i,Jt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,zt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",Qt="\\u0300-\\u036f",er="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",rr=Qt+er+tr,nr="\\u2700-\\u27bf",ir="a-z\\xdf-\\xf6\\xf8-\\xff",ar="\\xac\\xb1\\xd7\\xf7",or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sr="\\u2000-\\u206f",ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",lr="\\ufe0e\\ufe0f",fr=ar+or+sr+ur,hr="['’]",mr="["+Xt+"]",dr="["+fr+"]",pr="["+rr+"]",vr="\\d+",gr="["+nr+"]",yr="["+ir+"]",br="[^"+Xt+fr+vr+nr+ir+cr+"]",wr="\\ud83c[\\udffb-\\udfff]",Sr="(?:"+pr+"|"+wr+")",kr="[^"+Xt+"]",Pr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ar="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="["+cr+"]",_r="\\u200d",Or="(?:"+yr+"|"+br+")",Er="(?:"+Cr+"|"+br+")",Ir="(?:"+hr+"(?:d|ll|m|re|s|t|ve))?",Br="(?:"+hr+"(?:D|LL|M|RE|S|T|VE))?",xr=Sr+"?",Nr="["+lr+"]?",jr="(?:"+_r+"(?:"+[kr,Pr,Ar].join("|")+")"+Nr+xr+")*",Rr="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Vr="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Tr=Nr+xr+jr,Dr="(?:"+[gr,Pr,Ar].join("|")+")"+Tr,Ur="(?:"+[kr+pr+"?",pr,Pr,Ar,mr].join("|")+")",Kr=RegExp(hr,"g"),Mr=RegExp(pr,"g"),Hr=RegExp(wr+"(?="+wr+")|"+Ur+Tr,"g"),Lr=RegExp([Cr+"?"+yr+"+"+Ir+"(?="+[dr,Cr,"$"].join("|")+")",Er+"+"+Br+"(?="+[dr,Cr+Or,"$"].join("|")+")",Cr+"?"+Or+"+"+Ir,Cr+"+"+Br,Vr,Rr,vr,Dr].join("|"),"g"),qr=RegExp("["+_r+Xt+rr+lr+"]"),Fr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wr=-1,Gr={};Gr[ct]=Gr[lt]=Gr[ft]=Gr[ht]=Gr[mt]=Gr[dt]=Gr[pt]=Gr[vt]=Gr[gt]=!0,Gr[Ke]=Gr[Me]=Gr[st]=Gr[Le]=Gr[ut]=Gr[qe]=Gr[Je]=Gr[We]=Gr[ze]=Gr[$e]=Gr[Ze]=Gr[et]=Gr[tt]=Gr[rt]=Gr[at]=!1;var zr={};zr[Ke]=zr[Me]=zr[st]=zr[ut]=zr[Le]=zr[qe]=zr[ct]=zr[lt]=zr[ft]=zr[ht]=zr[mt]=zr[ze]=zr[$e]=zr[Ze]=zr[et]=zr[tt]=zr[rt]=zr[nt]=zr[dt]=zr[pt]=zr[vt]=zr[gt]=!0,zr[Je]=zr[We]=zr[at]=!1;var $r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Yr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qr=parseFloat,en=parseInt,tn="object"==typeof global&&global&&global.Object===Object&&global,rn="object"==typeof self&&self&&self.Object===Object&&self,nn=tn||rn||Function("return this")(),an="object"==typeof t&&t&&!t.nodeType&&t,on=an&&"object"==typeof e&&e&&!e.nodeType&&e,sn=on&&on.exports===an,un=sn&&tn.process,cn=function(){try{return un&&un.binding&&un.binding("util")}catch(e){}}(),ln=cn&&cn.isArrayBuffer,fn=cn&&cn.isDate,hn=cn&&cn.isMap,mn=cn&&cn.isRegExp,dn=cn&&cn.isSet,pn=cn&&cn.isTypedArray,vn=C("length"),gn=_($r),yn=_(Yr),bn=_(Zr),wn=function e(t){function g(e){if(cu(e)&&!Sh(e)&&!(e instanceof X)){if(e instanceof z)return e;if(wl.call(e,"__wrapped__"))return ao(e)}return new z(e)}function _(){}function z(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=te}function X(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function Q(){var e=new X(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e}function Mt(){if(this.__filtered__){var e=new X(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Xt(){var e=this.__wrapped__.value(),t=this.__dir__,r=Sh(e),n=t<0,i=r?e.length:0,a=Ia(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=n?s:o-1,l=this.__iteratees__,f=l.length,h=0,m=Yl(u,this.__takeCount__);if(!r||!n&&i==u&&m==u)return Si(e,this.__actions__);var d=[];e:for(;u--&&h<m;){c+=t;for(var p=-1,v=e[c];++p<f;){var g=l[p],y=g.iteratee,b=g.type,w=y(v);if(b==Ie)v=w;else if(!w){if(b==Ee)continue e;break e}}d[h++]=v}return d}function Qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function er(){this.__data__=sf?sf(null):{},this.size=0}function tr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function rr(e){var t=this.__data__;if(sf){var r=t[e];return r===oe?te:r}return wl.call(t,e)?t[e]:te}function nr(e){var t=this.__data__;return sf?t[e]!==te:wl.call(t,e)}function ir(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=sf&&t===te?oe:t,this}function ar(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function or(){this.__data__=[],this.size=0}function sr(e){var t=this.__data__,r=Nr(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Rl.call(t,r,1),--this.size,!0}function ur(e){var t=this.__data__,r=Nr(t,e);return r<0?te:t[r][1]}function cr(e){return Nr(this.__data__,e)>-1}function lr(e,t){var r=this.__data__,n=Nr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function hr(){this.size=0,this.__data__={hash:new Qt,map:new(rf||ar),string:new Qt}}function mr(e){var t=Ca(this,e).delete(e);return this.size-=t?1:0,t}function dr(e){return Ca(this,e).get(e)}function pr(e){return Ca(this,e).has(e)}function vr(e,t){var r=Ca(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function gr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new fr;++t<r;)this.add(e[t])}function yr(e){return this.__data__.set(e,oe),this}function br(e){return this.__data__.has(e)}function wr(e){var t=this.__data__=new ar(e);this.size=t.size}function Sr(){this.__data__=new ar,this.size=0}function kr(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Pr(e){return this.__data__.get(e)}function Ar(e){return this.__data__.has(e)}function Cr(e,t){var r=this.__data__;if(r instanceof ar){var n=r.__data__;if(!rf||n.length<ne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fr(n)}return r.set(e,t),this.size=r.size,this}function _r(e,t){var r=Sh(e),n=!r&&wh(e),i=!r&&!n&&Ph(e),a=!r&&!n&&!i&&Eh(e),o=r||n||i||a,s=o?B(e.length,ml):[],u=s.length;for(var c in e)!t&&!wl.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Da(c,u))||s.push(c);return s}function Or(e){var t=e.length;return t?e[ri(0,t-1)]:te}function Er(e,t){return to(Mi(e),Ur(t,0,e.length))}function Ir(e){return to(Mi(e))}function Br(e,t,r){(r===te||$s(e[t],r))&&(r!==te||t in e)||Tr(e,t,r)}function xr(e,t,r){var n=e[t];wl.call(e,t)&&$s(n,r)&&(r!==te||t in e)||Tr(e,t,r)}function Nr(e,t){for(var r=e.length;r--;)if($s(e[r][0],t))return r;return-1}function jr(e,t,r,n){return bf(e,function(e,i,a){t(n,e,r(e),a)}),n}function Rr(e,t){return e&&Hi(t,Fu(t),e)}function Vr(e,t){return e&&Hi(t,Ju(t),e)}function Tr(e,t,r){"__proto__"==t&&Ul?Ul(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Dr(e,t){for(var r=-1,n=t.length,i=ol(n),a=null==e;++r<n;)i[r]=a?te:Hu(e,t[r]);return i}function Ur(e,t,r){return e===e&&(r!==te&&(e=e<=r?e:r),t!==te&&(e=e>=t?e:t)),e}function Hr(e,t,r,n,i,a){var s,u=t&ce,c=t&le,l=t&fe;if(r&&(s=i?r(e,n,i,a):r(e)),s!==te)return s;if(!uu(e))return e;var f=Sh(e);if(f){if(s=Na(e),!u)return Mi(e,s)}else{var h=xf(e),m=h==We||h==Ge;if(Ph(e))return Ei(e,u);if(h==Ze||h==Ke||m&&!i){if(s=c||m?{}:ja(e),!u)return c?qi(e,Vr(s,e)):Li(e,Rr(s,e))}else{if(!zr[h])return i?e:{};s=Ra(e,h,Hr,u)}}a||(a=new wr);var d=a.get(e);if(d)return d;a.set(e,s);var p=l?c?Sa:wa:c?Ju:Fu,v=f?te:p(e);return o(v||e,function(n,i){v&&(i=n,n=e[i]),xr(s,i,Hr(n,t,r,i,e,a))}),s}function Lr(e){var t=Fu(e);return function(r){return qr(r,e,t)}}function qr(e,t,r){var n=r.length;if(null==e)return!n;for(e=fl(e);n--;){var i=r[n],a=t[i],o=e[i];if(o===te&&!(i in e)||!a(o))return!1}return!0}function Fr(e,t,r){if("function"!=typeof e)throw new dl(ae);return Rf(function(){e.apply(te,r)},t)}function $r(e,t,r,n){var i=-1,a=l,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=h(t,N(r))),n?(a=f,o=!1):t.length>=ne&&(a=R,o=!1,t=new gr(t));e:for(;++i<s;){var m=e[i],d=null==r?m:r(m);if(m=n||0!==m?m:0,o&&d===d){for(var p=c;p--;)if(t[p]===d)continue e;u.push(m)}else a(t,d,n)||u.push(m)}return u}function Yr(e,t){var r=!0;return bf(e,function(e,n,i){return r=!!t(e,n,i)}),r}function Zr(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(s===te?o===o&&!wu(o):r(o,s)))var s=o,u=a}return u}function Xr(e,t,r,n){var i=e.length;for(r=_u(r),r<0&&(r=-r>i?0:i+r),n=n===te||n>i?i:_u(n),n<0&&(n+=i),n=r>n?0:Ou(n);r<n;)e[r++]=t;return e}function tn(e,t){var r=[];return bf(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function rn(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=Ta),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?rn(s,t-1,r,n,i):m(i,s):n||(i[i.length]=s)}return i}function an(e,t){return e&&Sf(e,t,Fu)}function on(e,t){return e&&kf(e,t,Fu)}function un(e,t){return c(t,function(t){return au(e[t])})}function cn(e,t){t=_i(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[ro(t[r++])];return r&&r==n?e:te}function vn(e,t,r){var n=t(e);return Sh(e)?n:m(n,r(e))}function wn(e){return null==e?e===te?it:Ye:Dl&&Dl in fl(e)?Ea(e):$a(e)}function kn(e,t){return e>t}function Pn(e,t){return null!=e&&wl.call(e,t)}function An(e,t){return null!=e&&t in fl(e)}function Cn(e,t,r){return e>=Yl(t,r)&&e<$l(t,r)}function _n(e,t,r){for(var n=r?f:l,i=e[0].length,a=e.length,o=a,s=ol(a),u=1/0,c=[];o--;){var m=e[o];o&&t&&(m=h(m,N(t))),u=Yl(m.length,u),s[o]=!r&&(t||i>=120&&m.length>=120)?new gr(o&&m):te}m=e[0];var d=-1,p=s[0];e:for(;++d<i&&c.length<u;){var v=m[d],g=t?t(v):v;if(v=r||0!==v?v:0,!(p?R(p,g):n(c,g,r))){for(o=a;--o;){var y=s[o];if(!(y?R(y,g):n(e[o],g,r)))continue e}p&&p.push(g),c.push(v)}}return c}function On(e,t,r,n){return an(e,function(e,i,a){t(n,r(e),i,a)}),n}function En(e,t,r){t=_i(t,e),e=Za(e,t);var n=null==e?e:e[ro(Co(t))];return null==n?te:i(n,e,r)}function In(e){return cu(e)&&wn(e)==Ke}function Bn(e){return cu(e)&&wn(e)==st}function xn(e){return cu(e)&&wn(e)==qe}function Nn(e,t,r,n,i){return e===t||(null==e||null==t||!cu(e)&&!cu(t)?e!==e&&t!==t:jn(e,t,r,n,Nn,i))}function jn(e,t,r,n,i,a){var o=Sh(e),s=Sh(t),u=o?Me:xf(e),c=s?Me:xf(t);u=u==Ke?Ze:u,c=c==Ke?Ze:c;var l=u==Ze,f=c==Ze,h=u==c;if(h&&Ph(e)){if(!Ph(t))return!1;o=!0,l=!1}if(h&&!l)return a||(a=new wr),o||Eh(e)?va(e,t,r,n,i,a):ga(e,t,u,r,n,i,a);if(!(r&he)){var m=l&&wl.call(e,"__wrapped__"),d=f&&wl.call(t,"__wrapped__");if(m||d){var p=m?e.value():e,v=d?t.value():t;return a||(a=new wr),i(p,v,r,n,a)}}return!!h&&(a||(a=new wr),ya(e,t,r,n,i,a))}function Rn(e){return cu(e)&&xf(e)==ze}function Vn(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=fl(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=r[i];var u=s[0],c=e[u],l=s[1];if(o&&s[2]){if(c===te&&!(u in e))return!1}else{var f=new wr;if(n)var h=n(c,l,u,e,t,f);if(!(h===te?Nn(l,c,he|me,n,f):h))return!1}}return!0}function Tn(e){if(!uu(e)||La(e))return!1;var t=au(e)?_l:Wt;return t.test(no(e))}function Dn(e){return cu(e)&&wn(e)==et}function Un(e){return cu(e)&&xf(e)==tt}function Kn(e){return cu(e)&&su(e.length)&&!!Gr[wn(e)]}function Mn(e){return"function"==typeof e?e:null==e?Rc:"object"==typeof e?Sh(e)?Wn(e[0],e[1]):Jn(e):Lc(e)}function Hn(e){if(!qa(e))return zl(e);var t=[];for(var r in fl(e))wl.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Ln(e){if(!uu(e))return za(e);var t=qa(e),r=[];for(var n in e)("constructor"!=n||!t&&wl.call(e,n))&&r.push(n);return r}function qn(e,t){return e<t}function Fn(e,t){var r=-1,n=Ys(e)?ol(e.length):[];return bf(e,function(e,i,a){n[++r]=t(e,i,a)}),n}function Jn(e){var t=_a(e);return 1==t.length&&t[0][2]?Ja(t[0][0],t[0][1]):function(r){return r===e||Vn(r,e,t)}}function Wn(e,t){return Ka(e)&&Fa(t)?Ja(ro(e),t):function(r){var n=Hu(r,e);return n===te&&n===t?qu(r,e):Nn(t,n,he|me)}}function Gn(e,t,r,n,i){e!==t&&Sf(t,function(a,o){if(uu(a))i||(i=new wr),zn(e,t,o,r,Gn,n,i);else{var s=n?n(e[o],a,o+"",e,t,i):te;s===te&&(s=a),Br(e,o,s)}},Ju)}function zn(e,t,r,n,i,a,o){var s=e[r],u=t[r],c=o.get(u);if(c)return void Br(e,r,c);var l=a?a(s,u,r+"",e,t,o):te,f=l===te;if(f){var h=Sh(u),m=!h&&Ph(u),d=!h&&!m&&Eh(u);l=u,h||m||d?Sh(s)?l=s:Zs(s)?l=Mi(s):m?(f=!1,l=Ei(u,!0)):d?(f=!1,l=Vi(u,!0)):l=[]:gu(u)||wh(u)?(l=s,wh(s)?l=Iu(s):(!uu(s)||n&&au(s))&&(l=ja(u))):f=!1}f&&(o.set(u,l),i(l,u,n,a,o),o.delete(u)),Br(e,r,l)}function $n(e,t){var r=e.length;if(r)return t+=t<0?r:0,Da(t,r)?e[t]:te}function Yn(e,t,r){var n=-1;t=h(t.length?t:[Rc],N(Aa()));var i=Fn(e,function(e,r,i){var a=h(t,function(t){return t(e)});return{criteria:a,index:++n,value:e}});return E(i,function(e,t){return Di(e,t,r)})}function Zn(e,t){return Xn(e,t,function(t,r){return qu(e,r)})}function Xn(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=cn(e,o);r(s,o)&&ui(a,_i(o,e),s)}return a}function Qn(e){return function(t){return cn(t,e)}}function ei(e,t,r,n){var i=n?k:S,a=-1,o=t.length,s=e;for(e===t&&(t=Mi(t)),r&&(s=h(e,N(r)));++a<o;)for(var u=0,c=t[a],l=r?r(c):c;(u=i(s,l,u,n))>-1;)s!==e&&Rl.call(s,u,1),Rl.call(e,u,1);return e}function ti(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;Da(i)?Rl.call(e,i,1):yi(e,i)}}return e}function ri(e,t){return e+ql(Ql()*(t-e+1))}function ni(e,t,r,n){for(var i=-1,a=$l(Ll((t-e)/(r||1)),0),o=ol(a);a--;)o[n?a:++i]=e,e+=r;return o}function ii(e,t){var r="";if(!e||t<1||t>Ne)return r;do t%2&&(r+=e),t=ql(t/2),t&&(e+=e);while(t);return r}function ai(e,t){return Vf(Ya(e,t,Rc),e+"")}function oi(e){return Or(nc(e))}function si(e,t){var r=nc(e);return to(r,Ur(t,0,r.length))}function ui(e,t,r,n){if(!uu(e))return e;t=_i(t,e);for(var i=-1,a=t.length,o=a-1,s=e;null!=s&&++i<a;){var u=ro(t[i]),c=r;if(i!=o){var l=s[u];c=n?n(l,u,s):te,c===te&&(c=uu(l)?l:Da(t[i+1])?[]:{})}xr(s,u,c),s=s[u]}return e}function ci(e){return to(nc(e))}function li(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=ol(i);++n<i;)a[n]=e[n+t];return a}function fi(e,t){var r;return bf(e,function(e,n,i){return r=t(e,n,i),!r}),!!r}function hi(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t===t&&i<=De){for(;n<i;){var a=n+i>>>1,o=e[a];null!==o&&!wu(o)&&(r?o<=t:o<t)?n=a+1:i=a}return i}return mi(e,t,Rc,r)}function mi(e,t,r,n){t=r(t);for(var i=0,a=null==e?0:e.length,o=t!==t,s=null===t,u=wu(t),c=t===te;i<a;){var l=ql((i+a)/2),f=r(e[l]),h=f!==te,m=null===f,d=f===f,p=wu(f);if(o)var v=n||d;else v=c?d&&(n||h):s?d&&h&&(n||!m):u?d&&h&&!m&&(n||!p):!m&&!p&&(n?f<=t:f<t);v?i=l+1:a=l}return Yl(a,Te)}function di(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!$s(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function pi(e){return"number"==typeof e?e:wu(e)?Re:+e}function vi(e){if("string"==typeof e)return e;if(Sh(e))return h(e,vi)+"";if(wu(e))return gf?gf.call(e):"";var t=e+"";return"0"==t&&1/e==-xe?"-0":t}function gi(e,t,r){var n=-1,i=l,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=f;else if(a>=ne){var c=t?null:Of(e);if(c)return W(c);o=!1,i=R,u=new gr}else u=t?[]:s;e:for(;++n<a;){var h=e[n],m=t?t(h):h;if(h=r||0!==h?h:0,o&&m===m){for(var d=u.length;d--;)if(u[d]===m)continue e;t&&u.push(m),s.push(h)}else i(u,m,r)||(u!==s&&u.push(m),s.push(h))}return s}function yi(e,t){return t=_i(t,e),e=Za(e,t),null==e||delete e[ro(Co(t))]}function bi(e,t,r,n){return ui(e,t,r(cn(e,t)),n)}function wi(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?li(e,n?0:a,n?a+1:i):li(e,n?a+1:0,n?i:a)}function Si(e,t){var r=e;return r instanceof X&&(r=r.value()),d(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},r)}function ki(e,t,r){var n=e.length;if(n<2)return n?gi(e[0]):[];for(var i=-1,a=ol(n);++i<n;)for(var o=e[i],s=-1;++s<n;)s!=i&&(a[i]=$r(a[i]||o,e[s],t,r));return gi(rn(a,1),t,r)}function Pi(e,t,r){for(var n=-1,i=e.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:te;r(o,e[n],s)}return o}function Ai(e){return Zs(e)?e:[]}function Ci(e){return"function"==typeof e?e:Rc}function _i(e,t){return Sh(e)?e:Ka(e,t)?[e]:Tf(xu(e))}function Oi(e,t,r){var n=e.length;return r=r===te?n:r,!t&&r>=n?e:li(e,t,r)}function Ei(e,t){if(t)return e.slice();var r=e.length,n=Bl?Bl(r):new e.constructor(r);return e.copy(n),n}function Ii(e){var t=new e.constructor(e.byteLength);return new Il(t).set(new Il(e)),t}function Bi(e,t){var r=t?Ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function xi(e,t,n){var i=t?n(q(e),ce):q(e);return d(i,r,new e.constructor)}function Ni(e){var t=new e.constructor(e.source,qt.exec(e));return t.lastIndex=e.lastIndex,t}function ji(e,t,r){var i=t?r(W(e),ce):W(e);return d(i,n,new e.constructor)}function Ri(e){return vf?fl(vf.call(e)):{}}function Vi(e,t){var r=t?Ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var r=e!==te,n=null===e,i=e===e,a=wu(e),o=t!==te,s=null===t,u=t===t,c=wu(t);if(!s&&!c&&!a&&e>t||a&&o&&u&&!s&&!c||n&&o&&u||!r&&u||!i)return 1;if(!n&&!a&&!c&&e<t||c&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!u)return-1}return 0}function Di(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var u=Ti(i[n],a[n]);if(u){if(n>=s)return u;var c=r[n];return u*("desc"==c?-1:1)}}return e.index-t.index}function Ui(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,u=t.length,c=$l(a-o,0),l=ol(u+c),f=!n;++s<u;)l[s]=t[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function Ki(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,u=-1,c=t.length,l=$l(a-s,0),f=ol(l+c),h=!n;++i<l;)f[i]=e[i];for(var m=i;++u<c;)f[m+u]=t[u];for(;++o<s;)(h||i<a)&&(f[m+r[o]]=e[i++]);return f}function Mi(e,t){var r=-1,n=e.length;for(t||(t=ol(n));++r<n;)t[r]=e[r];return t}function Hi(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=n?n(r[s],e[s],s,r,e):te;u===te&&(u=e[s]),i?Tr(r,s,u):xr(r,s,u)}return r}function Li(e,t){return Hi(e,If(e),t)}function qi(e,t){return Hi(e,Bf(e),t)}function Fi(e,t){return function(r,n){var i=Sh(r)?a:jr,o=t?t():{};return i(r,e,Aa(n,2),o)}}function Ji(e){return ai(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:te,o=i>2?r[2]:te;for(a=e.length>3&&"function"==typeof a?(i--,a):te,o&&Ua(r[0],r[1],o)&&(a=i<3?te:a,i=1),t=fl(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t})}function Wi(e,t){return function(r,n){if(null==r)return r;if(!Ys(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=fl(r);(t?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}function Gi(e){return function(t,r,n){for(var i=-1,a=fl(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(r(a[u],u,a)===!1)break}return t}}function zi(e,t,r){function n(){var t=this&&this!==nn&&this instanceof n?a:e;return t.apply(i?r:this,arguments)}var i=t&de,a=Zi(e);return n}function $i(e){return function(t){t=xu(t);var r=M(t)?Z(t):te,n=r?r[0]:t.charAt(0),i=r?Oi(r,1).join(""):t.slice(1);return n[e]()+i}}function Yi(e){return function(t){return d(Ic(cc(t).replace(Kr,"")),e,"")}}function Zi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=yf(e.prototype),n=e.apply(r,t);return uu(n)?n:r}}function Xi(e,t,r){function n(){for(var o=arguments.length,s=ol(o),u=o,c=Pa(n);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:J(s,c);if(o-=l.length,o<r)return ca(e,t,ta,n.placeholder,te,s,l,te,te,r-o);var f=this&&this!==nn&&this instanceof n?a:e;return i(f,this,s)}var a=Zi(e);return n}function Qi(e){return function(t,r,n){var i=fl(t);if(!Ys(t)){var a=Aa(r,3);t=Fu(t),r=function(e){return a(i[e],e,i)}}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:te}}function ea(e){return ba(function(t){var r=t.length,n=r,i=z.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new dl(ae);if(i&&!o&&"wrapper"==ka(a))var o=new z([],!0)}for(n=o?n:r;++n<r;){a=t[n];var s=ka(a),u="wrapper"==s?Ef(a):te;o=u&&Ha(u[0])&&u[1]==(Se|ge|be|ke)&&!u[4].length&&1==u[9]?o[ka(u[0])].apply(o,u[3]):1==a.length&&Ha(a)?o[s]():o.thru(a)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&Sh(n))return o.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}})}function ta(e,t,r,n,i,a,o,s,u,c){function l(){for(var g=arguments.length,y=ol(g),b=g;b--;)y[b]=arguments[b];if(d)var w=Pa(l),S=D(y,w);if(n&&(y=Ui(y,n,i,d)),a&&(y=Ki(y,a,o,d)),g-=S,d&&g<c){var k=J(y,w);return ca(e,t,ta,l.placeholder,r,y,k,s,u,c-g)}var P=h?r:this,A=m?P[e]:e;return g=y.length,s?y=Xa(y,s):p&&g>1&&y.reverse(),f&&u<g&&(y.length=u),this&&this!==nn&&this instanceof l&&(A=v||Zi(A)),A.apply(P,y)}var f=t&Se,h=t&de,m=t&pe,d=t&(ge|ye),p=t&Pe,v=m?te:Zi(e);return l}function ra(e,t){return function(r,n){return On(r,e,t(n),{})}}function na(e,t){return function(r,n){var i;if(r===te&&n===te)return t;if(r!==te&&(i=r),n!==te){if(i===te)return n;"string"==typeof r||"string"==typeof n?(r=vi(r),n=vi(n)):(r=pi(r),n=pi(n)),i=e(r,n)}return i}}function ia(e){return ba(function(t){return t=h(t,N(Aa())),ai(function(r){var n=this;return e(t,function(e){return i(e,n,r)})})})}function aa(e,t){t=t===te?" ":vi(t);var r=t.length;if(r<2)return r?ii(t,e):t;var n=ii(t,Ll(e/Y(t)));return M(t)?Oi(Z(n),0,e).join(""):n.slice(0,e)}function oa(e,t,r,n){function a(){for(var t=-1,u=arguments.length,c=-1,l=n.length,f=ol(l+u),h=this&&this!==nn&&this instanceof a?s:e;++c<l;)f[c]=n[c];for(;u--;)f[c++]=arguments[++t];return i(h,o?r:this,f)}var o=t&de,s=Zi(e);
return a}function sa(e){return function(t,r,n){return n&&"number"!=typeof n&&Ua(t,r,n)&&(r=n=te),t=Cu(t),r===te?(r=t,t=0):r=Cu(r),n=n===te?t<r?1:-1:Cu(n),ni(t,r,n,e)}}function ua(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Eu(t),r=Eu(r)),e(t,r)}}function ca(e,t,r,n,i,a,o,s,u,c){var l=t&ge,f=l?o:te,h=l?te:o,m=l?a:te,d=l?te:a;t|=l?be:we,t&=~(l?we:be),t&ve||(t&=~(de|pe));var p=[e,t,i,m,f,d,h,s,u,c],v=r.apply(te,p);return Ha(e)&&jf(v,p),v.placeholder=n,Qa(v,e,t)}function la(e){var t=ll[e];return function(e,r){if(e=Eu(e),r=null==r?0:Yl(_u(r),292)){var n=(xu(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+r));return n=(xu(i)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(e)}}function fa(e){return function(t){var r=xf(t);return r==ze?q(t):r==tt?G(t):x(t,e(t))}}function ha(e,t,r,n,i,a,o,s){var u=t&pe;if(!u&&"function"!=typeof e)throw new dl(ae);var c=n?n.length:0;if(c||(t&=~(be|we),n=i=te),o=o===te?o:$l(_u(o),0),s=s===te?s:_u(s),c-=i?i.length:0,t&we){var l=n,f=i;n=i=te}var h=u?te:Ef(e),m=[e,t,r,n,i,l,f,a,o,s];if(h&&Ga(m,h),e=m[0],t=m[1],r=m[2],n=m[3],i=m[4],s=m[9]=m[9]===te?u?0:e.length:$l(m[9]-c,0),!s&&t&(ge|ye)&&(t&=~(ge|ye)),t&&t!=de)d=t==ge||t==ye?Xi(e,t,s):t!=be&&t!=(de|be)||i.length?ta.apply(te,m):oa(e,t,r,n);else var d=zi(e,t,r);var p=h?Pf:jf;return Qa(p(d,m),e,t)}function ma(e,t,r,n){return e===te||$s(e,gl[r])&&!wl.call(n,r)?t:e}function da(e,t,r,n,i,a){return uu(e)&&uu(t)&&(a.set(t,e),Gn(e,t,te,da,a),a.delete(t)),e}function pa(e){return gu(e)?te:e}function va(e,t,r,n,i,a){var o=r&he,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var l=-1,f=!0,h=r&me?new gr:te;for(a.set(e,t),a.set(t,e);++l<s;){var m=e[l],d=t[l];if(n)var p=o?n(d,m,l,t,e,a):n(m,d,l,e,t,a);if(p!==te){if(p)continue;f=!1;break}if(h){if(!v(t,function(e,t){if(!R(h,t)&&(m===e||i(m,e,r,n,a)))return h.push(t)})){f=!1;break}}else if(m!==d&&!i(m,d,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ga(e,t,r,n,i,a,o){switch(r){case ut:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case st:return!(e.byteLength!=t.byteLength||!a(new Il(e),new Il(t)));case Le:case qe:case $e:return $s(+e,+t);case Je:return e.name==t.name&&e.message==t.message;case et:case rt:return e==t+"";case ze:var s=q;case tt:var u=n&he;if(s||(s=W),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;n|=me,o.set(e,t);var l=va(s(e),s(t),n,i,a,o);return o.delete(e),l;case nt:if(vf)return vf.call(e)==vf.call(t)}return!1}function ya(e,t,r,n,i,a){var o=r&he,s=wa(e),u=s.length,c=wa(t),l=c.length;if(u!=l&&!o)return!1;for(var f=u;f--;){var h=s[f];if(!(o?h in t:wl.call(t,h)))return!1}var m=a.get(e);if(m&&a.get(t))return m==t;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++f<u;){h=s[f];var v=e[h],g=t[h];if(n)var y=o?n(g,v,h,t,e,a):n(v,g,h,e,t,a);if(!(y===te?v===g||i(v,g,r,n,a):y)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return a.delete(e),a.delete(t),d}function ba(e){return Vf(Ya(e,te,go),e+"")}function wa(e){return vn(e,Fu,If)}function Sa(e){return vn(e,Ju,Bf)}function ka(e){for(var t=e.name+"",r=cf[t],n=wl.call(cf,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function Pa(e){var t=wl.call(g,"placeholder")?g:e;return t.placeholder}function Aa(){var e=g.iteratee||Vc;return e=e===Vc?Mn:e,arguments.length?e(arguments[0],arguments[1]):e}function Ca(e,t){var r=e.__data__;return Ma(t)?r["string"==typeof t?"string":"hash"]:r.map}function _a(e){for(var t=Fu(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Fa(i)]}return t}function Oa(e,t){var r=K(e,t);return Tn(r)?r:te}function Ea(e){var t=wl.call(e,Dl),r=e[Dl];try{e[Dl]=te;var n=!0}catch(e){}var i=Pl.call(e);return n&&(t?e[Dl]=r:delete e[Dl]),i}function Ia(e,t,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Yl(t,e+o);break;case"takeRight":e=$l(e,t-o)}}return{start:e,end:t}}function Ba(e){var t=e.match(Ut);return t?t[1].split(Kt):[]}function xa(e,t,r){t=_i(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var o=ro(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:(i=null==e?0:e.length,!!i&&su(i)&&Da(o,i)&&(Sh(e)||wh(e)))}function Na(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&wl.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function ja(e){return"function"!=typeof e.constructor||qa(e)?{}:yf(xl(e))}function Ra(e,t,r,n){var i=e.constructor;switch(t){case st:return Ii(e);case Le:case qe:return new i(+e);case ut:return Bi(e,n);case ct:case lt:case ft:case ht:case mt:case dt:case pt:case vt:case gt:return Vi(e,n);case ze:return xi(e,n,r);case $e:case rt:return new i(e);case et:return Ni(e);case tt:return ji(e,n,r);case nt:return Ri(e)}}function Va(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function Ta(e){return Sh(e)||wh(e)||!!(Vl&&e&&e[Vl])}function Da(e,t){return t=null==t?Ne:t,!!t&&("number"==typeof e||zt.test(e))&&e>-1&&e%1==0&&e<t}function Ua(e,t,r){if(!uu(r))return!1;var n=typeof t;return!!("number"==n?Ys(r)&&Da(t,r.length):"string"==n&&t in r)&&$s(r[t],e)}function Ka(e,t){if(Sh(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!wu(e))||(It.test(e)||!Et.test(e)||null!=t&&e in fl(t))}function Ma(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Ha(e){var t=ka(e),r=g[t];if("function"!=typeof r||!(t in X.prototype))return!1;if(e===r)return!0;var n=Ef(r);return!!n&&e===n[0]}function La(e){return!!kl&&kl in e}function qa(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||gl;return e===r}function Fa(e){return e===e&&!uu(e)}function Ja(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==te||e in fl(r)))}}function Wa(e){var t=Vs(e,function(e){return r.size===se&&r.clear(),e}),r=t.cache;return t}function Ga(e,t){var r=e[1],n=t[1],i=r|n,a=i<(de|pe|Se),o=n==Se&&r==ge||n==Se&&r==ke&&e[7].length<=t[8]||n==(Se|ke)&&t[7].length<=t[8]&&r==ge;if(!a&&!o)return e;n&de&&(e[2]=t[2],i|=r&de?0:ve);var s=t[3];if(s){var u=e[3];e[3]=u?Ui(u,s,t[4]):s,e[4]=u?J(e[3],ue):t[4]}return s=t[5],s&&(u=e[5],e[5]=u?Ki(u,s,t[6]):s,e[6]=u?J(e[5],ue):t[6]),s=t[7],s&&(e[7]=s),n&Se&&(e[8]=null==e[8]?t[8]:Yl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function za(e){var t=[];if(null!=e)for(var r in fl(e))t.push(r);return t}function $a(e){return Pl.call(e)}function Ya(e,t,r){return t=$l(t===te?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=$l(n.length-t,0),s=ol(o);++a<o;)s[a]=n[t+a];a=-1;for(var u=ol(t+1);++a<t;)u[a]=n[a];return u[t]=r(s),i(e,this,u)}}function Za(e,t){return t.length<2?e:cn(e,li(t,0,-1))}function Xa(e,t){for(var r=e.length,n=Yl(t.length,r),i=Mi(e);n--;){var a=t[n];e[n]=Da(a,r)?i[a]:te}return e}function Qa(e,t,r){var n=t+"";return Vf(e,Va(n,io(Ba(n),r)))}function eo(e){var t=0,r=0;return function(){var n=Zl(),i=Oe-(n-r);if(r=n,i>0){if(++t>=_e)return arguments[0]}else t=0;return e.apply(te,arguments)}}function to(e,t){var r=-1,n=e.length,i=n-1;for(t=t===te?n:t;++r<t;){var a=ri(r,i),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e}function ro(e){if("string"==typeof e||wu(e))return e;var t=e+"";return"0"==t&&1/e==-xe?"-0":t}function no(e){if(null!=e){try{return bl.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function io(e,t){return o(Ue,function(r){var n="_."+r[0];t&r[1]&&!l(e,n)&&e.push(n)}),e.sort()}function ao(e){if(e instanceof X)return e.clone();var t=new z(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function oo(e,t,r){t=(r?Ua(e,t,r):t===te)?1:$l(_u(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,a=0,o=ol(Ll(n/t));i<n;)o[a++]=li(e,i,i+=t);return o}function so(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}function uo(){var e=arguments.length;if(!e)return[];for(var t=ol(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return m(Sh(r)?Mi(r):[r],rn(t,1))}function co(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:_u(t),li(e,t<0?0:t,n)):[]}function lo(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:_u(t),t=n-t,li(e,0,t<0?0:t)):[]}function fo(e,t){return e&&e.length?wi(e,Aa(t,3),!0,!0):[]}function ho(e,t){return e&&e.length?wi(e,Aa(t,3),!0):[]}function mo(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&Ua(e,t,r)&&(r=0,n=i),Xr(e,t,r,n)):[]}function po(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:_u(r);return i<0&&(i=$l(n+i,0)),w(e,Aa(t,3),i)}function vo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return r!==te&&(i=_u(r),i=r<0?$l(n+i,0):Yl(i,n-1)),w(e,Aa(t,3),i,!0)}function go(e){var t=null==e?0:e.length;return t?rn(e,1):[]}function yo(e){var t=null==e?0:e.length;return t?rn(e,xe):[]}function bo(e,t){var r=null==e?0:e.length;return r?(t=t===te?1:_u(t),rn(e,t)):[]}function wo(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n}function So(e){return e&&e.length?e[0]:te}function ko(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:_u(r);return i<0&&(i=$l(n+i,0)),S(e,t,i)}function Po(e){var t=null==e?0:e.length;return t?li(e,0,-1):[]}function Ao(e,t){return null==e?"":Gl.call(e,t)}function Co(e){var t=null==e?0:e.length;return t?e[t-1]:te}function _o(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return r!==te&&(i=_u(r),i=i<0?$l(n+i,0):Yl(i,n-1)),t===t?$(e,t,i):w(e,P,i,!0)}function Oo(e,t){return e&&e.length?$n(e,_u(t)):te}function Eo(e,t){return e&&e.length&&t&&t.length?ei(e,t):e}function Io(e,t,r){return e&&e.length&&t&&t.length?ei(e,t,Aa(r,2)):e}function Bo(e,t,r){return e&&e.length&&t&&t.length?ei(e,t,te,r):e}function xo(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=Aa(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return ti(e,i),r}function No(e){return null==e?e:ef.call(e)}function jo(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Ua(e,t,r)?(t=0,r=n):(t=null==t?0:_u(t),r=r===te?n:_u(r)),li(e,t,r)):[]}function Ro(e,t){return hi(e,t)}function Vo(e,t,r){return mi(e,t,Aa(r,2))}function To(e,t){var r=null==e?0:e.length;if(r){var n=hi(e,t);if(n<r&&$s(e[n],t))return n}return-1}function Do(e,t){return hi(e,t,!0)}function Uo(e,t,r){return mi(e,t,Aa(r,2),!0)}function Ko(e,t){var r=null==e?0:e.length;if(r){var n=hi(e,t,!0)-1;if($s(e[n],t))return n}return-1}function Mo(e){return e&&e.length?di(e):[]}function Ho(e,t){return e&&e.length?di(e,Aa(t,2)):[]}function Lo(e){var t=null==e?0:e.length;return t?li(e,1,t):[]}function qo(e,t,r){return e&&e.length?(t=r||t===te?1:_u(t),li(e,0,t<0?0:t)):[]}function Fo(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:_u(t),t=n-t,li(e,t<0?0:t,n)):[]}function Jo(e,t){return e&&e.length?wi(e,Aa(t,3),!1,!0):[]}function Wo(e,t){return e&&e.length?wi(e,Aa(t,3)):[]}function Go(e){return e&&e.length?gi(e):[]}function zo(e,t){return e&&e.length?gi(e,Aa(t,2)):[]}function $o(e,t){return t="function"==typeof t?t:te,e&&e.length?gi(e,te,t):[]}function Yo(e){if(!e||!e.length)return[];var t=0;return e=c(e,function(e){if(Zs(e))return t=$l(e.length,t),!0}),B(t,function(t){return h(e,C(t))})}function Zo(e,t){if(!e||!e.length)return[];var r=Yo(e);return null==t?r:h(r,function(e){return i(t,te,e)})}function Xo(e,t){return Pi(e||[],t||[],xr)}function Qo(e,t){return Pi(e||[],t||[],ui)}function es(e){var t=g(e);return t.__chain__=!0,t}function ts(e,t){return t(e),e}function rs(e,t){return t(e)}function ns(){return es(this)}function is(){return new z(this.value(),this.__chain__)}function as(){this.__values__===te&&(this.__values__=Au(this.value()));var e=this.__index__>=this.__values__.length,t=e?te:this.__values__[this.__index__++];return{done:e,value:t}}function os(){return this}function ss(e){for(var t,r=this;r instanceof _;){var n=ao(r);n.__index__=0,n.__values__=te,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t}function us(){var e=this.__wrapped__;if(e instanceof X){var t=e;return this.__actions__.length&&(t=new X(this)),t=t.reverse(),t.__actions__.push({func:rs,args:[No],thisArg:te}),new z(t,this.__chain__)}return this.thru(No)}function cs(){return Si(this.__wrapped__,this.__actions__)}function ls(e,t,r){var n=Sh(e)?u:Yr;return r&&Ua(e,t,r)&&(t=te),n(e,Aa(t,3))}function fs(e,t){var r=Sh(e)?c:tn;return r(e,Aa(t,3))}function hs(e,t){return rn(ys(e,t),1)}function ms(e,t){return rn(ys(e,t),xe)}function ds(e,t,r){return r=r===te?1:_u(r),rn(ys(e,t),r)}function ps(e,t){var r=Sh(e)?o:bf;return r(e,Aa(t,3))}function vs(e,t){var r=Sh(e)?s:wf;return r(e,Aa(t,3))}function gs(e,t,r,n){e=Ys(e)?e:nc(e),r=r&&!n?_u(r):0;var i=e.length;return r<0&&(r=$l(i+r,0)),bu(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&S(e,t,r)>-1}function ys(e,t){var r=Sh(e)?h:Fn;return r(e,Aa(t,3))}function bs(e,t,r,n){return null==e?[]:(Sh(t)||(t=null==t?[]:[t]),r=n?te:r,Sh(r)||(r=null==r?[]:[r]),Yn(e,t,r))}function ws(e,t,r){var n=Sh(e)?d:O,i=arguments.length<3;return n(e,Aa(t,4),r,i,bf)}function Ss(e,t,r){var n=Sh(e)?p:O,i=arguments.length<3;return n(e,Aa(t,4),r,i,wf)}function ks(e,t){var r=Sh(e)?c:tn;return r(e,Ts(Aa(t,3)))}function Ps(e){var t=Sh(e)?Or:oi;return t(e)}function As(e,t,r){t=(r?Ua(e,t,r):t===te)?1:_u(t);var n=Sh(e)?Er:si;return n(e,t)}function Cs(e){var t=Sh(e)?Ir:ci;return t(e)}function _s(e){if(null==e)return 0;if(Ys(e))return bu(e)?Y(e):e.length;var t=xf(e);return t==ze||t==tt?e.size:Hn(e).length}function Os(e,t,r){var n=Sh(e)?v:fi;return r&&Ua(e,t,r)&&(t=te),n(e,Aa(t,3))}function Es(e,t){if("function"!=typeof t)throw new dl(ae);return e=_u(e),function(){if(--e<1)return t.apply(this,arguments)}}function Is(e,t,r){return t=r?te:t,t=e&&null==t?e.length:t,ha(e,Se,te,te,te,te,t)}function Bs(e,t){var r;if("function"!=typeof t)throw new dl(ae);return e=_u(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=te),r}}function xs(e,t,r){t=r?te:t;var n=ha(e,ge,te,te,te,te,te,t);return n.placeholder=xs.placeholder,n}function Ns(e,t,r){t=r?te:t;var n=ha(e,ye,te,te,te,te,te,t);return n.placeholder=Ns.placeholder,n}function js(e,t,r){function n(t){var r=h,n=m;return h=m=te,y=t,p=e.apply(n,r)}function i(e){return y=e,v=Rf(s,t),b?n(e):p}function a(e){var r=e-g,n=e-y,i=t-r;return w?Yl(i,d-n):i}function o(e){var r=e-g,n=e-y;return g===te||r>=t||r<0||w&&n>=d}function s(){var e=ch();return o(e)?u(e):void(v=Rf(s,a(e)))}function u(e){return v=te,S&&h?n(e):(h=m=te,p)}function c(){v!==te&&_f(v),y=0,h=g=m=v=te}function l(){return v===te?p:u(ch())}function f(){var e=ch(),r=o(e);if(h=arguments,m=this,g=e,r){if(v===te)return i(g);if(w)return v=Rf(s,t),n(g)}return v===te&&(v=Rf(s,t)),p}var h,m,d,p,v,g,y=0,b=!1,w=!1,S=!0;if("function"!=typeof e)throw new dl(ae);return t=Eu(t)||0,uu(r)&&(b=!!r.leading,w="maxWait"in r,d=w?$l(Eu(r.maxWait)||0,t):d,S="trailing"in r?!!r.trailing:S),f.cancel=c,f.flush=l,f}function Rs(e){return ha(e,Pe)}function Vs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new dl(ae);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Vs.Cache||fr),r}function Ts(e){if("function"!=typeof e)throw new dl(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ds(e){return Bs(2,e)}function Us(e,t){if("function"!=typeof e)throw new dl(ae);return t=t===te?t:_u(t),ai(e,t)}function Ks(e,t){if("function"!=typeof e)throw new dl(ae);return t=null==t?0:$l(_u(t),0),ai(function(r){var n=r[t],a=Oi(r,0,t);return n&&m(a,n),i(e,this,a)})}function Ms(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new dl(ae);return uu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),js(e,t,{leading:n,maxWait:t,trailing:i})}function Hs(e){return Is(e,1)}function Ls(e,t){return ph(Ci(t),e)}function qs(){if(!arguments.length)return[];var e=arguments[0];return Sh(e)?e:[e]}function Fs(e){return Hr(e,fe)}function Js(e,t){return t="function"==typeof t?t:te,Hr(e,fe,t)}function Ws(e){return Hr(e,ce|fe)}function Gs(e,t){return t="function"==typeof t?t:te,Hr(e,ce|fe,t)}function zs(e,t){return null==t||qr(e,t,Fu(t))}function $s(e,t){return e===t||e!==e&&t!==t}function Ys(e){return null!=e&&su(e.length)&&!au(e)}function Zs(e){return cu(e)&&Ys(e)}function Xs(e){return e===!0||e===!1||cu(e)&&wn(e)==Le}function Qs(e){return cu(e)&&1===e.nodeType&&!gu(e)}function eu(e){if(null==e)return!0;if(Ys(e)&&(Sh(e)||"string"==typeof e||"function"==typeof e.splice||Ph(e)||Eh(e)||wh(e)))return!e.length;var t=xf(e);if(t==ze||t==tt)return!e.size;if(qa(e))return!Hn(e).length;for(var r in e)if(wl.call(e,r))return!1;return!0}function tu(e,t){return Nn(e,t)}function ru(e,t,r){r="function"==typeof r?r:te;var n=r?r(e,t):te;return n===te?Nn(e,t,te,r):!!n}function nu(e){if(!cu(e))return!1;var t=wn(e);return t==Je||t==Fe||"string"==typeof e.message&&"string"==typeof e.name&&!gu(e)}function iu(e){return"number"==typeof e&&Wl(e)}function au(e){if(!uu(e))return!1;var t=wn(e);return t==We||t==Ge||t==He||t==Qe}function ou(e){return"number"==typeof e&&e==_u(e)}function su(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ne}function uu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function cu(e){return null!=e&&"object"==typeof e}function lu(e,t){return e===t||Vn(e,t,_a(t))}function fu(e,t,r){return r="function"==typeof r?r:te,Vn(e,t,_a(t),r)}function hu(e){return vu(e)&&e!=+e}function mu(e){if(Nf(e))throw new ul(ie);return Tn(e)}function du(e){return null===e}function pu(e){return null==e}function vu(e){return"number"==typeof e||cu(e)&&wn(e)==$e}function gu(e){if(!cu(e)||wn(e)!=Ze)return!1;var t=xl(e);if(null===t)return!0;var r=wl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&bl.call(r)==Al}function yu(e){return ou(e)&&e>=-Ne&&e<=Ne}function bu(e){return"string"==typeof e||!Sh(e)&&cu(e)&&wn(e)==rt}function wu(e){return"symbol"==typeof e||cu(e)&&wn(e)==nt}function Su(e){return e===te}function ku(e){return cu(e)&&xf(e)==at}function Pu(e){return cu(e)&&wn(e)==ot}function Au(e){if(!e)return[];if(Ys(e))return bu(e)?Z(e):Mi(e);if(Tl&&e[Tl])return L(e[Tl]());var t=xf(e),r=t==ze?q:t==tt?W:nc;return r(e)}function Cu(e){if(!e)return 0===e?e:0;if(e=Eu(e),e===xe||e===-xe){var t=e<0?-1:1;return t*je}return e===e?e:0}function _u(e){var t=Cu(e),r=t%1;return t===t?r?t-r:t:0}function Ou(e){return e?Ur(_u(e),0,Ve):0}function Eu(e){if("number"==typeof e)return e;if(wu(e))return Re;if(uu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=uu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Rt,"");var r=Jt.test(e);return r||Gt.test(e)?en(e.slice(2),r?2:8):Ft.test(e)?Re:+e}function Iu(e){return Hi(e,Ju(e))}function Bu(e){return e?Ur(_u(e),-Ne,Ne):0===e?e:0}function xu(e){return null==e?"":vi(e)}function Nu(e,t){var r=yf(e);return null==t?r:Rr(r,t)}function ju(e,t){return b(e,Aa(t,3),an)}function Ru(e,t){return b(e,Aa(t,3),on)}function Vu(e,t){return null==e?e:Sf(e,Aa(t,3),Ju)}function Tu(e,t){return null==e?e:kf(e,Aa(t,3),Ju)}function Du(e,t){return e&&an(e,Aa(t,3))}function Uu(e,t){return e&&on(e,Aa(t,3))}function Ku(e){return null==e?[]:un(e,Fu(e))}function Mu(e){return null==e?[]:un(e,Ju(e))}function Hu(e,t,r){var n=null==e?te:cn(e,t);return n===te?r:n}function Lu(e,t){return null!=e&&xa(e,t,Pn)}function qu(e,t){return null!=e&&xa(e,t,An)}function Fu(e){return Ys(e)?_r(e):Hn(e)}function Ju(e){return Ys(e)?_r(e,!0):Ln(e)}function Wu(e,t){var r={};return t=Aa(t,3),an(e,function(e,n,i){Tr(r,t(e,n,i),e)}),r}function Gu(e,t){var r={};return t=Aa(t,3),an(e,function(e,n,i){Tr(r,n,t(e,n,i))}),r}function zu(e,t){return $u(e,Ts(Aa(t)))}function $u(e,t){if(null==e)return{};var r=h(Sa(e),function(e){return[e]});return t=Aa(t),Xn(e,r,function(e,r){return t(e,r[0])})}function Yu(e,t,r){t=_i(t,e);var n=-1,i=t.length;for(i||(i=1,e=te);++n<i;){var a=null==e?te:e[ro(t[n])];a===te&&(n=i,a=r),e=au(a)?a.call(e):a}return e}function Zu(e,t,r){return null==e?e:ui(e,t,r)}function Xu(e,t,r,n){return n="function"==typeof n?n:te,null==e?e:ui(e,t,r,n)}function Qu(e,t,r){var n=Sh(e),i=n||Ph(e)||Eh(e);if(t=Aa(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:uu(e)&&au(a)?yf(xl(e)):{}}return(i?o:an)(e,function(e,n,i){return t(r,e,n,i)}),r}function ec(e,t){return null==e||yi(e,t)}function tc(e,t,r){return null==e?e:bi(e,t,Ci(r))}function rc(e,t,r,n){return n="function"==typeof n?n:te,null==e?e:bi(e,t,Ci(r),n)}function nc(e){return null==e?[]:j(e,Fu(e))}function ic(e){return null==e?[]:j(e,Ju(e))}function ac(e,t,r){return r===te&&(r=t,t=te),r!==te&&(r=Eu(r),r=r===r?r:0),t!==te&&(t=Eu(t),t=t===t?t:0),Ur(Eu(e),t,r)}function oc(e,t,r){return t=Cu(t),r===te?(r=t,t=0):r=Cu(r),e=Eu(e),Cn(e,t,r)}function sc(e,t,r){if(r&&"boolean"!=typeof r&&Ua(e,t,r)&&(t=r=te),r===te&&("boolean"==typeof t?(r=t,t=te):"boolean"==typeof e&&(r=e,e=te)),e===te&&t===te?(e=0,t=1):(e=Cu(e),t===te?(t=e,e=0):t=Cu(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=Ql();return Yl(e+i*(t-e+Qr("1e-"+((i+"").length-1))),t)}return ri(e,t)}function uc(e){return em(xu(e).toLowerCase())}function cc(e){return e=xu(e),e&&e.replace($t,gn).replace(Mr,"")}function lc(e,t,r){e=xu(e),t=vi(t);var n=e.length;r=r===te?n:Ur(_u(r),0,n);var i=r;return r-=t.length,r>=0&&e.slice(r,i)==t}function fc(e){return e=xu(e),e&&At.test(e)?e.replace(kt,yn):e}function hc(e){return e=xu(e),e&&jt.test(e)?e.replace(Nt,"\\$&"):e}function mc(e,t,r){e=xu(e),t=_u(t);var n=t?Y(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return aa(ql(i),r)+e+aa(Ll(i),r)}function dc(e,t,r){e=xu(e),t=_u(t);var n=t?Y(e):0;return t&&n<t?e+aa(t-n,r):e}function pc(e,t,r){e=xu(e),t=_u(t);var n=t?Y(e):0;return t&&n<t?aa(t-n,r)+e:e}function vc(e,t,r){return r||null==t?t=0:t&&(t=+t),Xl(xu(e).replace(Vt,""),t||0)}function gc(e,t,r){return t=(r?Ua(e,t,r):t===te)?1:_u(t),ii(xu(e),t)}function yc(){var e=arguments,t=xu(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function bc(e,t,r){return r&&"number"!=typeof r&&Ua(e,t,r)&&(t=r=te),(r=r===te?Ve:r>>>0)?(e=xu(e),e&&("string"==typeof t||null!=t&&!_h(t))&&(t=vi(t),!t&&M(e))?Oi(Z(e),0,r):e.split(t,r)):[]}function wc(e,t,r){return e=xu(e),r=null==r?0:Ur(_u(r),0,e.length),t=vi(t),e.slice(r,r+t.length)==t}function Sc(e,t,r){var n=g.templateSettings;r&&Ua(e,t,r)&&(t=te),e=xu(e),t=jh({},t,n,ma);var i,a,o=jh({},t.imports,n.imports,ma),s=Fu(o),u=j(o,s),c=0,l=t.interpolate||Yt,f="__p += '",h=hl((t.escape||Yt).source+"|"+l.source+"|"+(l===Ot?Lt:Yt).source+"|"+(t.evaluate||Yt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Wr+"]")+"\n";e.replace(h,function(t,r,n,o,s,u){return n||(n=o),f+=e.slice(c,u).replace(Zt,U),r&&(i=!0,f+="' +\n__e("+r+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),f+="';\n";var d=t.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(yt,""):f).replace(bt,"$1").replace(wt,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var p=tm(function(){return cl(s,m+"return "+f).apply(te,u)});if(p.source=f,nu(p))throw p;return p}function kc(e){return xu(e).toLowerCase()}function Pc(e){return xu(e).toUpperCase()}function Ac(e,t,r){if(e=xu(e),e&&(r||t===te))return e.replace(Rt,"");if(!e||!(t=vi(t)))return e;var n=Z(e),i=Z(t),a=V(n,i),o=T(n,i)+1;return Oi(n,a,o).join("")}function Cc(e,t,r){if(e=xu(e),e&&(r||t===te))return e.replace(Tt,"");if(!e||!(t=vi(t)))return e;var n=Z(e),i=T(n,Z(t))+1;return Oi(n,0,i).join("")}function _c(e,t,r){if(e=xu(e),e&&(r||t===te))return e.replace(Vt,"");if(!e||!(t=vi(t)))return e;var n=Z(e),i=V(n,Z(t));return Oi(n,i).join("")}function Oc(e,t){var r=Ae,n=Ce;if(uu(t)){var i="separator"in t?t.separator:i;r="length"in t?_u(t.length):r,n="omission"in t?vi(t.omission):n}e=xu(e);var a=e.length;if(M(e)){var o=Z(e);a=o.length}if(r>=a)return e;var s=r-Y(n);if(s<1)return n;var u=o?Oi(o,0,s).join(""):e.slice(0,s);if(i===te)return u+n;if(o&&(s+=u.length-s),_h(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=hl(i.source,xu(qt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===te?s:f)}}else if(e.indexOf(vi(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+n}function Ec(e){return e=xu(e),e&&Pt.test(e)?e.replace(St,bn):e}function Ic(e,t,r){return e=xu(e),t=r?te:t,t===te?H(e)?ee(e):y(e):e.match(t)||[]}function Bc(e){var t=null==e?0:e.length,r=Aa();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new dl(ae);return[r(e[0]),e[1]]}):[],ai(function(r){for(var n=-1;++n<t;){var a=e[n];if(i(a[0],this,r))return i(a[1],this,r)}})}function xc(e){return Lr(Hr(e,ce))}function Nc(e){return function(){return e}}function jc(e,t){return null==e||e!==e?t:e}function Rc(e){return e}function Vc(e){return Mn("function"==typeof e?e:Hr(e,ce))}function Tc(e){return Jn(Hr(e,ce))}function Dc(e,t){return Wn(e,Hr(t,ce))}function Uc(e,t,r){var n=Fu(t),i=un(t,n);null!=r||uu(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=un(t,Fu(t)));var a=!(uu(r)&&"chain"in r&&!r.chain),s=au(e);return o(i,function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__),i=r.__actions__=Mi(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,m([this.value()],arguments))})}),e}function Kc(){return nn._===this&&(nn._=Cl),this}function Mc(){}function Hc(e){return e=_u(e),ai(function(t){return $n(t,e)})}function Lc(e){return Ka(e)?C(ro(e)):Qn(e)}function qc(e){return function(t){return null==e?te:cn(e,t)}}function Fc(){return[]}function Jc(){return!1}function Wc(){return{}}function Gc(){return""}function zc(){return!0}function $c(e,t){if(e=_u(e),e<1||e>Ne)return[];var r=Ve,n=Yl(e,Ve);t=Aa(t),e-=Ve;for(var i=B(n,t);++r<e;)t(r);return i}function Yc(e){return Sh(e)?h(e,ro):wu(e)?[e]:Mi(Tf(xu(e)))}function Zc(e){var t=++Sl;return xu(e)+t}function Xc(e){return e&&e.length?Zr(e,Rc,kn):te}function Qc(e,t){return e&&e.length?Zr(e,Aa(t,2),kn):te}function el(e){return A(e,Rc)}function tl(e,t){return A(e,Aa(t,2))}function rl(e){return e&&e.length?Zr(e,Rc,qn):te}function nl(e,t){return e&&e.length?Zr(e,Aa(t,2),qn):te}function il(e){return e&&e.length?I(e,Rc):0}function al(e,t){return e&&e.length?I(e,Aa(t,2)):0}t=null==t?nn:Sn.defaults(nn.Object(),t,Sn.pick(nn,Jr));var ol=t.Array,sl=t.Date,ul=t.Error,cl=t.Function,ll=t.Math,fl=t.Object,hl=t.RegExp,ml=t.String,dl=t.TypeError,pl=ol.prototype,vl=cl.prototype,gl=fl.prototype,yl=t["__core-js_shared__"],bl=vl.toString,wl=gl.hasOwnProperty,Sl=0,kl=function(){var e=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Pl=gl.toString,Al=bl.call(fl),Cl=nn._,_l=hl("^"+bl.call(wl).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ol=sn?t.Buffer:te,El=t.Symbol,Il=t.Uint8Array,Bl=Ol?Ol.allocUnsafe:te,xl=F(fl.getPrototypeOf,fl),Nl=fl.create,jl=gl.propertyIsEnumerable,Rl=pl.splice,Vl=El?El.isConcatSpreadable:te,Tl=El?El.iterator:te,Dl=El?El.toStringTag:te,Ul=function(){try{var e=Oa(fl,"defineProperty");return e({},"",{}),e}catch(e){}}(),Kl=t.clearTimeout!==nn.clearTimeout&&t.clearTimeout,Ml=sl&&sl.now!==nn.Date.now&&sl.now,Hl=t.setTimeout!==nn.setTimeout&&t.setTimeout,Ll=ll.ceil,ql=ll.floor,Fl=fl.getOwnPropertySymbols,Jl=Ol?Ol.isBuffer:te,Wl=t.isFinite,Gl=pl.join,zl=F(fl.keys,fl),$l=ll.max,Yl=ll.min,Zl=sl.now,Xl=t.parseInt,Ql=ll.random,ef=pl.reverse,tf=Oa(t,"DataView"),rf=Oa(t,"Map"),nf=Oa(t,"Promise"),af=Oa(t,"Set"),of=Oa(t,"WeakMap"),sf=Oa(fl,"create"),uf=of&&new of,cf={},lf=no(tf),ff=no(rf),hf=no(nf),mf=no(af),df=no(of),pf=El?El.prototype:te,vf=pf?pf.valueOf:te,gf=pf?pf.toString:te,yf=function(){function e(){}return function(t){if(!uu(t))return{};if(Nl)return Nl(t);e.prototype=t;var r=new e;return e.prototype=te,r}}();g.templateSettings={escape:Ct,evaluate:_t,interpolate:Ot,variable:"",imports:{_:g}},g.prototype=_.prototype,g.prototype.constructor=g,z.prototype=yf(_.prototype),z.prototype.constructor=z,X.prototype=yf(_.prototype),X.prototype.constructor=X,Qt.prototype.clear=er,Qt.prototype.delete=tr,Qt.prototype.get=rr,Qt.prototype.has=nr,Qt.prototype.set=ir,ar.prototype.clear=or,ar.prototype.delete=sr,ar.prototype.get=ur,ar.prototype.has=cr,ar.prototype.set=lr,fr.prototype.clear=hr,fr.prototype.delete=mr,fr.prototype.get=dr,fr.prototype.has=pr,fr.prototype.set=vr,gr.prototype.add=gr.prototype.push=yr,gr.prototype.has=br,wr.prototype.clear=Sr,wr.prototype.delete=kr,wr.prototype.get=Pr,wr.prototype.has=Ar,wr.prototype.set=Cr;var bf=Wi(an),wf=Wi(on,!0),Sf=Gi(),kf=Gi(!0),Pf=uf?function(e,t){return uf.set(e,t),e}:Rc,Af=Ul?function(e,t){return Ul(e,"toString",{configurable:!0,enumerable:!1,value:Nc(t),writable:!0})}:Rc,Cf=ai,_f=Kl||function(e){return nn.clearTimeout(e)},Of=af&&1/W(new af([,-0]))[1]==xe?function(e){return new af(e)}:Mc,Ef=uf?function(e){return uf.get(e)}:Mc,If=Fl?function(e){return null==e?[]:(e=fl(e),c(Fl(e),function(t){return jl.call(e,t)}))}:Fc,Bf=Fl?function(e){for(var t=[];e;)m(t,If(e)),e=xl(e);return t}:Fc,xf=wn;(tf&&xf(new tf(new ArrayBuffer(1)))!=ut||rf&&xf(new rf)!=ze||nf&&xf(nf.resolve())!=Xe||af&&xf(new af)!=tt||of&&xf(new of)!=at)&&(xf=function(e){var t=wn(e),r=t==Ze?e.constructor:te,n=r?no(r):"";if(n)switch(n){case lf:return ut;case ff:return ze;case hf:return Xe;case mf:return tt;case df:return at}return t});var Nf=yl?au:Jc,jf=eo(Pf),Rf=Hl||function(e,t){return nn.setTimeout(e,t)},Vf=eo(Af),Tf=Wa(function(e){var t=[];return Bt.test(e)&&t.push(""),e.replace(xt,function(e,r,n,i){t.push(n?i.replace(Ht,"$1"):r||e)}),t}),Df=ai(function(e,t){return Zs(e)?$r(e,rn(t,1,Zs,!0)):[]}),Uf=ai(function(e,t){var r=Co(t);return Zs(r)&&(r=te),Zs(e)?$r(e,rn(t,1,Zs,!0),Aa(r,2)):[]}),Kf=ai(function(e,t){var r=Co(t);return Zs(r)&&(r=te),Zs(e)?$r(e,rn(t,1,Zs,!0),te,r):[]}),Mf=ai(function(e){var t=h(e,Ai);return t.length&&t[0]===e[0]?_n(t):[]}),Hf=ai(function(e){var t=Co(e),r=h(e,Ai);return t===Co(r)?t=te:r.pop(),r.length&&r[0]===e[0]?_n(r,Aa(t,2)):[]}),Lf=ai(function(e){var t=Co(e),r=h(e,Ai);return t="function"==typeof t?t:te,t&&r.pop(),r.length&&r[0]===e[0]?_n(r,te,t):[]}),qf=ai(Eo),Ff=ba(function(e,t){var r=null==e?0:e.length,n=Dr(e,t);return ti(e,h(t,function(e){return Da(e,r)?+e:e}).sort(Ti)),n}),Jf=ai(function(e){return gi(rn(e,1,Zs,!0))}),Wf=ai(function(e){var t=Co(e);return Zs(t)&&(t=te),gi(rn(e,1,Zs,!0),Aa(t,2))}),Gf=ai(function(e){var t=Co(e);return t="function"==typeof t?t:te,gi(rn(e,1,Zs,!0),te,t)}),zf=ai(function(e,t){return Zs(e)?$r(e,t):[]}),$f=ai(function(e){return ki(c(e,Zs))}),Yf=ai(function(e){var t=Co(e);return Zs(t)&&(t=te),ki(c(e,Zs),Aa(t,2))}),Zf=ai(function(e){var t=Co(e);return t="function"==typeof t?t:te,ki(c(e,Zs),te,t)}),Xf=ai(Yo),Qf=ai(function(e){var t=e.length,r=t>1?e[t-1]:te;return r="function"==typeof r?(e.pop(),r):te,Zo(e,r)}),eh=ba(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return Dr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof X&&Da(r)?(n=n.slice(r,+r+(t?1:0)),n.__actions__.push({func:rs,args:[i],thisArg:te}),new z(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(te),e})):this.thru(i)}),th=Fi(function(e,t,r){wl.call(e,r)?++e[r]:Tr(e,r,1)}),rh=Qi(po),nh=Qi(vo),ih=Fi(function(e,t,r){wl.call(e,r)?e[r].push(t):Tr(e,r,[t])}),ah=ai(function(e,t,r){var n=-1,a="function"==typeof t,o=Ys(e)?ol(e.length):[];return bf(e,function(e){o[++n]=a?i(t,e,r):En(e,t,r)}),o}),oh=Fi(function(e,t,r){Tr(e,r,t)}),sh=Fi(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),uh=ai(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Ua(e,t[0],t[1])?t=[]:r>2&&Ua(t[0],t[1],t[2])&&(t=[t[0]]),
Yn(e,rn(t,1),[])}),ch=Ml||function(){return nn.Date.now()},lh=ai(function(e,t,r){var n=de;if(r.length){var i=J(r,Pa(lh));n|=be}return ha(e,n,t,r,i)}),fh=ai(function(e,t,r){var n=de|pe;if(r.length){var i=J(r,Pa(fh));n|=be}return ha(t,n,e,r,i)}),hh=ai(function(e,t){return Fr(e,1,t)}),mh=ai(function(e,t,r){return Fr(e,Eu(t)||0,r)});Vs.Cache=fr;var dh=Cf(function(e,t){t=1==t.length&&Sh(t[0])?h(t[0],N(Aa())):h(rn(t,1),N(Aa()));var r=t.length;return ai(function(n){for(var a=-1,o=Yl(n.length,r);++a<o;)n[a]=t[a].call(this,n[a]);return i(e,this,n)})}),ph=ai(function(e,t){var r=J(t,Pa(ph));return ha(e,be,te,t,r)}),vh=ai(function(e,t){var r=J(t,Pa(vh));return ha(e,we,te,t,r)}),gh=ba(function(e,t){return ha(e,ke,te,te,te,t)}),yh=ua(kn),bh=ua(function(e,t){return e>=t}),wh=In(function(){return arguments}())?In:function(e){return cu(e)&&wl.call(e,"callee")&&!jl.call(e,"callee")},Sh=ol.isArray,kh=ln?N(ln):Bn,Ph=Jl||Jc,Ah=fn?N(fn):xn,Ch=hn?N(hn):Rn,_h=mn?N(mn):Dn,Oh=dn?N(dn):Un,Eh=pn?N(pn):Kn,Ih=ua(qn),Bh=ua(function(e,t){return e<=t}),xh=Ji(function(e,t){if(qa(t)||Ys(t))return void Hi(t,Fu(t),e);for(var r in t)wl.call(t,r)&&xr(e,r,t[r])}),Nh=Ji(function(e,t){Hi(t,Ju(t),e)}),jh=Ji(function(e,t,r,n){Hi(t,Ju(t),e,n)}),Rh=Ji(function(e,t,r,n){Hi(t,Fu(t),e,n)}),Vh=ba(Dr),Th=ai(function(e){return e.push(te,ma),i(jh,te,e)}),Dh=ai(function(e){return e.push(te,da),i(Lh,te,e)}),Uh=ra(function(e,t,r){e[t]=r},Nc(Rc)),Kh=ra(function(e,t,r){wl.call(e,t)?e[t].push(r):e[t]=[r]},Aa),Mh=ai(En),Hh=Ji(function(e,t,r){Gn(e,t,r)}),Lh=Ji(function(e,t,r,n){Gn(e,t,r,n)}),qh=ba(function(e,t){var r={};if(null==e)return r;var n=!1;t=h(t,function(t){return t=_i(t,e),n||(n=t.length>1),t}),Hi(e,Sa(e),r),n&&(r=Hr(r,ce|le|fe,pa));for(var i=t.length;i--;)yi(r,t[i]);return r}),Fh=ba(function(e,t){return null==e?{}:Zn(e,t)}),Jh=fa(Fu),Wh=fa(Ju),Gh=Yi(function(e,t,r){return t=t.toLowerCase(),e+(r?uc(t):t)}),zh=Yi(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),$h=Yi(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Yh=$i("toLowerCase"),Zh=Yi(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Xh=Yi(function(e,t,r){return e+(r?" ":"")+em(t)}),Qh=Yi(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),em=$i("toUpperCase"),tm=ai(function(e,t){try{return i(e,te,t)}catch(e){return nu(e)?e:new ul(e)}}),rm=ba(function(e,t){return o(t,function(t){t=ro(t),Tr(e,t,lh(e[t],e))}),e}),nm=ea(),im=ea(!0),am=ai(function(e,t){return function(r){return En(r,e,t)}}),om=ai(function(e,t){return function(r){return En(e,r,t)}}),sm=ia(h),um=ia(u),cm=ia(v),lm=sa(),fm=sa(!0),hm=na(function(e,t){return e+t},0),mm=la("ceil"),dm=na(function(e,t){return e/t},1),pm=la("floor"),vm=na(function(e,t){return e*t},1),gm=la("round"),ym=na(function(e,t){return e-t},0);return g.after=Es,g.ary=Is,g.assign=xh,g.assignIn=Nh,g.assignInWith=jh,g.assignWith=Rh,g.at=Vh,g.before=Bs,g.bind=lh,g.bindAll=rm,g.bindKey=fh,g.castArray=qs,g.chain=es,g.chunk=oo,g.compact=so,g.concat=uo,g.cond=Bc,g.conforms=xc,g.constant=Nc,g.countBy=th,g.create=Nu,g.curry=xs,g.curryRight=Ns,g.debounce=js,g.defaults=Th,g.defaultsDeep=Dh,g.defer=hh,g.delay=mh,g.difference=Df,g.differenceBy=Uf,g.differenceWith=Kf,g.drop=co,g.dropRight=lo,g.dropRightWhile=fo,g.dropWhile=ho,g.fill=mo,g.filter=fs,g.flatMap=hs,g.flatMapDeep=ms,g.flatMapDepth=ds,g.flatten=go,g.flattenDeep=yo,g.flattenDepth=bo,g.flip=Rs,g.flow=nm,g.flowRight=im,g.fromPairs=wo,g.functions=Ku,g.functionsIn=Mu,g.groupBy=ih,g.initial=Po,g.intersection=Mf,g.intersectionBy=Hf,g.intersectionWith=Lf,g.invert=Uh,g.invertBy=Kh,g.invokeMap=ah,g.iteratee=Vc,g.keyBy=oh,g.keys=Fu,g.keysIn=Ju,g.map=ys,g.mapKeys=Wu,g.mapValues=Gu,g.matches=Tc,g.matchesProperty=Dc,g.memoize=Vs,g.merge=Hh,g.mergeWith=Lh,g.method=am,g.methodOf=om,g.mixin=Uc,g.negate=Ts,g.nthArg=Hc,g.omit=qh,g.omitBy=zu,g.once=Ds,g.orderBy=bs,g.over=sm,g.overArgs=dh,g.overEvery=um,g.overSome=cm,g.partial=ph,g.partialRight=vh,g.partition=sh,g.pick=Fh,g.pickBy=$u,g.property=Lc,g.propertyOf=qc,g.pull=qf,g.pullAll=Eo,g.pullAllBy=Io,g.pullAllWith=Bo,g.pullAt=Ff,g.range=lm,g.rangeRight=fm,g.rearg=gh,g.reject=ks,g.remove=xo,g.rest=Us,g.reverse=No,g.sampleSize=As,g.set=Zu,g.setWith=Xu,g.shuffle=Cs,g.slice=jo,g.sortBy=uh,g.sortedUniq=Mo,g.sortedUniqBy=Ho,g.split=bc,g.spread=Ks,g.tail=Lo,g.take=qo,g.takeRight=Fo,g.takeRightWhile=Jo,g.takeWhile=Wo,g.tap=ts,g.throttle=Ms,g.thru=rs,g.toArray=Au,g.toPairs=Jh,g.toPairsIn=Wh,g.toPath=Yc,g.toPlainObject=Iu,g.transform=Qu,g.unary=Hs,g.union=Jf,g.unionBy=Wf,g.unionWith=Gf,g.uniq=Go,g.uniqBy=zo,g.uniqWith=$o,g.unset=ec,g.unzip=Yo,g.unzipWith=Zo,g.update=tc,g.updateWith=rc,g.values=nc,g.valuesIn=ic,g.without=zf,g.words=Ic,g.wrap=Ls,g.xor=$f,g.xorBy=Yf,g.xorWith=Zf,g.zip=Xf,g.zipObject=Xo,g.zipObjectDeep=Qo,g.zipWith=Qf,g.entries=Jh,g.entriesIn=Wh,g.extend=Nh,g.extendWith=jh,Uc(g,g),g.add=hm,g.attempt=tm,g.camelCase=Gh,g.capitalize=uc,g.ceil=mm,g.clamp=ac,g.clone=Fs,g.cloneDeep=Ws,g.cloneDeepWith=Gs,g.cloneWith=Js,g.conformsTo=zs,g.deburr=cc,g.defaultTo=jc,g.divide=dm,g.endsWith=lc,g.eq=$s,g.escape=fc,g.escapeRegExp=hc,g.every=ls,g.find=rh,g.findIndex=po,g.findKey=ju,g.findLast=nh,g.findLastIndex=vo,g.findLastKey=Ru,g.floor=pm,g.forEach=ps,g.forEachRight=vs,g.forIn=Vu,g.forInRight=Tu,g.forOwn=Du,g.forOwnRight=Uu,g.get=Hu,g.gt=yh,g.gte=bh,g.has=Lu,g.hasIn=qu,g.head=So,g.identity=Rc,g.includes=gs,g.indexOf=ko,g.inRange=oc,g.invoke=Mh,g.isArguments=wh,g.isArray=Sh,g.isArrayBuffer=kh,g.isArrayLike=Ys,g.isArrayLikeObject=Zs,g.isBoolean=Xs,g.isBuffer=Ph,g.isDate=Ah,g.isElement=Qs,g.isEmpty=eu,g.isEqual=tu,g.isEqualWith=ru,g.isError=nu,g.isFinite=iu,g.isFunction=au,g.isInteger=ou,g.isLength=su,g.isMap=Ch,g.isMatch=lu,g.isMatchWith=fu,g.isNaN=hu,g.isNative=mu,g.isNil=pu,g.isNull=du,g.isNumber=vu,g.isObject=uu,g.isObjectLike=cu,g.isPlainObject=gu,g.isRegExp=_h,g.isSafeInteger=yu,g.isSet=Oh,g.isString=bu,g.isSymbol=wu,g.isTypedArray=Eh,g.isUndefined=Su,g.isWeakMap=ku,g.isWeakSet=Pu,g.join=Ao,g.kebabCase=zh,g.last=Co,g.lastIndexOf=_o,g.lowerCase=$h,g.lowerFirst=Yh,g.lt=Ih,g.lte=Bh,g.max=Xc,g.maxBy=Qc,g.mean=el,g.meanBy=tl,g.min=rl,g.minBy=nl,g.stubArray=Fc,g.stubFalse=Jc,g.stubObject=Wc,g.stubString=Gc,g.stubTrue=zc,g.multiply=vm,g.nth=Oo,g.noConflict=Kc,g.noop=Mc,g.now=ch,g.pad=mc,g.padEnd=dc,g.padStart=pc,g.parseInt=vc,g.random=sc,g.reduce=ws,g.reduceRight=Ss,g.repeat=gc,g.replace=yc,g.result=Yu,g.round=gm,g.runInContext=e,g.sample=Ps,g.size=_s,g.snakeCase=Zh,g.some=Os,g.sortedIndex=Ro,g.sortedIndexBy=Vo,g.sortedIndexOf=To,g.sortedLastIndex=Do,g.sortedLastIndexBy=Uo,g.sortedLastIndexOf=Ko,g.startCase=Xh,g.startsWith=wc,g.subtract=ym,g.sum=il,g.sumBy=al,g.template=Sc,g.times=$c,g.toFinite=Cu,g.toInteger=_u,g.toLength=Ou,g.toLower=kc,g.toNumber=Eu,g.toSafeInteger=Bu,g.toString=xu,g.toUpper=Pc,g.trim=Ac,g.trimEnd=Cc,g.trimStart=_c,g.truncate=Oc,g.unescape=Ec,g.uniqueId=Zc,g.upperCase=Qh,g.upperFirst=em,g.each=ps,g.eachRight=vs,g.first=So,Uc(g,function(){var e={};return an(g,function(t,r){wl.call(g.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),g.VERSION=re,o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){g[e].placeholder=g}),o(["drop","take"],function(e,t){X.prototype[e]=function(r){r=r===te?1:$l(_u(r),0);var n=this.__filtered__&&!t?new X(this):this.clone();return n.__filtered__?n.__takeCount__=Yl(r,n.__takeCount__):n.__views__.push({size:Yl(r,Ve),type:e+(n.__dir__<0?"Right":"")}),n},X.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==Ee||r==Be;X.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Aa(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),o(["head","last"],function(e,t){var r="take"+(t?"Right":"");X.prototype[e]=function(){return this[r](1).value()[0]}}),o(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");X.prototype[e]=function(){return this.__filtered__?new X(this):this[r](1)}}),X.prototype.compact=function(){return this.filter(Rc)},X.prototype.find=function(e){return this.filter(e).head()},X.prototype.findLast=function(e){return this.reverse().find(e)},X.prototype.invokeMap=ai(function(e,t){return"function"==typeof e?new X(this):this.map(function(r){return En(r,e,t)})}),X.prototype.reject=function(e){return this.filter(Ts(Aa(e)))},X.prototype.slice=function(e,t){e=_u(e);var r=this;return r.__filtered__&&(e>0||t<0)?new X(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==te&&(t=_u(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},X.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},X.prototype.toArray=function(){return this.take(Ve)},an(X.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=g[n?"take"+("last"==t?"Right":""):t],a=n||/^find/.test(t);i&&(g.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,s=t instanceof X,u=o[0],c=s||Sh(t),l=function(e){var t=i.apply(g,m([e],o));return n&&f?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(s=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=a&&!f,p=s&&!h;if(!a&&c){t=p?t:new X(this);var v=e.apply(t,o);return v.__actions__.push({func:rs,args:[l],thisArg:te}),new z(v,f)}return d&&p?e.apply(this,o):(v=this.thru(l),d?n?v.value()[0]:v.value():v)})}),o(["pop","push","shift","sort","splice","unshift"],function(e){var t=pl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);g.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Sh(i)?i:[],e)}return this[r](function(r){return t.apply(Sh(r)?r:[],e)})}}),an(X.prototype,function(e,t){var r=g[t];if(r){var n=r.name+"",i=cf[n]||(cf[n]=[]);i.push({name:t,func:r})}}),cf[ta(te,pe).name]=[{name:"wrapper",func:te}],X.prototype.clone=Q,X.prototype.reverse=Mt,X.prototype.value=Xt,g.prototype.at=eh,g.prototype.chain=ns,g.prototype.commit=is,g.prototype.next=as,g.prototype.plant=ss,g.prototype.reverse=us,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=cs,g.prototype.first=g.prototype.head,Tl&&(g.prototype[Tl]=os),g},Sn=wn();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nn._=Sn,define(function(){return Sn})):on?((on.exports=Sn)._=Sn,an._=Sn):nn._=Sn}).call(this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i=r(333),a=r(335),o=r(339),s="/consent",u="/",c="/plugins",l="/card-readers",f=function(){function e(e,t){this.url=e,this.connection=t}return e.cardInsertedFilter=function(e){return{"card-inserted":e}},e.platformInfo=function(){return{data:{manufacturer:i.manufacturer||"",browser:{name:i.name,version:i.version},os:{name:i.os.family,version:i.os.version,architecture:i.os.architecture},ua:i.ua},success:!0}},e.prototype.getConsent=function(e,t,r,n,i,a,u,c){if(!e||!e.length)return o.ResponseHandler.error({status:400,description:"Title is required!",code:"801"},c);if(!t||!t.length)return o.ResponseHandler.error({status:400,description:"Code word is required!",code:"801"},c);var l=this.connection.cfg.defaultConsentDuration;r&&(l=r);var f=this.connection.cfg.defaultConsentTimeout;return u&&(f=u),this.connection.post(this.url,s,{title:e,text:t,days:l,alert_level:n,alert_position:i,type:a,timeout:f},void 0,c)},e.prototype.info=function(e){return this.connection.getSkipCitrix(this.url,u,void 0,e)},e.prototype.infoBrowser=function(t){return t?void t(null,e.platformInfo()):a.Promise.resolve(e.platformInfo())},e.prototype.plugins=function(e){return this.connection.getSkipCitrix(this.url,c,void 0,e)},e.prototype.pollCardInserted=function(e,t,r,i,o){function s(e,a){n.delay(function(){--u,c.readers(function(c,l){if(c&&(r&&r(),s(e,a)),0===u){if(o)return o();a&&a({success:!1,message:"Timed out"})}else if(0===l.data.length)r&&r(),s(e,a);else{var f=n.find(l.data,function(e){return n.has(e,"card")});null!=f?(t(null,f),e(f)):(i&&i(),s(e,a))}})},1e3)}var u=e||30,c=this;return t&&"function"==typeof t||(t=function(){}),new a.Promise(function(e,t){s(e,t)})},e.prototype.pollReadersWithCards=function(e,t,r,i,o){function s(e,a){n.delay(function(){--u,c.readers(function(c,l){if(c&&(r&&r(),s(e,a)),0===u){if(o)return o();a&&a({success:!1,message:"Timed out"})}else if(n.isEmpty(l)||n.isEmpty(l.data))r&&r(),s(e,a);else{var f=n.filter(l.data,function(e){return n.has(e,"card")});if(f.length){var h={data:f,success:!0};t(null,h),e(h)}else i&&i(),s(e,a)}})},1e3)}var u=e||30,c=this;return t&&"function"==typeof t||(t=function(){}),new a.Promise(function(e,t){s(e,t)})},e.prototype.pollReaders=function(e,t,r,i){function o(e,a){n.delay(function(){--s,u.readers(function(u,c){if(u&&(r&&r(),o(e,a)),0===s){if(i)return i();a&&a({success:!1,message:"Timed out"})}else n.isEmpty(c)||n.isEmpty(c.data)?(r&&r(),o(e,a)):(t(null,c),e(c))})},1e3)}var s=e||30,u=this;return t&&"function"==typeof t||(t=function(){}),new a.Promise(function(e,t){o(e,t)})},e.prototype.reader=function(e,t){return this.connection.get(this.url,l+"/"+e,void 0,t)},e.prototype.readers=function(e){return this.connection.get(this.url,l,void 0,e)},e.prototype.readersCardAvailable=function(t){return this.connection.get(this.url,l,e.cardInsertedFilter(!0),t)},e.prototype.readersCardsUnavailable=function(t){return this.connection.get(this.url,l,e.cardInsertedFilter(!1),t)},e.prototype.infoBrowserSync=function(){return e.platformInfo()},e.prototype.getUrl=function(){return this.url},e.prototype.version=function(){return a.Promise.resolve("v1.8.1")},e}();t.CoreService=f},function(e,t,r){var n;(function(e,i){(function(){"use strict";function a(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t,r){var n={6.4:"10",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),e=u(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").split(" on ")[0])}function s(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=k)for(;++r<n;)t(e[r],r,e);else c(e,t)}function u(e){return e=d(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:a(e)}function c(e,t){for(var r in e)_.call(e,r)&&t(e[r],r,e)}function l(e){return null==e?a(e):O.call(e).slice(8,-1)}function f(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}function h(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var r=null;return s(e,function(n,i){r=t(r,n,i,e)}),r}function d(e){return String(e).replace(/^ +| +$/g,"")}function p(e){function t(t){return m(t,function(t,r){return t||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(e)&&(r.label||r)})}function r(t){return m(t,function(t,r,n){return t||(r[$]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec($)]||RegExp("\\b"+h(n)+"(?:\\b|\\w*\\d)","i").exec(e))&&n})}function n(t){return m(t,function(t,r){return t||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(e)&&(r.label||r)})}function i(t){return m(t,function(t,r){var n=r.pattern||h(r);return!t&&(t=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=o(t,n,r.label||r)),t})}function a(t){return m(t,function(t,r){var n=r.pattern||h(r);return!t&&(t=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),r=r.label||r,t=u(t[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function s(t){return m(t,function(t,r){return t||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function v(){return this.description||""}var b=g,w=e&&"object"==typeof e&&"String"!=l(e);w&&(b=e,e=null);var S=b.navigator||{},k=S.userAgent||"";e||(e=k);var C,_,E=w||A==y,I=w?!!S.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(O.toString()),B="Object",x=w?B:"ScriptBridgingProxyObject",N=w?B:"Environment",j=w&&b.java?"JavaPackage":l(b.java),R=w?B:"RuntimeObject",V=/\bJava/.test(j)&&b.java,T=V&&l(b.environment)==N,D=V?"a":"α",U=V?"b":"β",K=b.document||{},M=b.operamini||b.opera,H=P.test(H=w&&M?M["[[Class]]"]:l(M))?H:M=null,L=e,q=[],F=null,J=e==k,W=J&&M&&"function"==typeof M.version&&M.version(),G=t(["Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),z=n(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),$=a([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=r({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Z=i(["Windows Phone ","Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(G&&(G=[G]),Y&&!$&&($=a([Y])),(C=/\bGoogle TV\b/.exec($))&&($=C[0]),/\bSimulator\b/i.test(e)&&($=($?$+" ":"")+"Simulator"),"Opera Mini"==z&&/\bOPiOS\b/.test(e)&&q.push("running in Turbo/Uncompressed mode"),/^iP/.test($)?(z||(z="Safari"),Z="iOS"+((C=/ OS ([\d_]+)/i.exec(e))?" "+C[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test(Z)?Y&&"Google"!=Y&&(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test($))?(z="Android Browser",Z=/\bAndroid\b/.test(Z)?Z:"Android"):z&&!(C=!/\bMinefield\b|\(Android;/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(z))||(z&&!$&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(C+"/")+8))&&(z=null),(C=$||Y||Z)&&($||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Z))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Z)?Z:C)+" Browser")):Z="Kubuntu",(C=/\((Mobile|Tablet).*?Firefox\b/i.exec(e))&&C[1]&&(Z="Firefox OS",$||($=C[1])),W||(W=s(["(?:Cloud9|CriOS|CrMo|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",h(z),"(?:Firefox|Minefield|NetFront)"])),"iCab"==G&&parseFloat(W)>3?G=["WebKit"]:"Trident"!=G&&(C=/\bOpera\b/.test(z)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&"WebKit"||!G&&/\bMSIE\b/i.test(e)&&("Mac OS"==Z?"Tasman":"Trident"))?G=[C]:/\bPlayStation\b(?! Vita\b)/i.test(z)&&"WebKit"==G&&(G=["NetFront"]),"IE"==z&&(C=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(z+=" Mobile",Z="Windows Phone "+(/\+$/.test(C)?C:C+".x"),q.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(z="IE Mobile",Z="Windows Phone 8+",q.unshift("desktop mode"),W||(W=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=z&&"Trident"==G&&(C=/\brv:([\d.]+)/.exec(e))?(/\bWPDesktop\b/i.test(e)||(z&&q.push("identifying as "+z+(W?" "+W:"")),z="IE"),W=C[1]):"Chrome"!=z&&"IE"==z||!(C=/\bEdge\/([\d.]+)/.exec(e))||(z="Microsoft Edge",W=C[1],G=["Trident"]),J){if(f(b,"global"))if(V&&(C=V.lang.System,L=C.getProperty("os.arch"),Z=Z||C.getProperty("os.name")+" "+C.getProperty("os.version")),E&&f(b,"system")&&(C=[b.system])[0]){Z||(Z=C[0].os||null);try{C[1]=b.require("ringo/engine").version,W=C[1].join("."),z="RingoJS"}catch(e){C[0].global.system==b.system&&(z="Narwhal")}}else"object"==typeof b.process&&(C=b.process)?(z="Node.js",L=C.arch,Z=C.platform,W=/[\d.]+/.exec(C.version)[0]):T&&(z="Rhino");else l(C=b.runtime)==x?(z="Adobe AIR",Z=C.flash.system.Capabilities.os):l(C=b.phantom)==R?(z="PhantomJS",W=(C=C.version||null)&&C.major+"."+C.minor+"."+C.patch):"number"==typeof K.documentMode&&(C=/\bTrident\/(\d+)/i.exec(e))&&(W=[W,K.documentMode],(C=+C[1]+4)!=W[1]&&(q.push("IE "+W[1]+" mode"),G&&(G[1]=""),W[1]=C),W="IE"==z?String(W[1].toFixed(1)):W[0]);Z=Z&&u(Z)}W&&(C=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(W)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(J&&S.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(F=/b/i.test(C)?"beta":"alpha",W=W.replace(RegExp(C+"\\+?$"),"")+("beta"==F?U:D)+(/\d+\+?/.exec(C)||"")),"Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test(Z)?z="Firefox Mobile":"Maxthon"==z&&W?W=W.replace(/\.[\d.]+/,".x"):"Silk"==z?(/\bMobi/i.test(e)||(Z="Android",q.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&q.unshift("accelerated")):/\bXbox\b/i.test($)?(Z=null,"Xbox 360"==$&&/\bIEMobile\b/.test(e)&&q.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||$||/Browser|Mobi/.test(z))||"Windows CE"!=Z&&!/Mobi/i.test(e)?"IE"==z&&J&&null===b.external?q.unshift("platform preview"):(/\bBlackBerry\b/.test($)||/\bBB10\b/.test(e))&&(C=(RegExp($.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||W)?(C=[C,/BB10/.test(e)],Z=(C[1]?($=null,Y="BlackBerry"):"Device Software")+" "+C[0],W=null):this!=c&&"Wii"!=$&&(J&&M||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test(Z)||"IE"==z&&(Z&&!/^Win/.test(Z)&&W>5.5||/\bWindows XP\b/.test(Z)&&W>8||8==W&&!/\bTrident\b/.test(e)))&&!P.test(C=p.call(c,e.replace(P,"")+";"))&&C.name&&(C="ing as "+C.name+((C=C.version)?" "+C:""),P.test(z)?(/\bIE\b/.test(C)&&"Mac OS"==Z&&(Z=null),C="identify"+C):(C="mask"+C,z=H?u(H.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(C)&&(Z=null),J||(W=null)),G=["Presto"],q.push(C)):z+=" Mobile",(C=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(C=[parseFloat(C.replace(/\.(\d)$/,".0$1")),C],"Safari"==z&&"+"==C[1].slice(-1)?(z="WebKit Nightly",F="alpha",W=C[1].slice(0,-1)):W!=C[1]&&W!=(C[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(W=null),C[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==C[0]&&537.36==C[2]&&parseFloat(C[1])>=28&&"IE"!=z&&"Microsoft Edge"!=z&&(G=["Blink"]),J&&(I||C[1])?(G&&(G[1]="like Chrome"),C=C[1]||(C=C[0],C<530?1:C<532?2:C<532.05?3:C<533?4:C<534.03?5:C<534.07?6:C<534.1?7:C<534.13?8:C<534.16?9:C<534.24?10:C<534.3?11:C<535.01?12:C<535.02?"13+":C<535.07?15:C<535.11?16:C<535.19?17:C<536.05?18:C<536.1?19:C<537.01?20:C<537.11?"21+":C<537.13?23:C<537.18?24:C<537.24?25:C<537.36?26:"Blink"!=G?"27":"28")):(G&&(G[1]="like Safari"),C=C[0],C=C<400?1:C<500?2:C<526?3:C<533?4:C<534?"4+":C<535?5:C<537?6:C<538?7:C<601?8:"8"),G&&(G[1]+=" "+(C+="number"==typeof C?".x":/[.+]/.test(C)?"":"+")),"Safari"==z&&(!W||parseInt(W)>45)&&(W=C)),"Opera"==z&&(C=/\bzbov|zvav$/.exec(Z))?(z+=" ",q.unshift("desktop mode"),"zvav"==C?(z+="Mini",W=null):z+="Mobile",Z=Z.replace(RegExp(" *"+C+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(G&&G[1])&&(q.unshift("desktop mode"),z="Chrome Mobile",W=null,/\bOS X\b/.test(Z)?(Y="Apple",Z="iOS 4.3+"):Z=null),W&&0==W.indexOf(C=/[\d.]+$/.exec(Z))&&e.indexOf("/"+C+"-")>-1&&(Z=d(Z.replace(C,""))),G&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(z)&&G[1])&&(C=G[G.length-1])&&q.push(C),q.length&&(q=["("+q.join("; ")+")"]),Y&&$&&$.indexOf(Y)<0&&q.push("on "+Y),$&&q.push((/^on /.test(q[q.length-1])?"":"on ")+$),Z&&(C=/ ([\d.+]+)$/.exec(Z),_=C&&"/"==Z.charAt(Z.length-C[0].length-1),Z={architecture:32,family:C&&!_?Z.replace(C[0],""):Z,version:C?C[1]:null,toString:function(){var e=this.version;return this.family+(e&&!_?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(C=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(L))&&!/\bi686\b/i.test(L)&&(Z&&(Z.architecture=64,Z.family=Z.family.replace(RegExp(" *"+C),"")),z&&(/\bWOW64\b/i.test(e)||J&&/\w(?:86|32)$/.test(S.cpuClass||S.platform)&&!/\bWin64; x64\b/i.test(e))&&q.unshift("32-bit")),e||(e=null);var X={};return X.description=e,X.layout=G&&G[0],X.manufacturer=Y,X.name=z,X.prerelease=F,X.product=$,X.ua=e,X.version=z&&W,X.os=Z||{architecture:null,family:null,version:null,toString:function(){return"null"}},X.parse=p,X.toString=v,X.version&&q.unshift(W),X.name&&q.unshift(z),Z&&z&&(Z!=String(Z).split(" ")[0]||Z!=z.split(" ")[0]&&!$)&&q.push($?"("+Z+")":"on "+Z),q.length&&(X.description=q.join(" ")),X}var v={function:!0,object:!0},g=v[typeof window]&&window||this,y=g,b=v[typeof t]&&t,w=v[typeof e]&&e&&!e.nodeType&&e,S=b&&w&&"object"==typeof i&&i;!S||S.global!==S&&S.window!==S&&S.self!==S||(g=S);var k=Math.pow(2,53)-1,P=/\bOpera/,A=this,C=Object.prototype,_=C.hasOwnProperty,O=C.toString;n=function(){return p()}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}).call(this)}).call(t,r(334)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){var n;(function(e,i,a){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function u(e){Y=e}function c(e){ee=e}function l(){return function(){e.nextTick(p)}}function f(){return function(){$(p)}}function h(){var e=0,t=new ne(p),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function m(){var e=new MessageChannel;return e.port1.onmessage=p,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(p,1)}}function p(){for(var e=0;e<Q;e+=2){var t=oe[e],r=oe[e+1];t(r),oe[e]=void 0,oe[e+1]=void 0}Q=0}function v(){try{var e=r(337);return $=e.runOnLoop||e.runOnContext,f()}catch(e){return d()}}function g(e,t){var r=this,n=new this.constructor(b);void 0===n[ce]&&U(n);var i=r._state;if(i){var a=arguments[i-1];ee(function(){V(i,n,a,r._result)})}else x(r,n,e,t);return n}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(b);return O(r,e),r}function b(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function S(){return new TypeError("A promises callback cannot return that same promise.")}function k(e){try{return e.then}catch(e){return me.error=e,me}}function P(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function A(e,t,r){ee(function(e){var n=!1,i=P(r,t,function(r){n||(n=!0,t!==r?O(e,r):I(e,r))},function(t){n||(n=!0,B(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,B(e,i))},e)}function C(e,t){t._state===fe?I(e,t._result):t._state===he?B(e,t._result):x(t,void 0,function(t){O(e,t)},function(t){B(e,t)})}function _(e,t,r){t.constructor===e.constructor&&r===se&&constructor.resolve===ue?C(e,t):r===me?B(e,me.error):void 0===r?I(e,t):s(r)?A(e,t,r):I(e,t)}function O(e,t){e===t?B(e,w()):o(t)?_(e,t,k(t)):I(e,t)}function E(e){e._onerror&&e._onerror(e._result),N(e)}function I(e,t){e._state===le&&(e._result=t,e._state=fe,0!==e._subscribers.length&&ee(N,e))}function B(e,t){e._state===le&&(e._state=he,e._result=t,ee(E,e))}function x(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+fe]=r,i[a+he]=n,0===a&&e._state&&ee(N,e)}function N(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?V(r,n,i,a):i(a);e._subscribers.length=0}}function j(){this.error=null}function R(e,t){try{return e(t)}catch(e){return de.error=e,de}}function V(e,t,r,n){var i,a,o,u,c=s(r);if(c){if(i=R(r,n),i===de?(u=!0,a=i.error,i=null):o=!0,t===i)return void B(t,S())}else i=n,o=!0;t._state!==le||(c&&o?O(t,i):u?B(t,a):e===fe?I(t,i):e===he&&B(t,i))}function T(e,t){try{t(function(t){O(e,t)},function(t){B(e,t)})}catch(t){B(e,t)}}function D(){return pe++}function U(e){e[ce]=pe++,e._state=void 0,e._result=void 0,e._subscribers=[]}function K(e){return new we(this,e).promise}function M(e){var t=this;return new t(X(e)?function(r,n){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(r,n)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,r=new t(b);return B(r,e),r}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[ce]=D(),this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&L(),this instanceof F?T(this,e):q())}function J(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[ce]||U(this.promise),X(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&I(this.promise,this._result))):B(this.promise,W())}function W(){return new Error("Array Methods must be provided an Array")}function G(){var e;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=be)}var z;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var $,Y,Z,X=z,Q=0,ee=function(e,t){oe[Q]=e,oe[Q+1]=t,Q+=2,2===Q&&(Y?Y(p):Z())},te="undefined"!=typeof window?window:void 0,re=te||{},ne=re.MutationObserver||re.WebKitMutationObserver,ie="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ae="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,oe=new Array(1e3);Z=ie?l():ne?h():ae?m():void 0===te?v():d();var se=g,ue=y,ce=Math.random().toString(36).substring(16),le=void 0,fe=1,he=2,me=new j,de=new j,pe=0,ve=K,ge=M,ye=H,be=F;F.all=ve,F.race=ge,F.resolve=ue,F.reject=ye,F._setScheduler=u,F._setAsap=c,F._asap=ee,F.prototype={constructor:F,then:se,catch:function(e){return this.then(null,e)}};var we=J;J.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===le&&r<e;r++)this._eachEntry(t[r],r)},J.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===ue){var i=k(e);if(i===se&&e._state!==le)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===be){var a=new r(b);_(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){t(e)}),t)}else this._willSettleAt(n(e),t)},J.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===le&&(this._remaining--,e===he?B(n,r):this._result[t]=r),0===this._remaining&&I(n,this._result)},J.prototype._willSettleAt=function(e,t){var r=this;x(e,void 0,function(e){r._settledAt(fe,t,e)},function(e){r._settledAt(he,t,e)})};var Se=G,ke={Promise:be,polyfill:Se};r(338).amd?(n=function(){return ke}.call(t,r,t,a),!(void 0!==n&&(a.exports=n))):"undefined"!=typeof a&&a.exports?a.exports=ke:"undefined"!=typeof this&&(this.ES6Promise=ke),
Se()}).call(this)}).call(t,r(336),function(){return this}(),r(334)(e))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){p&&m&&(p=!1,m.length?d=m.concat(d):v=-1,d.length&&s())}function s(){if(!p){var e=i(o);p=!0;for(var t=d.length;t;){for(m=d,d=[];++v<t;)m&&m[v].run();v=-1,t=d.length}m=null,p=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var m,d=[],p=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||p||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=function(){function e(){}return e.error=function(e,t){return t&&"function"==typeof t&&t(e,null),n.Promise.reject(e)},e.response=function(e,t){return t&&"function"==typeof t&&t(null,e),n.Promise.resolve(e)},e}();t.ResponseHandler=i},function(e,t,r){"use strict";function n(e,t,r,n,i,a,s,l,m){if(l&&"function"==typeof l||(l=function(){}),m||!n.citrix||n.agentPort!==-1){var d={url:c.UrlUtil.create(e,t,n,m),method:r,headers:{"Accept-Language":"en-US"},responseType:"json"};return a&&(d.data=a),s&&(d.params=s),n.apiKey&&(d.headers.apikey=n.apiKey),n.jwt&&(d.headers.Authorization="Bearer "+n.jwt),n.tokenCompatible&&i&&(d.headers[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),new u.Promise(function(e,t){o.default.request(d).then(function(t){return l(null,t.data),e(t.data)}).catch(function(e){return e.response?e.response.data?(l(e.response.data,null),t(e.response.data)):(l(e.response,null),t(e.response)):(l(e,null),t(e))})})}var p={description:"Running in Citrix environment but no Agent port was defined in config.",status:400,code:"801"};return l(p,null),u.Promise.reject(p)}function i(e,t,r,n,i,a,s){if(s&&"function"==typeof s||(s=function(){}),n.citrix&&n.agentPort===-1){var f={description:"Running in Citrix environment but no Agent port was defined in config.",status:400,code:"801"};return s(f,null),u.Promise.reject(f)}var m={url:c.UrlUtil.create(e,t,n,!0),method:r,headers:(d={"Accept-Language":"en-US","X-Consumer-Username":"testorg.testapp.v1"},d[h.AUTH_TOKEN_HEADER]=l.get(h.BROWSER_AUTH_TOKEN),d),responseType:"json"};return i&&(m.data=i),a&&(m.params=a),n.jwt&&(m.headers.Authorization="Bearer "+n.jwt),new u.Promise(function(e,t){o.default.request(m).then(function(t){return s(null,t.data),e(t.data)}).catch(function(e){return e.response?(s(e.response,null),t(e.response)):(s(e,null),t(e))})});var d}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(341),s=r(331),u=r(335),c=r(366),l=r(368),f=r(371),h=function(){function e(e){this.cfg=e}return e.prototype.get=function(t,r,i,a){return n(t,r,"GET",this.cfg,e.SHOULD_SEND_TOKEN,void 0,i,a)},e.prototype.post=function(t,r,i,a,o){return n(t,r,"POST",this.cfg,e.SHOULD_SEND_TOKEN,i,a,o)},e.prototype.put=function(t,r,i,a,o){return n(t,r,"PUT",this.cfg,e.SHOULD_SEND_TOKEN,i,a,o)},e.prototype.delete=function(t,r,i,a){return n(t,r,"DELETE",this.cfg,e.SHOULD_SEND_TOKEN,void 0,i,a)},e}();h.AUTH_TOKEN_HEADER="X-Authentication-Token",h.BROWSER_AUTH_TOKEN="t1c-js-browser-id-token",h.SHOULD_SEND_TOKEN=!0,t.GenericConnection=h;var m=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r}return a(t,e),t.prototype.get=function(e,t,r,i){var a=s.omit(this.cfg,"apiKey");return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i)},t.prototype.getSkipCitrix=function(e,t,r,i){var a=s.omit(this.cfg,"apiKey");return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t.prototype.post=function(e,t,r,i,a){var o=s.omit(this.cfg,"apiKey");return n(e,t,"POST",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.put=function(e,t,r,i,a){var o=s.omit(this.cfg,"apiKey");return n(e,t,"PUT",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.delete=function(e,t,r,i){var a=s.omit(this.cfg,"apiKey");return n(e,t,"DELETE",a,h.SHOULD_SEND_TOKEN,void 0,r,i)},t}(h);t.LocalAuthConnection=m;var d=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r}return a(t,e),t.prototype.get=function(e,t,r,i){var a=s.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i)},t.prototype.getSkipCitrix=function(e,t,r,i){var a=s.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t.prototype.post=function(e,t,r,i,a){var o=s.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"POST",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.put=function(e,t,r,i,a){var o=s.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"PUT",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.requestFile=function(e,t,r,n){var i=s.omit(this.cfg,["apiKey","jwt"]);return n&&"function"==typeof n||(n=function(){}),new u.Promise(function(a,s){var u={};i.tokenCompatible&&h.SHOULD_SEND_TOKEN&&(u[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),o.default.post(c.UrlUtil.create(e,t,i,!1),r,{responseType:"blob",headers:u}).then(function(e){return n(null,e),a(e)},function(e){return e.response?e.response.data?(n(e.response.data,null),s(e.response.data)):(n(e.response,null),s(e.response)):(n(e,null),s(e))})})},t.prototype.putFile=function(e,t,r,n,i){var a=s.omit(this.cfg,["apiKey","jwt"]);i&&"function"==typeof i||(i=function(){});var l=new FormData;l.append("path",r.path),l.append("file",r.file,r.fileName);var m={"Content-Type":"multipart/form-data"};return a.tokenCompatible&&h.SHOULD_SEND_TOKEN&&(m[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),new u.Promise(function(r,n){o.default.put(c.UrlUtil.create(e,t,a,!1),l,{headers:m}).then(function(e){return i(null,e.data),r(e.data)},function(e){return e.response?e.response.data?(i(e.response.data,null),n(e.response.data)):(i(e.response,null),n(e.response)):(i(e,null),n(e))})})},t.prototype.delete=function(e,t,r,i){var a=s.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"DELETE",a,h.SHOULD_SEND_TOKEN,void 0,r,i)},t}(h);t.LocalConnection=d;var p=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r.SHOULD_SEND_TOKEN=!1,r}return a(t,e),t.prototype.get=function(e,t,r,i){var a=s.omit(this.cfg,"jwt");return n(e,t,"GET",a,this.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t.prototype.post=function(e,t,r,i,a){var o=s.omit(this.cfg,"jwt");return n(e,t,"POST",o,this.SHOULD_SEND_TOKEN,r,i,a,!0)},t.prototype.put=function(e,t,r,i,a){var o=s.omit(this.cfg,"jwt");return n(e,t,"PUT",o,this.SHOULD_SEND_TOKEN,r,i,a,!0)},t.prototype.delete=function(e,t,r,i){var a=s.omit(this.cfg,"jwt");return n(e,t,"DELETE",a,this.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t}(h);t.RemoteConnection=p;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=void 0,t}return a(t,e),t.prototype.get=function(e,t,r,n){return i(e,t,"GET",this.config,void 0,r,n)},t.prototype.post=function(e,t,r,n,a){return i(e,t,"POST",this.config,r,n,a)},t.prototype.put=function(e,t,r,n,a){return i(e,t,"PUT",this.config,r,n,a)},t.prototype.delete=function(e,t,r,n){return i(e,t,"DELETE",this.config,void 0,r,n)},t}(h);t.LocalTestConnection=v},function(e,t,r){e.exports=r(342)},function(e,t,r){"use strict";function n(e){var t=new o(e),r=a(o.prototype.request,t);return i.extend(r,o.prototype,t),i.extend(r,t),r}var i=r(343),a=r(344),o=r(345),s=r(346),u=n(s);u.Axios=o,u.create=function(e){return n(i.merge(s,e))},u.Cancel=r(363),u.CancelToken=r(364),u.isCancel=r(360),u.all=function(e){return Promise.all(e)},u.spread=r(365),e.exports=u,e.exports.default=u},function(e,t,r){"use strict";function n(e){return"[object Array]"===P.call(e)}function i(e){return"[object ArrayBuffer]"===P.call(e)}function a(e){return"undefined"!=typeof FormData&&e instanceof FormData}function o(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return"undefined"==typeof e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===P.call(e)}function h(e){return"[object File]"===P.call(e)}function m(e){return"[object Blob]"===P.call(e)}function d(e){return"[object Function]"===P.call(e)}function p(e){return l(e)&&d(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function w(){function e(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=w(t[r],e):t[r]=e}for(var t={},r=0,n=arguments.length;r<n;r++)b(arguments[r],e);return t}function S(e,t,r){return b(t,function(t,n){r&&"function"==typeof t?e[n]=k(t,r):e[n]=t}),e}var k=r(344),P=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:i,isFormData:a,isArrayBufferView:o,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:h,isBlob:m,isFunction:d,isStream:p,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:b,merge:w,extend:S,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new o,response:new o}}var i=r(346),a=r(343),o=r(357),s=r(358),u=r(361),c=r(362);n.prototype.request=function(e){"string"==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),e=a.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},a.forEach(["delete","get","head"],function(e){n.prototype[e]=function(t,r){return this.request(a.merge(r||{},{method:e,url:t}))}}),a.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(a.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},function(e,t,r){(function(t){"use strict";function n(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function i(){var e;return"undefined"!=typeof XMLHttpRequest?e=r(348):"undefined"!=typeof t&&(e=r(348)),e}var a=r(343),o=r(347),s=/^\)\]\}',?\n/,u={"Content-Type":"application/x-www-form-urlencoded"},c={adapter:i(),transformRequest:[function(e,t){return o(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(s,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(e){c.headers[e]={}}),a.forEach(["post","put","patch"],function(e){c.headers[e]=a.merge(u)}),e.exports=c}).call(t,r(336))},function(e,t,r){"use strict";var n=r(343);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){(function(t){"use strict";var n=r(343),i=r(349),a=r(352),o=r(353),s=r(354),u=r(350),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(355);e.exports=function(e){return new Promise(function(l,f){var h=e.data,m=e.headers;n.isFormData(h)&&delete m["Content-Type"];var d=new XMLHttpRequest,p="onreadystatechange",v=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||s(e.url)||(d=new window.XDomainRequest,p="onload",v=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";m.Authorization="Basic "+c(g+":"+y)}if(d.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[p]=function(){if(d&&(4===d.readyState||v)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?d.response:d.responseText,n={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:t,config:e,request:d};i(l,f,n),d=null}},d.onerror=function(){f(u("Network Error",e)),d=null},d.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),d=null},n.isStandardBrowserEnv()){var b=r(356),w=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;w&&(m[e.xsrfHeaderName]=w)}if("setRequestHeader"in d&&n.forEach(m,function(e,t){"undefined"==typeof h&&"content-type"===t.toLowerCase()?delete m[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(e){if("json"!==d.responseType)throw e}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===h&&(h=null),d.send(h)})}}).call(t,r(336))},function(e,t,r){"use strict";var n=r(350);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r)):e(r)}},function(e,t,r){"use strict";var n=r(351);e.exports=function(e,t,r,i){var a=new Error(e);return n(a,t,r,i)}},function(e,t){"use strict";e.exports=function(e,t,r,n){return e.config=t,r&&(e.code=r),e.response=n,e}},function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=r(343);e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(i.isURLSearchParams(t))a=t.toString();else{var o=[];i.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))}))}),a=o.join("&")}return a&&(e+=(e.indexOf("?")===-1?"?":"&")+a),e}},function(e,t,r){"use strict";var n=r(343);e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t&&(a[t]=a[t]?a[t]+", "+r:r)}),a):a}},function(e,t,r){"use strict";var n=r(343);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(r){var i=n.isString(r)?e(r):r;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function r(){this.message="String contains an invalid character"}function n(e){for(var t,n,a=String(e),o="",s=0,u=i;a.charAt(0|s)||(u="=",s%1);o+=u.charAt(63&t>>8-s%1*8)){if(n=a.charCodeAt(s+=.75),n>255)throw new r;t=t<<8|n}return o}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=n},function(e,t,r){"use strict";var n=r(343);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(a)&&s.push("domain="+a),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,r){"use strict";function n(){this.handlers=[]}var i=r(343);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=r(343),a=r(359),o=r(360),s=r(346);e.exports=function(e){n(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||s.adapter;return t(e).then(function(t){return n(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(n(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(343);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),t(r.reason))})}var i=r(363);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e,t=new n(function(t){e=t});return{token:t,cancel:e}},e.exports=n},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(367),i=function(){function e(){}return e.create=function(e,t,r,i){return r.citrix&&r.agentPort!==-1&&!i?e+n.AgentClient.urlPrefix(r.agentPort)+t:e+t},e}();t.UrlUtil=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.url=e,this.connection=t}return e.urlPrefix=function(t){return e.AGENT_PATH+"/"+t},e.prototype.get=function(t,r){return this.connection.getSkipCitrix(this.url,e.AGENT_PATH,t,r)},e}();r.AGENT_PATH="/agent",t.AgentClient=r},function(e,t,r){(function(t){"use strict";function n(e,t){return 1===arguments.length?i(e):a(e,t)}function i(e){return JSON.parse(l.getItem(e))}function a(e,t){try{return l.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}}function o(e){return l.removeItem(e)}function s(){return l.clear()}var u=r(369),c=r(370),l="localStorage"in t&&t.localStorage?t.localStorage:u;n.set=a,n.get=i,n.remove=o,n.clear=s,n.on=c.on,n.off=c.off,e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){return e in o?o[e]:null}function n(e,t){return o[e]=t,!0}function i(e){var t=e in o;return!!t&&delete o[e]}function a(){return o={},!0}var o={};e.exports={getItem:r,setItem:n,removeItem:i,clear:a}},function(e,t){(function(t){"use strict";function r(){t.addEventListener?t.addEventListener("storage",n,!1):t.attachEvent?t.attachEvent("onstorage",n):t.onstorage=n}function n(e){function r(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var n=o[e.key];n&&n.forEach(r)}function i(e,t){o[e]?o[e].push(t):o[e]=[t],s===!1&&r()}function a(e,t){var r=o[e];r.length>1?r.splice(r.indexOf(t),1):o[e]=[]}var o={},s=!1;e.exports={on:i,off:a}}).call(t,function(){return this}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(372),i=r(368),a=r(373),o=r(331),s=function(){function e(){}return e.get=function(){return e.checkValidFingerprint()},e.checkValidFingerprint=function(){var t;try{t=i.get(e.BROWSER_AUTH_TOKEN_LOCATION)}catch(e){}return t||(t=e.generateFingerprint()),e.validateFingerprint(t)?t:e.generateFingerprint()},e.validateFingerprint=function(e){var t=o.join(o.dropRight(o.split(e,""),2),""),r=t.substr(1,8),n=t+a.fromBase36(r)%97;return n===e},e.generateFingerprint=function(){var t=n(),r=t.substr(1,8),o=t+a.fromBase36(r)%97;return i.set(e.BROWSER_AUTH_TOKEN_LOCATION,o),o},e}();s.BROWSER_AUTH_TOKEN_LOCATION="t1c-js-browser-id-token",t.BrowserFingerprint=s},function(e,t,r){!function(t){"use strict";var r="cuid",n=0,i=4,a=36,o=Math.pow(a,i),s=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},u=function(){return s((Math.random()*o<<0).toString(a),i)},c=function(){return n=n<o?n:0,n++,n-1},l=function(){var e,t="c",r=(new Date).getTime().toString(a),n=l.fingerprint(),o=u()+u();return e=s(c().toString(a),i),t+r+e+n+o};l.slug=function(){var e,t=(new Date).getTime().toString(36),r=l.fingerprint().slice(0,1)+l.fingerprint().slice(-1),n=u().slice(-2);return e=c().toString(36).slice(-4),t.slice(-2)+e+r+n},l.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return l.globalCount=function(){return e},e},l.fingerprint=function(){return s((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+l.globalCount().toString(36),4)},t.register?t.register(r,l):e.exports=l}(this.applitude||this)},function(e,t,r){function n(e,t){i["toBase"+e]=function(e){return i.toAlphabet(e,t)},i["fromBase"+e]=function(e){return i.fromAlphabet(e,t)}}var i=t;i.toAlphabet=function(e,t){var r=t.length,n=[];do n.push(e%r),e=Math.floor(e/r);while(e>0);for(var i=[];n.length;)i.push(t[n.pop()]);return i.join("")},i.fromAlphabet=function(e,t){for(var r,n=t.length,i=0,a=0;e.length;)r=e[e.length-1],e=e.substr(0,e.length-1),a+=Math.pow(n,i)*t.indexOf(r),i++;return a},i.NUMERALS="0123456789",i.LETTERS_LOWERCASE="abcdefghijklmnopqrstuvwxyz",i.LETTERS_UPPERCASE=i.LETTERS_LOWERCASE.toUpperCase(),i.KNOWN_ALPHABETS={};for(var a=2;a<=10;a++)i.KNOWN_ALPHABETS[a]=i.NUMERALS.substr(0,a);for(var a=11;a<=16;a++)i.KNOWN_ALPHABETS[a]=i.NUMERALS+i.LETTERS_LOWERCASE.substr(0,a-10);i.KNOWN_ALPHABETS[36]=i.NUMERALS+i.LETTERS_LOWERCASE,i.KNOWN_ALPHABETS[62]=i.NUMERALS+i.LETTERS_LOWERCASE+i.LETTERS_UPPERCASE,i.KNOWN_ALPHABETS[26]=i.LETTERS_LOWERCASE,i.KNOWN_ALPHABETS[52]=i.LETTERS_LOWERCASE+i.LETTERS_UPPERCASE,i.KNOWN_ALPHABETS[64]=i.LETTERS_UPPERCASE+i.LETTERS_LOWERCASE+i.NUMERALS+"+/",i.KNOWN_ALPHABETS[58]=i.KNOWN_ALPHABETS[62].replace(/[0OlI]/g,""),i.KNOWN_ALPHABETS[32]=i.NUMERALS+i.LETTERS_UPPERCASE.replace(/[ILOU]/g,"");for(var o in i.KNOWN_ALPHABETS)i.KNOWN_ALPHABETS.hasOwnProperty(o)&&n(o,i.KNOWN_ALPHABETS[o]);i.toBase=function(e,t){return i.toAlphabet(e,i.KNOWN_ALPHABETS[t])},i.fromBase=function(e,t){return i.fromAlphabet(e,i.KNOWN_ALPHABETS[t])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i=r(335),a="/activate",o="/sync",s="/",u="?apikey=",c="/security",l="/system/status",f=c+"/jwt/issue",h=c+"/jwt/refresh",m="/download/gcl",d=c+"/keys/public",p="/devices",v=function(){function e(e,t,r){this.url=e,this.connection=t,this.cfg=r}return e.prototype.activationRequest=function(e,t,r){return this.connection.post(this.url,a,{pubKey:e,info:t},void 0,r)},e.prototype.synchronizationRequest=function(e,t,r,n){return this.connection.post(this.url,o,{pubKey:e,info:t,proxy:r},void 0,n)},e.prototype.getUrl=function(){return this.url},e.prototype.getInfo=function(e){return this.connection.get(this.url,l,void 0,e)},e.prototype.getDevice=function(e,t){return this.connection.get(this.url,p+s+e,void 0,t)},e.prototype.getJWT=function(e){function t(t,n){r.connection.get(r.url,f,void 0,function(i,a){if(i){if(e)return e(i,null);n(i)}else{if(a&&a.token&&(r.cfg.jwt=a.token),e)return e(null,a);t(a)}})}var r=this;return e?void t():new i.Promise(function(e,r){t(e,r)})},e.prototype.refreshJWT=function(e){var t=this.cfg.jwt;if(t)return this.connection.post(this.url,h,{originalJWT:t},void 0,e);var r={code:"500",description:"No JWT available",status:412};return e&&e(r,null),i.Promise.reject(r)},e.prototype.getPubKey=function(e){return this.connection.get(this.url,d,void 0,e)},e.prototype.downloadLink=function(e,t){function r(r,i){n.connection.post(n.url,m,e,void 0,function(e,a){if(!e){var o={url:n.cfg.dsUrlBase+a.path+u+n.cfg.apiKey,success:!0};return t?t(null,o):r(o)}return t?t(e,null):void i(e)})}var n=this;return t?void r():new i.Promise(function(e,t){r(e,t)})},e.prototype.register=function(e,t,r){var i=n.merge({uuid:t,version:e.core_version},n.omit(e,"core_version"));return this.connection.put(this.url,p+s+t,i,void 0,r)},e.prototype.sync=function(e,t,r){var i=n.merge({uuid:t,version:e.core_version},n.omit(e,"core_version"));return this.connection.post(this.url,p+s+t,i,void 0,r)},e}();t.DSClient=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="/challenge",n="/certs/validate-chain",i="/system/status",a="/signature/validate",o=function(){function e(e,t){this.url=e,this.connection=t}return e.prototype.getUrl=function(){return this.url},e.prototype.validateSignature=function(e,t){return this.connection.post(this.url,a,e,void 0,t)},e.prototype.getInfo=function(e){return this.connection.get(this.url,i,void 0,e)},e.prototype.getChallenge=function(e,t){return this.connection.get(this.url,r,{digest:e},t)},e.prototype.validateChallengeSignedHash=function(e,t){return this.connection.post(this.url,r,e,void 0,t)},e.prototype.validateCertificateChain=function(e,t){return this.connection.post(this.url,n,e,void 0,t)},e}();t.OCVClient=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(377),i=r(493),a=r(494),o=r(495),s=r(496),u=r(497),c=r(498),l=r(499),f=r(500),h=r(501),m=r(502),d=r(503),p=r(504),v=r(506),g=r(507),y=r(508),b="/plugins/",w=b+"beid",S=b+"luxeid",k=b+"dnie",P=b+"emv",A=b+"file",C=b+"luxtrust",_=b+"mobib",O=b+"ocra",E=b+"aventra",I=b+"oberthur",B=b+"piv",x=b+"pteid",N=b+"pkcs11",j=b+"readerapi",R=function(){function e(e,t){this.url=e,this.connection=t}return e.prototype.createDNIe=function(e){return new h.DNIe(this.url,k,this.connection,e)},e.prototype.createEidBE=function(e){return new i.EidBe(this.url,w,this.connection,e)},e.prototype.createEidLUX=function(e,t){return new a.EidLux(this.url,S,this.connection,e,t)},e.prototype.createEidPT=function(e){return new m.EidPt(this.url,x,this.connection,e)},e.prototype.createEmv=function(e){return new n.EMV(this.url,P,this.connection,e)},e.prototype.createLuxTrust=function(e){return new s.LuxTrust(this.url,C,this.connection,e)},e.prototype.createMobib=function(e){return new o.Mobib(this.url,_,this.connection,e)},e.prototype.createOcra=function(e){return new u.Ocra(this.url,O,this.connection,e)},e.prototype.createAventraNO=function(e){return new c.Aventra(this.url,E,this.connection,e)},e.prototype.createOberthurNO=function(e){return new l.Oberthur(this.url,I,this.connection,e)},e.prototype.createPIV=function(e){return new f.PIV(this.url,B,this.connection,e)},e.prototype.createPKCS11=function(){return new g.PKCS11(this.url,N,this.connection)},e.prototype.createRemoteLoading=function(e){return new d.RemoteLoading(this.url,j,this.connection,e)},e.prototype.createBelfius=function(e){return new p.Belfius(this.url,j,this.connection,e)},e.prototype.createFileExchange=function(){return new v.FileExchange(this.url,A,this.connection)},e.prototype.createDataContainer=function(e){var t=this;return function(){return new y.DataContainer(t.url,e,t.connection,void 0)}},e}();t.PluginFactory=R},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.applicationData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.APPLICATION_DATA),void 0,e)},t.prototype.applications=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.APPLICATIONS),void 0,e)},t.prototype.iccPublicKeyCertificate=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ICC_PUBLIC_KEY_CERT),{aid:e},void 0,r)},t.prototype.issuerPublicKeyCertificate=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ISSUER_PUBLIC_KEY_CERT),{aid:e},void 0,r)},t}(i.GenericPinCard);a.APPLICATIONS="/applications",a.APPLICATION_DATA="/application-data",a.ISSUER_PUBLIC_KEY_CERT="/issuer-public-key-certificate",a.ICC_PUBLIC_KEY_CERT="/icc-public-key-certificate",t.EMV=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(379),a=r(382),o=r(339),s=r(492),u=r(331),c=function(){function e(e,t){this.pin=e,this.pace=t}return e}();t.OptionalPin=c;var l=function(e){function t(t,r,n,i){var a=e.call(this,n,i)||this;return a.algorithm_reference=t,a.data=r,a.pin=n,a.pace=i,a}return n(t,e),t}(c);t.AuthenticateOrSignData=l;var f=function(e){function t(t,r,n){var i=e.call(this,r,n)||this;return i.private_key_reference=t,
i.pin=r,i.pace=n,i}return n(t,e),t}(c);t.VerifyPinData=f;var h=function(){function e(e,t,r){this.puk=e,this.new_pin=t,this.private_key_reference=r}return e}();t.ResetPinData=h;var m=function(){function e(e,t,r){this.baseUrl=e,this.containerUrl=t,this.connection=r}return e.prototype.containerSuffix=function(e){return e&&e.length?this.containerUrl+e:this.containerUrl},e}();t.GenericContainer=m;var d=function(e){function t(t,r,n,i){var a=e.call(this,t,r,n)||this;return a.baseUrl=t,a.containerUrl=r,a.connection=n,a.reader_id=i,a}return n(t,e),t.prototype.containerSuffix=function(e){var t=this.containerUrl;return this.reader_id&&this.reader_id.length&&(t+="/"+this.reader_id),e&&e.length&&(t+=u.startsWith(e,"/")?e:"/"+e),t},t}(m);t.GenericReaderContainer=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allData=function(e,t){var r=s.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(),r.params).then(function(e){return a.CertParser.process(e,r.parseCerts,t)},function(e){return o.ResponseHandler.error(e,t)})},t}(d);t.GenericSmartCard=p;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.verifyPin=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t}(p);v.VERIFY_PIN="/verify-pin",t.GenericPinCard=v;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allAlgoRefsForAuthentication=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.AUTHENTICATE),void 0,e)},t.prototype.allAlgoRefsForSigning=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGN_DATA),void 0,e)},t.prototype.allCerts=function(e,r){var n=s.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),n.params).then(function(e){return a.CertParser.process(e,n.parseCerts,r)},function(e){return o.ResponseHandler.error(e,r)})},t.prototype.authenticate=function(e,r){var n=this;return e.algorithm_reference=e.algorithm_reference.toLocaleLowerCase(),i.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,void 0,r)})},t.prototype.signData=function(e,r){var n=this;return e.algorithm_reference&&(e.algorithm_reference=e.algorithm_reference.toLocaleLowerCase()),i.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,void 0,r)})},t.prototype.getCertificate=function(e,r){var n=this;return n.connection.get(this.baseUrl,n.containerSuffix(t.ALL_CERTIFICATES+e),void 0).then(function(e){return a.CertParser.process(e,r.parseCerts,r.callback)},function(e){return o.ResponseHandler.error(e,r.callback)})},t}(v);g.ALL_CERTIFICATES="/certificates",g.AUTHENTICATE="/authenticate",g.CERT_ROOT="/root",g.CERT_AUTHENTICATION="/authentication",g.CERT_NON_REPUDIATION="/non-repudiation",g.CERT_ISSUER="/issuer",g.CERT_SIGNING="/signing",g.CERT_ENCRYPTION="/encryption",g.CERT_CITIZEN="/citizen",g.CERT_RRN="/rrn",g.SIGN_DATA="/sign",t.GenericCertCard=g;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allAlgoRefsForAuthentication=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.AUTHENTICATE),void 0,e)},t.prototype.allAlgoRefsForSigning=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGN_DATA),void 0,e)},t.prototype.allData=function(e,t,r){var n=s.RequestHandler.determineOptionsWithFilter(e);return this.connection.post(this.baseUrl,this.containerSuffix(),t,n.params).then(function(e){return a.CertParser.process(e,n.parseCerts,r)},function(e){return o.ResponseHandler.error(e,r)})},t.prototype.allCerts=function(e,r,n){var i=s.RequestHandler.determineOptionsWithFilter(e);return this.connection.post(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),r,i.params).then(function(e){return a.CertParser.process(e,i.parseCerts,n)},function(e){return o.ResponseHandler.error(e,n)})},t.prototype.verifyPin=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t.prototype.signData=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,void 0,r)})},t.prototype.authenticate=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,void 0,r)})},t.prototype.getCertificate=function(e,r,n,s){var u=this,c=this;return i.PinEnforcer.check(this.connection,this.reader_id,r).then(function(){return c.connection.post(u.baseUrl,c.containerSuffix(t.ALL_CERTIFICATES+e),r,s)}).then(function(e){return a.CertParser.process(e,n.parseCerts,n.callback)}).catch(function(e){return o.ResponseHandler.error(e,n.callback)})},t.prototype.getCertificateArray=function(e,r,n,s){var u=this,c=this;return i.PinEnforcer.check(this.connection,this.reader_id,r).then(function(){return c.connection.post(u.baseUrl,c.containerSuffix(t.ALL_CERTIFICATES+e),r,s)}).then(function(e){return a.CertParser.process(e,n.parseCerts,n.callback)}).catch(function(e){return o.ResponseHandler.error(e,n.callback)})},t}(d);y.ALL_CERTIFICATES="/certificates",y.AUTHENTICATE="/authenticate",y.CERT_AUTHENTICATION="/authentication",y.CERT_NON_REPUDIATION="/non-repudiation",y.CERT_INTERMEDIATE="/intermediate",y.CERT_ROOT="/root",y.CERT_SIGNING="/signing",y.SIGN_DATA="/sign",y.VERIFY_PIN="/verify-pin",t.GenericSecuredCertCard=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=r(380),a=r(381),o="/card-readers",s=function(){function e(){}return e.check=function(t,r,n){return e.doPinCheck(t,r,n.pin).then(function(){return e.updateBodyWithEncryptedPin(n)})},e.checkEncryptedPin=function(t,r,n){return e.doPinCheck(t,r,n)},e.encryptPin=function(e){if(e&&e.length){var t=a.PubKeyService.getPubKey(),r=new i.JSEncrypt;return r.setKey(t),r.encrypt(e)}},e.doPinCheck=function(e,t,r){return new n.Promise(function(n,i){e.cfg.forceHardwarePinpad?e.get(e.cfg.gclUrl,o+"/"+t,void 0).then(function(e){e.data.pinpad?r?i({data:{message:"Strict pinpad enforcement is enabled. This request was sent with a PIN, but the reader has a pinpad."}}):n():r?n():i({data:{message:"Strict pinpad enforcement is enabled. This request was sent without a PIN, but the reader does not have a pinpad."}})},function(e){i(e)}):n()})},e.updateBodyWithEncryptedPin=function(t){return t.pin=e.encryptPin(t.pin),t},e}();t.PinEnforcer=s},function(e,t,r){var n,i,a;!function(r,o){i=[t],n=o,a="function"==typeof n?n.apply(t,i):n,!(void 0!==a&&(e.exports=a))}(this,function(e){function t(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new t(null)}function n(e,t,r,n,i,a){for(;--a>=0;){var o=t*this[e++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i}function i(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var u=32767&this[e],c=this[e++]>>15,l=s*u+c*o;u=o*u+((32767&l)<<15)+r[n]+(1073741823&i),i=(u>>>30)+(l>>>15)+s*c+(i>>>30),r[n++]=1073741823&u}return i}function a(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var u=16383&this[e],c=this[e++]>>14,l=s*u+c*o;u=o*u+((16383&l)<<14)+r[n]+i,i=(u>>28)+(l>>14)+s*c,r[n++]=268435455&u}return i}function o(e){return Ot.charAt(e)}function s(e,t){var r=Et[e.charCodeAt(t)];return null==r?-1:r}function u(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function c(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function l(e){var t=r();return t.fromInt(e),t}function f(e,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(e,r);n=2}this.t=0,this.s=0;for(var i=e.length,a=!1,o=0;--i>=0;){var u=8==n?255&e[i]:s(e,i);u<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==o?this[this.t++]=u:o+n>this.DB?(this[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this[this.t++]=u>>this.DB-o):this[this.t-1]|=u<<o,o+=n,o>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&t.ZERO.subTo(this,this)}function h(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function m(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",s=this.t,u=this.DB-s*this.DB%t;if(s-- >0)for(u<this.DB&&(r=this[s]>>u)>0&&(i=!0,a=o(r));s>=0;)u<t?(r=(this[s]&(1<<u)-1)<<t-u,r|=this[--s]>>(u+=this.DB-t)):(r=this[s]>>(u-=t)&n,u<=0&&(u+=this.DB,--s)),r>0&&(i=!0),i&&(a+=o(r));return i?a:"0"}function d(){var e=r();return t.ZERO.subTo(this,e),e}function p(){return this.s<0?this.negate():this}function g(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0}function y(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function b(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)}function w(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function S(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function k(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>i|s,s=(this[r]&a)<<n;for(r=o-1;r>=0;--r)t[r]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function P(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)return void(t.t=0);var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&a)<<i,t[o-r]=this[o]>>n;n>0&&(t[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function A(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function C(e,r){var n=this.abs(),i=e.abs(),a=n.t;for(r.t=a+i.t;--a>=0;)r[a]=0;for(a=0;a<i.t;++a)r[a+n.t]=n.am(0,i[a],r,a,0,n.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)}function _(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function O(e,n,i){var a=e.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t)return null!=n&&n.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),u=this.s,c=e.s,l=this.DB-y(a[a.t-1]);l>0?(a.lShiftTo(l,s),o.lShiftTo(l,i)):(a.copyTo(s),o.copyTo(i));var f=s.t,h=s[f-1];if(0!=h){var m=h*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),d=this.FV/m,p=(1<<this.F1)/m,v=1<<this.F2,g=i.t,b=g-f,w=null==n?r():n;for(s.dlShiftTo(b,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),t.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s[s.t++]=0;for(;--b>=0;){var S=i[--g]==h?this.DM:Math.floor(i[g]*d+(i[g-1]+v)*p);if((i[g]+=s.am(0,S,i,b,0,f))<S)for(s.dlShiftTo(b,w),i.subTo(w,i);i[g]<--S;)i.subTo(w,i)}null!=n&&(i.drShiftTo(f,n),u!=c&&t.ZERO.subTo(n,n)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&t.ZERO.subTo(i,i)}}}function E(e){var n=r();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n}function I(e){this.m=e}function B(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function x(e){return e}function N(e){e.divRemTo(this.m,null,e)}function j(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function R(e,t){e.squareTo(t),this.reduce(t)}function V(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function T(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function D(e){var n=r();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(t.ZERO)>0&&this.m.subTo(n,n),n}function U(e){var t=r();return e.copyTo(t),this.reduce(t),t}function K(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function M(e,t){e.squareTo(t),this.reduce(t)}function H(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function L(){return 0==(this.t>0?1&this[0]:this.s)}function q(e,n){if(e>4294967295||e<1)return t.ONE;var i=r(),a=r(),o=n.convert(this),s=y(e)-1;for(o.copyTo(i);--s>=0;)if(n.sqrTo(i,a),(e&1<<s)>0)n.mulTo(a,o,i);else{var u=i;i=a,a=u}return n.revert(i)}function F(e,t){var r;return r=e<256||t.isEven()?new I(t):new T(t),this.exp(e,r)}function J(){var e=r();return this.copyTo(e),e}function W(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function G(){return 0==this.t?this.s:this[0]<<24>>24}function z(){return 0==this.t?this.s:this[0]<<16>>16}function $(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Z(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=l(n),a=r(),o=r(),s="";for(this.divRemTo(i,a,o);a.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,a.divRemTo(i,a,o);return o.intValue().toString(e)+s}function X(e,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),i=Math.pow(r,n),a=!1,o=0,u=0,c=0;c<e.length;++c){var l=s(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(a=!0):(u=r*u+l,++o>=n&&(this.dMultiply(i),this.dAddOffset(u,0),o=0,u=0))}o>0&&(this.dMultiply(Math.pow(r,o)),this.dAddOffset(u,0)),a&&t.ZERO.subTo(this,this)}function Q(e,r,n){if("number"==typeof r)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),se,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var i=new Array,a=7&e;i.length=(e>>3)+1,r.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}}function ee(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function te(e){return 0==this.compareTo(e)}function re(e){return this.compareTo(e)<0?this:e}function ne(e){return this.compareTo(e)>0?this:e}function ie(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function ae(e,t){return e&t}function oe(e){var t=r();return this.bitwiseTo(e,ae,t),t}function se(e,t){return e|t}function ue(e){var t=r();return this.bitwiseTo(e,se,t),t}function ce(e,t){return e^t}function le(e){var t=r();return this.bitwiseTo(e,ce,t),t}function fe(e,t){return e&~t}function he(e){var t=r();return this.bitwiseTo(e,fe,t),t}function me(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function de(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function pe(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ve(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ge(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ve(this[e]);return this.s<0?this.t*this.DB:-1}function ye(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function be(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=ye(this[r]^t);return e}function we(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function Se(e,r){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,r,n),n}function ke(e){return this.changeBit(e,se)}function Pe(e){return this.changeBit(e,fe)}function Ae(e){return this.changeBit(e,ce)}function Ce(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function _e(e){var t=r();return this.addTo(e,t),t}function Oe(e){var t=r();return this.subTo(e,t),t}function Ee(e){var t=r();return this.multiplyTo(e,t),t}function Ie(){var e=r();return this.squareTo(e),e}function Be(e){var t=r();return this.divRemTo(e,t,null),t}function xe(e){var t=r();return this.divRemTo(e,null,t),t}function Ne(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)}function je(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Re(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Ve(){}function Te(e){return e}function De(e,t,r){e.multiplyTo(t,r)}function Ue(e,t){e.squareTo(t)}function Ke(e){return this.exp(e,new Ve)}function Me(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function He(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Le(e){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function qe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t}function Fe(e){return e}function Je(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function We(e,t){e.squareTo(t),this.reduce(t)}function Ge(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function ze(e,t){var n,i,a=e.bitLength(),o=l(1);if(a<=0)return o;n=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new I(t):t.isEven()?new Le(t):new T(t);var s=new Array,u=3,c=n-1,f=(1<<n)-1;if(s[1]=i.convert(this),n>1){var h=r();for(i.sqrTo(s[1],h);u<=f;)s[u]=r(),i.mulTo(h,s[u-2],s[u]),u+=2}var m,d,p=e.t-1,v=!0,g=r();for(a=y(e[p])-1;p>=0;){for(a>=c?m=e[p]>>a-c&f:(m=(e[p]&(1<<a+1)-1)<<c-a,p>0&&(m|=e[p-1]>>this.DB+a-c)),u=n;0==(1&m);)m>>=1,--u;if((a-=u)<0&&(a+=this.DB,--p),v)s[m].copyTo(o),v=!1;else{for(;u>1;)i.sqrTo(o,g),i.sqrTo(g,o),u-=2;u>0?i.sqrTo(o,g):(d=o,o=g,g=d),i.mulTo(g,s[m],o)}for(;p>=0&&0==(e[p]&1<<a);)i.sqrTo(o,g),d=o,o=g,g=d,--a<0&&(a=this.DB-1,--p)}return i.revert(o)}function $e(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function Ye(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function Ze(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;for(var n=e.clone(),i=this.clone(),a=l(1),o=l(0),s=l(0),u=l(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),r?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),r?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),r&&a.subTo(s,a),o.subTo(u,o)):(i.subTo(n,i),r&&s.subTo(a,s),u.subTo(o,u))}return 0!=i.compareTo(t.ONE)?t.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u}function Xe(e){var t,r=this.abs();if(1==r.t&&r[0]<=It[It.length-1]){for(t=0;t<It.length;++t)if(r[0]==It[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<It.length;){for(var n=It[t],i=t+1;i<It.length&&n<Bt;)n*=It[i++];for(n=r.modInt(n);t<i;)if(n%It[t++]==0)return!1}return r.millerRabin(e)}function Qe(e){var n=this.subtract(t.ONE),i=n.getLowestSetBit();if(i<=0)return!1;var a=n.shiftRight(i);e=e+1>>1,e>It.length&&(e=It.length);for(var o=r(),s=0;s<e;++s){o.fromInt(It[Math.floor(Math.random()*It.length)]);var u=o.modPow(a,this);if(0!=u.compareTo(t.ONE)&&0!=u.compareTo(n)){for(var c=1;c++<i&&0!=u.compareTo(n);)if(u=u.modPowInt(2,this),0==u.compareTo(t.ONE))return!1;if(0!=u.compareTo(n))return!1}}return!0}function et(){this.i=0,this.j=0,this.S=new Array}function tt(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function rt(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function nt(){return new et}function it(){if(null==xt){for(xt=nt();jt<Rt;){var e=Math.floor(65536*Math.random());Nt[jt++]=255&e}for(xt.init(Nt),jt=0;jt<Nt.length;++jt)Nt[jt]=0;jt=0}return xt.next()}function at(e){var t;for(t=0;t<e.length;++t)e[t]=it()}function ot(){}function st(e,r){return new t(e,r)}function ut(e,r){if(r<e.length+11)return null;for(var n=new Array,i=e.length-1;i>=0&&r>0;){var a=e.charCodeAt(i--);a<128?n[--r]=a:a>127&&a<2048?(n[--r]=63&a|128,n[--r]=a>>6|192):(n[--r]=63&a|128,n[--r]=a>>6&63|128,n[--r]=a>>12|224)}n[--r]=0;for(var o=new ot,s=new Array;r>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--r]=s[0]}return n[--r]=2,n[--r]=0,new t(n)}function ct(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function lt(e,t){null!=e&&null!=t&&e.length>0&&t.length>0&&(this.n=st(e,16),this.e=parseInt(t,16))}function ft(e){return e.modPowInt(this.e,this.n)}function ht(e){var t=ut(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n}function mt(e,t){for(var r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var a=255&r[n];a<128?i+=String.fromCharCode(a):a>191&&a<224?(i+=String.fromCharCode((31&a)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&a)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}function dt(e,t,r){null!=e&&null!=t&&e.length>0&&t.length>0&&(this.n=st(e,16),this.e=parseInt(t,16),this.d=st(r,16))}function pt(e,t,r,n,i,a,o,s){null!=e&&null!=t&&e.length>0&&t.length>0&&(this.n=st(e,16),this.e=parseInt(t,16),this.d=st(r,16),this.p=st(n,16),this.q=st(i,16),this.dmp1=st(a,16),this.dmq1=st(o,16),this.coeff=st(s,16))}function vt(e,r){var n=new ot,i=e>>1;this.e=parseInt(r,16);for(var a=new t(r,16);;){for(;this.p=new t(e-i,1,n),0!=this.p.subtract(t.ONE).gcd(a).compareTo(t.ONE)||!this.p.isProbablePrime(10););for(;this.q=new t(i,1,n),0!=this.q.subtract(t.ONE).gcd(a).compareTo(t.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var s=this.p.subtract(t.ONE),u=this.q.subtract(t.ONE),c=s.multiply(u);if(0==c.gcd(a).compareTo(t.ONE)){this.n=this.p.multiply(this.q),this.d=a.modInverse(c),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(u),this.coeff=this.q.modInverse(this.p);break}}}function gt(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}function yt(e){var t=st(e,16),r=this.doPrivate(t);return null==r?null:mt(r,this.n.bitLength()+7>>3)}function bt(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=Ut.charAt(r>>6)+Ut.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=Ut.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=Ut.charAt(r>>2)+Ut.charAt((3&r)<<4));(3&n.length)>0;)n+=Kt;return n}function wt(e){var t,r,n="",i=0;for(t=0;t<e.length&&e.charAt(t)!=Kt;++t)v=Ut.indexOf(e.charAt(t)),v<0||(0==i?(n+=o(v>>2),r=3&v,i=1):1==i?(n+=o(r<<2|v>>4),r=15&v,i=2):2==i?(n+=o(r),n+=o(v>>2),r=3&v,i=3):(n+=o(r<<2|v>>4),n+=o(15&v),i=0));return 1==i&&(n+=o(r<<2)),n}var St,kt=0xdeadbeefcafe,Pt=15715070==(16777215&kt);Pt&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=i,St=30):Pt&&"Netscape"!=navigator.appName?(t.prototype.am=n,St=26):(t.prototype.am=a,St=28),t.prototype.DB=St,t.prototype.DM=(1<<St)-1,t.prototype.DV=1<<St;var At=52;t.prototype.FV=Math.pow(2,At),t.prototype.F1=At-St,t.prototype.F2=2*St-At;var Ct,_t,Ot="0123456789abcdefghijklmnopqrstuvwxyz",Et=new Array;for(Ct="0".charCodeAt(0),_t=0;_t<=9;++_t)Et[Ct++]=_t;for(Ct="a".charCodeAt(0),_t=10;_t<36;++_t)Et[Ct++]=_t;for(Ct="A".charCodeAt(0),_t=10;_t<36;++_t)Et[Ct++]=_t;I.prototype.convert=B,I.prototype.revert=x,I.prototype.reduce=N,I.prototype.mulTo=j,I.prototype.sqrTo=R,T.prototype.convert=D,T.prototype.revert=U,T.prototype.reduce=K,T.prototype.mulTo=H,T.prototype.sqrTo=M,t.prototype.copyTo=u,t.prototype.fromInt=c,t.prototype.fromString=f,t.prototype.clamp=h,t.prototype.dlShiftTo=w,t.prototype.drShiftTo=S,t.prototype.lShiftTo=k,t.prototype.rShiftTo=P,t.prototype.subTo=A,t.prototype.multiplyTo=C,t.prototype.squareTo=_,t.prototype.divRemTo=O,t.prototype.invDigit=V,t.prototype.isEven=L,t.prototype.exp=q,t.prototype.toString=m,t.prototype.negate=d,t.prototype.abs=p,t.prototype.compareTo=g,t.prototype.bitLength=b,t.prototype.mod=E,t.prototype.modPowInt=F,t.ZERO=l(0),t.ONE=l(1),Ve.prototype.convert=Te,Ve.prototype.revert=Te,Ve.prototype.mulTo=De,Ve.prototype.sqrTo=Ue,Le.prototype.convert=qe,Le.prototype.revert=Fe,Le.prototype.reduce=Je,Le.prototype.mulTo=Ge,Le.prototype.sqrTo=We;var It=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Bt=(1<<26)/It[It.length-1];t.prototype.chunkSize=$,t.prototype.toRadix=Z,t.prototype.fromRadix=X,t.prototype.fromNumber=Q,t.prototype.bitwiseTo=ie,t.prototype.changeBit=Se,t.prototype.addTo=Ce,t.prototype.dMultiply=je,t.prototype.dAddOffset=Re,t.prototype.multiplyLowerTo=Me,t.prototype.multiplyUpperTo=He,t.prototype.modInt=Ye,t.prototype.millerRabin=Qe,t.prototype.clone=J,t.prototype.intValue=W,t.prototype.byteValue=G,t.prototype.shortValue=z,t.prototype.signum=Y,t.prototype.toByteArray=ee,t.prototype.equals=te,t.prototype.min=re,t.prototype.max=ne,t.prototype.and=oe,t.prototype.or=ue,t.prototype.xor=le,t.prototype.andNot=he,t.prototype.not=me,t.prototype.shiftLeft=de,t.prototype.shiftRight=pe,t.prototype.getLowestSetBit=ge,t.prototype.bitCount=be,t.prototype.testBit=we,t.prototype.setBit=ke,t.prototype.clearBit=Pe,t.prototype.flipBit=Ae,t.prototype.add=_e,t.prototype.subtract=Oe,t.prototype.multiply=Ee,t.prototype.divide=Be,t.prototype.remainder=xe,t.prototype.divideAndRemainder=Ne,t.prototype.modPow=ze,t.prototype.modInverse=Ze,t.prototype.pow=Ke,t.prototype.gcd=$e,t.prototype.isProbablePrime=Xe,t.prototype.square=Ie,et.prototype.init=tt,et.prototype.next=rt;var xt,Nt,jt,Rt=256;if(null==Nt){Nt=new Array,jt=0;var Vt;if(window.crypto&&window.crypto.getRandomValues){var Tt=new Uint32Array(256);for(window.crypto.getRandomValues(Tt),Vt=0;Vt<Tt.length;++Vt)Nt[jt++]=255&Tt[Vt]}var Dt=function(e){if(this.count=this.count||0,this.count>=256||jt>=Rt)return void(window.removeEventListener?window.removeEventListener("mousemove",Dt,!1):window.detachEvent&&window.detachEvent("onmousemove",Dt));try{var t=e.x+e.y;Nt[jt++]=255&t,this.count+=1}catch(e){}};window.addEventListener?window.addEventListener("mousemove",Dt,!1):window.attachEvent&&window.attachEvent("onmousemove",Dt)}ot.prototype.nextBytes=at,ct.prototype.doPublic=ft,ct.prototype.setPublic=lt,ct.prototype.encrypt=ht,ct.prototype.doPrivate=gt,ct.prototype.setPrivate=dt,ct.prototype.setPrivateEx=pt,ct.prototype.generate=vt,ct.prototype.decrypt=yt,function(){var e=function(e,n,i){var a=new ot,o=e>>1;this.e=parseInt(n,16);var s=new t(n,16),u=this,c=function(){var n=function(){if(u.p.compareTo(u.q)<=0){var e=u.p;u.p=u.q,u.q=e}var r=u.p.subtract(t.ONE),n=u.q.subtract(t.ONE),a=r.multiply(n);0==a.gcd(s).compareTo(t.ONE)?(u.n=u.p.multiply(u.q),u.d=s.modInverse(a),u.dmp1=u.d.mod(r),u.dmq1=u.d.mod(n),u.coeff=u.q.modInverse(u.p),setTimeout(function(){i()},0)):setTimeout(c,0)},l=function(){u.q=r(),u.q.fromNumberAsync(o,1,a,function(){u.q.subtract(t.ONE).gcda(s,function(e){0==e.compareTo(t.ONE)&&u.q.isProbablePrime(10)?setTimeout(n,0):setTimeout(l,0)})})},f=function(){u.p=r(),u.p.fromNumberAsync(e-o,1,a,function(){u.p.subtract(t.ONE).gcda(s,function(e){0==e.compareTo(t.ONE)&&u.p.isProbablePrime(10)?setTimeout(l,0):setTimeout(f,0)})})};setTimeout(f,0)};setTimeout(c,0)};ct.prototype.generateAsync=e;var n=function(e,t){var r=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(r.compareTo(n)<0){var i=r;r=n,n=i}var a=r.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return void t(r);a<o&&(o=a),o>0&&(r.rShiftTo(o,r),n.rShiftTo(o,n));var s=function(){(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),(a=n.getLowestSetBit())>0&&n.rShiftTo(a,n),r.compareTo(n)>=0?(r.subTo(n,r),r.rShiftTo(1,r)):(n.subTo(r,n),n.rShiftTo(1,n)),r.signum()>0?setTimeout(s,0):(o>0&&n.lShiftTo(o,n),setTimeout(function(){t(n)},0))};setTimeout(s,10)};t.prototype.gcda=n;var i=function(e,r,n,i){if("number"==typeof r)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),se,this),this.isEven()&&this.dAddOffset(1,0);var a=this,o=function(){a.dAddOffset(2,0),a.bitLength()>e&&a.subTo(t.ONE.shiftLeft(e-1),a),a.isProbablePrime(r)?setTimeout(function(){i()},0):setTimeout(o,0)};setTimeout(o,0)}else{var s=new Array,u=7&e;s.length=(e>>3)+1,r.nextBytes(s),u>0?s[0]&=(1<<u)-1:s[0]=0,this.fromString(s,256)}};t.prototype.fromNumberAsync=i}();var Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kt="=",Mt=Mt||{};Mt.env=Mt.env||{};var Ht=Mt,Lt=Object.prototype,qt="[object Function]",Ft=["toString","valueOf"];
Mt.env.parseUA=function(e){var t,r=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 1==t++?"":"."}))},n=navigator,i={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:n&&n.cajaVersion,secure:!1,os:null},a=e||navigator&&navigator.userAgent,o=window&&window.location,s=o&&o.href;return i.secure=s&&0===s.toLowerCase().indexOf("https"),a&&(/windows|win32/i.test(a)?i.os="windows":/macintosh/i.test(a)?i.os="macintosh":/rhino/i.test(a)&&(i.os="rhino"),/KHTML/.test(a)&&(i.webkit=1),t=a.match(/AppleWebKit\/([^\s]*)/),t&&t[1]&&(i.webkit=r(t[1]),/ Mobile\//.test(a)?(i.mobile="Apple",t=a.match(/OS ([^\s]*)/),t&&t[1]&&(t=r(t[1].replace("_","."))),i.ios=t,i.ipad=i.ipod=i.iphone=0,t=a.match(/iPad|iPod|iPhone/),t&&t[0]&&(i[t[0].toLowerCase()]=i.ios)):(t=a.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),t&&(i.mobile=t[0]),/webOS/.test(a)&&(i.mobile="WebOS",t=a.match(/webOS\/([^\s]*);/),t&&t[1]&&(i.webos=r(t[1]))),/ Android/.test(a)&&(i.mobile="Android",t=a.match(/Android ([^\s]*);/),t&&t[1]&&(i.android=r(t[1])))),t=a.match(/Chrome\/([^\s]*)/),t&&t[1]?i.chrome=r(t[1]):(t=a.match(/AdobeAIR\/([^\s]*)/),t&&(i.air=t[0]))),i.webkit||(t=a.match(/Opera[\s\/]([^\s]*)/),t&&t[1]?(i.opera=r(t[1]),t=a.match(/Version\/([^\s]*)/),t&&t[1]&&(i.opera=r(t[1])),t=a.match(/Opera Mini[^;]*/),t&&(i.mobile=t[0])):(t=a.match(/MSIE\s([^;]*)/),t&&t[1]?i.ie=r(t[1]):(t=a.match(/Gecko\/([^\s]*)/),t&&(i.gecko=1,t=a.match(/rv:([^\s\)]*)/),t&&t[1]&&(i.gecko=r(t[1]))))))),i},Mt.env.ua=Mt.env.parseUA(),Mt.isFunction=function(e){return"function"==typeof e||Lt.toString.apply(e)===qt},Mt._IEEnumFix=Mt.env.ua.ie?function(e,t){var r,n,i;for(r=0;r<Ft.length;r+=1)n=Ft[r],i=t[n],Ht.isFunction(i)&&i!=Lt[n]&&(e[n]=i)}:function(){},Mt.extend=function(e,t,r){if(!t||!e)throw new Error("extend failed, please check that all dependencies are included.");var n,i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Lt.constructor&&(t.prototype.constructor=t),r){for(n in r)Ht.hasOwnProperty(r,n)&&(e.prototype[n]=r[n]);Ht._IEEnumFix(e.prototype,r)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var r=e.toString(16);if("-"!=r.substr(0,1))r.length%2==1?r="0"+r:r.match(/^[0-7]/)||(r="00"+r);else{var n=r.substr(1),i=n.length;i%2==1?i+=1:r.match(/^[0-7]/)||(i+=2);for(var a="",o=0;o<i;o++)a+="f";var s=new t(a,16),u=s.xor(e).add(t.ONE);r=u.toString(16).replace(/^-/,"")}return r},this.getPEMStringFromHex=function(e,t){var r=CryptoJS.enc.Hex.parse(e),n=CryptoJS.enc.Base64.stringify(r),i=n.replace(/(.{64})/g,"$1\r\n");return i=i.replace(/\r\n$/,""),"-----BEGIN "+t+"-----\r\n"+i+"\r\n-----END "+t+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){var e="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+e.length+",v="+this.hV;var t=this.hV.length/2,r=t.toString(16);if(r.length%2==1&&(r="0"+r),t<128)return r;var n=r.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);var i=128+n;return i.toString(16)+r},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.str?this.setString(e.str):"undefined"!=typeof e.hex&&this.setStringHex(e.hex))},Mt.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(e){utc=e.getTime()+6e4*e.getTimezoneOffset();var t=new Date(utc);return t},this.formatDate=function(e,t){var r=this.zeroPadding,n=this.localDateToUTC(e),i=String(n.getFullYear());"utc"==t&&(i=i.substr(2,2));var a=r(String(n.getMonth()+1),2),o=r(String(n.getDate()),2),s=r(String(n.getHours()),2),u=r(String(n.getMinutes()),2),c=r(String(n.getSeconds()),2);return i+a+o+s+u+c+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setByDateValue=function(e,t,r,n,i,a){var o=new Date(Date.UTC(e,t-1,r,n,i,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},Mt.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,"undefined"!=typeof e&&"undefined"!=typeof e.array&&(this.asn1Array=e.array)},Mt.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},Mt.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var r=new t(String(e),10);this.setByBigInteger(r)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.bigint?this.setByBigInteger(e.bigint):"undefined"!=typeof e.int?this.setByInteger(e.int):"undefined"!=typeof e.hex&&this.setValueHex(e.hex))},Mt.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){e=e.replace(/0+$/,"");var t=8-e.length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";for(var n="",r=0;r<e.length-1;r+=8){var i=e.substr(r,8),a=parseInt(i,2).toString(16);1==a.length&&(a="0"+a),n+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)t+=1==e[r]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.hex?this.setHexValueIncludingUnusedBits(e.hex):"undefined"!=typeof e.bin?this.setByBinaryString(e.bin):"undefined"!=typeof e.array&&this.setByBooleanArray(e.array))},Mt.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},Mt.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Mt.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){var r=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",i=new t(e,10),a=i.toString(2),o=7-a.length%7;7==o&&(o=0);for(var s="",u=0;u<o;u++)s+="0";a=s+a;for(var u=0;u<a.length-1;u+=7){var c=a.substr(u,7);u!=a.length-7&&(c="1"+c),n+=r(parseInt(c,2))}return n};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var t="",i=e.split("."),a=40*parseInt(i[0])+parseInt(i[1]);t+=r(a),i.splice(0,2);for(var o=0;o<i.length;o++)t+=n(i[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[e])throw"DERObjectIdentifier oidName undefined: "+e;var t=KJUR.asn1.x509.OID.name2oidList[e];this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.oid?this.setValueOidString(e.oid):"undefined"!=typeof e.hex?this.setValueHex(e.hex):"undefined"!=typeof e.name&&this.setValueName(e.name))},Mt.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},Mt.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},Mt.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},Mt.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},Mt.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},Mt.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},"undefined"!=typeof e&&("undefined"!=typeof e.str?this.setString(e.str):"undefined"!=typeof e.hex?this.setStringHex(e.hex):"undefined"!=typeof e.date&&this.setByDate(e.date))},Mt.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},"undefined"!=typeof e&&("undefined"!=typeof e.str?this.setString(e.str):"undefined"!=typeof e.hex?this.setStringHex(e.hex):"undefined"!=typeof e.date&&this.setByDate(e.date))},Mt.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e+=r.getEncodedHex()}return this.hV=e,this.hV}},Mt.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return e.sort(),this.hV=e.join(""),this.hV}},Mt.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof e&&("undefined"!=typeof e.tag&&(this.hT=e.tag),"undefined"!=typeof e.explicit&&(this.isExplicit=e.explicit),"undefined"!=typeof e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},Mt.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(e){"use strict";var t,r={};r.decode=function(r){var n;if(t===e){var i="0123456789ABCDEF",a=" \f\n\r\t \u2028\u2029";for(t=[],n=0;n<16;++n)t[i.charAt(n)]=n;for(i=i.toLowerCase(),n=10;n<16;++n)t[i.charAt(n)]=n;for(n=0;n<a.length;++n)t[a.charAt(n)]=-1}var o=[],s=0,u=0;for(n=0;n<r.length;++n){var c=r.charAt(n);if("="==c)break;if(c=t[c],c!=-1){if(c===e)throw"Illegal character at offset "+n;s|=c,++u>=2?(o[o.length]=s,s=0,u=0):s<<=4}}if(u)throw"Hex encoding incomplete: 4 bits missing";return o},window.Hex=r}(),function(e){"use strict";var t,r={};r.decode=function(r){var n;if(t===e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="= \f\n\r\t \u2028\u2029";for(t=[],n=0;n<64;++n)t[i.charAt(n)]=n;for(n=0;n<a.length;++n)t[a.charAt(n)]=-1}var o=[],s=0,u=0;for(n=0;n<r.length;++n){var c=r.charAt(n);if("="==c)break;if(c=t[c],c!=-1){if(c===e)throw"Illegal character at offset "+n;s|=c,++u>=4?(o[o.length]=s>>16,o[o.length]=s>>8&255,o[o.length]=255&s,s=0,u=0):s<<=6}}switch(u){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:o[o.length]=s>>10;break;case 3:o[o.length]=s>>16,o[o.length]=s>>8&255}return o},r.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,r.unarmor=function(e){var t=r.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw"RegExp out of sync";e=t[2]}return r.decode(e)},window.Base64=r}(),function(e){"use strict";function t(e,r){e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=r)}function r(e,t,r,n,i){this.stream=e,this.header=t,this.length=r,this.tag=n,this.sub=i}var n=100,i="…",a={tag:function(e,t){var r=document.createElement(e);return r.className=t,r},text:function(e){return document.createTextNode(e)}};t.prototype.get=function(t){if(t===e&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},t.prototype.hexDigits="0123456789ABCDEF",t.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},t.prototype.hexDump=function(e,t,r){for(var n="",i=e;i<t;++i)if(n+=this.hexByte(this.get(i)),r!==!0)switch(15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},t.prototype.parseStringISO=function(e,t){for(var r="",n=e;n<t;++n)r+=String.fromCharCode(this.get(n));return r},t.prototype.parseStringUTF=function(e,t){for(var r="",n=e;n<t;){var i=this.get(n++);r+=i<128?String.fromCharCode(i):i>191&&i<224?String.fromCharCode((31&i)<<6|63&this.get(n++)):String.fromCharCode((15&i)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},t.prototype.parseStringBMP=function(e,t){for(var r="",n=e;n<t;n+=2){var i=this.get(n),a=this.get(n+1);r+=String.fromCharCode((i<<8)+a)}return r},t.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,t.prototype.parseTime=function(e,t){var r=this.parseStringISO(e,t),n=this.reTime.exec(r);return n?(r=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(r+=":"+n[5],n[6]&&(r+=":"+n[6],n[7]&&(r+="."+n[7]))),n[8]&&(r+=" UTC","Z"!=n[8]&&(r+=n[8],n[9]&&(r+=":"+n[9]))),r):"Unrecognized time: "+r},t.prototype.parseInteger=function(e,t){var r=t-e;if(r>4){r<<=3;var n=this.get(e);if(0===n)r-=8;else for(;n<128;)n<<=1,--r;return"("+r+" bit)"}for(var i=0,a=e;a<t;++a)i=i<<8|this.get(a);return i},t.prototype.parseBitString=function(e,t){var r=this.get(e),n=(t-e-1<<3)-r,i="("+n+" bit)";if(n<=20){var a=r;i+=" ";for(var o=t-1;o>e;--o){for(var s=this.get(o),u=a;u<8;++u)i+=s>>u&1?"1":"0";a=0}}return i},t.prototype.parseOctetString=function(e,t){var r=t-e,a="("+r+" byte) ";r>n&&(t=e+n);for(var o=e;o<t;++o)a+=this.hexByte(this.get(o));return r>n&&(a+=i),a},t.prototype.parseOID=function(e,t){for(var r="",n=0,i=0,a=e;a<t;++a){var o=this.get(a);if(n=n<<7|127&o,i+=7,!(128&o)){if(""===r){var s=n<80?n<40?0:1:2;r=s+"."+(n-40*s)}else r+="."+(i>=31?"bigint":n);n=i=0}}return r},r.prototype.typeName=function(){if(this.tag===e)return"unknown";var t=this.tag>>6,r=(this.tag>>5&1,31&this.tag);switch(t){case 0:switch(r){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+r.toString(16)}case 1:return"Application_"+r.toString(16);case 2:return"["+r+"]";case 3:return"Private_"+r.toString(16)}},r.prototype.reSeemsASCII=/^[ -~]+$/,r.prototype.content=function(){if(this.tag===e)return null;var t=this.tag>>6,r=31&this.tag,a=this.posContent(),o=Math.abs(this.length);if(0!==t){if(null!==this.sub)return"("+this.sub.length+" elem)";var s=this.stream.parseStringISO(a,a+Math.min(o,n));return this.reSeemsASCII.test(s)?s.substring(0,2*n)+(s.length>2*n?i:""):this.stream.parseOctetString(a,a+o)}switch(r){case 1:return 0===this.stream.get(a)?"false":"true";case 2:return this.stream.parseInteger(a,a+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(a,a+o);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(a,a+o);case 6:return this.stream.parseOID(a,a+o);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(a,a+o);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(a,a+o);case 30:return this.stream.parseStringBMP(a,a+o);case 23:case 24:return this.stream.parseTime(a,a+o)}return null},r.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},r.prototype.print=function(t){if(t===e&&(t=""),document.writeln(t+this),null!==this.sub){t+="  ";for(var r=0,n=this.sub.length;r<n;++r)this.sub[r].print(t)}},r.prototype.toPrettyString=function(t){t===e&&(t="");var r=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(r+="+"),r+=this.length,32&this.tag?r+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(r+=" (encapsulates)"),r+="\n",null!==this.sub){t+="  ";for(var n=0,i=this.sub.length;n<i;++n)r+=this.sub[n].toPrettyString(t)}return r},r.prototype.toDOM=function(){var e=a.tag("div","node");e.asn1=this;var t=a.tag("div","head"),r=this.typeName().replace(/_/g," ");t.innerHTML=r;var n=this.content();if(null!==n){n=String(n).replace(/</g,"&lt;");var i=a.tag("span","preview");i.appendChild(a.text(n)),t.appendChild(i)}e.appendChild(t),this.node=e,this.head=t;var o=a.tag("div","value");if(r="Offset: "+this.stream.pos+"<br/>",r+="Length: "+this.header+"+",r+=this.length>=0?this.length:-this.length+" (undefined)",32&this.tag?r+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(r+="<br/>(encapsulates)"),null!==n&&(r+="<br/>Value:<br/><b>"+n+"</b>","object"==typeof oids&&6==this.tag)){var s=oids[n];s&&(s.d&&(r+="<br/>"+s.d),s.c&&(r+="<br/>"+s.c),s.w&&(r+="<br/>(warning!)"))}o.innerHTML=r,e.appendChild(o);var u=a.tag("div","sub");if(null!==this.sub)for(var c=0,l=this.sub.length;c<l;++c)u.appendChild(this.sub[c].toDOM());return e.appendChild(u),t.onclick=function(){e.className="node collapsed"==e.className?"node":"node collapsed"},e},r.prototype.posStart=function(){return this.stream.pos},r.prototype.posContent=function(){return this.stream.pos+this.header},r.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},r.prototype.fakeHover=function(e){this.node.className+=" hover",e&&(this.head.className+=" hover")},r.prototype.fakeOut=function(e){var t=/ ?hover/;this.node.className=this.node.className.replace(t,""),e&&(this.head.className=this.head.className.replace(t,""))},r.prototype.toHexDOM_sub=function(e,t,r,n,i){if(!(n>=i)){var o=a.tag("span",t);o.appendChild(a.text(r.hexDump(n,i))),e.appendChild(o)}},r.prototype.toHexDOM=function(t){var r=a.tag("span","hex");if(t===e&&(t=r),this.head.hexNode=r,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},r.asn1=this,r.onmouseover=function(){var e=!t.selected;e&&(t.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(e)},r.onmouseout=function(){var e=t.selected==this.asn1;this.asn1.fakeOut(e),e&&(t.selected=null,this.className="hex")},this.toHexDOM_sub(r,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(r,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)r.appendChild(a.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var n=this.sub[0],i=this.sub[this.sub.length-1];this.toHexDOM_sub(r,"intro",this.stream,this.posContent(),n.posStart());for(var o=0,s=this.sub.length;o<s;++o)r.appendChild(this.sub[o].toHexDOM(t));this.toHexDOM_sub(r,"outro",this.stream,i.posEnd(),this.posEnd())}return r},r.prototype.toHexString=function(e){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},r.decodeLength=function(e){var t=e.get(),r=127&t;if(r==t)return r;if(r>3)throw"Length over 24 bits not supported at position "+(e.pos-1);if(0===r)return-1;t=0;for(var n=0;n<r;++n)t=t<<8|e.get();return t},r.hasContent=function(e,n,i){if(32&e)return!0;if(e<3||e>4)return!1;var a=new t(i);3==e&&a.get();var o=a.get();if(o>>6&1)return!1;try{var s=r.decodeLength(a);return a.pos-i.pos+s==n}catch(e){return!1}},r.decode=function(e){e instanceof t||(e=new t(e,0));var n=new t(e),i=e.get(),a=r.decodeLength(e),o=e.pos-n.pos,s=null;if(r.hasContent(i,a,e)){var u=e.pos;if(3==i&&e.get(),s=[],a>=0){for(var c=u+a;e.pos<c;)s[s.length]=r.decode(e);if(e.pos!=c)throw"Content size is not correct for container starting at offset "+u}else try{for(;;){var l=r.decode(e);if(0===l.tag)break;s[s.length]=l}a=u-e.pos}catch(e){throw"Exception while decoding undefined length content: "+e}}else e.pos+=a;return new r(n,o,a,i,s)},r.test=function(){for(var e=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],n=0,i=e.length;n<i;++n){var a=new t(e[n].value,0),o=r.decodeLength(a);o!=e[n].expected&&document.write("In test["+n+"] expected "+e[n].expected+" got "+o+"\n")}},window.ASN1=r}(),ASN1.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,r=2*this.length;return e.substr(t,r)},ct.prototype.parseKey=function(e){try{var t=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,i=n.test(e)?Hex.decode(e):Base64.unarmor(e),a=ASN1.decode(i);if(3===a.sub.length&&(a=a.sub[2].sub[0]),9===a.sub.length){t=a.sub[1].getHexStringValue(),this.n=st(t,16),r=a.sub[2].getHexStringValue(),this.e=parseInt(r,16);var o=a.sub[3].getHexStringValue();this.d=st(o,16);var s=a.sub[4].getHexStringValue();this.p=st(s,16);var u=a.sub[5].getHexStringValue();this.q=st(u,16);var c=a.sub[6].getHexStringValue();this.dmp1=st(c,16);var l=a.sub[7].getHexStringValue();this.dmq1=st(l,16);var f=a.sub[8].getHexStringValue();this.coeff=st(f,16)}else{if(2!==a.sub.length)return!1;var h=a.sub[1],m=h.sub[0];t=m.sub[0].getHexStringValue(),this.n=st(t,16),r=m.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(e){return!1}},ct.prototype.getPrivateBaseKey=function(){var e={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},t=new KJUR.asn1.DERSequence(e);return t.getEncodedHex()},ct.prototype.getPrivateBaseKeyB64=function(){return bt(this.getPrivateBaseKey())},ct.prototype.getPublicBaseKey=function(){var e={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},t=new KJUR.asn1.DERSequence(e);e={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]};var r=new KJUR.asn1.DERSequence(e);e={hex:"00"+r.getEncodedHex()};var n=new KJUR.asn1.DERBitString(e);e={array:[t,n]};var i=new KJUR.asn1.DERSequence(e);return i.getEncodedHex()},ct.prototype.getPublicBaseKeyB64=function(){return bt(this.getPublicBaseKey())},ct.prototype.wordwrap=function(e,t){if(t=t||64,!e)return e;var r="(.{1,"+t+"})( +|$\n?)|(.{1,"+t+"})";return e.match(RegExp(r,"g")).join("\n")},ct.prototype.getPrivateKey=function(){var e="-----BEGIN RSA PRIVATE KEY-----\n";return e+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",e+="-----END RSA PRIVATE KEY-----"},ct.prototype.getPublicKey=function(){var e="-----BEGIN PUBLIC KEY-----\n";return e+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",e+="-----END PUBLIC KEY-----"},ct.prototype.hasPublicKeyProperty=function(e){return e=e||{},e.hasOwnProperty("n")&&e.hasOwnProperty("e")},ct.prototype.hasPrivateKeyProperty=function(e){return e=e||{},e.hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},ct.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)};var Jt=function(e){ct.call(this),e&&("string"==typeof e?this.parseKey(e):(this.hasPrivateKeyProperty(e)||this.hasPublicKeyProperty(e))&&this.parsePropertiesFrom(e))};Jt.prototype=new ct,Jt.prototype.constructor=Jt;var Wt=function(e){e=e||{},this.default_key_size=parseInt(e.default_key_size)||1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null};Wt.prototype.setKey=function(e){this.log&&this.key,this.key=new Jt(e)},Wt.prototype.setPrivateKey=function(e){this.setKey(e)},Wt.prototype.setPublicKey=function(e){this.setKey(e)},Wt.prototype.decrypt=function(e){try{return this.getKey().decrypt(wt(e))}catch(e){return!1}},Wt.prototype.encrypt=function(e){try{return bt(this.getKey().encrypt(e))}catch(e){return!1}},Wt.prototype.getKey=function(e){if(!this.key){if(this.key=new Jt,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},Wt.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},Wt.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},Wt.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},Wt.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},Wt.version="2.3.1",e.JSEncrypt=Wt})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getPubKey=function(){return e.pubKey},e.setPubKey=function(t){e.pubKey="-----BEGIN PUBLIC KEY-----\n"+t+"\n-----END PUBLIC KEY-----"},e}();t.PubKeyService=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i=r(383),a=r(385),o=r(386),s=r(491),u=r(339),c=function(){function e(){}return e.process=function(t,r,i){if(t&&t.data&&"object"==typeof t.data&&!n.isArray(t.data))n.forEach(t.data,function(i,a){if(a.indexOf("certificate")>-1&&("string"==typeof i&&(t.data[a]={base64:i},e.setParsed(t.data[a],i,r)),n.isArray(i))){var o=[];n.forEach(i,function(t){var n=new s.T1CCertificate(t);e.setParsed(n,t,r),o.push(n)}),t.data[a]=o}});else if(n.isArray(t.data)){var a=[];n.forEach(t.data,function(t){if("string"==typeof t){var n=new s.T1CCertificate(t);e.setParsed(n,t,r),a.push(n)}else{var n=new s.T1CCertificate(t.base64);e.setParsed(n,t.base64,r),a.push(n)}}),t.data=a}else{var o=new s.T1CCertificate(t.data);e.setParsed(o,t.data,r),t.data=o}return u.ResponseHandler.response(t,i)},e.processCert=function(t){var r=a.atob(t),n=e.str2ab(r),s=i.fromBER(n);return new o.Certificate({schema:s.result})},e.str2ab=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return t},e.setParsed=function(t,r,n){n?t.parsed=e.processCert(r):delete t.parsed},e}();t.CertParser=c},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){function n(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}var i=t,a=new S({},Object);if((0,m.checkBufferParams)(new v,e,t,r)===!1)return a.error="Wrong input parameters",{offset:-1,result:a};var o=new Uint8Array(e,t,r);if(0===o.length)return this.error="Zero buffer length",{offset:-1,result:a};var s=a.idBlock.fromBER(e,t,r);if(a.warnings.concat(a.idBlock.warnings),s===-1)return a.error=a.idBlock.error,{offset:-1,result:a};if(t=s,r-=a.idBlock.blockLength,s=a.lenBlock.fromBER(e,t,r),a.warnings.concat(a.lenBlock.warnings),s===-1)return a.error=a.lenBlock.error,{offset:-1,result:a};if(t=s,r-=a.lenBlock.blockLength,a.idBlock.isConstructed===!1&&a.lenBlock.isIndefiniteForm===!0)return a.error="Indefinite length form used for primitive encoding form",{offset:-1,result:a};var u=S;switch(a.idBlock.tagClass){case 1:if(a.idBlock.tagNumber>=37&&a.idBlock.isHexOnly===!1)return a.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:a};switch(a.idBlock.tagNumber){case 0:if(a.idBlock.isConstructed===!0&&a.lenBlock.length>0)return a.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:a};u=O;break;case 1:u=I;break;case 2:u=U;break;case 3:u=T;break;case 4:u=R;break;case 5:u=N;break;case 6:u=L;break;case 10:u=K;break;case 12:u=F;break;case 14:u=he;break;case 15:return a.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:a};case 16:u=B;break;case 17:u=x;break;case 18:u=Z;break;case 19:u=X;break;case 20:u=Q;break;case 21:u=ee;break;case 22:u=te;break;case 23:u=oe;break;case 24:u=se;break;case 25:u=re;break;case 26:u=ne;break;case 27:u=ie;break;case 28:u=z;break;case 29:u=ae;break;case 30:u=W;break;case 31:u=ue;break;case 32:u=ce;break;case 33:u=le;break;case 34:u=fe;break;default:var c=void 0;c=a.idBlock.isConstructed===!0?new C:new P,c.idBlock=a.idBlock,c.lenBlock=a.lenBlock,c.warnings=a.warnings,a=c,s=a.fromBER(e,t,r)}break;case 2:case 3:case 4:default:u=a.idBlock.isConstructed===!0?C:P}return a=n(a,u),s=a.fromBER(e,t,a.lenBlock.isIndefiniteForm===!0?r:a.lenBlock.length),
a.valueBeforeDecode=e.slice(i,i+a.blockLength),{offset:s,result:a}}function s(e){if(0===e.byteLength){var t=new S({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return o(e,0,e.byteLength)}function u(e,t,r){if(r instanceof me){for(var n=!1,i=0;i<r.value.length;i++){var a=u(e,t,r.value[i]);if(a.verified===!0)return{verified:!0,result:e}}if(n===!1){var o={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(o.name=r.name),o}}if(r instanceof de)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var c=r.idBlock.toBER(!1);if(0===c.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};var l=r.idBlock.fromBER(c,0,c.byteLength);if(l===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty("tagClass")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("tagNumber")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("isConstructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly===!0){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var f=new Uint8Array(r.idBlock.valueHex),h=new Uint8Array(t.idBlock.valueHex);if(f.length!==h.length)return{verified:!1,result:e};for(var m=0;m<f.length;m++)if(f[m]!==h[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),r.idBlock.isConstructed===!0){var d=0,p={verified:!1},v=r.valueBlock.value.length;if(v>0&&r.valueBlock.value[0]instanceof pe&&(v=t.valueBlock.value.length),0===v)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var g=!0,y=0;y<r.valueBlock.value.length;y++)g=g&&(r.valueBlock.value[y].optional||!1);return g===!0?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var b=0;b<v;b++)if(b-d>=t.valueBlock.value.length){if(r.valueBlock.value[b].optional===!1){var w={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],w.name=r.name)),w}}else if(r.valueBlock.value[0]instanceof pe){if(p=u(e,t.valueBlock.value[b],r.valueBlock.value[0].value),p.verified===!1){if(r.valueBlock.value[0].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),p;d++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var S={};S="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local===!0?t:e,"undefined"==typeof S[r.valueBlock.value[0].name]&&(S[r.valueBlock.value[0].name]=[]),S[r.valueBlock.value[0].name].push(t.valueBlock.value[b])}}else if(p=u(e,t.valueBlock.value[b-d],r.valueBlock.value[b]),p.verified===!1){if(r.valueBlock.value[b].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),p;d++}if(p.verified===!1){var k={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],k.name=r.name)),k}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var P=s(t.valueBlock.valueHex);if(P.offset===-1){var A={verified:!1,result:P.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],A.name=r.name)),A}return u(e,P.result,r.primitiveSchema)}return{verified:!0,result:e}}function c(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=s(e);return r.offset===-1?{verified:!1,result:r.result}:u(r.result,r.result,t)}function l(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=void 0;var f=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.fromBER=s,t.compareSchema=u,t.verifySchema=c,t.fromJSON=l;var m=r(384),d=(new Uint8Array([0]),[new Uint8Array([1])]),p="0123456789",v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.blockLength=(0,m.getParametersValue)(t,"blockLength",0),this.error=(0,m.getParametersValue)(t,"error",""),this.warnings=(0,m.getParametersValue)(t,"warnings",[]),"valueBeforeDecode"in t?this.valueBeforeDecode=t.valueBeforeDecode.slice(0):this.valueBeforeDecode=new ArrayBuffer(0)}return h(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,m.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),g=function(e){return function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);return 0===n.length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly!==!0?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):e===!0?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),t}(e)},y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"idBlock"in e?(r.isHexOnly=(0,m.getParametersValue)(e.idBlock,"isHexOnly",!1),r.valueHex=(0,m.getParametersValue)(e.idBlock,"valueHex",new ArrayBuffer(0)),r.tagClass=(0,m.getParametersValue)(e.idBlock,"tagClass",-1),r.tagNumber=(0,m.getParametersValue)(e.idBlock,"tagNumber",-1),r.isConstructed=(0,m.getParametersValue)(e.idBlock,"isConstructed",!1)):(r.tagClass=-1,r.tagNumber=-1,r.isConstructed=!1),r}return i(t,e),h(t,[{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,r=void 0,n=void 0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),n=new Uint8Array(r),!e){var i=this.tagNumber;i&=31,t|=i,n[0]=t}return r}if(this.isHexOnly===!1){var a=(0,m.utilToBase)(this.tagNumber,7),o=new Uint8Array(a),s=a.byteLength;if(r=new ArrayBuffer(s+1),n=new Uint8Array(r),n[0]=31|t,!e){for(var u=0;u<s-1;u++)n[u+1]=128|o[u];n[s]=o[s-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r),n[0]=31|t,e===!1){for(var c=new Uint8Array(this.valueHex),l=0;l<c.length-1;l++)n[l+1]=128|c[l];n[this.valueHex.byteLength]=c[c.length-1]}return r}},{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;var i=192&n[0];switch(i){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&n[0]),this.isHexOnly=!1;var a=31&n[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{var o=1;this.valueHex=new ArrayBuffer(255);for(var s=255,u=new Uint8Array(this.valueHex);128&n[o];){if(u[o-1]=127&n[o],o++,o>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(o===s){s+=255;for(var c=new ArrayBuffer(s),l=new Uint8Array(c),f=0;f<u.length;f++)l[f]=u[f];this.valueHex=new ArrayBuffer(s),u=new Uint8Array(this.valueHex)}}this.blockLength=o+1,u[o-1]=127&n[o];for(var h=new ArrayBuffer(o),d=new Uint8Array(h),p=0;p<o;p++)d[p]=u[p];this.valueHex=new ArrayBuffer(o),u=new Uint8Array(this.valueHex),u.set(d),this.blockLength<=9?this.tagNumber=(0,m.utilFromBase)(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),t}(g(v)),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"lenBlock"in e?(r.isIndefiniteForm=(0,m.getParametersValue)(e.lenBlock,"isIndefiniteForm",!1),r.longFormUsed=(0,m.getParametersValue)(e.lenBlock,"longFormUsed",!1),r.length=(0,m.getParametersValue)(e.lenBlock,"length",0)):(r.isIndefiniteForm=!1,r.longFormUsed=!1,r.length=0),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm===!0)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),this.longFormUsed===!1)return this.length=n[0],this.blockLength=1,t+this.blockLength;var i=127&n[0];if(i>8)return this.error="Too big integer",-1;if(i+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var a=new Uint8Array(i),o=0;o<i;o++)a[o]=n[o+1];return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,m.utilFromBase)(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=i+1,t+this.blockLength}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=128),t;if(this.longFormUsed===!0){var n=(0,m.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength+1),e===!0)return t;var i=new Uint8Array(n);r=new Uint8Array(t),r[0]=128|n.byteLength;for(var a=0;a<n.byteLength;a++)r[a+1]=i[a];return t}return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=this.length),t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),t}(v),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),t}(v),S=t.BaseBlock=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;a(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"name"in e&&(i.name=e.name),"optional"in e&&(i.optional=e.optional),"primitiveSchema"in e&&(i.primitiveSchema=e.primitiveSchema),i.idBlock=new y(e),i.lenBlock=new b(e),i.valueBlock=new r(e),i}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=this.idBlock.toBER(e),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var i=this.lenBlock.toBER(e);t=(0,m.utilConcatBuf)(r,i);var a=void 0;if(a=e===!1?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=(0,m.utilConcatBuf)(t,a),this.lenBlock.isIndefiniteForm===!0){var o=new ArrayBuffer(2);if(e===!1){var s=new Uint8Array(o);s[0]=0,s[1]=0}t=(0,m.utilConcatBuf)(t,o)}return t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),t}(v),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!0),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),a=0;a<n.length;a++)i[a]=n[a];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),t}(w),P=t.Primitive=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,k));return r.idBlock.isConstructed=!1,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),t}(S),A=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value=(0,m.getParametersValue)(e,"value",[]),r.isIndefiniteForm=(0,m.getParametersValue)(e,"isIndefiniteForm",!1),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){function n(e,t){return e===!0?1:t}var i=t,a=r;if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var s=new Uint8Array(e,t,r);if(0===s.length)return this.warnings.push("Zero buffer length"),t;for(var u=t;n(this.isIndefiniteForm,r)>0;){var c=o(e,u,r);if(c.offset===-1)return this.error=c.result.error,this.warnings.concat(c.result.warnings),-1;if(u=c.offset,this.blockLength+=c.result.blockLength,r-=c.result.blockLength,this.value.push(c.result),this.isIndefiniteForm===!0&&c.result.constructor.blockName()===O.blockName())break}return this.isIndefiniteForm===!0&&(this.value[this.value.length-1].constructor.blockName()===O.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(i,i+a),u}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,m.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var r=0;r<this.value.length;r++)e.value.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),t}(w),C=t.Constructed=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,A));return r.idBlock.isConstructed=!0,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),t}(S),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),t}(w),O=t.EndOfContent=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_));return r.idBlock.tagClass=1,r.idBlock.tagNumber=0,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),t}(S),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.value=(0,m.getParametersValue)(e,"value",!1),r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e)r.valueHex=e.valueHex.slice(0);else if(r.valueHex=new ArrayBuffer(1),r.value===!0){var i=new Uint8Array(r.valueHex);i[0]=255}return r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.value=0!==n[0],this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),a=0;a<n.length;a++)i[a]=n[a];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),t}(w),I=t.Boolean=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,E));return r.idBlock.tagClass=1,r.idBlock.tagNumber=1,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Boolean"}}]),t}(S),B=t.Sequence=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=16,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Sequence"}}]),t}(C),x=t.Set=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=17,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Set"}}]),t}(C),N=t.Null=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v));return r.idBlock.tagClass=1,r.idBlock.tagNumber=5,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(e===!0)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),t}(S),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isConstructed=(0,m.getParametersValue)(e,"isConstructed",!1),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,r,n){var i=0;if(this.isConstructed===!0){if(this.isHexOnly=!1,i=A.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(var a=0;a<this.value.length;a++){var o=this.value[a].constructor.blockName();if(o===O.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==R.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n),this.blockLength=n;return i}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return A.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return e===!0?t:0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),t}(g(A)),R=t.OctetString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,j));return r.idBlock.tagClass=1,r.idBlock.tagNumber=4,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r):f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n)}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),t}(S),V=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.unusedBits=(0,m.getParametersValue)(e,"unusedBits",0),r.isConstructed=(0,m.getParametersValue)(e,"isConstructed",!1),r.blockLength=r.valueHex.byteLength+1,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(this.isConstructed===!0){if(n=A.prototype.fromBER.call(this,e,t,r),n===-1)return n;for(var i=0;i<this.value.length;i++){var a=this.value[i].constructor.blockName();if(a===O.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(a!==T.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[i].unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[i].unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var s=new Uint8Array(this.valueHex),u=0;u<r-1;u++)s[u]=o[u+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return A.prototype.toBER.call(this,e);if(e===!0)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var i=0;i<this.valueHex.byteLength;i++)n[i+1]=t[i];return r}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),t}(g(A)),T=t.BitString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,V));return r.idBlock.tagClass=1,r.idBlock.tagNumber=3,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,r,n){return 0===n?r:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n))}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),t}(S),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"value"in e&&(r.valueDec=e.value),r}return i(t,e),h(t,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.fromBER(e,t,r);if(i===-1)return i;var a=new Uint8Array(this._valueHex);if(0===a[0]&&0!==(128&a[1])){var o=new ArrayBuffer(this._valueHex.byteLength-1),s=new Uint8Array(o);s.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=o.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var u=new ArrayBuffer(n),c=new Uint8Array(u);c.set(a,n-this._valueHex.byteLength),this._valueHex=u.slice(0)}return i}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!==(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0===(128&t[1]):var i=new ArrayBuffer(this._valueHex.byteLength-1),a=new Uint8Array(i);a.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=i.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,r,n){var i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n);return i===-1?i:(this.blockLength=n,r+n)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),i=new Uint8Array(t),a=n.slice(0),o=a.length-1,s=i.slice(0),u=s.length-1,c=0,l=u<o?o:u,f=0,h=l;h>=0;h--,f++){switch(!0){case f<s.length:c=a[o-f]+s[u-f]+r[0];break;default:c=a[o-f]+r[0]}switch(r[0]=c/10,!0){case f>=a.length:a=(0,m.utilConcatView)(new Uint8Array([c%10]),a);break;default:a[o-f]=c%10}}return r[0]>0&&(a=(0,m.utilConcatView)(r,a)),a.slice(0)}function t(e){if(e>=d.length)for(var t=d.length;t<=e;t++){for(var r=new Uint8Array([0]),n=d[t-1].slice(0),i=n.length-1;i>=0;i--){var a=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=a[0]/10,n[i]=a[0]%10}r[0]>0&&(n=(0,m.utilConcatView)(r,n)),d.push(n)}return d[e]}function r(e,t){for(var r=0,n=new Uint8Array(e),i=new Uint8Array(t),a=n.slice(0),o=a.length-1,s=i.slice(0),u=s.length-1,c=void 0,l=0,f=u;f>=0;f--,l++)switch(c=a[o-l]-s[u-l]-r,!0){case c<0:r=1,a[o-l]=c+10;break;default:r=0,a[o-l]=c}if(r>0)for(var h=o-u+1;h>=0;h--,l++){if(c=a[o-l]-r,!(c<0)){r=0,a[o-l]=c;break}r=1,a[o-l]=c+10}return a.slice()}for(var n=8*this._valueHex.byteLength-1,i=new Uint8Array(8*this._valueHex.byteLength/3),a=0,o=void 0,s=new Uint8Array(this._valueHex),u="",c=!1,l=this._valueHex.byteLength-1;l>=0;l--){
o=s[l];for(var f=0;f<8;f++){if(1===(1&o))switch(a){case n:i=r(t(a),i),u="-";break;default:i=e(i,t(a))}a++,o>>=1}}for(var h=0;h<i.length;h++)i[h]&&(c=!0),c&&(u+=p.charAt(i[h]));return c===!1&&(u+=p.charAt(0)),u}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=m.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,m.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),t}(g(w)),U=t.Integer=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,D));return r.idBlock.tagClass=1,r.idBlock.tagNumber=2,r}return i(t,e),h(t,[{key:"isEqual",value:function(e){return e instanceof t?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,m.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,m.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new t({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,r=new t({valueHex:this.valueBlock.valueHex});return r.valueBlock.fromDER(r.valueBlock.valueHex,0,r.valueBlock.valueHex.byteLength,e),r}}],[{key:"blockName",value:function(){return"Integer"}}]),t}(S),K=t.Enumerated=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=10,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Enumerated"}}]),t}(U),M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.valueDec=(0,m.getParametersValue)(e,"valueDec",-1),r.isFirstSid=(0,m.getParametersValue)(e,"isFirstSid",!1),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var i=new Uint8Array(this.valueHex),a=0;a<r&&(i[a]=127&n[a],this.blockLength++,0!==(128&n[a]));a++);for(var o=new ArrayBuffer(this.blockLength),s=new Uint8Array(o),u=0;u<this.blockLength;u++)s[u]=i[u];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!==(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,m.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.isHexOnly){if(e===!0)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(var i=0;i<this.blockLength-1;i++)r[i]=128|n[i];return r[this.blockLength-1]=n[this.blockLength-1],t}var a=(0,m.utilToBase)(this.valueDec,7);if(0===a.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(a.byteLength),e===!1){var o=new Uint8Array(a);r=new Uint8Array(t);for(var s=0;s<a.byteLength-1;s++)r[s]=128|o[s];r[a.byteLength-1]=o[a.byteLength-1]}return t}},{key:"toString",value:function(){var e="";if(this.isHexOnly===!0)e=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),t}(g(v)),H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.fromString((0,m.getParametersValue)(e,"value","")),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var i=new M;if(n=i.fromBER(e,n,r),n===-1)return this.blockLength=0,this.error=i.error,n;0===this.value.length&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,m.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",i=!1;do if(r=e.indexOf(".",t),n=r===-1?e.substr(t):e.substr(t,r-t),t=r+1,i){var a=this.value[0],o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=[],!1}var s=parseInt(n,10);if(isNaN(s))return!0;a.valueDec=s+o,i=!1}else{var u=new M;if(u.valueDec=parseInt(n,10),isNaN(u.valueDec))return!0;0===this.value.length&&(u.isFirstSid=!0,i=!0),this.value.push(u)}while(r!==-1);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e+="."),t?(n="{"+n+"}",this.value[r].isFirstSid?e="2.{"+n+" - 80}":e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),t}(w),L=t.ObjectIdentifier=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,H));return r.idBlock.tagClass=1,r.idBlock.tagNumber=6,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),t}(S),q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),t}(g(v)),F=t.Utf8String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,q));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=12,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '+e+", using raw string")}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),i=0;i<r;i++)n[i]=t.charCodeAt(i);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),t}(S),J=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),t}(g(v)),W=t.BmpString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,J));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=30,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var i=r[n];r[n]=r[n+1],r[n+1]=i}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,m.utilToBase)(e.charCodeAt(n),8),a=new Uint8Array(i);if(!(a.length>2))for(var o=2-a.length,s=a.length-1;s>=0;s--)r[2*n+s+o]=a[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),t}(S),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),t}(g(v)),z=t.UniversalString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,G));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=28,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,m.utilToBase)(e.charCodeAt(n),8),a=new Uint8Array(i);if(!(a.length>4))for(var o=4-a.length,s=a.length-1;s>=0;s--)r[4*n+s+o]=a[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),t}(S),$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value="",r.isHexOnly=!0,r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),t}(g(v)),Y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,$));return"value"in e&&r.fromString(e.value),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),t}(S),Z=t.NumericString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=18,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"NumericString"}}]),t}(Y),X=t.PrintableString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=19,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"PrintableString"}}]),t}(Y),Q=t.TeletexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=20,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"TeletexString"}}]),t}(Y),ee=t.VideotexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=21,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"VideotexString"}}]),t}(Y),te=t.IA5String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=22,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"IA5String"}}]),t}(Y),re=t.GraphicString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=25,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"GraphicString"}}]),t}(Y),ne=t.VisibleString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=26,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"VisibleString"}}]),t}(Y),ie=t.GeneralString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=27,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"GeneralString"}}]),t}(Y),ae=t.CharacterString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=29,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"CharacterString"}}]),t}(Y),oe=t.UTCTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var i=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)i[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=23,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi,r=t.exec(e);if(null===r)return void(this.error="Wrong input string for convertion");var n=parseInt(r[1],10);n>=50?this.year=1900+n:this.year=2e3+n,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,m.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,m.padNumber)(this.month,2),e[2]=(0,m.padNumber)(this.day,2),e[3]=(0,m.padNumber)(this.hour,2),e[4]=(0,m.padNumber)(this.minute,2),e[5]=(0,m.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),t}(ne),se=t.GeneralizedTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.millisecond=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var i=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)i[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=24,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t=!1,r="",n="",i=0,a=void 0,o=0,s=0;if("Z"===e[e.length-1])r=e.substr(0,e.length-1),t=!0;else{var u=new Number(e[e.length-1]);if(isNaN(u.valueOf()))throw new Error("Wrong input string for convertion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for convertion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for convertion")}else{var c=1,l=r.indexOf("+"),f="";if(l===-1&&(l=r.indexOf("-"),c=-1),l!==-1){if(f=r.substr(l+1),r=r.substr(0,l),2!==f.length&&4!==f.length)throw new Error("Wrong input string for convertion");var h=new Number(f.substr(0,2));if(isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");if(o=c*h,4===f.length){if(h=new Number(f.substr(2,2)),isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");s=c*h}}}var m=r.indexOf(".");if(m===-1&&(m=r.indexOf(",")),m!==-1){var d=new Number("0"+r.substr(m));if(isNaN(d.valueOf()))throw new Error("Wrong input string for convertion");i=d.valueOf(),n=r.substr(0,m)}else n=r;switch(!0){case 8===n.length:if(a=/(\d{4})(\d{2})(\d{2})/gi,m!==-1)throw new Error("Wrong input string for convertion");break;case 10===n.length:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var p=60*i;this.minute=Math.floor(p),p=60*(p-this.minute),this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case 12===n.length:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var v=60*i;this.second=Math.floor(v),v=1e3*(v-this.second),this.millisecond=Math.floor(v)}break;case 14===n.length:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var g=1e3*i;this.millisecond=Math.floor(g)}break;default:throw new Error("Wrong input string for convertion")}var y=a.exec(n);if(null===y)throw new Error("Wrong input string for convertion");for(var b=1;b<y.length;b++)switch(b){case 1:this.year=parseInt(y[b],10);break;case 2:this.month=parseInt(y[b],10);break;case 3:this.day=parseInt(y[b],10);break;case 4:this.hour=parseInt(y[b],10)+o;break;case 5:this.minute=parseInt(y[b],10)+s;break;case 6:this.second=parseInt(y[b],10);break;default:throw new Error("Wrong input string for convertion")}if(t===!1){var w=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=w.getUTCFullYear(),this.month=w.getUTCMonth(),this.day=w.getUTCDay(),this.hour=w.getUTCHours(),this.minute=w.getUTCMinutes(),this.second=w.getUTCSeconds(),this.millisecond=w.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,m.padNumber)(this.year,4)),e.push((0,m.padNumber)(this.month,2)),e.push((0,m.padNumber)(this.day,2)),e.push((0,m.padNumber)(this.hour,2)),e.push((0,m.padNumber)(this.minute,2)),e.push((0,m.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,m.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),t}(ne),ue=t.DATE=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=31,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"DATE"}}]),t}(F),ce=t.TimeOfDay=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=32,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),t}(F),le=t.DateTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=33,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"DateTime"}}]),t}(F),fe=t.Duration=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=34,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Duration"}}]),t}(F),he=t.TIME=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=14,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"TIME"}}]),t}(F),me=t.Choice=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.value=(0,m.getParametersValue)(t,"value",[]),this.optional=(0,m.getParametersValue)(t,"optional",!1)},de=t.Any=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,m.getParametersValue)(t,"name",""),this.optional=(0,m.getParametersValue)(t,"optional",!1)},pe=t.Repeated=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,m.getParametersValue)(t,"name",""),this.optional=(0,m.getParametersValue)(t,"optional",!1),this.value=(0,m.getParametersValue)(t,"value",new de),this.local=(0,m.getParametersValue)(t,"local",!1)};t.RawData=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.data=(0,m.getParametersValue)(t,"data",new ArrayBuffer(0))}return h(e,[{key:"fromBER",value:function(e,t,r){this.data=e.slice(t,r)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data}}]),e}()},function(e,t){"use strict";function r(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function n(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,n="",i=!0,a=!1,o=void 0;try{for(var s,u=new Uint8Array(e,t,r)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.toString(16).toUpperCase();n=n+(1===l.length?"0":"")+l}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return n}function a(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)}function o(e,t){for(var r=0,n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function s(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=r||-1,i=e,a=0,o=Math.pow(2,t),s=1;s<8;s++){if(e<o){var u=void 0;if(n<0)u=new ArrayBuffer(s),a=s;else{if(n<s)return new ArrayBuffer(0);u=new ArrayBuffer(n),a=n}for(var c=new Uint8Array(u),l=s-1;l>=0;l--){var f=Math.pow(2,l*t);c[a-l-1]=Math.floor(i/f),i-=c[a-l-1]*f}return u}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function u(){for(var e=0,t=0,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;e+=l.byteLength}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}var f=new ArrayBuffer(e),h=new Uint8Array(f),m=!0,d=!1,p=void 0;try{for(var v,g=n[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var y=v.value;h.set(new Uint8Array(y),t),t+=y.byteLength}}catch(e){d=!0,p=e}finally{try{!m&&g.return&&g.return()}finally{if(d)throw p}}return f}function c(){for(var e=0,t=0,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;e+=l.length}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}var f=new ArrayBuffer(e),h=new Uint8Array(f),m=!0,d=!1,p=void 0;try{for(var v,g=n[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var y=v.value;h.set(y,t),t+=y.length}}catch(e){d=!0,p=e}finally{try{!m&&g.return&&g.return()}finally{if(d)throw p}}return h}function l(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0===(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(n),a=0;a<this.valueHex.byteLength;a++)i[a]=0;i[0]=128&e[0];for(var s=o(i,8),u=new ArrayBuffer(this.valueHex.byteLength),c=new Uint8Array(u),l=0;l<this.valueHex.byteLength;l++)c[l]=e[l];c[0]&=127;var f=o(c,8);return f-s}function f(e){for(var t=e<0?e*-1:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var i=r-t,a=s(i,8,n),o=new Uint8Array(a);return o[0]|=128,a}var u=s(t,8,n),c=new Uint8Array(u);if(128&c[0]){var l=u.slice(0),f=new Uint8Array(l);u=new ArrayBuffer(u.byteLength+1),c=new Uint8Array(u);for(var h=0;h<l.byteLength;h++)c[h+1]=f[h];c[0]=0}return u}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function h(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function m(e,t){for(var r=e.toString(10),n=t-r.length,i=new Array(n),a=0;a<n;a++)i[a]="0";var o=i.join("");return o.concat(r)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0,a=0,o=0,s="",u=t?S:w;if(n){for(var c=0,l=0;l<e.length;l++)if(0!==e.charCodeAt(l)){c=l;break}e=e.slice(c)}for(;i<e.length;){var f=e.charCodeAt(i++);i>=e.length&&(a=1);var h=e.charCodeAt(i++);i>=e.length&&(o=1);var m=e.charCodeAt(i++),d=f>>2,p=(3&f)<<4|h>>4,v=(15&h)<<2|m>>6,g=63&m;1===a?v=g=64:1===o&&(g=64),s+=r?64===v?""+u.charAt(d)+u.charAt(p):64===g?""+u.charAt(d)+u.charAt(p)+u.charAt(v):""+u.charAt(d)+u.charAt(p)+u.charAt(v)+u.charAt(g):""+u.charAt(d)+u.charAt(p)+u.charAt(v)+u.charAt(g)}return s}function p(e){function t(e){for(var t=0;t<64;t++)if(a.charAt(t)===e)return t;return 64}function r(e){return 64===e?0:e}for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?S:w,o=0,s="";o<e.length;){var u=t(e.charAt(o++)),c=o>=e.length?0:t(e.charAt(o++)),l=o>=e.length?0:t(e.charAt(o++)),f=o>=e.length?0:t(e.charAt(o++)),h=r(u)<<2|r(c)>>4,m=(15&r(c))<<4|r(l)>>2,d=(3&r(l))<<6|r(f);s+=String.fromCharCode(h),64!==l&&(s+=String.fromCharCode(m)),64!==f&&(s+=String.fromCharCode(d))}if(i){for(var p=s.length,v=-1,g=p-1;g>=0;g--)if(0!==s.charCodeAt(g)){
v=g;break}v!==-1&&(s=s.slice(0,v+1))}return s}function v(e){var t="",r=new Uint8Array(e),n=!0,i=!1,a=void 0;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;t+=String.fromCharCode(u)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return t}function g(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function y(e){var t=Math.log(e)/k,r=Math.floor(t),n=Math.round(t);return r===n?r:n}function b(e){if(!P(e)){if(!A(e))throw new Error("Only generator instance of generator function is a valid input");e=e()}return new Promise(function(t,r){var n=function(t){var n=void 0;try{n=e.throw(t)}catch(e){return r(e)}return i(n)},i=function i(a){var o=void 0;try{o=e.next(a)}catch(e){return r(e)}switch(!0){case o.value instanceof Promise:return o.done?t(o.value):o.value.then(i,n);case A(o.value):case P(o.value):return o.done?b(o.value).then(function(e){t(e)},n):b(o.value).then(i,n);case"function"==typeof o.value:o.value=o.value();default:return o.done?t(o.value):i(o.value)}};i()})}Object.defineProperty(t,"__esModule",{value:!0}),t.getUTCDate=r,t.getParametersValue=n,t.bufferToHexCodes=i,t.checkBufferParams=a,t.utilFromBase=o,t.utilToBase=s,t.utilConcatBuf=u,t.utilConcatView=c,t.utilDecodeTC=l,t.utilEncodeTC=f,t.isEqualBuffer=h,t.padNumber=m,t.toBase64=d,t.fromBase64=p,t.arrayBufferToString=v,t.stringToArrayBuffer=g,t.nearestPowerOf2=y,t.generatorsDriver=b;var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",k=Math.log(2),P=function(e){return"undefined"!=typeof e&&("function"==typeof e.next&&"function"==typeof e.throw)},A=function(e){if("undefined"==typeof e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||P(e))}},function(e,t,r){!function(){function e(e){this.message=e}var r=t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",r.btoa||(r.btoa=function(t){for(var r,i,a=String(t),o=0,s=n,u="";a.charAt(0|o)||(s="=",o%1);u+=s.charAt(63&r>>8-o%1*8)){if(i=a.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return u}),r.atob||(r.atob=function(t){var r=String(t).replace(/[=]+$/,"");if(r.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,a,o=0,s=0,u="";a=r.charAt(s++);~a&&(i=o%4?64*i+a:a,o++%4)?u+=String.fromCharCode(255&i>>(-2*o&6)):0)a=n.indexOf(a);return u})}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeStampResp=t.TimeStampReq=t.Time=t.TSTInfo=t.TBSRequest=t.SubjectDirectoryAttributes=t.SingleResponse=t.SignerInfo=t.SignedData=t.SignedAndUnsignedAttributes=t.Signature=t.SecretBag=t.SafeContents=t.SafeBag=t.RevokedCertificate=t.RevocationInfoChoices=void 0,t.ResponseData=t.ResponseBytes=t.Request=t.RelativeDistinguishedNames=t.RecipientKeyIdentifier=t.RecipientInfo=t.RecipientIdentifier=t.RecipientEncryptedKeys=t.RecipientEncryptedKey=t.RSASSAPSSParams=t.RSAPublicKey=t.RSAPrivateKey=t.RSAESOAEPParams=t.PublicKeyInfo=t.PrivateKeyUsagePeriod=t.PrivateKeyInfo=t.PolicyQualifierInfo=t.PolicyMappings=t.PolicyMapping=t.PolicyInformation=t.PolicyConstraints=t.PasswordRecipientinfo=t.PKIStatusInfo=t.PKCS8ShroudedKeyBag=t.PFX=t.PBKDF2Params=t.PBES2Params=t.OtherRevocationInfoFormat=t.OtherRecipientInfo=t.OtherPrimeInfo=t.OtherKeyAttribute=t.OtherCertificateFormat=t.OriginatorPublicKey=t.OriginatorInfo=t.OriginatorIdentifierOrKey=t.OCSPResponse=t.OCSPRequest=t.NameConstraints=t.MessageImprint=t.MacData=t.KeyTransRecipientInfo=t.KeyBag=t.KeyAgreeRecipientInfo=t.KeyAgreeRecipientIdentifier=t.KEKRecipientInfo=t.KEKIdentifier=t.IssuingDistributionPoint=t.IssuerAndSerialNumber=t.InfoAccess=t.GeneratorsDriver=t.GeneralSubtree=t.GeneralNames=t.GeneralName=t.Extensions=t.Extension=t.ExtKeyUsage=t.EnvelopedData=t.EncryptedData=t.EncryptedContentInfo=t.EncapsulatedContentInfo=t.ECPublicKey=t.ECPrivateKey=t.ECCCMSSharedInfo=t.DistributionPoint=t.DigestInfo=t.CryptoEngine=t.ContentInfo=t.CertificationRequest=t.CertificateSet=t.CertificateRevocationList=t.CertificatePolicies=t.CertificateChainValidationEngine=t.Certificate=t.CertID=t.CertBag=t.CRLDistributionPoints=t.CRLBag=t.BasicOCSPResponse=t.BasicConstraints=t.AuthorityKeyIdentifier=t.AuthenticatedSafe=t.AttributeTypeAndValue=t.Attribute=t.AltName=t.AlgorithmIdentifier=t.Accuracy=t.AccessDescription=t.kdf=t.kdfWithCounter=t.getHashAlgorithm=t.getAlgorithmByOID=t.createECDSASignatureFromCMS=t.stringPrep=t.createCMSECDSASignature=t.getAlgorithmParameters=t.getOIDByAlgorithm=t.getRandomValues=t.getCrypto=t.getEngine=t.setEngine=void 0;var i=r(387),a=r(399),o=n(a),s=r(403),u=n(s),c=r(388),l=n(c),f=r(404),h=n(f),m=r(395),d=n(m),p=r(402),v=n(p),g=r(405),y=n(g),b=r(432),w=n(b),S=r(420),k=n(S),P=r(464),A=n(P),C=r(437),_=n(C),O=r(425),E=n(O),I=r(414),B=n(I),x=r(467),N=n(x),j=r(415),R=n(j),V=r(468),T=n(V),D=r(427),U=n(D),K=r(438),M=n(K),H=r(443),L=n(H),q=r(470),F=n(q),J=r(406),W=n(J),G=r(390),z=n(G),$=r(471),Y=n($),Z=r(426),X=n(Z),Q=r(463),ee=n(Q),te=r(396),re=n(te),ne=r(392),ie=n(ne),ae=r(472),oe=n(ae),se=r(411),ue=n(se),ce=r(410),le=n(ce),fe=r(441),he=n(fe),me=r(434),de=n(me),pe=r(417),ve=n(pe),ge=r(436),ye=n(ge),be=r(400),we=n(be),Se=r(422),ke=n(Se),Pe=r(424),Ae=n(Pe),Ce=r(469),_e=n(Ce),Oe=r(435),Ee=n(Oe),Ie=r(449),Be=n(Ie),xe=r(421),Ne=n(xe),je=r(459),Re=n(je),Ve=r(458),Te=n(Ve),De=r(455),Ue=n(De),Ke=r(450),Me=n(Ke),He=r(473),Le=n(He),qe=r(447),Fe=n(qe),Je=r(474),We=n(Je),Ge=r(475),ze=n(Ge),$e=r(423),Ye=n($e),Ze=r(476),Xe=n(Ze),Qe=r(480),et=n(Qe),tt=r(451),rt=n(tt),nt=r(442),it=n(nt),at=r(452),ot=n(at),st=r(482),ut=n(st),ct=r(457),lt=n(ct),ft=r(398),ht=n(ft),mt=r(461),dt=n(mt),pt=r(445),vt=n(pt),gt=r(413),yt=n(gt),bt=r(412),wt=n(bt),St=r(483),kt=n(St),Pt=r(409),At=n(Pt),Ct=r(488),_t=n(Ct),Ot=r(460),Et=n(Ot),It=r(433),Bt=n(It),xt=r(428),Nt=n(xt),jt=r(431),Rt=n(jt),Vt=r(430),Tt=n(Vt),Dt=r(429),Ut=n(Dt),Kt=r(394),Mt=n(Kt),Ht=r(419),Lt=n(Ht),qt=r(391),Ft=n(qt),Jt=r(462),Wt=n(Jt),Gt=r(397),zt=n(Gt),$t=r(393),Yt=n($t),Zt=r(389),Xt=n(Zt),Qt=r(454),er=n(Qt),tr=r(453),rr=n(tr),nr=r(448),ir=n(nr),ar=r(446),or=n(ar),sr=r(456),ur=n(sr),cr=r(401),lr=n(cr),fr=r(478),hr=n(fr),mr=r(481),dr=n(mr),pr=r(465),vr=n(pr),gr=r(444),yr=n(gr),br=r(439),wr=n(br),Sr=r(408),kr=n(Sr),Pr=r(407),Ar=n(Pr),Cr=r(440),_r=n(Cr),Or=r(479),Er=n(Or),Ir=r(486),Br=n(Ir),xr=r(484),Nr=n(xr),jr=r(485),Rr=n(jr),Vr=r(466),Tr=n(Vr),Dr=r(418),Ur=n(Dr),Kr=r(477),Mr=n(Kr),Hr=r(487),Lr=n(Hr),qr=r(416),Fr=n(qr),Jr=r(489),Wr=n(Jr),Gr=r(490),zr=n(Gr);t.setEngine=i.setEngine,t.getEngine=i.getEngine,t.getCrypto=i.getCrypto,t.getRandomValues=i.getRandomValues,t.getOIDByAlgorithm=i.getOIDByAlgorithm,t.getAlgorithmParameters=i.getAlgorithmParameters,t.createCMSECDSASignature=i.createCMSECDSASignature,t.stringPrep=i.stringPrep,t.createECDSASignatureFromCMS=i.createECDSASignatureFromCMS,t.getAlgorithmByOID=i.getAlgorithmByOID,t.getHashAlgorithm=i.getHashAlgorithm,t.kdfWithCounter=i.kdfWithCounter,t.kdf=i.kdf,t.AccessDescription=o.default,t.Accuracy=u.default,t.AlgorithmIdentifier=l.default,t.AltName=h.default,t.Attribute=d.default,t.AttributeTypeAndValue=v.default,t.AuthenticatedSafe=y.default,t.AuthorityKeyIdentifier=w.default,t.BasicConstraints=k.default,t.BasicOCSPResponse=A.default,t.CRLBag=_.default,t.CRLDistributionPoints=E.default,t.CertBag=B.default,t.CertID=N.default,t.Certificate=R.default,t.CertificateChainValidationEngine=T.default,t.CertificatePolicies=U.default,t.CertificateRevocationList=M.default,t.CertificateSet=L.default,t.CertificationRequest=F.default,t.ContentInfo=W.default,t.CryptoEngine=z.default,t.DigestInfo=Y.default,t.DistributionPoint=X.default,t.ECCCMSSharedInfo=ee.default,t.ECPrivateKey=re.default,t.ECPublicKey=ie.default,t.EncapsulatedContentInfo=oe.default,t.EncryptedContentInfo=ue.default,t.EncryptedData=le.default,t.EnvelopedData=he.default,t.ExtKeyUsage=de.default,t.Extension=ve.default,t.Extensions=ye.default,t.GeneralName=we.default,t.GeneralNames=ke.default,t.GeneralSubtree=Ae.default,t.GeneratorsDriver=_e.default,t.InfoAccess=Ee.default,t.IssuerAndSerialNumber=Be.default,t.IssuingDistributionPoint=Ne.default,t.KEKIdentifier=Re.default,t.KEKRecipientInfo=Te.default,t.KeyAgreeRecipientIdentifier=Ue.default,t.KeyAgreeRecipientInfo=Me.default,t.KeyBag=Le.default,t.KeyTransRecipientInfo=Fe.default,t.MacData=We.default,t.MessageImprint=ze.default,t.NameConstraints=Ye.default,t.OCSPRequest=Xe.default,t.OCSPResponse=et.default,t.OriginatorIdentifierOrKey=rt.default,t.OriginatorInfo=it.default,t.OriginatorPublicKey=ot.default,t.OtherCertificateFormat=ut.default,t.OtherKeyAttribute=lt.default,t.OtherPrimeInfo=ht.default,t.OtherRecipientInfo=dt.default,t.OtherRevocationInfoFormat=vt.default,t.PBES2Params=yt.default,t.PBKDF2Params=wt.default,t.PFX=kt.default,t.PKCS8ShroudedKeyBag=At.default,t.PKIStatusInfo=_t.default,t.PasswordRecipientinfo=Et.default,t.PolicyConstraints=Bt.default,t.PolicyInformation=Nt.default,t.PolicyMapping=Rt.default,t.PolicyMappings=Tt.default,t.PolicyQualifierInfo=Ut.default,t.PrivateKeyInfo=Mt.default,t.PrivateKeyUsagePeriod=Lt.default,t.PublicKeyInfo=Ft.default,t.RSAESOAEPParams=Wt.default,t.RSAPrivateKey=zt.default,t.RSAPublicKey=Yt.default,t.RSASSAPSSParams=Xt.default,t.RecipientEncryptedKey=er.default,t.RecipientEncryptedKeys=rr.default,t.RecipientIdentifier=ir.default,t.RecipientInfo=or.default,t.RecipientKeyIdentifier=ur.default,t.RelativeDistinguishedNames=lr.default,t.Request=hr.default,t.ResponseBytes=dr.default,t.ResponseData=vr.default,t.RevocationInfoChoices=yr.default,t.RevokedCertificate=wr.default,t.SafeBag=kr.default,t.SafeContents=Ar.default,t.SecretBag=_r.default,t.Signature=Er.default,t.SignedAndUnsignedAttributes=Br.default,t.SignedData=Nr.default,t.SignerInfo=Rr.default,t.SingleResponse=Tr.default,t.SubjectDirectoryAttributes=Ur.default,t.TBSRequest=Mr.default,t.TSTInfo=Lr.default,t.Time=Fr.default,t.TimeStampReq=Wr.default,t.TimeStampResp=zr.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t,r){_={name:e,crypto:t,subtle:r}}function o(){return _}function s(){if(null!==_.subtle)return _.subtle}function u(e){if(null!==_.crypto)return _.crypto.getRandomValues(e);throw new Error("No support for Web Cryptography API")}function c(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}function l(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:u(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:u(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e3},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}function f(e){if(e.byteLength%2!==0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t),n=new Uint8Array(r);n.set(new Uint8Array(e,0,t));var i=new b.Integer({valueHex:r}),a=new ArrayBuffer(t),o=new Uint8Array(a);o.set(new Uint8Array(e,t,t));var s=new b.Integer({valueHex:a});return new b.Sequence({value:[i.convertToDER(),s.convertToDER()]}).toBER(!1)}function h(e){var t=e.replace(/^\s+|\s+$/g,"");return t=t.replace(/\s+/g," "),t=t.toLowerCase()}function m(e){if(e instanceof b.Sequence==!1)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof b.Integer==!1)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof b.Integer==!1)return new ArrayBuffer(0);var t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();return(0,w.utilConcatBuf)(t.valueBlock.valueHex,r.valueBlock.valueHex)}function d(e){switch(e){case"1.2.840.113549.1.1.1":case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}function p(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new P.default({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=d(r.hashAlgorithm.algorithmId);if("name"in n==!1)return"";t=n.name}else t="SHA-1"}catch(e){}}return t}function v(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');var i=new ArrayBuffer(4),a=new Uint8Array(i);a[0]=0,a[1]=0,a[2]=0,a[3]=r;var o=new ArrayBuffer(0),u=s();return"undefined"==typeof u?Promise.reject("Unable to create WebCrypto object"):(o=(0,w.utilConcatBuf)(o,t),o=(0,w.utilConcatBuf)(o,i),o=(0,w.utilConcatBuf)(o,n),u.digest({name:e},o).then(function(e){return{counter:r,result:e}}))}function g(e,t,r,n){var i=0,a=1,o=[];switch(e.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var s=r/i;Math.floor(s)>0&&(a=Math.floor(s),s-a>0&&a++);for(var u=1;u<=a;u++)o.push(v(e,t,u,n));return Promise.all(o).then(function(e){for(var t=new ArrayBuffer(0),n=1,i=!0;i;){i=!1;var a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(l.counter===n){t=(0,w.utilConcatBuf)(t,l.result),i=!0;break}}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}n++}if(r>>=3,t.byteLength>r){for(var f=new ArrayBuffer(r),h=new Uint8Array(f),m=new Uint8Array(t),d=0;d<r;d++)h[d]=m[d];return f}return t})}Object.defineProperty(t,"__esModule",{value:!0}),t.setEngine=a,t.getEngine=o,t.getCrypto=s,t.getRandomValues=u,t.getOIDByAlgorithm=c,t.getAlgorithmParameters=l,t.createCMSECDSASignature=f,t.stringPrep=h,t.createECDSASignatureFromCMS=m,t.getAlgorithmByOID=d,t.getHashAlgorithm=p,t.kdfWithCounter=v,t.kdf=g;var y=r(383),b=i(y),w=r(384),S=r(388),k=(n(S),r(389)),P=n(k),A=r(390),C=n(A),_={name:"none",crypto:null,subtle:null};!function(){if("undefined"!=typeof self&&"crypto"in self){var e="webcrypto",t=self.crypto,r=null;if("webkitSubtle"in self.crypto){try{r=self.crypto.webkitSubtle}catch(e){r=self.crypto.subtle}e="safari"}"subtle"in self.crypto&&(r=self.crypto.subtle),_={name:e,crypto:t,subtle:new C.default({name:e,crypto:r})}}}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.algorithmId=(0,u.getParametersValue)(t,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in t&&(this.algorithmParams=(0,u.getParametersValue)(t,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new s.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof s.Any==!1&&e.push(this.algorithmParams),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof s.Any==!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new s.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof s.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new s.ObjectIdentifier({name:t.algorithmIdentifier||""}),new s.Any({name:t.algorithmParams||"",optional:!0})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,c.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=(0,c.getParametersValue)(t,"saltLength",e.defaultValues("saltLength")),this.trailerField=(0,c.getParametersValue)(t,"trailerField",e.defaultValues("trailerField")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSASSA_PSS_params");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new f.default({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new u.Integer({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new u.Integer({value:this.trailerField})]})),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new u.Null});case"maskGenAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new u.Null}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[f.default.schema(t.hashAlgorithm||{})]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[f.default.schema(t.maskGenAlgorithm||{})]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new u.Integer({name:t.saltLength||""})]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new u.Integer({name:t.trailerField||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(391),f=n(l),h=r(394),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.crypto=(0,c.getParametersValue)(t,"crypto",{}),this.name=(0,c.getParametersValue)(t,"name","")}return o(e,[{key:"importKey",value:function(e,t,r,n,i){var a=this,o={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.crypto.importKey("raw",t,r,n,i);case"spki":var s=u.fromBER(t);if(s.offset===-1)return Promise.reject("Incorrect keyData");var l=new f.default;try{l.fromSchema(s.result);
}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="PS1";break;case"SHA-256":o.alg="PS256";break;case"SHA-384":o.alg="PS384";break;case"SHA-512":o.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(i=["verify"],o.kty="RSA",o.ext=n,o.key_ops=i,"1.2.840.113549.1.1.1"!==l.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId);if("alg"in o==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RS1";break;case"SHA-256":o.alg="RS256";break;case"SHA-384":o.alg="RS384";break;case"SHA-512":o.alg="RS512";break;default:return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId)}var h=l.toJSON(),d=!0,p=!1,v=void 0;try{for(var g,y=Object.keys(h)[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var b=g.value;o[b]=h[b]}}catch(e){p=!0,v=e}finally{try{!d&&y.return&&y.return()}finally{if(p)throw v}}break;case"ECDSA":i=["verify"];case"ECDH":if(o={kty:"EC",ext:n,key_ops:i},"1.2.840.10045.2.1"!==l.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId);var w=l.toJSON(),S=!0,k=!1,P=void 0;try{for(var A,C=Object.keys(w)[Symbol.iterator]();!(S=(A=C.next()).done);S=!0){var _=A.value;o[_]=w[_]}}catch(e){k=!0,P=e}finally{try{!S&&C.return&&C.return()}finally{if(k)throw P}}break;case"RSA-OAEP":if(o.kty="RSA",o.ext=n,o.key_ops=i,"safari"===this.name.toLowerCase())o.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RSA-OAEP-1";break;case"SHA-256":o.alg="RSA-OAEP-256";break;case"SHA-384":o.alg="RSA-OAEP-384";break;case"SHA-512":o.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId)}var O=l.toJSON(),E=!0,I=!1,B=void 0;try{for(var x,N=Object.keys(O)[Symbol.iterator]();!(E=(x=N.next()).done);E=!0){var j=x.value;o[j]=O[j]}}catch(e){I=!0,B=e}finally{try{!E&&N.return&&N.return()}finally{if(I)throw B}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"pkcs8":var R=new m.default,V=u.fromBER(t);if(V.offset===-1)return Promise.reject("Incorrect keyData");try{R.fromSchema(V.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="PS1";break;case"SHA-256":o.alg="PS256";break;case"SHA-384":o.alg="PS384";break;case"SHA-512":o.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(i=["sign"],o.kty="RSA",o.ext=n,o.key_ops=i,"1.2.840.113549.1.1.1"!==R.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: "+R.privateKeyAlgorithm.algorithmId);if("alg"in o==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RS1";break;case"SHA-256":o.alg="RS256";break;case"SHA-384":o.alg="RS384";break;case"SHA-512":o.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var T=R.toJSON(),D=!0,U=!1,K=void 0;try{for(var M,H=Object.keys(T)[Symbol.iterator]();!(D=(M=H.next()).done);D=!0){var L=M.value;o[L]=T[L]}}catch(e){U=!0,K=e}finally{try{!D&&H.return&&H.return()}finally{if(U)throw K}}break;case"ECDSA":i=["sign"];case"ECDH":if(o={kty:"EC",ext:n,key_ops:i},"1.2.840.10045.2.1"!==R.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: "+R.privateKeyAlgorithm.algorithmId);var q=R.toJSON(),F=!0,J=!1,W=void 0;try{for(var G,z=Object.keys(q)[Symbol.iterator]();!(F=(G=z.next()).done);F=!0){var $=G.value;o[$]=q[$]}}catch(e){J=!0,W=e}finally{try{!F&&z.return&&z.return()}finally{if(J)throw W}}break;case"RSA-OAEP":if(o.kty="RSA",o.ext=n,o.key_ops=i,"safari"===this.name.toLowerCase())o.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RSA-OAEP-1";break;case"SHA-256":o.alg="RSA-OAEP-256";break;case"SHA-384":o.alg="RSA-OAEP-384";break;case"SHA-512":o.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var Y=R.toJSON(),Z=!0,X=!1,Q=void 0;try{for(var ee,te=Object.keys(Y)[Symbol.iterator]();!(Z=(ee=te.next()).done);Z=!0){var re=ee.value;o[re]=Y[re]}}catch(e){X=!0,Q=e}finally{try{!Z&&te.return&&te.return()}finally{if(X)throw Q}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"jwk":o=t;break;default:return Promise.reject("Incorrect format: "+e)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(function(){return a.crypto.importKey("jwk",(0,c.stringToArrayBuffer)(JSON.stringify(o)),r,n,i)}).then(function(e){return e},function(e){return a.crypto.importKey("jwk",o,r,n,i)}):this.crypto.importKey("jwk",o,r,n,i)}},{key:"exportKey",value:function(e,t){var r=this.crypto.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(function(e){return e instanceof ArrayBuffer?JSON.parse((0,c.arrayBufferToString)(e)):e})),e.toLowerCase()){case"raw":return this.crypto.exportKey("raw",t);case"spki":r=r.then(function(e){var t=new f.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(function(e){var t=new m.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: "+e)}return r}},{key:"convert",value:function(e,t,r,n,i,a){var o=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(function(){return o.importKey("raw",r,n,i,a)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("raw",r,n,i,a)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve().then(function(){return o.importKey("raw",r,n,i,a)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("spki",r,n,i,a)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(function(){return o.importKey("spki",r,n,i,a)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,i,a)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,i,a)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,i,a)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,i,a)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,i,a)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: "+t)}default:return Promise.reject("Incorrect inputFormat: "+e)}}},{key:"encrypt",value:function(){var e;return(e=this.crypto).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.crypto).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.crypto).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.crypto).verify.apply(e,arguments)}},{key:"digest",value:function(){var e;return(e=this.crypto).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.crypto).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.crypto).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.crypto).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.crypto).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.crypto).unwrapKey.apply(e,arguments)}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(388),h=n(f),m=r(392),d=n(m),p=r(393),v=n(p),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithm=(0,c.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=(0,c.getParametersValue)(t,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in t&&(this.parsedKey=(0,c.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PUBLIC_KEY_INFO");switch(this.algorithm=new h.default({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":"algorithmParams"in this.algorithm&&this.algorithm.algorithmParams instanceof u.ObjectIdentifier&&(this.parsedKey=new d.default({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex}));break;case"1.2.840.113549.1.1.1":var n=u.fromBER(this.subjectPublicKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new v.default({schema:n.result}))}}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}var t=this.parsedKey.toJSON(),r=!0,n=!1,i=void 0;try{for(var a,o=Object.keys(t)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;e[s]=t[s]}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new d.default({json:e}),this.algorithm=new h.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new u.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new v.default({json:e}),this.algorithm=new h.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new u.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.subjectPublicKey=new u.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if("undefined"==typeof e)return Promise.reject("Need to provide publicKey input parameter");var n=(0,l.getCrypto)();return"undefined"==typeof n?Promise.reject("Unable to create WebCrypto object"):(t=t.then(function(){return n.exportKey("spki",e)}),t=t.then(function(e){var t=u.fromBER(e);try{r.fromSchema(t.result)}catch(e){return Promise.reject("Error during initializing object from schema")}},function(e){return Promise.reject("Error during exporting public key: "+e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new h.default;case"subjectPublicKey":return new u.BitString;default:throw new Error("Invalid member name for PublicKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[h.default.schema(t.algorithm||{}),new u.BitString({name:t.subjectPublicKey||""})]})}}]),e}();t.default=g},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.x=(0,u.getParametersValue)(t,"x",e.defaultValues("x")),this.y=(0,u.getParametersValue)(t,"y",e.defaultValues("y")),this.namedCurve=(0,u.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return a(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==!1)throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=new Uint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var r=void 0;switch(this.namedCurve){case"1.2.840.10045.3.1.7":r=32;break;case"1.3.132.0.34":r=48;break;case"1.3.132.0.35":r=66;break;default:throw new Error("Incorrect curve OID: "+this.namedCurve)}if(e.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,r+1),this.y=e.slice(1+r,2*r+1)}},{key:"toSchema",value:function(){return new s.RawData({data:(0,u.utilConcatBuf)(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}return{crv:e,x:(0,u.toBase64)((0,u.arrayBufferToString)(this.x),!0,!0,!0),y:(0,u.toBase64)((0,u.arrayBufferToString)(this.y),!0,!0,!0)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');if(this.x=(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.x,!0)).slice(0,t),!("y"in e))throw new Error('Absent mandatory parameter "y"');this.y=(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.y,!0)).slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return(0,u.isEqualBuffer)(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: "+t)}}},{key:"schema",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.RawData}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.modulus=(0,u.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,u.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:(0,u.toBase64)((0,u.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,u.toBase64)((0,u.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new s.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.n,!0)).slice(0,256)}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new s.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":return new s.Integer;case"publicExponent":return new s.Integer;default:throw new Error("Invalid member name for RSAPublicKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.modulus||""}),new s.Integer({name:t.publicExponent||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=r(395),m=n(h),d=r(396),p=n(d),v=r(397),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKeyAlgorithm=(0,c.getParametersValue)(t,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=(0,c.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"attributes"in t&&(this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),"parsedKey"in t&&(this.parsedKey=(0,c.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new f.default({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,function(e){return new m.default({schema:e})})),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var n=u.fromBER(this.privateKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new g.default({schema:n.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof u.ObjectIdentifier){var i=u.fromBER(this.privateKey.valueBlock.valueHex);i.offset!==-1&&(this.parsedKey=new p.default({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:i.result}))}}}},{key:"toSchema",value:function(){var e=[new u.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}var r=this.parsedKey.toJSON(),n=!0,i=!1,a=void 0;try{for(var o,s=Object.keys(r)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;t[u]=r[u]}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new p.default({json:e}),this.privateKeyAlgorithm=new f.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new u.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new g.default({json:e}),this.privateKeyAlgorithm=new f.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new u.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.privateKey=new u.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new f.default;case"privateKey":return new u.OctetString;case"attributes":return[];default:throw new Error("Invalid member name for PrivateKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),f.default.schema(t.privateKeyAlgorithm||{}),new u.OctetString({name:t.privateKey||""}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Repeated({name:t.attributes||"",value:m.default.schema()})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,u.getParametersValue)(t,"type",e.defaultValues("type")),this.values=(0,u.getParametersValue)(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{type:"type",values:"values"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTRIBUTE");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.type}),new s.Set({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.type||""}),new s.Set({name:t.setName||"",value:[new s.Repeated({name:t.values||"",value:new s.Any})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(392),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKey=(0,c.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"namedCurve"in t&&(this.namedCurve=(0,c.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in t&&(this.publicKey=(0,c.getParametersValue)(t,"publicKey",e.defaultValues("publicKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var n={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(n.namedCurve=this.namedCurve),this.publicKey=new f.default(n)}}},{key:"toSchema",value:function(){var e=[new u.Integer({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.ObjectIdentifier({value:this.namedCurve})]})),"publicKey"in this&&e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new u.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==!1||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:(0,c.toBase64)((0,c.arrayBufferToString)(this.privateKey.valueBlock.valueHex),!0,!0,!0)};if("publicKey"in this){var n=this.publicKey.toJSON();r.x=n.x,r.y=n.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');this.privateKey=new u.OctetString({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.d,!0)).slice(0,t)}),"x"in e&&"y"in e&&(this.publicKey=new f.default({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new u.OctetString;case"namedCurve":return"";case"publicKey":return new f.default;default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return f.default.compareWithDefault("namedCurve",r.namedCurve)&&f.default.compareWithDefault("x",r.x)&&f.default.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),new u.OctetString({name:t.privateKey||""}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.ObjectIdentifier({name:t.namedCurve||""})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.BitString({name:t.publicKey||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(398),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.modulus=(0,c.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,c.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=(0,c.getParametersValue)(t,"privateExponent",e.defaultValues("privateExponent")),this.prime1=(0,c.getParametersValue)(t,"prime1",e.defaultValues("prime1")),this.prime2=(0,c.getParametersValue)(t,"prime2",e.defaultValues("prime2")),this.exponent1=(0,c.getParametersValue)(t,"exponent1",e.defaultValues("exponent1")),this.exponent2=(0,c.getParametersValue)(t,"exponent2",e.defaultValues("exponent2")),this.coefficient=(0,c.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in t&&(this.otherPrimeInfos=(0,c.getParametersValue)(t,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",
privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new u.Sequence({value:Array.from(this.otherPrimeInfos,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={n:(0,c.toBase64)((0,c.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,c.toBase64)((0,c.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:(0,c.toBase64)((0,c.arrayBufferToString)(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:(0,c.toBase64)((0,c.arrayBufferToString)(this.prime1.valueBlock.valueHex),!0,!0,!0),q:(0,c.toBase64)((0,c.arrayBufferToString)(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:(0,c.toBase64)((0,c.arrayBufferToString)(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:(0,c.toBase64)((0,c.arrayBufferToString)(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:(0,c.toBase64)((0,c.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,function(e){return e.toJSON()})),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new u.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,function(e){return new f.default({json:e})}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":return new u.Integer;case"publicExponent":return new u.Integer;case"privateExponent":return new u.Integer;case"prime1":return new u.Integer;case"prime2":return new u.Integer;case"exponent1":return new u.Integer;case"exponent2":return new u.Integer;case"coefficient":return new u.Integer;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),new u.Integer({name:t.modulus||""}),new u.Integer({name:t.publicExponent||""}),new u.Integer({name:t.privateExponent||""}),new u.Integer({name:t.prime1||""}),new u.Integer({name:t.prime2||""}),new u.Integer({name:t.exponent1||""}),new u.Integer({name:t.exponent2||""}),new u.Integer({name:t.coefficient||""}),new u.Sequence({optional:!0,value:[new u.Repeated({name:t.otherPrimeInfosName||"",value:f.default.schema(t.otherPrimeInfo||{})})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.prime=(0,u.getParametersValue)(t,"prime",e.defaultValues("prime")),this.exponent=(0,u.getParametersValue)(t,"exponent",e.defaultValues("exponent")),this.coefficient=(0,u.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:(0,u.toBase64)((0,u.arrayBufferToString)(this.prime.valueBlock.valueHex),!0,!0),d:(0,u.toBase64)((0,u.arrayBufferToString)(this.exponent.valueBlock.valueHex),!0,!0),t:(0,u.toBase64)((0,u.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new s.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new s.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new s.Integer({valueHex:(0,u.stringToArrayBuffer)((0,u.fromBase64)(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":return new s.Integer;case"exponent":return new s.Integer;case"coefficient":return new s.Integer;default:throw new Error("Invalid member name for OtherPrimeInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.prime||""}),new s.Integer({name:t.exponent||""}),new s.Integer({name:t.coefficient||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.accessMethod=(0,c.getParametersValue)(t,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=(0,c.getParametersValue)(t,"accessLocation",e.defaultValues("accessLocation")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new f.default({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new f.default;default:throw new Error("Invalid member name for AccessDescription class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.accessMethod||""}),f.default.schema(t.accessLocation||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,h.getParametersValue)(e,"names",{});return new f.Sequence({optional:t,value:[new f.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new f.Primitive({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new f.Constructed({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new f.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new f.Constructed({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new f.Repeated({value:new f.PrintableString})]})]})}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new f.Sequence({optional:e,value:[new f.PrintableString,new f.PrintableString]})}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new f.Set({optional:e,value:[new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new f.Any]})]})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(383),f=i(l),h=r(384),m=r(401),d=n(m),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,h.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,h.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return c(e,[{key:"fromSchema",value:function(t){var r=f.compareSchema(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GENERAL_NAME");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var n=r.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;var i=n.toBER(!1);this.value=f.fromBER(i).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new d.default({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new f.OctetString({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var a=r.result.blockName;a.idBlock.tagClass=1,a.idBlock.tagNumber=6;var o=a.toBER(!1);this.value=f.fromBER(o).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new f.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new f.IA5String({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new f.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var n=new f.ObjectIdentifier({value:this.value});return n.idBlock.tagClass=3,n.idBlock.tagNumber=this.type,n;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type};return"string"==typeof this.value?e.value=this.value:e.value=this.value.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,h.getParametersValue)(e,"names",{});return new f.Choice({value:[new f.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new f.ObjectIdentifier,new f.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new f.Any]})]}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new f.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[o(t.builtInStandardAttributes||{},!1),s(!0),u(!0)]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[d.default.schema(t.directoryName||{})]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new f.Choice({value:[new f.TeletexString,new f.PrintableString,new f.UniversalString,new f.Utf8String,new f.BmpString]})]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new f.Choice({value:[new f.TeletexString,new f.PrintableString,new f.UniversalString,new f.Utf8String,new f.BmpString]})]})]}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),c=i(u),l=r(384),f=r(402),h=n(f),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.typesAndValues=(0,l.getParametersValue)(t,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=(0,l.getParametersValue)(t,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RDN");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,function(e){return new h.default({schema:e})})),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){if(0===this.valueBeforeDecode.byteLength)return new c.Sequence({value:[new c.Set({value:Array.from(this.typesAndValues,function(e){return e.toSchema()})})]});var e=c.fromBER(this.valueBeforeDecode);return e.result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,function(e){return e.toJSON()})}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r=!0,n=!1,i=void 0;try{for(var a,s=this.typesAndValues.entries()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=o(a.value,2),c=u[0],f=u[1];if(f.isEqual(t.typesAndValues[c])===!1)return!1}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return!0}return t instanceof ArrayBuffer&&(0,l.isEqualBuffer)(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"",value:[new c.Repeated({name:t.repeatedSequence||"",value:new c.Set({value:[new c.Repeated({name:t.repeatedSet||"",value:h.default.schema(t.typeAndValue||{})})]})})]})}}]),e}();t.default=m},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=r(387),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,u.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,u.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTR_TYPE_AND_VALUE");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.type!==t.type)return!1;if(this.value instanceof s.Utf8String&&t.value instanceof s.Utf8String||this.value instanceof s.BmpString&&t.value instanceof s.BmpString||this.value instanceof s.UniversalString&&t.value instanceof s.UniversalString||this.value instanceof s.NumericString&&t.value instanceof s.NumericString||this.value instanceof s.PrintableString&&t.value instanceof s.PrintableString||this.value instanceof s.TeletexString&&t.value instanceof s.TeletexString||this.value instanceof s.VideotexString&&t.value instanceof s.VideotexString||this.value instanceof s.IA5String&&t.value instanceof s.IA5String||this.value instanceof s.GraphicString&&t.value instanceof s.GraphicString||this.value instanceof s.VisibleString&&t.value instanceof s.VisibleString||this.value instanceof s.GeneralString&&t.value instanceof s.GeneralString||this.value instanceof s.CharacterString&&t.value instanceof s.CharacterString){var r=(0,c.stringPrep)(this.value.valueBlock.value),n=(0,c.stringPrep)(t.value.valueBlock.value);if(0!==r.localeCompare(n))return!1}else if((0,u.isEqualBuffer)(this.value.valueBeforeDecode,t.value.valueBeforeDecode)===!1)return!1;return!0}return t instanceof ArrayBuffer&&(0,u.isEqualBuffer)(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.type||""}),new s.Any({name:t.value||""})]})}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"seconds"in t&&(this.seconds=(0,u.getParametersValue)(t,"seconds",e.defaultValues("seconds"))),"millis"in t&&(this.millis=(0,u.getParametersValue)(t,"millis",e.defaultValues("millis"))),"micros"in t&&(this.micros=(0,u.getParametersValue)(t,"micros",e.defaultValues("micros"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for tsp.Accuracy");if("seconds"in r.result&&(this.seconds=r.result.seconds.valueBlock.valueDec),"millis"in r.result){var n=new s.Integer({valueHex:r.result.millis.valueBlock.valueHex});this.millis=n.valueBlock.valueDec}if("micros"in r.result){var i=new s.Integer({valueHex:r.result.micros.valueBlock.valueHex});this.micros=i.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("seconds"in this&&e.push(new s.Integer({value:this.seconds})),"millis"in this){var t=new s.Integer({value:this.millis});e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHex}))}if("micros"in this){var r=new s.Integer({value:this.micros});e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:r.valueBlock.valueHex}))}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}],[{key:"defaultValues",value:function(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error("Invalid member name for Accuracy class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"seconds":case"millis":case"micros":return r===e.defaultValues(t);default:throw new Error("Invalid member name for Accuracy class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",optional:!0,value:[new s.Integer({optional:!0,name:t.seconds||""}),new s.Primitive({name:t.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.Primitive({name:t.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.altNames=(0,c.getParametersValue)(t,"altNames",e.defaultValues("altNames")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{altNames:"altNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.altNames,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.altNames||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(383),l=i(c),f=r(384),h=r(406),m=n(h),d=r(407),p=n(d),v=r(441),g=n(v),y=r(410),b=n(y),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.safeContents=(0,f.getParametersValue)(t,"safeContents",e.defaultValues("safeContents")),"parsedValue"in t&&(this.parsedValue=(0,f.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{contentInfos:"contentInfos"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthenticatedSafe");this.safeContents=Array.from(r.result.contentInfos,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.safeContents,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeContents:Array.from(this.safeContents,function(e){return e.toJSON()})}}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');var r=Promise.resolve();this.parsedValue={safeContents:[]};var n=!0,i=!1,a=void 0;try{for(var u,c=this.safeContents.entries()[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var f=s(u.value,2),h=f[0],m=f[1];switch(m.contentType){case"1.2.840.113549.1.7.1":if(m.content instanceof l.OctetString==!1)return Promise.reject('Wrong type of "this.safeContents[j].content"');var d=l.fromBER(m.content.valueBlock.valueHex);if(d.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "content.content"');this.parsedValue.safeContents.push({privacyMode:0,value:new p.default({schema:d.result})});break;case"1.2.840.113549.1.7.3":var v=function(){
var n=new g.default({schema:m.content});if("recipientCertificate"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientCertificate" in "parameters.safeContents[j]"')};var i=e.safeContents[h].recipientCertificate;if("recipientKey"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientKey" in "parameters.safeContents[j]"')};var a=e.safeContents[h].recipientKey;r=r.then(function(){return n.decrypt(0,{recipientCertificate:i,recipientPrivateKey:a})}),r=r.then(function(e){var r=l.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:2,value:new p.default({schema:r.result})}),Promise.resolve())})}();if("object"===("undefined"==typeof v?"undefined":o(v)))return v.v;break;case"1.2.840.113549.1.7.6":var y=function(){var n=new b.default({schema:m.content});if("password"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "password" in "parameters.safeContents[j]"')};var i=e.safeContents[h].password;r=r.then(function(){return n.decrypt({password:i})},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=l.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:1,value:new p.default({schema:r.result})}),Promise.resolve())},function(e){return Promise.reject(e)})}();if("object"===("undefined"==typeof y?"undefined":o(y)))return y.v;break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '+m.contentType)}}}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return r}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please run "parseValues" first or add "parsedValue" manually');if(this.parsedValue instanceof Object==!1)return Promise.reject('The "this.parsedValue" must has "Object" type');if(this.parsedValue.safeContents instanceof Array==!1)return Promise.reject('The "this.parsedValue.safeContents" must has "Array" type');if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.parsedValue.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');var r=Promise.resolve();this.safeContents=[];var n=!0,i=!1,a=void 0;try{for(var u,c=this.parsedValue.safeContents.entries()[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var f=s(u.value,2),h=f[0],d=f[1];if("privacyMode"in d==!1)return Promise.reject('The "privacyMode" is a mandatory parameter for "content"');if("value"in d==!1)return Promise.reject('The "value" is a mandatory parameter for "content"');if(d.value instanceof p.default==!1)return Promise.reject('The "content.value" must has "SafeContents" type');switch(d.privacyMode){case 0:!function(){var e=d.value.toSchema().toBER(!1);r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.1",content:new l.OctetString({valueHex:e})}))})}();break;case 1:!function(){var n=new b.default,i=e.safeContents[h];i.contentToEncrypt=d.value.toSchema().toBER(!1),r=r.then(function(){return n.encrypt(i)},function(e){return Promise.reject(e)}),r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.6",content:n.toSchema()}))},function(e){return Promise.reject(e)})}();break;case 2:var v=function(){var n=new g.default,i=d.value.toSchema().toBER(!1);if("encryptingCertificate"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptingCertificate" in "parameters.safeContents[i]"')};if("encryptionAlgorithm"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptionAlgorithm" in "parameters.safeContents[i]"')};switch(!0){case"aes-cbc"===e.safeContents[h].encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===e.safeContents[h].encryptionAlgorithm.name.toLowerCase():break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '+e.safeContents[h].encryptionAlgorithm)}}switch(!0){case 128===e.safeContents[h].encryptionAlgorithm.length:case 192===e.safeContents[h].encryptionAlgorithm.length:case 256===e.safeContents[h].encryptionAlgorithm.length:break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '+e.safeContents[h].encryptionAlgorithm.length)}}var a=e.safeContents[h].encryptionAlgorithm;n.addRecipientByCertificate(e.safeContents[h].encryptingCertificate),r=r.then(function(){return n.encrypt(a,i)}),r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.3",content:n.toSchema()}))})}();if("object"===("undefined"==typeof v?"undefined":o(v)))return v.v;break;default:return Promise.reject('Incorrect value for "content.privacyMode": '+d.privacyMode)}}}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"safeContents":return[];case"parsedValue":return{};default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeContents":return 0===t.length;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.contentInfos||"",value:m.default.schema()})]})}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.contentType=(0,u.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.content=(0,u.getParametersValue)(t,"content",e.defaultValues("content")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_CONTENT_INFO");this.contentType=r.result.contentType.valueBlock.toString(),this.content=r.result.content}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.contentType}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}},{key:"toJSON",value:function(){var e={contentType:this.contentType};return this.content instanceof s.Any||(e.content=this.content.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"content":return new s.Any;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"contentType":return""===t;case"content":return t instanceof s.Any;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new s.Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new s.ObjectIdentifier({name:t.contentType||"contentType"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.content||"content"})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(408),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.safeBags=(0,c.getParametersValue)(t,"safeBags",e.defaultValues("safeBags")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{safeBags:"safeBags"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SafeContents");this.safeBags=Array.from(r.result.safeBags,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.safeBags,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeBags:Array.from(this.safeBags,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"safeBags":return[];default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeBags":return 0===t.length;default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.safeBags||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(395),f=n(l),h=r(394),m=n(h),d=r(409),p=n(d),v=r(414),g=n(v),y=r(437),b=n(y),w=r(440),S=n(w),k=r(407),P=n(k),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.bagId=(0,c.getParametersValue)(t,"bagId",e.defaultValues("bagId")),this.bagValue=(0,c.getParametersValue)(t,"bagValue",e.defaultValues("bagValue")),"bagAttributes"in t&&(this.bagAttributes=(0,c.getParametersValue)(t,"bagAttributes",e.defaultValues("bagAttributes"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{bagId:"bagId",bagValue:"bagValue",bagAttributes:"bagAttributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SafeBag");switch(this.bagId=r.result.bagId.valueBlock.toString(),this.bagId){case"1.2.840.113549.1.12.10.1.1":this.bagValue=new m.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.2":this.bagValue=new p.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.3":this.bagValue=new g.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.4":this.bagValue=new b.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.5":this.bagValue=new S.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.6":this.bagValue=new P.default({schema:r.result.bagValue});break;default:throw new Error('Invalid "bagId" for SafeBag: '+this.bagId)}"bagAttributes"in r.result&&(this.bagAttributes=Array.from(r.result.bagAttributes,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[new u.ObjectIdentifier({value:this.bagId}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return"bagAttributes"in this&&e.push(new u.Set({value:Array.from(this.bagAttributes,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return"bagAttributes"in this&&(e.bagAttributes=Array.from(this.bagAttributes,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"bagId":return"";case"bagValue":return new u.Any;case"bagAttributes":return[];default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"bagId":return""===t;case"bagValue":return t instanceof u.Any;case"bagAttributes":return 0===t.length;default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.bagId||"bagId"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.bagValue||"bagValue"})]}),new u.Set({optional:!0,value:[new u.Repeated({name:t.bagAttributes||"bagAttributes",value:f.default.schema()})]})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=r(410),m=n(h),d=r(411),p=n(d),v=r(394),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.encryptionAlgorithm=(0,c.getParametersValue)(t,"encryptionAlgorithm",e.defaultValues("encryptionAlgorithm")),this.encryptedData=(0,c.getParametersValue)(t,"encryptedData",e.defaultValues("encryptedData")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{encryptionAlgorithm:{names:{blockName:"encryptionAlgorithm"}},encryptedData:"encryptedData"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8ShroudedKeyBag");this.encryptionAlgorithm=new f.default({schema:r.result.encryptionAlgorithm}),this.encryptedData=r.result.encryptedData}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}},{key:"toJSON",value:function(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}},{key:"parseInternalValues",value:function(e){var t=this,r=Promise.resolve(),n=new m.default({encryptedContentInfo:new p.default({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});return r=r.then(function(){return n.decrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=u.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing ASN.1 data"):void(t.parsedValue=new g.default({schema:r.result}))},function(e){return Promise.reject(e)})}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please initialize "parsedValue" first');var r=Promise.resolve(),n=new m.default;return r=r.then(function(){return e.contentToEncrypt=t.parsedValue.toSchema().toBER(!1),n.encrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(){t.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,t.encryptedData=n.encryptedContentInfo.encryptedContent})}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptionAlgorithm":return new f.default;case"encryptedData":return new u.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"encryptionAlgorithm":return f.default.compareWithDefault("algorithmId",r.algorithmId)&&"algorithmParams"in r==!1;case"encryptedData":return r.isEqual(e.defaultValues(t));case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.encryptionAlgorithm||{names:{blockName:"encryptionAlgorithm"}}),new u.Choice({value:[new u.OctetString({name:t.encryptedData||"encryptedData"}),new u.OctetString({idBlock:{isConstructed:!0},name:t.encryptedData||"encryptedData"})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(411),h=n(f),m=r(395),d=n(m),p=r(412),v=n(p),g=r(388),y=n(g),b=r(413),w=n(b),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.encryptedContentInfo=(0,c.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,c.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_ENCRYPTED_DATA");this.version=r.result.version.valueBlock.valueDec,this.encryptedContentInfo=new h.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new d.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"encrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==!1)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');var r=(0,l.getOIDByAlgorithm)(e.contentEncryptionAlgorithm);if(""===r)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var n=(0,l.getOIDByAlgorithm)({name:"PBKDF2"});if(""===n)return Promise.reject("Can not find OID for PBKDF2");var i=(0,l.getOIDByAlgorithm)({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===i)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '+e.hmacHashAlgorithm);var a=(0,l.getCrypto)();if("undefined"==typeof a)return Promise.reject("Unable to create WebCrypto object");var o=Promise.resolve(),s=new ArrayBuffer(16),c=new Uint8Array(s);(0,l.getRandomValues)(c);var f=new ArrayBuffer(64),m=new Uint8Array(f);(0,l.getRandomValues)(m);var d=new Uint8Array(e.contentToEncrypt),p=new v.default({salt:new u.OctetString({valueHex:f}),iterationCount:e.iterationCount,prf:new y.default({algorithmId:i,algorithmParams:new u.Null})});return o=o.then(function(){var t=new Uint8Array(e.password);return a.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),o=o.then(function(t){return a.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:m,iterations:e.iterationCount},t,e.contentEncryptionAlgorithm,!1,["encrypt"])},function(e){return Promise.reject(e)}),o=o.then(function(t){return a.encrypt({name:e.contentEncryptionAlgorithm.name,iv:c},t,d)},function(e){return Promise.reject(e)}),o=o.then(function(e){var i=new w.default({keyDerivationFunc:new y.default({algorithmId:n,algorithmParams:p.toSchema()}),encryptionScheme:new y.default({algorithmId:r,algorithmParams:new u.OctetString({valueHex:s})})});t.encryptedContentInfo=new h.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new y.default({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:i.toSchema()}),encryptedContent:new u.OctetString({valueHex:e})})},function(e){return Promise.reject(e)})}},{key:"decrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("1.2.840.113549.1.5.13"!==this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '+this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=(0,l.getCrypto)();if("undefined"==typeof r)return Promise.reject("Unable to create WebCrypto object");var n=Promise.resolve(),i=void 0;try{i=new w.default({schema:this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}var a=void 0;try{a=new v.default({schema:i.keyDerivationFunc.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}var o=(0,l.getAlgorithmByOID)(i.encryptionScheme.algorithmId);if("name"in o==!1)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '+i.encryptionScheme.algorithmId);var s=i.encryptionScheme.algorithmParams.valueBlock.valueHex,u=new Uint8Array(s),f=a.salt.valueBlock.valueHex,h=new Uint8Array(f),m=a.iterationCount,d="SHA-1";if("prf"in a){var p=(0,l.getAlgorithmByOID)(a.prf.algorithmId);if("name"in p==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");d=p.hash.name}return n=n.then(function(){return r.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),n=n.then(function(e){return r.deriveKey({name:"PBKDF2",hash:{name:d},salt:h,iterations:m},e,o,!1,["decrypt"])},function(e){return Promise.reject(e)}),n=n.then(function(e){var n=new ArrayBuffer(0);if(t.encryptedContentInfo.encryptedContent.idBlock.isConstructed===!1)n=t.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var i=!0,a=!1,s=void 0;try{for(var l,f=t.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var h=l.value;n=(0,c.utilConcatBuf)(n,h.valueBlock.valueHex)}}catch(e){a=!0,s=e}finally{try{!i&&f.return&&f.return()}finally{if(a)throw s}}}return r.decrypt({name:o.name,iv:u},e,n)},function(e){return Promise.reject(e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"encryptedContentInfo":return new h.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"version":return 0===t;case"encryptedContentInfo":return h.default.compareWithDefault("contentType",t.contentType)&&h.default.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&h.default.compareWithDefault("encryptedContent",t.encryptedContent);case"unprotectedAttrs":return 0===t.length;default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),h.default.schema(t.encryptedContentInfo||{}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Repeated({name:t.unprotectedAttrs||"",value:d.default.schema()})]})]})}}]),e}();t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,e),this.contentType=(0,c.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.contentEncryptionAlgorithm=(0,c.getParametersValue)(t,"contentEncryptionAlgorithm",e.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in t&&(this.encryptedContent=t.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&this.encryptedContent.idBlock.isConstructed===!1)){for(var r=new u.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,i=this.encryptedContent.valueBlock.valueHex.byteLength;i>0;){for(var o=new Uint8Array(this.encryptedContent.valueBlock.valueHex,n,n+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-n:1024),s=new ArrayBuffer(o.length),l=new Uint8Array(s),f=0;f<l.length;f++)l[f]=o[f];r.valueBlock.value.push(new u.OctetString({valueHex:s})),i-=o.length,n+=o.length}this.encryptedContent=r}"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new f.default({schema:r.result.contentEncryptionAlgorithm}),"encryptedContent"in r.result&&(this.encryptedContent=r.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}},{key:"toSchema",value:function(){var e={isIndefiniteForm:!1},t=[];if(t.push(new u.ObjectIdentifier({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;var r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new u.Sequence({lenBlock:e,value:t})}},{key:"toJSON",value:function(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new f.default;case"encryptedContent":return new u.OctetString;default:throw new Error("Invalid member name for EncryptedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"contentType":return""===r;case"contentEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedContent":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for EncryptedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.contentType||""}),f.default.schema(t.contentEncryptionAlgorithm||{}),new u.Choice({value:[new u.Constructed({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new u.Repeated({value:new u.OctetString})]}),new u.Primitive({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.salt=(0,c.getParametersValue)(t,"salt",e.defaultValues("salt")),this.iterationCount=(0,c.getParametersValue)(t,"iterationCount",e.defaultValues("iterationCount")),this.keyLength=(0,c.getParametersValue)(t,"keyLength",e.defaultValues("keyLength")),this.prf=(0,c.getParametersValue)(t,"prf",e.defaultValues("prf")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PBKDF2_params");
this.salt=r.result.salt,this.iterationCount=r.result.iterationCount.valueBlock.valueDec,"keyLength"in r.result&&(this.keyLength=r.result.keyLength.valueBlock.valueDec),"prf"in r.result&&(this.prf=new f.default({schema:r.result.prf}))}},{key:"toSchema",value:function(){var t=[];return t.push(this.salt),t.push(new u.Integer({value:this.iterationCount})),e.defaultValues("keyLength")!==this.keyLength&&t.push(new u.Integer({value:this.keyLength})),e.defaultValues("prf").isEqual(this.prf)===!1&&t.push(this.prf.toSchema()),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return e.defaultValues("keyLength")!==this.keyLength&&(t.keyLength=this.keyLength),e.defaultValues("prf").isEqual(this.prf)===!1&&(t.prf=this.prf.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new f.default;default:throw new Error("Invalid member name for PBKDF2Params class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Choice({value:[new u.OctetString({name:t.saltPrimitive||""}),f.default.schema(t.saltConstructed||{})]}),new u.Integer({name:t.iterationCount||""}),new u.Integer({name:t.keyLength||"",optional:!0}),f.default.schema(t.prf||{names:{optional:!0}})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyDerivationFunc=(0,c.getParametersValue)(t,"keyDerivationFunc",e.defaultValues("keyDerivationFunc")),this.encryptionScheme=(0,c.getParametersValue)(t,"encryptionScheme",e.defaultValues("encryptionScheme")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PBES2_params");this.keyDerivationFunc=new f.default({schema:r.result.keyDerivationFunc}),this.encryptionScheme=new f.default({schema:r.result.encryptionScheme})}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}},{key:"toJSON",value:function(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyDerivationFunc":return new f.default;case"encryptionScheme":return new f.default;default:throw new Error("Invalid member name for PBES2Params class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.keyDerivationFunc||{}),f.default.schema(t.encryptionScheme||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(415),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certId=(0,c.getParametersValue)(t,"certId",e.defaultValues("certId")),this.certValue=(0,c.getParametersValue)(t,"certValue",e.defaultValues("certValue")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{id:"certId",value:"certValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertBag");switch(this.certId=r.result.certId.valueBlock.toString(),this.certValue=r.result.certValue,this.certId){case"1.2.840.113549.1.9.22.1":var n=u.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new f.default({schema:n.result});break;case"1.2.840.113549.1.9.22.2":default:throw new Error('Incorrect "certId" value in CertBag: '+this.certId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.22.1",this.certValue=new u.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new u.Sequence({value:[new u.ObjectIdentifier({value:this.certId}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}},{key:"toJSON",value:function(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certId":return"";case"certValue":return new u.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certId":return""===t;case"certValue":return t instanceof u.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.id||"id"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.value||"value"})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"tbsCertificate",value:[new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Integer({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new c.Integer({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),m.default.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),p.default.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new c.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[g.default.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),g.default.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),p.default.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),b.default.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new c.Primitive({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new c.Primitive({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[P.default.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),c=i(u),l=r(384),f=r(387),h=r(388),m=n(h),d=r(401),p=n(d),v=r(416),g=n(v),y=r(391),b=n(y),w=r(417),S=n(w),k=r(436),P=n(k),A=r(389),C=n(A),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.serialNumber=(0,l.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,l.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.notBefore=(0,l.getParametersValue)(t,"notBefore",e.defaultValues("notBefore")),this.notAfter=(0,l.getParametersValue)(t,"notAfter",e.defaultValues("notAfter")),this.subject=(0,l.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,l.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,l.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in t&&(this.subjectUniqueID=(0,l.getParametersValue)(t,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in t&&(this.extensions=(0,l.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CERT");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new m.default({schema:r.result["tbsCertificate.signature"]}),this.issuer=new p.default({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new g.default({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new g.default({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new p.default({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new b.default({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],function(e){return new S.default({schema:e})})),this.signatureAlgorithm=new m.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Integer({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new c.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"subjectUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[this.extensions.toSchema()]})),"extensions"in this&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new c.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})]})),new c.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={};if(t===!1){if(0===this.tbs.length)return e.schema().value[0];r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=(0,l.bufferToHexCodes)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=(0,l.bufferToHexCodes)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,f.getCrypto)();if("undefined"==typeof t)return Promise.reject("Unable to create WebCrypto object");if(null===e){e={};var r=(0,f.getHashAlgorithm)(this.signatureAlgorithm);if(""===r)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var n=(0,f.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmId);if(e.algorithm=(0,f.getAlgorithmParameters)(n.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=r),"ECDSA"===n.name){var i=!1;if("algorithmParams"in this.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in this.subjectPublicKeyInfo.algorithm.algorithmParams&&1===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(i=!0),i===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var a=(0,f.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in a==!1)return Promise.reject("Unsupported named curve algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());e.algorithm.algorithm.namedCurve=a.name}}var o=this.subjectPublicKeyInfo.toSchema(),s=o.toBER(!1),u=new Uint8Array(s);return t.importKey("spki",u,e.algorithm.algorithm,!0,e.algorithm.usages)}},{key:"getKeyHash",value:function(){var e=(0,f.getCrypto)();return"undefined"==typeof e?Promise.reject("Unable to create WebCrypto object"):e.digest({name:"sha-1"},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);a.hashAlgorithm=new m.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var s=new C.default(a);this.signature=new m.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var u=(0,f.getCrypto)();return"undefined"==typeof u?Promise.reject("Unable to create WebCrypto object"):u.sign(i.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Promise.resolve(),n={},i=this.signatureValue,a=this.tbs;if(null!==t?n=t.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),n instanceof b.default==!1)return Promise.reject("Please provide issuer certificate as a parameter");var o=(0,f.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");var s=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===s?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:n.algorithm.algorithmId;var r=(0,f.getAlgorithmByOID)(t);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+t);var i=(0,f.getAlgorithmParameters)(r.name,"importkey");if("hash"in i.algorithm&&(i.algorithm.hash.name=s),"ECDSA"===r.name){var a=!1;if("algorithmParams"in n.algorithm==!0&&"idBlock"in n.algorithm.algorithmParams&&1===n.algorithm.algorithmParams.idBlock.tagClass&&6===n.algorithm.algorithmParams.idBlock.tagNumber&&(a=!0),a===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var u=(0,f.getAlgorithmByOID)(n.algorithm.algorithmParams.valueBlock.toString());if("name"in u==!1)return Promise.reject("Unsupported named curve algorithm: "+n.algorithm.algorithmParams.valueBlock.toString());i.algorithm.namedCurve=u.name}var c=n.toSchema(),l=c.toBER(!1),h=new Uint8Array(l);return o.importKey("spki",h,i.algorithm,!0,i.usages)}),r=r.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=s);var n=i.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var u=c.fromBER(n);n=(0,f.createECDSASignatureFromCMS)(u.result)}if("RSA-PSS"===t.algorithm.name){var l=void 0;try{l=new C.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var m=(0,f.getAlgorithmByOID)(l.hashAlgorithm.algorithmId);if("name"in m==!1)return Promise.reject("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithmId);h=m.name}r.algorithm.hash.name=h}return o.verify(r.algorithm,t,new Uint8Array(n),new Uint8Array(a))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new c.Integer;case"signature":return new m.default;case"issuer":return new p.default;case"notBefore":return new g.default;case"notAfter":return new g.default;case"subject":return new p.default;case"subjectPublicKeyInfo":return new b.default;case"issuerUniqueID":return new ArrayBuffer(0);case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new m.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for Certificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"",value:[o(t.tbsCertificate),m.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,u.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,u.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TIME");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new s.UTCTime({valueDate:this.value})),1===this.type&&(e=new s.GeneralizedTime({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,u.getParametersValue)(e,"names",{});return new s.Choice({optional:t,value:[new s.UTCTime({name:r.utcTimeName||""}),new s.GeneralizedTime({name:r.generalTimeName||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(418),f=n(l),h=r(419),m=n(h),d=r(404),p=n(d),v=r(420),g=n(v),y=r(421),b=n(y),w=r(422),S=n(w),k=r(423),P=n(k),A=r(425),C=n(A),_=r(427),O=n(_),E=r(430),I=n(E),B=r(432),x=n(B),N=r(433),j=n(N),R=r(434),V=n(R),T=r(435),D=n(T),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.extnID=(0,c.getParametersValue)(t,"extnID",e.defaultValues("extnID")),this.critical=(0,c.getParametersValue)(t,"critical",e.defaultValues("critical")),"extnValue"in t?this.extnValue=new u.OctetString({valueHex:t.extnValue}):this.extnValue=e.defaultValues("extnValue"),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSION");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,r=u.fromBER(this.extnValue.valueBlock.valueHex),r.offset!==-1)switch(this.extnID){case"2.5.29.9":this.parsedValue=new f.default({schema:r.result});break;case"2.5.29.14":this.parsedValue=r.result;break;case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":this.parsedValue=new m.default({schema:r.result});break;case"2.5.29.17":case"2.5.29.18":this.parsedValue=new p.default({schema:r.result});break;case"2.5.29.19":this.parsedValue=new g.default({schema:r.result});break;case"2.5.29.20":case"2.5.29.27":this.parsedValue=r.result;break;case"2.5.29.21":this.parsedValue=r.result;break;case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":this.parsedValue=new b.default({schema:r.result});break;case"2.5.29.29":this.parsedValue=new S.default({schema:r.result});break;case"2.5.29.30":this.parsedValue=new P.default({schema:r.result});break;case"2.5.29.31":case"2.5.29.46":this.parsedValue=new C.default({schema:r.result});break;case"2.5.29.32":this.parsedValue=new O.default({schema:r.result});break;case"2.5.29.33":this.parsedValue=new I.default({schema:r.result});break;case"2.5.29.35":this.parsedValue=new x.default({schema:r.result});break;case"2.5.29.36":this.parsedValue=new j.default({schema:r.result});break;case"2.5.29.37":this.parsedValue=new V.default({schema:r.result});break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":this.parsedValue=new D.default({schema:r.result})}}},{key:"toSchema",value:function(){var t=[];return t.push(new u.ObjectIdentifier({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new u.Boolean({value:this.critical})),t.push(this.extnValue),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new u.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.extnID||""}),new u.Boolean({name:t.critical||"",optional:!0}),new u.OctetString({name:t.extnValue||""})]})}}]),e}();t.default=U},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(395),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.attributes||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"notBefore"in t&&(this.notBefore=(0,u.getParametersValue)(t,"notBefore",e.defaultValues("notBefore"))),"notAfter"in t&&(this.notAfter=(0,u.getParametersValue)(t,"notAfter",e.defaultValues("notAfter"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var n=new s.GeneralizedTime;n.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if("notAfter"in r.result){var i=new s.GeneralizedTime({valueHex:r.result.notAfter.valueBlock.valueHex});i.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=i.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new s.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new s.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHex})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":return new Date;case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Primitive({name:t.notBefore||"",optional:!0,
idBlock:{tagClass:3,tagNumber:0}}),new s.Primitive({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cA=(0,u.getParametersValue)(t,"cA",!1),"pathLenConstraint"in t&&(this.pathLenConstraint=(0,u.getParametersValue)(t,"pathLenConstraint",0)),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(r.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=r.result.pathLenConstraint:this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new s.Boolean({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof s.Integer?t.push(this.pathLenConstraint):t.push(new s.Integer({value:this.pathLenConstraint}))),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof s.Integer?t.pathLenConstraint=this.pathLenConstraint.toJSON():t.pathLenConstraint=this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Boolean({optional:!0,name:t.cA||""}),new s.Integer({optional:!0,name:t.pathLenConstraint||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=r(401),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,c.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=(0,c.getParametersValue)(t,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=(0,c.getParametersValue)(t,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in t&&(this.onlySomeReasons=(0,c.getParametersValue)(t,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=(0,c.getParametersValue)(t,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=(0,c.getParametersValue)(t,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new f.default({schema:e})});break;case 1===r.result.distributionPoint.idBlock.tagNumber:r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new m.default({schema:r.result.distributionPoint});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var n=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==n[0]}if("onlyContainsCACerts"in r.result){var i=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==i[0]}if("onlySomeReasons"in r.result){var a=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=a[0]}if("indirectCRL"in r.result){var o=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==o[0]}if("onlyContainsAttributeCerts"in r.result){var s=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==s[0]}}},{key:"toSchema",value:function(){var t=[];if("distributionPoint"in this){var r=void 0;this.distributionPoint instanceof Array?r=new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):(r=this.distributionPoint.toSchema(),r.idBlock.tagClass=3,r.idBlock.tagNumber=1),t.push(r)}if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&t.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&t.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var n=new ArrayBuffer(1),i=new Uint8Array(n);i[0]=this.onlySomeReasons,t.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:n}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&t.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&t.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?t.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):t.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":return!1;case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":return!1;case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Choice({value:[new u.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new u.Repeated({name:t.distributionPointNames||"",value:f.default.schema()})]}),new u.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})]}),new u.Primitive({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new u.Primitive({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new u.Primitive({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new u.Primitive({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new u.Primitive({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.names=(0,c.getParametersValue)(t,"names",e.defaultValues("names")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.names,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.names,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({value:[new u.Repeated({name:t.blockName||"names",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(424),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"permittedSubtrees"in t&&(this.permittedSubtrees=(0,c.getParametersValue)(t,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in t&&(this.excludedSubtrees=(0,c.getParametersValue)(t,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,function(e){return new f.default({schema:e})})),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Sequence({value:Array.from(this.permittedSubtrees,function(e){return e.toSchema()})})]})),"excludedSubtrees"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Sequence({value:Array.from(this.excludedSubtrees,function(e){return e.toSchema()})})]})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,function(e){return e.toJSON()})),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":return[];case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Repeated({name:t.permittedSubtrees||"",value:f.default.schema()})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Repeated({name:t.excludedSubtrees||"",value:f.default.schema()})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.base=(0,c.getParametersValue)(t,"base",e.defaultValues("base")),this.minimum=(0,c.getParametersValue)(t,"minimum",e.defaultValues("minimum")),"maximum"in t&&(this.maximum=(0,c.getParametersValue)(t,"maximum",e.defaultValues("maximum"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ");this.base=new f.default({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.valueBlock.isHexOnly?this.minimum=r.result.minimum:this.minimum=r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(r.result.maximum.valueBlock.isHexOnly?this.maximum=r.result.maximum:this.maximum=r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t=0;t=this.minimum instanceof u.Integer?this.minimum:new u.Integer({value:this.minimum}),e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r=0;r=this.maximum instanceof u.Integer?this.maximum:new u.Integer({value:this.maximum}),e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new f.default;case"minimum":return 0;case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.base||{}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({name:t.minimum||""})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Integer({name:t.maximum||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(426),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.distributionPoints=(0,c.getParametersValue)(t,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.distributionPoints,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.distributionPoints||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=r(401),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,c.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in t&&(this.reasons=(0,c.getParametersValue)(t,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in t&&(this.cRLIssuer=(0,c.getParametersValue)(t,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new f.default({schema:e})})),1===r.result.distributionPoint.idBlock.tagNumber&&(r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new m.default({schema:r.result.distributionPoint}))),"reasons"in r.result&&(this.reasons=new u.BitString({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];if("distributionPoint"in this){var t=void 0;t=this.distributionPoint instanceof Array?new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new u.BitString;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Choice({value:[new u.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Repeated({name:t.distributionPointNames||"",value:f.default.schema()})]}),new u.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})]}),new u.Primitive({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new u.Constructed({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new u.Repeated({name:t.cRLIssuerNames||"",value:f.default.schema()})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(428),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certificatePolicies=(0,c.getParametersValue)(t,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.certificatePolicies,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.certificatePolicies||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(429),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.policyIdentifier=(0,c.getParametersValue)(t,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in t&&(this.policyQualifiers=(0,c.getParametersValue)(t,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new u.ObjectIdentifier({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new u.Sequence({value:Array.from(this.policyQualifiers,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.policyIdentifier||""}),new u.Sequence({optional:!0,value:[new u.Repeated({name:t.policyQualifiers||"",value:f.default.schema()})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.policyQualifierId=(0,u.getParametersValue)(t,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=(0,u.getParametersValue)(t,"qualifier",e.defaultValues("qualifier")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new s.Any;default:throw new Error("Invalid member name for PolicyQualifierInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.policyQualifierId||""}),new s.Any({name:t.qualifier||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(431),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.mappings=(0,c.getParametersValue)(t,"mappings",e.defaultValues("mappings")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{mappings:"mappings"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.mappings,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,
c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.mappings||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.issuerDomainPolicy=(0,u.getParametersValue)(t,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=(0,u.getParametersValue)(t,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.issuerDomainPolicy}),new s.ObjectIdentifier({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":return"";case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.issuerDomainPolicy||""}),new s.ObjectIdentifier({name:t.subjectDomainPolicy||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"keyIdentifier"in t&&(this.keyIdentifier=(0,c.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in t&&(this.authorityCertIssuer=(0,c.getParametersValue)(t,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in t&&(this.authorityCertSerialNumber=(0,c.getParametersValue)(t,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(r.result.keyIdentifier.idBlock.tagClass=1,r.result.keyIdentifier.idBlock.tagNumber=4,this.keyIdentifier=r.result.keyIdentifier),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,function(e){return new f.default({schema:e})})),"authorityCertSerialNumber"in r.result&&(r.result.authorityCertSerialNumber.idBlock.tagClass=1,r.result.authorityCertSerialNumber.idBlock.tagNumber=2,this.authorityCertSerialNumber=r.result.authorityCertSerialNumber)}},{key:"toSchema",value:function(){var e=[];if("keyIdentifier"in this){var t=this.keyIdentifier;t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("authorityCertIssuer"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Sequence({value:Array.from(this.authorityCertIssuer,function(e){return e.toSchema()})})]})),"authorityCertSerialNumber"in this){var r=this.authorityCertSerialNumber;r.idBlock.tagClass=3,r.idBlock.tagNumber=2,e.push(r)}return new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,function(e){return e.toJSON()})),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new u.OctetString;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new u.Integer;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Primitive({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Repeated({name:t.authorityCertIssuer||"",value:f.default.schema()})]}),new u.Primitive({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"requireExplicitPolicy"in t&&(this.requireExplicitPolicy=(0,u.getParametersValue)(t,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in t&&(this.inhibitPolicyMapping=(0,u.getParametersValue)(t,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var n=r.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;var i=n.toBER(!1),a=s.fromBER(i);this.requireExplicitPolicy=a.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var o=r.result.inhibitPolicyMapping;o.idBlock.tagClass=1,o.idBlock.tagNumber=2;var u=o.toBER(!1),c=s.fromBER(u);this.inhibitPolicyMapping=c.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){var t=new s.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new s.Integer({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":return 0;case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Primitive({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.Primitive({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyPurposes=(0,u.getParametersValue)(t,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,function(e){return e.valueBlock.toString()})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.keyPurposes,function(e){return new s.ObjectIdentifier({value:e})})})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.keyPurposes||"",value:new s.ObjectIdentifier})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(399),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.accessDescriptions=(0,c.getParametersValue)(t,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.accessDescriptions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.accessDescriptions||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(417),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{extensions:"extensions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSIONS");this.extensions=Array.from(r.result.extensions,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({optional:t,name:r.blockName||"",value:[new u.Repeated({name:r.extensions||"",value:f.default.schema(r.extension||{})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(438),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.crlId=(0,c.getParametersValue)(t,"crlId",e.defaultValues("crlId")),this.crlValue=(0,c.getParametersValue)(t,"crlValue",e.defaultValues("crlValue")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{id:"crlId",value:"crlValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLBag");switch(this.crlId=r.result.crlId.valueBlock.toString(),this.crlValue=r.result.crlValue,this.crlId){case"1.2.840.113549.1.9.23.1":var n=u.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new f.default({schema:n.result});break;default:throw new Error('Incorrect "crlId" value in CertBag: '+this.crlId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.23.1",this.certValue=new u.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new u.Sequence({value:[new u.ObjectIdentifier({value:this.crlId}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"crlId":return"";case"crlValue":return new u.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"crlId":return""===t;case"crlValue":return t instanceof u.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.id||"id"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.value||"value"})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"tbsCertList",value:[new c.Integer({optional:!0,name:t.tbsCertListVersion||"tbsCertList.version",value:2}),m.default.schema(t.signature||{names:{blockName:"tbsCertList.signature"}}),p.default.schema(t.issuer||{names:{blockName:"tbsCertList.issuer"}}),g.default.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),g.default.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new c.Sequence({optional:!0,value:[new c.Repeated({name:t.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new c.Sequence({value:[new c.Integer,g.default.schema(),S.default.schema({},!0)]})})]}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[S.default.schema(t.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),c=i(u),l=r(384),f=r(387),h=r(388),m=n(h),d=r(401),p=n(d),v=r(416),g=n(v),y=r(439),b=n(y),w=r(436),S=n(w),k=r(389),P=n(k),A=r(391),C=n(A),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,l.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.thisUpdate=(0,l.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,l.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"revokedCertificates"in t&&(this.revokedCertificates=(0,l.getParametersValue)(t,"revokedCertificates",e.defaultValues("revokedCertificates"))),"crlExtensions"in t&&(this.crlExtensions=(0,l.getParametersValue)(t,"crlExtensions",e.defaultValues("crlExtensions"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRL");this.tbs=r.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in r.result&&(this.version=r.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new m.default({schema:r.result["tbsCertList.signature"]}),this.issuer=new p.default({schema:r.result["tbsCertList.issuer"]}),this.thisUpdate=new g.default({schema:r.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in r.result&&(this.nextUpdate=new g.default({schema:r.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in r.result&&(this.revokedCertificates=Array.from(r.result["tbsCertList.revokedCertificates"],function(e){return new b.default({schema:e})})),"tbsCertList.extensions"in r.result&&(this.crlExtensions=new S.default({schema:r.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new m.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return this.version!==e.defaultValues("version")&&t.push(new c.Integer({value:this.version})),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&t.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&t.push(new c.Sequence({value:Array.from(this.revokedCertificates,function(e){return e.toSchema()})})),"crlExtensions"in this&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new c.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==e.defaultValues("version")&&(t.version=this.version),"nextUpdate"in this&&(t.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(t.revokedCertificates=Array.from(this.revokedCertificates,function(e){return e.toJSON()})),"crlExtensions"in this&&(t.crlExtensions=this.crlExtensions.toJSON()),t}},{key:"isCertificateRevoked",value:function(e){if(this.issuer.isEqual(e.issuer)===!1)return!1;if("revokedCertificates"in this==!1)return!1;var t=!0,r=!1,n=void 0;try{for(var i,a=this.revokedCertificates[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.userCertificate.isEqual(e.serialNumber))return!0}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return!1}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");var n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);a.hashAlgorithm=new m.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var s=new P.default(a);this.signature=new m.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var u=(0,f.getCrypto)();return"undefined"==typeof u?Promise.reject("Unable to create WebCrypto object"):u.sign(i.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=this.signatureValue,i=this.tbs,a=-1;if("issuerCertificate"in t&&(a=t.issuerCertificate.subjectPublicKeyInfo,this.issuer.isEqual(t.issuerCertificate.subject)===!1))return Promise.resolve(!1);if("publicKeyInfo"in t&&(a=t.publicKeyInfo),a instanceof C.default==!1)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this){var o=!0,s=!1,u=void 0;try{for(var l,h=this.crlExtensions.extensions[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var m=l.value;if(m.critical&&"parsedValue"in m==!1)return Promise.resolve(!1)}}catch(e){s=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(s)throw u}}}var d=(0,f.getCrypto)();if("undefined"==typeof d)return Promise.reject("Unable to create WebCrypto object");var p=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===p?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=(0,f.getAlgorithmByOID)(e.signature.algorithmId);if("name"in t==="")return Promise.reject("Unsupported public key algorithm: "+e.signature.algorithmId);var r=(0,f.getAlgorithmParameters)(t.name,"importkey");if("hash"in r.algorithm&&(r.algorithm.hash.name=p),"ECDSA"===t.name){var n=!1;if("algorithmParams"in a.algorithm==!0&&"idBlock"in a.algorithm.algorithmParams&&1===a.algorithm.algorithmParams.idBlock.tagClass&&6===a.algorithm.algorithmParams.idBlock.tagNumber&&(n=!0),n===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var i=(0,f.getAlgorithmByOID)(a.algorithm.algorithmParams.valueBlock.toString());if("name"in i==!1)return Promise.reject("Unsupported named curve algorithm: "+a.algorithm.algorithmParams.valueBlock.toString());r.algorithm.namedCurve=i.name}var o=a.toSchema(),s=o.toBER(!1),u=new Uint8Array(s);return d.importKey("spki",u,r.algorithm,!0,r.usages)}),r=r.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=p);var a=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var o=c.fromBER(a);a=(0,f.createECDSASignatureFromCMS)(o.result)}if("RSA-PSS"===t.algorithm.name){var s=void 0;try{s=new P.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in s?r.algorithm.saltLength=s.saltLength:r.algorithm.saltLength=20;var u="SHA-1";if("hashAlgorithm"in s){var l=(0,f.getAlgorithmByOID)(s.hashAlgorithm.algorithmId);if("name"in l==!1)return Promise.reject("Unrecognized hash algorithm: "+s.hashAlgorithm.algorithmId);u=l.name}r.algorithm.hash.name=u}return d.verify(r.algorithm,t,new Uint8Array(a),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new m.default;case"issuer":return new p.default;case"thisUpdate":return new g.default;case"nextUpdate":return new g.default;case"revokedCertificates":return[];case"crlExtensions":return new S.default;case"signatureAlgorithm":return new m.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for CertificateRevocationList class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"CertificateList",value:[o(e),m.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(416),f=n(l),h=r(436),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.userCertificate=(0,c.getParametersValue)(t,"userCertificate",e.defaultValues("userCertificate")),this.revocationDate=(0,c.getParametersValue)(t,"revocationDate",e.defaultValues("revocationDate")),"crlEntryExtensions"in t&&(this.crlEntryExtensions=(0,c.getParametersValue)(t,"crlEntryExtensions",e.defaultValues("crlEntryExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for REV_CERT");this.userCertificate=r.result.userCertificate,this.revocationDate=new f.default({schema:r.result.revocationDate}),"crlEntryExtensions"in r.result&&(this.crlEntryExtensions=new m.default({schema:r.result.crlEntryExtensions}))}},{key:"toSchema",value:function(){var e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"userCertificate":return new u.Integer;case"revocationDate":return new f.default;case"crlEntryExtensions":return new m.default;default:throw new Error("Invalid member name for RevokedCertificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.userCertificate||"userCertificate"}),f.default.schema({names:{utcTimeName:t.revocationDate||"revocationDate",generalTimeName:t.revocationDate||"revocationDate"}}),m.default.schema({names:{blockName:t.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);
return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.secretTypeId=(0,u.getParametersValue)(t,"secretTypeId",e.defaultValues("secretTypeId")),this.secretValue=(0,u.getParametersValue)(t,"secretValue",e.defaultValues("secretValue")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{id:"secretTypeId",value:"secretValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SecretBag");this.secretTypeId=r.result.secretTypeId.valueBlock.toString(),this.secretValue=r.result.secretValue}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.secretTypeId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"secretTypeId":return"";case"secretValue":return new s.Any;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"secretTypeId":return""===t;case"secretValue":return t instanceof s.Any;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.id||"id"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.value||"value"})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(442),h=n(f),m=r(446),d=n(m),p=r(411),v=n(p),g=r(395),y=n(g),b=r(388),w=n(b),S=r(462),k=n(S),P=r(447),A=n(P),C=r(449),_=n(C),O=r(454),E=n(O),I=r(455),B=n(I),x=r(450),N=n(x),j=r(453),R=n(j),V=r(458),T=n(V),D=r(459),U=n(D),K=r(412),M=n(K),H=r(460),L=n(H),q=r(463),F=n(q),J=r(451),W=n(J),G=r(452),z=n(G),$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),"originatorInfo"in t&&(this.originatorInfo=(0,c.getParametersValue)(t,"originatorInfo",e.defaultValues("originatorInfo"))),this.recipientInfos=(0,c.getParametersValue)(t,"recipientInfos",e.defaultValues("recipientInfos")),this.encryptedContentInfo=(0,c.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,c.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",originatorInfo:"originatorInfo",recipientInfos:"recipientInfos",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_ENVELOPED_DATA");this.version=r.result.version.valueBlock.valueDec,"originatorInfo"in r.result&&(r.result.originatorInfo.idBlock.tagClass=1,r.result.originatorInfo.idBlock.tagNumber=16,this.originatorInfo=new h.default({schema:r.result.originatorInfo})),this.recipientInfos=Array.from(r.result.recipientInfos,function(e){return new d.default({schema:e})}),this.encryptedContentInfo=new v.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new y.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.version})),"originatorInfo"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new u.Set({value:Array.from(this.recipientInfos,function(e){return e.toSchema()})})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version};return"originatorInfo"in this&&(e.originatorInfo=this.originatorInfo.toJSON()),e.recipientInfos=Array.from(this.recipientInfos,function(e){return e.toJSON()}),e.encryptedContentInfo=this.encryptedContentInfo.toJSON(),"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"addRecipientByCertificate",value:function(e,t,r){var n=t||{};if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)r=1;else{if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")===-1)throw new Error("Unknown type of certificate's public key: "+e.subjectPublicKeyInfo.algorithm.algorithmId);r=2}switch("oaepHashAlgorithm"in n==!1&&(n.oaepHashAlgorithm="SHA-512"),"kdfAlgorithm"in n==!1&&(n.kdfAlgorithm="SHA-512"),"kekEncryptionLength"in n==!1&&(n.kekEncryptionLength=256),r){case 1:var i=(0,l.getOIDByAlgorithm)({name:"RSA-OAEP"});if(""===i)throw new Error("Can not find OID for OAEP");var a=(0,l.getOIDByAlgorithm)({name:n.oaepHashAlgorithm});if(""===a)throw new Error("Unknown OAEP hash algorithm: "+n.oaepHashAlgorithm);var o=new w.default({algorithmId:a,algorithmParams:new u.Null}),s=new k.default({hashAlgorithm:o,maskGenAlgorithm:new w.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:o.toSchema()})}),c=new A.default({version:0,rid:new _.default({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new w.default({algorithmId:i,algorithmParams:s.toSchema()}),recipientCertificate:e});this.recipientInfos.push(new d.default({variant:1,value:c}));break;case 2:var f=new E.default({rid:new B.default({variant:1,value:new _.default({issuer:e.issuer,serialNumber:e.serialNumber})})}),h=(0,l.getOIDByAlgorithm)({name:"AES-KW",length:n.kekEncryptionLength});if(""===h)throw new Error("Unknown length for key encryption algorithm: "+n.kekEncryptionLength);var m=new w.default({algorithmId:h,algorithmParams:new u.Null}),p=(0,l.getOIDByAlgorithm)({name:"ECDH",kdf:n.kdfAlgorithm});if(""===p)throw new Error("Unknown KDF algorithm: "+n.kdfAlgorithm);var v=new ArrayBuffer(64),g=new Uint8Array(v);(0,l.getRandomValues)(g);var y=new N.default({version:3,ukm:new u.OctetString({valueHex:v}),keyEncryptionAlgorithm:new w.default({algorithmId:p,algorithmParams:m.toSchema()}),recipientEncryptedKeys:new R.default({encryptedKeys:[f]}),recipientCertificate:e});this.recipientInfos.push(new d.default({variant:2,value:y}));break;default:throw new Error('Unknown "variant" value: '+r)}return!0}},{key:"addRecipientByPreDefinedData",value:function(e,t,r){var n=t||{};if(e instanceof ArrayBuffer==!1)throw new Error('Please pass "preDefinedData" in ArrayBuffer type');if(0===e.byteLength)throw new Error("Pre-defined data could have zero length");if("keyIdentifier"in n==!1){var i=new ArrayBuffer(16),a=new Uint8Array(i);(0,l.getRandomValues)(a),n.keyIdentifier=i}switch("hmacHashAlgorithm"in n==!1&&(n.hmacHashAlgorithm="SHA-512"),"iterationCount"in n==!1&&(n.iterationCount=2048),"keyEncryptionAlgorithm"in n==!1&&(n.keyEncryptionAlgorithm={name:"AES-KW",length:256}),"keyEncryptionAlgorithmParams"in n==!1&&(n.keyEncryptionAlgorithmParams=new u.Null),r){case 1:var o=(0,l.getOIDByAlgorithm)(n.keyEncryptionAlgorithm);if(""===o)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var s=new T.default({version:4,kekid:new U.default({keyIdentifier:new u.OctetString({valueHex:n.keyIdentifier})}),keyEncryptionAlgorithm:new w.default({algorithmId:o,algorithmParams:n.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new d.default({variant:3,value:s}));break;case 2:var c=(0,l.getOIDByAlgorithm)({name:"PBKDF2"});if(""===c)throw new Error("Can not find OID for PBKDF2");var f=new ArrayBuffer(64),h=new Uint8Array(f);(0,l.getRandomValues)(h);var m=(0,l.getOIDByAlgorithm)({name:"HMAC",hash:{name:n.hmacHashAlgorithm}});if(""===m)throw new Error('Incorrect value for "hmacHashAlgorithm": '+n.hmacHashAlgorithm);var p=new M.default({salt:new u.OctetString({valueHex:f}),iterationCount:n.iterationCount,prf:new w.default({algorithmId:m,algorithmParams:new u.Null})}),v=(0,l.getOIDByAlgorithm)(n.keyEncryptionAlgorithm);if(""===v)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var g=new L.default({version:0,keyDerivationAlgorithm:new w.default({algorithmId:c,algorithmParams:p.toSchema()}),keyEncryptionAlgorithm:new w.default({algorithmId:v,algorithmParams:n.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new d.default({variant:4,value:g}));break;default:throw new Error('Unknown value for "variant": '+r)}}},{key:"encrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,n=void 0,i=void 0,a=void 0,o=void 0;return t=t.then(function(){var t=y.recipientInfos[e].value.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof u.ObjectIdentifier==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);var r=t.valueBlock.toString();switch(r){case"1.2.840.10045.3.1.7":i="P-256",a=256;break;case"1.3.132.0.34":i="P-384",a=384;break;case"1.3.132.0.35":i="P-521",a=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return i},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return r=e.publicKey,n=e.privateKey,S.exportKey("spki",r)},function(e){return Promise.reject(e)}),t=t.then(function(t){return o=t,y.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:i},usages:[]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.deriveBits({name:"ECDH",public:e},n,a)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new w.default({schema:y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),n=(0,l.getAlgorithmByOID)(r.algorithmId);if("name"in n==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var i=n.length,a=new ArrayBuffer(4),o=new Uint8Array(a),s=3;s>=0;s--)o[s]=i,i>>=8;var c=new F.default({keyInfo:new w.default({algorithmId:r.algorithmId,algorithmParams:new u.Null}),entityUInfo:y.recipientInfos[e].value.ukm,suppPubInfo:new u.OctetString({valueHex:a})}),f=c.toSchema().toBER(!1),h=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in h==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):(0,l.kdf)(h.kdf,t,n.length,f)},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.importKey("raw",e,{name:"AES-KW"},!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.wrapKey("raw",m,e,{name:"AES-KW"})},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=u.fromBER(o),n=new W.default;n.variant=3,n.value=new z.default({schema:r.result}),"algorithmParams"in n.value.algorithm&&delete n.value.algorithm.algorithmParams,y.recipientInfos[e].value.originator=n,y.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new u.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve();return t=t.then(function(){var t=y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new k.default({schema:t}),n=(0,l.getAlgorithmByOID)(r.hashAlgorithm.algorithmId);return"name"in n==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):y.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:n.name}},usages:["encrypt","wrapKey"]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.encrypt(e.algorithm,e,p)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new u.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return r=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):S.importKey("raw",new Uint8Array(y.recipientInfos[e].value.preDefinedKEK),r,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.wrapKey("raw",m,e,r)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new u.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve(),r=void 0,n=void 0;return t=t.then(function(){if("keyDerivationAlgorithm"in y.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in y.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new M.default({schema:y.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return Promise.resolve()},function(e){return Promise.reject(e)}),t=t.then(function(){var t=new Uint8Array(y.recipientInfos[e].value.password);return S.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if(n=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in n==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var i="SHA-1";if("prf"in r){var a=(0,l.getAlgorithmByOID)(r.prf.algorithmId);if("name"in a==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");i=a.hash.name}var o=new Uint8Array(r.salt.valueBlock.valueHex),s=r.iterationCount;return S.deriveKey({name:"PBKDF2",hash:{name:i},salt:o,iterations:s},t,n,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return S.wrapKey("raw",m,e,n)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new u.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}var o=this,s=Promise.resolve(),c=new ArrayBuffer(16),f=new Uint8Array(c);(0,l.getRandomValues)(f);var h=new Uint8Array(t),m=void 0,d=void 0,p=void 0,g=[],y=this,b=(0,l.getOIDByAlgorithm)(e);if(""===b)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var S=(0,l.getCrypto)();return"undefined"==typeof S?Promise.reject("Unable to create WebCrypto object"):(s=s.then(function(){return S.generateKey(e,!0,["encrypt"])}),s=s.then(function(t){return m=t,S.encrypt({name:e.name,iv:f},m,h)},function(e){return Promise.reject(e)}),s=s.then(function(e){return d=e,S.exportKey("raw",m)},function(e){return Promise.reject(e)}).then(function(e){return p=e,!0},function(e){return Promise.reject(e)}),s=s.then(function(){o.version=2,o.encryptedContentInfo=new v.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new w.default({algorithmId:b,algorithmParams:new u.OctetString({valueHex:c})}),encryptedContent:new u.OctetString({valueHex:d})})},function(e){return Promise.reject(e)}),s=s.then(function(){for(var e=0;e<o.recipientInfos.length;e++){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=n(e);break;case 2:t=r(e);break;case 3:t=i(e);break;case 4:t=a(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}g.push(t)}return Promise.all(g)},function(e){return Promise.reject(e)}))}},{key:"decrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,n=void 0,i=void 0,a=void 0;return t=t.then(function(){if("recipientCertificate"in f==!1)return Promise.reject('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo"');if("recipientPrivateKey"in f==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');var t=f.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof u.ObjectIdentifier==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);switch(i=t.valueBlock.toString()){case"1.2.840.10045.3.1.7":r="P-256",n=256;break;case"1.3.132.0.34":r="P-384",n=384;break;case"1.3.132.0.35":r="P-521",n=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return m.importKey("pkcs8",f.recipientPrivateKey,{name:"ECDH",namedCurve:r},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(t){a=t,"algorithmParams"in h.recipientInfos[e].value.originator.value.algorithm==!1&&(h.recipientInfos[e].value.originator.value.algorithm.algorithmParams=new u.ObjectIdentifier({value:i}));var n=h.recipientInfos[e].value.originator.value.toSchema().toBER(!1);return m.importKey("spki",n,{name:"ECDH",namedCurve:r},!0,[])},function(e){return Promise.reject(e)}),t=t.then(function(e){return m.deriveBits({name:"ECDH",public:e},a,n)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new w.default({schema:h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),n=(0,l.getAlgorithmByOID)(r.algorithmId);if("name"in n==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var i=n.length,a=new ArrayBuffer(4),o=new Uint8Array(a),s=3;s>=0;s--)o[s]=i,i>>=8;var c=new F.default({keyInfo:new w.default({algorithmId:r.algorithmId,algorithmParams:new u.Null}),entityUInfo:h.recipientInfos[e].value.ukm,suppPubInfo:new u.OctetString({valueHex:a})}),f=c.toSchema().toBER(!1),m=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in m==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):(0,l.kdf)(m.kdf,t,n.length,f)},function(e){return Promise.reject(e)}),t=t.then(function(e){return m.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHex,t,{name:"AES-KW"},r,!0,["decrypt"])},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve();return t=t.then(function(){if("recipientPrivateKey"in f==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');var t=h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new k.default({schema:t}),n=(0,l.getAlgorithmByOID)(r.hashAlgorithm.algorithmId);return"name"in n==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):m.importKey("pkcs8",f.recipientPrivateKey,{name:"RSA-OAEP",hash:{name:n.name}},!0,["decrypt"])},function(e){return Promise.reject(e)}),t=t.then(function(t){return m.decrypt(t.algorithm,t,h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex)},function(e){return Promise.reject(e)}),t=t.then(function(e){var t=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in t==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.importKey("raw",e,t,!0,["decrypt"])},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return"preDefinedData"in f==!1?Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"'):(r=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):m.importKey("raw",f.preDefinedData,r,!0,["unwrapKey"]))},function(e){return Promise.reject(e)}),t=t.then(function(t){var n=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,r,n,!0,["decrypt"])},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve(),r=void 0,n=void 0;return t=t.then(function(){if("preDefinedData"in f==!1)return Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if("keyDerivationAlgorithm"in h.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in h.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new M.default({schema:h.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return m.importKey("raw",f.preDefinedData,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if(n=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in n==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var i="SHA-1";if("prf"in r){var a=(0,l.getAlgorithmByOID)(r.prf.algorithmId);if("name"in a==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");i=a.hash.name}var o=new Uint8Array(r.salt.valueBlock.valueHex),s=r.iterationCount;return m.deriveKey({name:"PBKDF2",hash:{name:i},salt:o,iterations:s},t,n,!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,n,r,!0,["decrypt"])},function(e){return Promise.reject(e)})}var o=this,s=Promise.resolve(),f=t||{},h=this;if(e+1>this.recipientInfos.length)return Promise.reject('Maximum value for "index" is: '+(this.recipientInfos.length-1));var m=(0,l.getCrypto)();return"undefined"==typeof m?Promise.reject("Unable to create WebCrypto object"):(s=s.then(function(){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=n(e);break;case 2:t=r(e);break;case 3:t=i(e);break;case 4:t=a(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}return t},function(e){return Promise.reject(e)}),s=s.then(function(e){var t=(0,l.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in t==!1)return Promise.reject('Incorrect "contentEncryptionAlgorithm": '+o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,n=new Uint8Array(r),i=new ArrayBuffer(0);if(o.encryptedContentInfo.encryptedContent.idBlock.isConstructed===!1)i=o.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var a=!0,s=!1,u=void 0;try{for(var f,h=o.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;i=(0,c.utilConcatBuf)(i,d.valueBlock.valueHex)}}catch(e){s=!0,u=e}finally{try{!a&&h.return&&h.return()}finally{if(s)throw u}}}return m.decrypt({name:t.name,iv:n},e,i)},function(e){return Promise.reject(e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originatorInfo":return new h.default;case"recipientInfos":return[];case"encryptedContentInfo":return new v.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EnvelopedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"originatorInfo":return 0===r.certs.certificates.length&&0===r.crls.crls.length;case"recipientInfos":case"unprotectedAttrs":return 0===r.length;case"encryptedContentInfo":return v.default.compareWithDefault("contentType",r.contentType)&&v.default.compareWithDefault("contentEncryptionAlgorithm",r.contentEncryptionAlgorithm)&&v.default.compareWithDefault("encryptedContent",r.encryptedContent);default:throw new Error("Invalid member name for EnvelopedData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),new u.Constructed({name:t.originatorInfo||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:h.default.schema().valueBlock.value}),new u.Set({value:[new u.Repeated({name:t.recipientInfos||"",value:d.default.schema()})]}),v.default.schema(t.encryptedContentInfo||{}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Repeated({name:t.unprotectedAttrs||"",value:y.default.schema()})]})]})}}]),e}();t.default=$},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(443),f=n(l),h=r(444),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certs=(0,c.getParametersValue)(t,"certs",e.defaultValues("certs")),this.crls=(0,c.getParametersValue)(t,"crls",e.defaultValues("crls")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{certs:"certs",crls:"crls"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorInfo");r.result.certs.idBlock.tagClass=1,r.result.certs.idBlock.tagNumber=17,this.certs=new f.default({schema:r.result.certs}),r.result.crls.idBlock.tagClass=1,r.result.crls.idBlock.tagNumber=17,this.crls=new m.default({schema:r.result.crls})}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})]})}},{key:"toJSON",value:function(){return{certs:this.certs.toJSON(),crls:this.crls.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certs":return new f.default;case"crls":return new m.default;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certs":return 0===t.certificates.length;case"crls":return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Constructed({name:t.certs||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),new u.Constructed({name:t.crls||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(415),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certificates=(0,c.getParametersValue)(t,"certificates",e.defaultValues("certificates")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_CERTIFICATE_SET");this.certificates=Array.from(r.result.certificates,function(e){return 1===e.idBlock.tagClass?new f.default({schema:e}):e})}},{key:"toSchema",value:function(){return new u.Set({value:Array.from(this.certificates,function(e){return e instanceof f.default?e.toSchema():e})})}},{key:"toJSON",value:function(){return{certificates:Array.from(this.certificates,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificates":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Set({name:t.blockName||"",value:[new u.Repeated({name:t.certificates||"",value:new u.Choice({value:[f.default.schema(),new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new u.Any]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new u.Any]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new u.ObjectIdentifier,new u.Any]})]})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),c=i(u),l=r(384),f=r(438),h=n(f),m=r(445),d=n(m),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.crls=(0,l.getParametersValue)(t,"crls",e.defaultValues("crls")),this.otherRevocationInfos=(0,l.getParametersValue)(t,"otherRevocationInfos",e.defaultValues("otherRevocationInfos")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{crls:"crls"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CSM_REVOCATION_INFO_CHOICES");var n=!0,i=!1,a=void 0;try{for(var o,s=r.result.crls[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;1===u.idBlock.tagClass?this.crls.push(new h.default({schema:u})):this.otherRevocationInfos.push(new d.default({schema:u}))}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}},{key:"toSchema",value:function(){var e=[];return e.push.apply(e,a(Array.from(this.crls,function(e){return e.toSchema()}))),e.push.apply(e,a(Array.from(this.otherRevocationInfos,function(e){var t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new c.Set({value:e})}},{key:"toJSON",value:function(){return{crls:Array.from(this.crls,function(e){return e.toJSON()}),otherRevocationInfos:Array.from(this.otherRevocationInfos,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"crls":return[];case"otherRevocationInfos":return[];default:throw new Error("Invalid member name for RevocationInfoChoices class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Set({name:t.blockName||"",value:[new c.Repeated({name:t.crls||"",value:new c.Choice({value:[h.default.schema(),new c.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new c.ObjectIdentifier,new c.Any]})]})})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.otherRevInfoFormat=(0,u.getParametersValue)(t,"otherRevInfoFormat",e.defaultValues("otherRevInfoFormat")),this.otherRevInfo=(0,u.getParametersValue)(t,"otherRevInfo",e.defaultValues("otherRevInfo")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=r.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=r.result.otherRevInfo}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.otherRevInfoFormat}),this.otherRevInfo]})}},{key:"toJSON",value:function(){var e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof s.Any||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new s.Any;default:throw new Error("Invalid member name for OtherRevocationInfoFormat class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.otherRevInfoFormat||"otherRevInfoFormat"}),new s.Any({name:t.otherRevInfo||"otherRevInfo"})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(447),f=n(l),h=r(450),m=n(h),d=r(458),p=n(d),v=r(460),g=n(v),y=r(461),b=n(y),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_RECIPIENT_INFO");if(1===r.result.blockName.idBlock.tagClass)this.variant=1,this.value=new f.default({schema:r.result.blockName});else{var n=r.result.blockName.idBlock.tagNumber;switch(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,n){case 1:this.variant=2,this.value=new m.default({schema:r.result.blockName});break;case 2:this.variant=3,this.value=new p.default({schema:r.result.blockName});break;case 3:this.variant=4,this.value=new g.default({schema:r.result.blockName});break;case 4:this.variant=5,this.value=new b.default({schema:r.result.blockName});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}},{key:"toSchema",value:function(){var e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new u.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"variant":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for RecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new u.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value}),new u.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2},value:p.default.schema().valueBlock.value}),new u.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:3},value:g.default.schema().valueBlock.value}),new u.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:4},value:b.default.schema().valueBlock.value})]})}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=r(415),m=n(h),d=r(448),p=n(d),v=r(449),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.rid=(0,c.getParametersValue)(t,"rid",e.defaultValues("rid")),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.recipientCertificate=(0,c.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",rid:{names:{blockName:"rid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyTransRecipientInfo");this.version=r.result.version.valueBlock.valueDec,3===r.result.rid.idBlock.tagClass?this.rid=r.result.rid.valueBlock.value[0]:this.rid=new g.default({schema:r.result.rid}),this.keyEncryptionAlgorithm=new f.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return this.rid instanceof g.default?(this.version=0,e.push(new u.Integer({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new u.Integer({value:this.version})),e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.rid]}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new u.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"rid":return{};case"keyEncryptionAlgorithm":return new f.default;case"encryptedKey":return new u.OctetString;case"recipientCertificate":return new m.default;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"rid":return 0===Object.keys(r).length;case"keyEncryptionAlgorithm":case"encryptedKey":return r.isEqual(e.defaultValues(t));case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),p.default.schema(t.rid||{}),f.default.schema(t.keyEncryptionAlgorithm||{}),new u.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(449),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):(this.variant=2,this.value=r.result.blockName.valueBlock.value[0])}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.value]});default:return new u.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"values":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new u.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:[new u.OctetString]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(401),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.issuer=(0,c.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new f.default({schema:r.result.issuer}),this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}},{key:"toJSON",value:function(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuer":return new f.default;case"serialNumber":return new u.Integer;default:throw new Error("Invalid member name for IssuerAndSerialNumber class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.issuer||{}),new u.Integer({name:t.serialNumber||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(451),f=n(l),h=r(388),m=n(h),d=r(453),p=n(d),v=r(415),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.originator=(0,c.getParametersValue)(t,"originator",e.defaultValues("originator")),"ukm"in t&&(this.ukm=(0,c.getParametersValue)(t,"ukm",e.defaultValues("ukm"))),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.recipientEncryptedKeys=(0,c.getParametersValue)(t,"recipientEncryptedKeys",e.defaultValues("recipientEncryptedKeys")),this.recipientCertificate=(0,c.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",originator:{names:{blockName:"originator"}},ukm:"ukm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},recipientEncryptedKeys:{names:{blockName:"recipientEncryptedKeys"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.originator=new f.default({schema:r.result.originator}),"ukm"in r.result&&(this.ukm=r.result.ukm),this.keyEncryptionAlgorithm=new m.default({schema:r.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new p.default({schema:r.result.recipientEncryptedKeys})}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.version})),e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),"ukm"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,originator:this.originator.toJSON()};return"ukm"in this&&(e.ukm=this.ukm.toJSON()),e.keyEncryptionAlgorithm=this.keyEncryptionAlgorithm.toJSON(),e.recipientEncryptedKeys=this.recipientEncryptedKeys.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originator":return new f.default;case"ukm":return new u.OctetString;case"keyEncryptionAlgorithm":return new m.default;case"recipientEncryptedKeys":return new p.default;case"recipientCertificate":return new g.default;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return 0===r;case"originator":return r.variant===-1&&"value"in r==!1;case"ukm":return r.isEqual(e.defaultValues("ukm"));case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"recipientEncryptedKeys":return 0===r.encryptedKeys.length;case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[f.default.schema(t.originator||{})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.OctetString({name:t.ukm||""})]}),m.default.schema(t.keyEncryptionAlgorithm||{}),p.default.schema(t.recipientEncryptedKeys||{})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(449),f=n(l),h=r(452),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorIdentifierOrKey");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):0===r.result.blockName.idBlock.tagNumber?(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=r.result.blockName):(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.variant=3,this.value=new m.default({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:var e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e;default:return new u.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new u.Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||""}),new u.Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||"",value:m.default.schema().valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithm=(0,c.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.publicKey=(0,c.getParametersValue)(t,"publicKey",e.defaultValues("publicKey")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorPublicKey");this.algorithm=new f.default({schema:r.result.algorithm}),this.publicKey=r.result.publicKey}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}},{key:"toJSON",value:function(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new f.default;case"publicKey":return new u.BitString;default:throw new Error("Invalid member name for OriginatorPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"algorithm":case"publicKey":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for OriginatorPublicKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.algorithm||{}),new u.BitString({name:t.publicKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(454),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.encryptedKeys=(0,c.getParametersValue)(t,"encryptedKeys",e.defaultValues("encryptedKeys")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{RecipientEncryptedKeys:"RecipientEncryptedKeys"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKeys");this.encryptedKeys=Array.from(r.result.RecipientEncryptedKeys,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.encryptedKeys,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{encryptedKeys:Array.from(this.encryptedKeys,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptedKeys":return[];default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"encryptedKeys":return 0===t.length;default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.RecipientEncryptedKeys||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(455),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.rid=(0,c.getParametersValue)(t,"rid",e.defaultValues("rid")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{rid:{names:{blockName:"rid"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKey");this.rid=new f.default({schema:r.result.rid}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"rid":return new f.default;case"encryptedKey":return new u.OctetString;default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"rid":return r.variant===-1&&"value"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.rid||{}),new u.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(449),f=n(l),h=r(456),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):(this.variant=2,r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.value=new m.default({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new u.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"value":return 0===Object.keys(t).length;default:
throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Choice({value:[f.default.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||""}}),new u.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:m.default.schema(t.rKeyId||{names:{blockName:t.blockName||""}}).valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(457),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.subjectKeyIdentifier=(0,c.getParametersValue)(t,"subjectKeyIdentifier",e.defaultValues("subjectKeyIdentifier")),"date"in t&&(this.date=(0,c.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,c.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{subjectKeyIdentifier:"subjectKeyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientKeyIdentifier");this.subjectKeyIdentifier=r.result.subjectKeyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new f.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.subjectKeyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"subjectKeyIdentifier":return new u.OctetString;case"date":return new u.GeneralizedTime;case"other":return new f.default;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"subjectKeyIdentifier":return r.isEqual(e.defaultValues("subjectKeyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return""===r.keyAttrId&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.OctetString({name:t.subjectKeyIdentifier||""}),new u.GeneralizedTime({optional:!0,name:t.date||""}),f.default.schema(t.other||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyAttrId=(0,u.getParametersValue)(t,"keyAttrId",e.defaultValues("keyAttrId")),"keyAttr"in t&&(this.keyAttr=(0,u.getParametersValue)(t,"keyAttr",e.defaultValues("keyAttr"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyAttrId:"keyAttrId",keyAttr:"keyAttr"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherKeyAttribute");this.keyAttrId=r.result.keyAttrId.valueBlock.toString(),"keyAttr"in r.result&&(this.keyAttr=r.result.keyAttr)}},{key:"toSchema",value:function(){var e=[];return e.push(new s.ObjectIdentifier({value:this.keyAttrId})),"keyAttr"in this&&e.push(this.keyAttr.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyAttrId:this.keyAttrId};return"keyAttr"in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyAttrId":return"";case"keyAttr":return{};default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"keyAttrId":return""===t;case"keyAttr":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({optional:t.optional||!0,name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.keyAttrId||""}),new s.Any({optional:!0,name:t.keyAttr||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(459),f=n(l),h=r(388),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.kekid=(0,c.getParametersValue)(t,"kekid",e.defaultValues("kekid")),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.preDefinedKEK=(0,c.getParametersValue)(t,"preDefinedKEK",e.defaultValues("preDefinedKEK")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",kekid:{names:{blockName:"kekid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KEKRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.kekid=new f.default({schema:r.result.kekid}),this.keyEncryptionAlgorithm=new m.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{version:this.version,kekid:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"kekid":return new f.default;case"keyEncryptionAlgorithm":return new m.default;case"encryptedKey":return new u.OctetString;case"preDefinedKEK":return new ArrayBuffer(0);default:throw new Error("Invalid member name for KEKRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"KEKRecipientInfo":return r===e.defaultValues("version");case"kekid":return r.compareWithDefault("keyIdentifier",r.keyIdentifier)&&"date"in r==!1&&"other"in r==!1;case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"preDefinedKEK":return 0===r.byteLength;default:throw new Error("Invalid member name for KEKRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),f.default.schema(t.kekid||{}),m.default.schema(t.keyEncryptionAlgorithm||{}),new u.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(457),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyIdentifier=(0,c.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier")),"date"in t&&(this.date=(0,c.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,c.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KEKIdentifier");this.keyIdentifier=r.result.keyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new f.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyIdentifier:this.keyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new u.OctetString;case"date":return new u.GeneralizedTime;case"other":return new f.default;default:throw new Error("Invalid member name for KEKIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyIdentifier":return r.isEqual(e.defaultValues("keyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return r.compareWithDefault("keyAttrId",r.keyAttrId)&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for KEKIdentifier class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.OctetString({name:t.keyIdentifier||""}),new u.GeneralizedTime({optional:!0,name:t.date||""}),f.default.schema(t.other||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),"keyDerivationAlgorithm"in t&&(this.keyDerivationAlgorithm=(0,c.getParametersValue)(t,"keyDerivationAlgorithm",e.defaultValues("keyDerivationAlgorithm"))),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.password=(0,c.getParametersValue)(t,"password",e.defaultValues("password")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",keyDerivationAlgorithm:"keyDerivationAlgorithm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PasswordRecipientinfo");this.version=r.result.version.valueBlock.valueDec,"keyDerivationAlgorithm"in r.result&&(r.result.keyDerivationAlgorithm.idBlock.tagClass=1,r.result.keyDerivationAlgorithm.idBlock.tagNumber=16,this.keyDerivationAlgorithm=new f.default({schema:r.result.keyDerivationAlgorithm})),this.keyEncryptionAlgorithm=new f.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.version})),"keyDerivationAlgorithm"in this&&e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new u.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,keyDerivationAlgorithm:this.keyDerivationAlgorithm.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"keyDerivationAlgorithm":return new f.default;case"keyEncryptionAlgorithm":return new f.default;case"encryptedKey":return new u.OctetString;case"password":return new ArrayBuffer(0);default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===-1;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"password":return 0===r.byteLength;default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||""}),new u.Constructed({name:t.keyDerivationAlgorithm||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),f.default.schema(t.keyEncryptionAlgorithm||{}),new u.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.oriType=(0,u.getParametersValue)(t,"oriType",e.defaultValues("oriType")),this.oriValue=(0,u.getParametersValue)(t,"oriValue",e.defaultValues("oriValue")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{oriType:"oriType",oriValue:"oriValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherRecipientInfo");this.oriType=r.result.oriType.valueBlock.toString(),this.oriValue=r.result.oriValue}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.oriType}),this.oriValue]})}},{key:"toJSON",value:function(){var t={oriType:this.oriType};return e.compareWithDefault("oriValue",this.oriValue)===!1&&(t.oriValue=this.oriValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"oriType":return"";case"oriValue":return{};default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"oriType":return""===t;case"oriValue":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.oriType||""}),new s.Any({name:t.oriValue||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,c.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.pSourceAlgorithm=(0,c.getParametersValue)(t,"pSourceAlgorithm",e.defaultValues("pSourceAlgorithm")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},pSourceAlgorithm:{names:{blockName:"pSourceAlgorithm"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAESOAEPParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new f.default({schema:r.result.maskGenAlgorithm})),"pSourceAlgorithm"in r.result&&(this.pSourceAlgorithm=new f.default({schema:r.result.pSourceAlgorithm}))}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||(t.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new u.Null});case"maskGenAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new u.Null}).toSchema()});case"pSourceAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new u.OctetString({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:throw new Error("Invalid member name for RSAESOAEPParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[f.default.schema(t.hashAlgorithm||{})]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[f.default.schema(t.maskGenAlgorithm||{})]}),new u.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[f.default.schema(t.pSourceAlgorithm||{})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyInfo=(0,c.getParametersValue)(t,"keyInfo",e.defaultValues("keyInfo")),"entityUInfo"in t&&(this.entityUInfo=(0,c.getParametersValue)(t,"entityUInfo",e.defaultValues("entityUInfo"))),this.suppPubInfo=(0,c.getParametersValue)(t,"suppPubInfo",e.defaultValues("suppPubInfo")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyInfo:{names:{blockName:"keyInfo"}},entityUInfo:"entityUInfo",suppPubInfo:"suppPubInfo"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECC_CMS_SharedInfo");this.keyInfo=new f.default({schema:r.result.keyInfo}),"entityUInfo"in r.result&&(this.entityUInfo=r.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=r.result.suppPubInfo.valueBlock.value[0]}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyInfo.toSchema()),"entityUInfo"in this&&e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyInfo:this.keyInfo.toJSON()};return"entityUInfo"in this&&(e.entityUInfo=this.entityUInfo.toJSON()),e.suppPubInfo=this.suppPubInfo.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyInfo":return new f.default;case"entityUInfo":return new u.OctetString;case"suppPubInfo":return new u.OctetString;default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyInfo":case"entityUInfo":case"suppPubInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.keyInfo||{}),new u.Constructed({name:t.entityUInfo||"",idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new u.OctetString]}),new u.Constructed({name:t.suppPubInfo||"",idBlock:{tagClass:3,tagNumber:2},value:[new u.OctetString]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),c=i(u),l=r(384),f=r(387),h=r(465),m=n(h),d=r(388),p=n(d),v=r(415),g=n(v),y=r(467),b=n(y),w=r(389),S=n(w),k=r(401),P=n(k),A=r(468),C=n(A),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbsResponseData=(0,l.getParametersValue)(t,"tbsResponseData",e.defaultValues("tbsResponseData")),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,l.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_BASIC_RESPONSE");this.tbsResponseData=new m.default({schema:r.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new p.default({schema:r.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=r.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in r.result&&(this.certs=Array.from(r.result["BasicOCSPResponse.certs"],function(e){return new g.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new c.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new c.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new c.Sequence({value:e})}},{key:"toJSON",value:function(){var e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}},{key:"getCertificateStatus",value:function(e,t){var r=this,n=Promise.resolve(),i={isForCertificate:!1,status:2},a={},o=[],s=[],u=!0,c=!1,l=void 0;try{for(var h,m=this.tbsResponseData.responses[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var d=h.value,p=(0,f.getAlgorithmByOID)(d.certID.hashAlgorithm.algorithmId);if("name"in p==!1)return Promise.reject("Wrong CertID hashing algorithm: "+d.certID.hashAlgorithm.algorithmId);if(p.name in a==!1){a[p.name]=1;var v=new b.default;o.push(v),s.push(v.createForCertificate(e,{hashAlgorithm:p.name,issuerCertificate:t}))}}}catch(e){c=!0,l=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw l}}return n=n.then(function(){return Promise.all(s)}),n=n.then(function(){var e=!0,t=!1,n=void 0;try{for(var a,s=r.tbsResponseData.responses[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var u=a.value,c=!0,l=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var d=h.value;if(u.certID.isEqual(d)){i.isForCertificate=!0;try{switch(u.certStatus.idBlock.isConstructed){case!0:1===u.certStatus.idBlock.tagNumber&&(i.status=1);break;case!1:switch(u.certStatus.idBlock.tagNumber){case 0:i.status=0;break;case 2:i.status=2}}}catch(e){}return i}}}catch(e){l=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(l)throw f}}}}catch(e){t=!0,n=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw n}}return i})}},{key:"sign",value:function(e,t){var r=this;if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof t)t="SHA-1";else{var n=(0,f.getOIDByAlgorithm)({name:t});if(""===n)return Promise.reject("Unsupported hash algorithm: "+t)}var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==t.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:t});if(""===o)return Promise.reject("Unsupported hash algorithm: "+t);a.hashAlgorithm=new p.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new p.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var s=new S.default(a);this.signatureAlgorithm=new p.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbsResponseData.tbs=this.tbsResponseData.toSchema(!0).toBER(!1);var u=(0,f.getCrypto)();return"undefined"==typeof u?Promise.reject("Unable to create WebCrypto object"):u.sign(i.algorithm,e,new Uint8Array(this.tbsResponseData.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),r.signature=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){function e(e){if(e.issuer.isEqual(n.issuer)===!0&&e.serialNumber.isEqual(n.serialNumber)===!0)return null;var t=!1,r=!0,i=!1,a=void 0;try{for(var o,s=e.extensions[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;"2.5.29.19"===u.extnID&&"cA"in u.parsedValue&&u.parsedValue.cA===!0&&(t=!0)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("certs"in this==!1)return Promise.reject("No certificates attached to the BasicOCSPResponce");var n=null,i=new Uint8Array(this.tbsResponseData.tbs),a=-1,s=Promise.resolve(),u="",h=[];"trustedCerts"in r&&(h=r.trustedCerts);var m=(0,f.getCrypto)();if("undefined"==typeof m)return Promise.reject("Unable to create WebCrypto object");if(u=(0,f.getHashAlgorithm)(this.signatureAlgorithm),
""===u)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var d=0,p={};if(this.tbsResponseData.responderID instanceof P.default)d=0,p=this.tbsResponseData.responderID;else{if(!(this.tbsResponseData.responderID instanceof c.OctetString))return Promise.reject("Wrong value for responderID");d=1,p=this.tbsResponseData.responderID}return s=0===d?s.then(function(){var e=!0,r=!1,n=void 0;try{for(var i,s=t.certs.entries()[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var u=o(i.value,2),c=u[0],l=u[1];if(l.subject.isEqual(p)){a=c;break}}}catch(e){r=!0,n=e}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}}):s.then(function(){return Promise.all(Array.from(t.certs,function(e){return m.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,n=!1,i=void 0;try{for(var s,u=t.certs.entries()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=o(s.value,2),f=c[0];c[1];if((0,l.isEqualBuffer)(e[f],p.valueBlock.valueHex)){a=f;break}}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}})}),s=s.then(function(){return a===-1?Promise.reject("Correct certificate was not found in OCSP response"):(n=t.certs[a],Promise.all(Array.from(t.certs,function(t){return e(t)})).then(function(e){var t=[];t.push(n);var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!==u&&t.push(u)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}var c=new C.default({certs:t,trustedCerts:h});return c.verify().then(function(e){return e.result===!0?Promise.resolve():Promise.reject("Validation of signer's certificate failed")},function(e){return Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return Promise.reject("Error during checking certificates for CA flag: "+e)}))}),s=s.then(function(){var e=void 0;e="1.2.840.113549.1.1.10"===t.certs[a].signatureAlgorithm.algorithmId?t.certs[a].signatureAlgorithm.algorithmId:t.certs[a].subjectPublicKeyInfo.algorithm.algorithmId;var r=(0,f.getAlgorithmByOID)(e);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+e);var n=r.name,i=(0,f.getAlgorithmParameters)(n,"importkey");if("hash"in i.algorithm&&(i.algorithm.hash.name=u),"ECDSA"===n){if(t.certs[a].subjectPublicKeyInfo.algorithm.algorithmParams instanceof c.ObjectIdentifier==!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var o=(0,f.getAlgorithmByOID)(t.certs[a].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in o==!1)return Promise.reject("Unsupported named curve algorithm: "+t.certs[a].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());i.algorithm.namedCurve=o.name}var s=t.certs[a].subjectPublicKeyInfo.toSchema(),l=s.toBER(!1),h=new Uint8Array(l);return m.importKey("spki",h,i.algorithm,!0,i.usages)}),s=s.then(function(e){var r=(0,f.getAlgorithmParameters)(e.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=u);var n=t.signature.valueBlock.valueHex;if("ECDSA"===e.algorithm.name){var a=c.fromBER(n);n=(0,f.createECDSASignatureFromCMS)(a.result)}if("RSA-PSS"===e.algorithm.name){var o=void 0;try{o=new S.default({schema:t.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in o?r.algorithm.saltLength=o.saltLength:r.algorithm.saltLength=20;var s="SHA-1";if("hashAlgorithm"in o){var l=(0,f.getAlgorithmByOID)(o.hashAlgorithm.algorithmId);if("name"in l==!1)return Promise.reject("Unrecognized hash algorithm: "+o.hashAlgorithm.algorithmId);s=l.name}r.algorithm.hash.name=s}return m.verify(r.algorithm,e,new Uint8Array(n),i)})}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsResponseData":return new m.default;case"signatureAlgorithm":return new p.default;case"signature":return new c.BitString;case"certs":return[];default:throw new Error("Invalid member name for BasicOCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":var n=m.default.compareWithDefault("tbs",r.tbs)&&m.default.compareWithDefault("responderID",r.responderID)&&m.default.compareWithDefault("producedAt",r.producedAt)&&m.default.compareWithDefault("responses",r.responses);return"responseExtensions"in r&&(n=n&&m.default.compareWithDefault("responseExtensions",r.responseExtensions)),n;case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for BasicOCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"BasicOCSPResponse",value:[m.default.schema(t.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),p.default.schema(t.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new c.BitString({name:t.signature||"BasicOCSPResponse.signature"}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Sequence({value:[new c.Repeated({name:"BasicOCSPResponse.certs",value:g.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(401),f=n(l),h=r(466),m=n(h),d=r(417),p=n(d),v=r(436),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.responderID=(0,c.getParametersValue)(t,"responderID",e.defaultValues("responderID")),this.producedAt=(0,c.getParametersValue)(t,"producedAt",e.defaultValues("producedAt")),this.responses=(0,c.getParametersValue)(t,"responses",e.defaultValues("responses")),"responseExtensions"in t&&(this.responseExtensions=(0,c.getParametersValue)(t,"responseExtensions",e.defaultValues("responseExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ocsp.ResponseData");this.tbs=r.result.ResponseData.valueBeforeDecode,"ResponseData.version"in r.result&&(this.version=r.result["ResponseData.version"].valueBlock.valueDec),1===r.result["ResponseData.responderID"].idBlock.tagNumber?this.responderID=new f.default({schema:r.result["ResponseData.responderID"].valueBlock.value[0]}):this.responderID=r.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=r.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(r.result["ResponseData.responses"],function(e){return new m.default({schema:e})}),"ResponseData.responseExtensions"in r.result&&(this.responseExtensions=Array.from(r.result["ResponseData.responseExtensions"].valueBlock.value,function(e){return new p.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=u.fromBER(this.tbs).result}else{var n=[];"version"in this&&n.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({value:this.version})]})),this.responderID instanceof f.default?n.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):n.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),n.push(new u.GeneralizedTime({valueDate:this.producedAt})),n.push(new u.Sequence({value:Array.from(this.responses,function(e){return e.toSchema()})})),"responseExtensions"in this&&n.push(new u.Sequence({value:Array.from(this.responseExtensions,function(e){return e.toSchema()})})),r=new u.Sequence({value:n})}return r}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,function(e){return e.toJSON()})),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error("Invalid member name for ResponseData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"responderID":return 0===Object.keys(r).length;case"producedAt":return r===e.defaultValues(t);case"responses":case"responseExtensions":return 0===r.length;default:throw new Error("Invalid member name for ResponseData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"ResponseData",value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({name:t.version||"ResponseData.version"})]}),new u.Choice({value:[new u.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[f.default.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new u.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new u.OctetString({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new u.GeneralizedTime({name:t.producedAt||"ResponseData.producedAt"}),new u.Sequence({value:[new u.Repeated({name:"ResponseData.responses",value:m.default.schema(t.response||{})})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[g.default.schema(t.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(467),f=n(l),h=r(417),m=n(h),d=r(436),p=n(d),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certID=(0,c.getParametersValue)(t,"certID",e.defaultValues("certID")),this.certStatus=(0,c.getParametersValue)(t,"certStatus",e.defaultValues("certStatus")),this.thisUpdate=(0,c.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,c.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"singleExtensions"in t&&(this.singleExtensions=(0,c.getParametersValue)(t,"singleExtensions",e.defaultValues("singleExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new f.default({schema:r.result.certID}),this.certStatus=r.result.certStatus,this.thisUpdate=r.result.thisUpdate.toDate(),"nextUpdate"in r.result&&(this.nextUpdate=r.result.nextUpdate.toDate()),"singleExtensions"in r.result&&(this.singleExtensions=Array.from(r.result.singleExtensions.valueBlock.value,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new u.GeneralizedTime({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new u.GeneralizedTime({valueDate:this.nextUpdate})),"singleExtensions"in this&&e.push(new u.Sequence({value:Array.from(this.singleExtensions,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"certID":return new f.default;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error("Invalid member name for SingleResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"certID":return f.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&f.default.compareWithDefault("issuerNameHash",r.issuerNameHash)&&f.default.compareWithDefault("issuerKeyHash",r.issuerKeyHash)&&f.default.compareWithDefault("serialNumber",r.serialNumber);case"certStatus":return 0===Object.keys(r).length;case"thisUpdate":case"nextUpdate":return r===e.defaultValues(t);default:throw new Error("Invalid member name for SingleResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.certID||{}),new u.Choice({value:[new u.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new u.Constructed({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new u.GeneralizedTime,new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Enumerated]})]}),new u.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new u.GeneralizedTime({name:t.thisUpdate||""}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.GeneralizedTime({name:t.nextUpdate||""})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[p.default.schema(t.singleExtensions||{})]})]})}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(388),h=n(f),m=r(415),d=(n(m),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.issuerNameHash=(0,c.getParametersValue)(t,"issuerNameHash",e.defaultValues("issuerNameHash")),this.issuerKeyHash=(0,c.getParametersValue)(t,"issuerKeyHash",e.defaultValues("issuerKeyHash")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new h.default({schema:r.result.hashAlgorithm}),this.issuerNameHash=r.result.issuerNameHash,this.issuerKeyHash=r.result.issuerKeyHash,this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}},{key:"isEqual",value:function(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&((0,c.isEqualBuffer)(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)!==!1&&((0,c.isEqualBuffer)(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)!==!1&&!!this.serialNumber.isEqual(e.serialNumber)))}},{key:"createForCertificate",value:function(e,t){var r=this,n=Promise.resolve(),i=void 0,a=(0,l.getCrypto)();if("undefined"==typeof a)return Promise.reject("Unable to create WebCrypto object");if("hashAlgorithm"in t==!1)return Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"');var o=(0,l.getOIDByAlgorithm)({name:t.hashAlgorithm});return""===o?Promise.reject('Incorrect "hashAlgorithm": '+this.hashAlgorithm):(this.hashAlgorithm=new h.default({algorithmId:o,algorithmParams:new u.Null}),"issuerCertificate"in t?(i=t.issuerCertificate,this.serialNumber=e.serialNumber,n=n.then(function(){return a.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1))},function(e){return Promise.reject(e)}),n=n.then(function(e){r.issuerNameHash=new u.OctetString({valueHex:e});var n=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex;return a.digest({name:t.hashAlgorithm},n)},function(e){return Promise.reject(e)}).then(function(e){r.issuerKeyHash=new u.OctetString({valueHex:e})},function(e){return Promise.reject(e)})):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new h.default;case"issuerNameHash":case"issuerKeyHash":return new u.OctetString;case"serialNumber":return new u.Integer;default:throw new Error("Invalid member name for CertID class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for CertID class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[h.default.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||""}}),new u.OctetString({name:t.issuerNameHash||""}),new u.OctetString({name:t.issuerKeyHash||""}),new u.Integer({name:t.serialNumber||""})]})}}]),e}());t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(384),u=r(387),c=r(438),l=(n(c),r(415)),f=(n(l),r(469)),h=n(f),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.trustedCerts=(0,s.getParametersValue)(t,"trustedCerts",e.defaultValues("trustedCerts")),this.certs=(0,s.getParametersValue)(t,"certs",e.defaultValues("certs")),this.crls=(0,s.getParametersValue)(t,"crls",e.defaultValues("crls")),this.ocsps=(0,s.getParametersValue)(t,"ocsps",e.defaultValues("ocsps")),this.checkDate=(0,s.getParametersValue)(t,"checkDate",e.defaultValues("checkDate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"sort",value:function(){function e(e,t){var r,n,i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=[],!e.subject.isEqual(e.issuer)){o.next=12;break}return o.prev=2,o.next=5,e.verify();case 5:if(n=o.sent,n!==!0){o.next=8;break}return o.abrupt("return",[t]);case 8:o.next=12;break;case 10:o.prev=10,o.t0=o.catch(2);case 12:i=0;case 13:if(!(i<l.length)){o.next=26;break}return o.prev=14,o.next=17,e.verify(l[i]);case 17:a=o.sent,a===!0&&r.push(i),o.next=23;break;case 21:o.prev=21,o.t1=o.catch(14);case 23:i++,o.next=13;break;case 26:return o.abrupt("return",r.length?r:[-1]);case 27:case"end":return o.stop()}},c[0],this,[[2,10],[14,21]])}function t(r,n){var i,a,o,s,u,f,h,m,d,p;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=function(e){for(var t=!0,r=0;r<e.length;r++){for(var n=0;n<e.length;n++)if(n!==r&&e[r]===e[n]){t=!1;break}if(!t)break}return t},i=[],c.next=4,e(r,n);case 4:if(o=c.sent,1!==o.length||o[0]!==-1){c.next=7;break}throw new Error("Incorrect result");case 7:if(1!==o.length){c.next=17;break}if(o[0]!==n){c.next=11;break}return i.push(o),c.abrupt("return",i);case 11:return c.next=13,t(l[o[0]],o[0]);case 13:for(s=c.sent,u=0;u<s.length;u++)f=s[u].slice(),f.splice(0,0,o[0]),a(f)?i.push(f):i.push(s[u]);c.next=29;break;case 17:h=0;case 18:if(!(h<o.length)){c.next=29;break}if(o[h]!==n){c.next=22;break}return i.push([o[h]]),c.abrupt("continue",26);case 22:return c.next=24,t(l[o[h]],o[h]);case 24:for(m=c.sent,d=0;d<m.length;d++)p=m[d].slice(),p.splice(0,0,o[h]),a(p)?i.push(p):i.push(m[d]);case 26:h++,c.next=18;break;case 29:return c.abrupt("return",i);case 30:case"end":return c.stop()}},c[1],this)}function r(e){var t,r,n,a,o,s;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=[],r=[],n=[],t.push.apply(t,i(l.filter(function(t){return e.issuer.isEqual(t.subject)}))),0!==t.length){u.next=6;break}return u.abrupt("return",{status:1,statusMessage:"No certificate's issuers"});case 6:if(r.push.apply(r,i(f.crls.filter(function(t){return t.issuer.isEqual(e.issuer)}))),0!==r.length){u.next=9;break}return u.abrupt("return",{status:1,statusMessage:"No CRLs for specific certificate issuer"});case 9:a=0;case 10:if(!(a<r.length)){u.next=32;break}if(!(r[a].nextUpdate.value<f.checkDate)){u.next=13;break}return u.abrupt("continue",29);case 13:o=0;case 14:if(!(o<t.length)){u.next=29;break}return u.prev=15,u.next=18,r[a].verify({issuerCertificate:t[o]});case 18:if(s=u.sent,!s){u.next=22;break}return n.push({crl:r[a],certificate:t[o]}),u.abrupt("break",29);case 22:u.next=26;break;case 24:u.prev=24,u.t0=u.catch(15);case 26:o++,u.next=14;break;case 29:a++,u.next=10;break;case 32:if(!n.length){u.next=34;break}return u.abrupt("return",{status:0,statusMessage:"",result:n});case 34:return u.abrupt("return",{status:1,statusMessage:"No valid CRLs found"});case 35:case"end":return u.stop()}},c[2],this,[[15,24]])}function n(e,t){var r,n,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=(0,u.getAlgorithmByOID)(e.signatureAlgorithm.algorithmId),"name"in r!=!1){a.next=3;break}return a.abrupt("return",1);case 3:if("hash"in r!=!1){a.next=5;break}return a.abrupt("return",1);case 5:n=0;case 6:if(!(n<f.ocsps.length)){a.next=17;break}return a.next=9,f.ocsps[n].getCertificateStatus(e,t);case 9:if(i=a.sent,!i.isForCertificate){a.next=14;break}if(0!==i.status){a.next=13;break}return a.abrupt("return",0);case 13:return a.abrupt("return",1);case 14:n++,a.next=6;break;case 17:return a.abrupt("return",2);case 18:case"end":return a.stop()}},c[3],this)}function a(e){var t,r,n,i,a,o,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=!1,r=!1,n=!1,i=!1,!("extensions"in e)){u.next=20;break}a=0;case 6:if(!(a<e.extensions.length)){u.next=14;break}if(e.extensions[a].critical!==!0||"parsedValue"in e.extensions[a]!=!1){u.next=9;break}return u.abrupt("return",{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: "+e.extensions[a].extnID});case 9:"2.5.29.15"===e.extensions[a].extnID&&(n=!0,o=new Uint8Array(e.extensions[a].parsedValue.valueBlock.valueHex),4===(4&o[0])&&(r=!0),2===(2&o[0])&&(i=!0)),"2.5.29.19"===e.extensions[a].extnID&&"cA"in e.extensions[a].parsedValue&&e.extensions[a].parsedValue.cA===!0&&(t=!0);case 11:a++,u.next=6;break;case 14:if(r!==!0||t!==!1){u.next=16;break}return u.abrupt("return",{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'});case 16:if(n!==!0||t!==!0||r!==!1){u.next=18;break}return u.abrupt("return",{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'});case 18:if(t!==!0||n!==!0||!s||i!==!1){u.next=20;break}return u.abrupt("return",{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'});case 20:if(t!==!1){u.next=22;break}return u.abrupt("return",{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"});case 22:return u.abrupt("return",{result:!0,resultCode:0,resultMessage:""});case 23:case"end":return u.stop()}},c[4],this)}function o(e,t){var i,o,s,u,l,h,m,d,p,v;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:i=0;case 1:if(!(i<e.length)){c.next=7;break}if(!(e[i].notBefore.value>t||e[i].notAfter.value<t)){c.next=4;break}return c.abrupt("return",{result:!1,resultCode:8,resultMessage:"Certificate validity period is out of checking date"});case 4:i++,c.next=1;break;case 7:if(!(e.length<2)){c.next=9;break}return c.abrupt("return",{result:!1,resultCode:9,resultMessage:"Too short certificate path"});case 9:o=e.length-2;case 10:if(!(o>=0)){c.next=17;break}if(e[o].issuer.isEqual(e[o].subject)!==!1){c.next=14;break}if(e[o].issuer.isEqual(e[o+1].subject)!==!1){c.next=14;break}return c.abrupt("return",{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"});case 14:o--,c.next=10;break;case 17:if(0===f.crls.length&&0===f.ocsps.length){c.next=58;break}s=0;case 19:if(!(s<e.length-2)){c.next=58;break}if(u=void 0,l=void 0,0===f.ocsps.length){c.next=32;break}return c.next=25,n(e[s],e[s+1]);case 25:u=c.sent,c.t0=u,c.next=0===c.t0?29:1===c.t0?30:2===c.t0?31:32;break;case 29:return c.abrupt("continue",55);case 30:return c.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"});case 31:return c.abrupt("break",32);case 32:if(0===f.crls.length){c.next=53;break}return c.next=35,r(e[s]);case 35:if(l=c.sent,!l.status){c.next=38;break}throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: "+l.statusMessage};case 38:h=0;case 39:if(!(h<l.result.length)){c.next=51;break}if(m=l.result[h].crl.isCertificateRevoked(e[s]),!m){c.next=43;break}return c.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"});case 43:return c.next=45,a(l.result[h].certificate,!0);case 45:if(d=c.sent,d.result!==!1){c.next=48;break}return c.abrupt("return",{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"});case 48:h++,c.next=39;break;case 51:c.next=55;break;case 53:if(2!==u){c.next=55;break}return c.abrupt("return",{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"});case 55:s++,c.next=19;break;case 58:p=1;case 59:if(!(p<e.length)){c.next=68;break}return c.next=62,a(e[p]);case 62:if(v=c.sent,v.result!==!1){c.next=65;break}return c.abrupt("return",{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"});case 65:p++,c.next=59;break;case 68:return c.abrupt("return",{result:!0});case 69:case"end":return c.stop()}},c[5],this)}var c=[e,t,r,n,a,o].map(regeneratorRuntime.mark),l=[],f=this;return(0,h.default)(regeneratorRuntime.mark(function e(){var r,n,a,u,c,h,m,d,p,v,g,y,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.push.apply(l,i(f.trustedCerts)),l.push.apply(l,i(f.certs)),r=0;case 3:if(!(r<l.length)){e.next=18;break}n=0;case 5:if(!(n<l.length)){e.next=15;break}if(r!==n){e.next=8;break}return e.abrupt("continue",12);case 8:if(!(0,s.isEqualBuffer)(l[r].tbs,l[n].tbs)){e.next=12;break}return l.splice(n,1),r=0,e.abrupt("break",15);case 12:n++,e.next=5;break;case 15:r++,e.next=3;break;case 18:return a=void 0,u=[l[l.length-1]],e.next=22,t(l[l.length-1],l.length-1);case 22:if(a=e.sent,0!==a.length){e.next=25;break}return e.abrupt("return",{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"});case 25:c=0;case 26:if(!(c<a.length)){e.next=48;break}h=!1,m=0;case 29:if(!(m<a[c].length)){e.next=44;break}d=l[a[c][m]],p=0;case 32:if(!(p<f.trustedCerts.length)){e.next=39;break}if(!(0,s.isEqualBuffer)(d.tbs,f.trustedCerts[p].tbs)){e.next=36;break}return h=!0,e.abrupt("break",39);case 36:p++,e.next=32;break;case 39:if(!h){e.next=41;break}return e.abrupt("break",44);case 41:m++,e.next=29;break;case 44:h||(a.splice(c,1),c=0);case 45:c++,e.next=26;break;case 48:if(0!==a.length){e.next=50;break}throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};case 50:for(v=a[0].length,g=0,y=0;y<a.length;y++)a[y].length<v&&(v=a[y].length,g=y);for(b=0;b<a[g].length;b++)u.push(l[a[g][b]]);return e.next=56,o(u,f.checkDate);case 56:if(a=e.sent,a.result!==!1){e.next=59;break}throw a;case 59:return e.abrupt("return",u);case 60:case"end":return e.stop()}},e,this)}))}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===this.certs.length)return Promise.reject("Empty certificate array");var r=Promise.resolve(),n=[];n.push("2.5.29.32.0");var i=!1,a=!1,o=!1,s=[],c=[],l=[];"initialPolicySet"in t&&(n=t.initialPolicySet),"initialExplicitPolicy"in t&&(i=t.initialExplicitPolicy),"initialPolicyMappingInhibit"in t&&(a=t.initialPolicyMappingInhibit),"initialInhibitPolicy"in t&&(o=t.initialInhibitPolicy),"initialPermittedSubtreesSet"in t&&(s=t.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in t&&(c=t.initialExcludedSubtreesSet),"initialRequiredNameForms"in t&&(l=t.initialRequiredNameForms);var f=i,h=a,m=o,d=new Array(3);d[0]=!1,d[1]=!1,d[2]=!1;var p=0,v=0,g=0,y=s,b=c,w=l,S=1;return r=this.sort().then(function(t){e.certs=t}),r=r.then(function(){var t=[];t.push("2.5.29.32.0");for(var r=[],i=new Array(e.certs.length-1),a=0;a<e.certs.length-1;a++)i[a]=!0;r.push(i);for(var o=new Array(e.certs.length-1),s=new Array(e.certs.length-1),u=f?e.certs.length-1:-1,c=e.certs.length-2;c>=0;c--,S++)if("extensions"in e.certs[c]){for(var l=0;l<e.certs[c].extensions.length;l++){if("2.5.29.32"===e.certs[c].extensions[l].extnID){s[c]=e.certs[c].extensions[l].parsedValue;for(var y=0;y<t.length;y++)if("2.5.29.32.0"===t[y]){delete r[y][c];break}for(var b=0;b<e.certs[c].extensions[l].parsedValue.certificatePolicies.length;b++){for(var w=-1,k=0;k<t.length;k++)if(e.certs[c].extensions[l].parsedValue.certificatePolicies[b].policyIdentifier===t[k]){
w=k;break}if(w===-1){t.push(e.certs[c].extensions[l].parsedValue.certificatePolicies[b].policyIdentifier);var P=new Array(e.certs.length-1);P[c]=!0,r.push(P)}else r[w][c]=!0}}if("2.5.29.33"===e.certs[c].extensions[l].extnID){if(h)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};o[c]=e.certs[c].extensions[l].parsedValue}"2.5.29.36"===e.certs[c].extensions[l].extnID&&f===!1&&(0===e.certs[c].extensions[l].parsedValue.requireExplicitPolicy?(f=!0,u=c):d[0]===!1?(d[0]=!0,p=e.certs[c].extensions[l].parsedValue.requireExplicitPolicy):p=p>e.certs[c].extensions[l].parsedValue.requireExplicitPolicy?e.certs[c].extensions[l].parsedValue.requireExplicitPolicy:p,0===e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping?h=!0:d[1]===!1?(d[1]=!0,v=e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1):v=v>e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1?e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1:v),"2.5.29.54"===e.certs[c].extensions[l].extnID&&m===!1&&(0===e.certs[c].extensions[l].parsedValue.valueBlock.valueDec?m=!0:d[2]===!1?(d[2]=!0,g=e.certs[c].extensions[l].parsedValue.valueBlock.valueDec):g=g>e.certs[c].extensions[l].parsedValue.valueBlock.valueDec?e.certs[c].extensions[l].parsedValue.valueBlock.valueDec:g)}if(m===!0){for(var A=-1,C=0;C<t.length;C++)if("2.5.29.32.0"===t[C]){A=C;break}A!==-1&&delete r[0][c]}f===!1&&d[0]===!0&&(p--,0===p&&(f=!0,u=c,d[0]=!1)),h===!1&&d[1]===!0&&(v--,0===v&&(h=!0,d[1]=!1)),m===!1&&d[2]===!0&&(g--,0===g&&(m=!0,d[2]=!1))}for(var _=0;_<e.certs.length-1;_++)if(_<e.certs.length-2&&"undefined"!=typeof o[_+1])for(var O=0;O<o[_+1].mappings.length;O++){if("2.5.29.32.0"===o[_+1].mappings[O].issuerDomainPolicy||"2.5.29.32.0"===o[_+1].mappings[O].subjectDomainPolicy)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};for(var E=-1,I=-1,B=0;B<t.length;B++)t[B]===o[_+1].mappings[O].issuerDomainPolicy&&(E=B),t[B]===o[_+1].mappings[O].subjectDomainPolicy&&(I=B);"undefined"!=typeof r[E][_]&&delete r[E][_];for(var x=0;x<s[_].certificatePolicies.length;x++)if(o[_+1].mappings[O].subjectDomainPolicy===s[_].certificatePolicies[x].policyIdentifier&&E!==-1&&I!==-1)for(var N=0;N<=_;N++)"undefined"!=typeof r[I][N]&&(r[E][N]=!0,delete r[I][N])}for(var j=0;j<t.length;j++)if("2.5.29.32.0"===t[j])for(var R=0;R<u;R++)delete r[j][R];for(var V=[],T=0;T<r.length;T++){for(var D=!0,U=0;U<e.certs.length-1;U++){var K=!1;if(U<u&&"2.5.29.32.0"===t[T]&&t.length>1){D=!1;break}if("undefined"==typeof r[T][U]){if(U>=u)for(var M=0;M<t.length;M++)if("2.5.29.32.0"===t[M]){r[M][U]===!0&&(K=!0);break}if(!K){D=!1;break}}}D===!0&&V.push(t[T])}var H=[];if(1===n.length&&"2.5.29.32.0"===n[0]&&f===!1)H=n;else if(1===V.length&&"2.5.29.32.0"===V[0])H=n;else for(var L=0;L<V.length;L++)for(var q=0;q<n.length;q++)if(n[q]===V[L]||"2.5.29.32.0"===n[q]){H.push(V[L]);break}return{result:H.length>0,resultCode:0,resultMessage:H.length>0?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:V,userConstrPolicies:H,explicitPolicyIndicator:f,policyMappings:o}}),r=r.then(function(t){function r(e,t){var r=(0,u.stringPrep)(e),n=(0,u.stringPrep)(t),i=r.split("."),a=n.split("."),o=i.length,s=a.length;if(0===o||0===s||o<s)return!1;for(var c=0;c<o;c++)if(0===i[c].length)return!1;for(var l=0;l<s;l++)if(0===a[l].length){if(0===l){if(1===s)return!1;continue}return!1}for(var f=0;f<s;f++)if(0!==a[s-1-f].length&&0!==i[o-1-f].localeCompare(a[s-1-f]))return!1;return!0}function n(e,t){var n=(0,u.stringPrep)(e),i=(0,u.stringPrep)(t),a=n.split("@"),o=i.split("@");if(0===a.length||0===o.length||a.length<o.length)return!1;if(1===o.length){var s=r(a[1],o[0]);if(s){var c=a[1].split("."),l=o[0].split(".");return 0===l[0].length||c.length===l.length}return!1}return 0===n.localeCompare(i)}function i(e,t){var n=(0,u.stringPrep)(e),i=(0,u.stringPrep)(t),a=n.split("/"),o=i.split("/");if(o.length>1)return!1;if(a.length>1)for(var s=0;s<a.length;s++)if(a[s].length>0&&":"!==a[s].charAt(a[s].length-1)){var c=a[s].split(":");n=c[0];break}var l=r(n,i);if(l){var f=n.split("."),h=i.split(".");return 0===h[0].length||f.length===h.length}return!1}function a(e,t){var r=new Uint8Array(e.valueBlock.valueHex),n=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===n.length){for(var i=0;i<4;i++)if((r[i]^n[i])&n[i+4])return!1;return!0}if(16===r.length&&32===n.length){for(var a=0;a<16;a++)if((r[a]^n[a])&n[a+16])return!1;return!0}return!1}function o(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;for(var r=!0,n=0,i=0;i<t.typesAndValues.length;i++){for(var a=!1,o=n;o<e.typesAndValues.length;o++)if(a=e.typesAndValues[o].isEqual(t.typesAndValues[i]),e.typesAndValues[o].type===t.typesAndValues[i].type&&(r=r&&a),a===!0){if(0===n||n===o){n=o+1;break}return!1}if(a===!1)return!1}return 0!==n&&r}if(t.result===!1)return t;S=1;for(var s=e.certs.length-2;s>=0;s--,S++){var c=[],l=[],f=[];if("extensions"in e.certs[s])for(var h=0;h<e.certs[s].extensions.length;h++)"2.5.29.30"===e.certs[s].extensions[h].extnID&&("permittedSubtrees"in e.certs[s].extensions[h].parsedValue&&(l=l.concat(e.certs[s].extensions[h].parsedValue.permittedSubtrees)),"excludedSubtrees"in e.certs[s].extensions[h].parsedValue&&(f=f.concat(e.certs[s].extensions[h].parsedValue.excludedSubtrees))),"2.5.29.17"===e.certs[s].extensions[h].extnID&&(c=c.concat(e.certs[s].extensions[h].parsedValue.altNames));for(var m=w.length<=0,d=0;d<w.length;d++)switch(w[d].base.type){case 4:if(w[d].base.value.typesAndValues.length!==e.certs[s].subject.typesAndValues.length)continue;m=!0;for(var p=0;p<e.certs[s].subject.typesAndValues.length;p++)if(e.certs[s].subject.typesAndValues[p].type!==w[d].base.value.typesAndValues[p].type){m=!1;break}if(m===!0)break}if(m===!1)return t.result=!1,t.resultCode=21,t.resultMessage="No neccessary name form found",Promise.reject(t);var v=[];v[0]=[],v[1]=[],v[2]=[],v[3]=[],v[4]=[];for(var g=0;g<y.length;g++)switch(y[g].base.type){case 1:v[0].push(y[g]);break;case 2:v[1].push(y[g]);break;case 4:v[2].push(y[g]);break;case 6:v[3].push(y[g]);break;case 7:v[4].push(y[g])}for(var k=0;k<5;k++){for(var P=!1,A=!1,C=v[k],_=0;_<C.length;_++){switch(k){case 0:if(c.length>0)for(var O=0;O<c.length;O++)1===c[O].type&&(A=!0,P=P||n(c[O].value,C[_].base.value));else for(var E=0;E<e.certs[s].subject.typesAndValues.length;E++)"1.2.840.113549.1.9.1"!==e.certs[s].subject.typesAndValues[E].type&&"0.9.2342.19200300.100.1.3"!==e.certs[s].subject.typesAndValues[E].type||(A=!0,P=P||n(e.certs[s].subject.typesAndValues[E].value.valueBlock.value,C[_].base.value));break;case 1:if(c.length>0)for(var I=0;I<c.length;I++)2===c[I].type&&(A=!0,P=P||r(c[I].value,C[_].base.value));break;case 2:A=!0,P=o(e.certs[s].subject,C[_].base.value);break;case 3:if(c.length>0)for(var B=0;B<c.length;B++)6===c[B].type&&(A=!0,P=P||i(c[B].value,C[_].base.value));break;case 4:if(c.length>0)for(var x=0;x<c.length;x++)7===c[x].type&&(A=!0,P=P||a(c[x].value,C[_].base.value))}if(P)break}if(P===!1&&C.length>0&&A)return t.result=!1,t.resultCode=41,t.resultMessage='Failed to meet "permitted sub-trees" name constraint',Promise.reject(t)}for(var N=!1,j=0;j<b.length;j++){switch(b[j].base.type){case 1:if(c.length>=0)for(var R=0;R<c.length;R++)1===c[R].type&&(N=N||n(c[R].value,b[j].base.value));else for(var V=0;V<e.subject.typesAndValues.length;V++)"1.2.840.113549.1.9.1"!==e.subject.typesAndValues[V].type&&"0.9.2342.19200300.100.1.3"!==e.subject.typesAndValues[V].type||(N=N||n(e.subject.typesAndValues[V].value.valueBlock.value,b[j].base.value));break;case 2:if(c.length>0)for(var T=0;T<c.length;T++)2===c[T].type&&(N=N||r(c[T].value,b[j].base.value));break;case 4:N=N||o(e.certs[s].subject,b[j].base.value);break;case 6:if(c.length>0)for(var D=0;D<c.length;D++)6===c[D].type&&(N=N||i(c[D].value,b[j].base.value));break;case 7:if(c.length>0)for(var U=0;U<c.length;U++)7===c[U].type&&(N=N||a(c[U].value,b[j].base.value))}if(N)break}if(N===!0)return t.result=!1,t.resultCode=42,t.resultMessage='Failed to meet "excluded sub-trees" name constraint',Promise.reject(t);y=y.concat(l),b=b.concat(f)}return t}),r=r.then(function(e){return e},function(e){if(e instanceof Object){if("resultMessage"in e)return e;if("message"in e)return{result:!1,resultCode:-1,resultMessage:e.message}}return{result:!1,resultCode:-1,resultMessage:e}})}}],[{key:"defaultValues",value:function(e){switch(e){case"trustedCerts":return[];case"certs":return[];case"crls":return[];case"ocsps":return[];case"checkDate":return new Date;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: "+e)}}}]),e}();t.default=m},function(e,t){"use strict";function r(e){if(!n(e)){if(!i(e))throw new Error("Only generator instance of generator function is a valid input");e=e()}return new Promise(function(t,a){var o=function(t){var r=void 0;try{r=e.throw(t)}catch(e){return a(e)}return s(r)},s=function s(u){var c=void 0;try{c=e.next(u)}catch(e){return a(e)}switch(!0){case c.value instanceof Promise:return c.done?t(c.value):c.value.then(s,o);case i(c.value):case n(c.value):return c.done?r(c.value).then(function(e){t(e)},o):r(c.value).then(s,o);case"function"==typeof c.value:c.value=c.value();default:return c.done?t(c.value):s(c.value)}};s()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=function(e){return"undefined"!=typeof e&&("function"==typeof e.next&&"function"==typeof e.throw)},i=function(e){if("undefined"==typeof e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||n(e))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.CertificationRequestInfo||"CertificationRequestInfo",value:[new c.Integer({name:t.CertificationRequestInfoVersion||"CertificationRequestInfo.version"}),p.default.schema(t.subject||{names:{blockName:"CertificationRequestInfo.subject"}}),m.default.schema({names:{blockName:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Repeated({optional:!0,name:t.CertificationRequestInfoAttributes||"CertificationRequestInfo.attributes",value:b.default.schema(t.attributes||{})})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),c=i(u),l=r(384),f=r(387),h=r(391),m=n(h),d=r(401),p=n(d),v=r(388),g=n(v),y=r(395),b=n(y),w=r(389),S=n(w),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.subject=(0,l.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,l.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"attributes"in t&&(this.attributes=(0,l.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS10");this.tbs=r.result.CertificationRequestInfo.valueBeforeDecode,this.version=r.result["CertificationRequestInfo.version"].valueBlock.valueDec,this.subject=new p.default({schema:r.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new m.default({schema:r.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in r.result&&(this.attributes=Array.from(r.result["CertificationRequestInfo.attributes"],function(e){return new b.default({schema:e})})),this.signatureAlgorithm=new g.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var e=[new c.Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return"attributes"in this&&e.push(new c.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new c.Sequence({value:e})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var e={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");var n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: {$hashAlgorithm}");var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);a.hashAlgorithm=new g.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new g.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var s=new S.default(a);this.signatureAlgorithm=new g.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var u=(0,f.getCrypto)();return"undefined"==typeof u?Promise.reject("Unable to create WebCrypto object"):u.sign(i.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=Promise.resolve(),r=this.subjectPublicKeyInfo,n=this.signatureValue,i=this.tbs,a=(0,f.getCrypto)();if("undefined"==typeof a)return Promise.reject("Unable to create WebCrypto object");var o=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===o?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(t=t.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:e.subjectPublicKeyInfo.algorithm.algorithmId;var n=(0,f.getAlgorithmByOID)(t);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+t);var i=n.name,s=(0,f.getAlgorithmParameters)(i,"importkey");if("hash"in s.algorithm&&(s.algorithm.hash.name=o),"ECDSA"===n.name){var u=!1;if("algorithmParams"in r.algorithm==!0&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(u=!0),u===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var c=(0,f.getAlgorithmByOID)(r.algorithm.algorithmParams.valueBlock.toString());if("name"in c==!1)return Promise.reject("Unsupported named curve algorithm: "+r.algorithm.algorithmParams.valueBlock.toString());s.algorithm.namedCurve=c.name}var l=r.toSchema(),h=l.toBER(!1),m=new Uint8Array(h);return a.importKey("spki",m,s.algorithm,!0,s.usages)}),t=t.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=o);var s=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var u=c.fromBER(s);s=(0,f.createECDSASignatureFromCMS)(u.result)}if("RSA-PSS"===t.algorithm.name){var l=void 0;try{l=new S.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var m=(0,f.getAlgorithmByOID)(l.hashAlgorithm.algorithmId);if("name"in m==!1)return Promise.reject("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithmId);h=m.name}r.algorithm.hash.name=h}return a.verify(r.algorithm,t,new Uint8Array(s),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"subject":return new p.default;case"subjectPublicKeyInfo":return new m.default;case"attributes":return[];case"signatureAlgorithm":return new g.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for CertificationRequest class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({value:[o(t.certificationRequestInfo||{}),new c.Sequence({name:t.signatureAlgorithm||"signatureAlgorithm",value:[new c.ObjectIdentifier,new c.Any({optional:!0})]}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.digestAlgorithm=(0,c.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),this.digest=(0,c.getParametersValue)(t,"digest",e.defaultValues("digest")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{digestAlgorithm:{names:{blockName:"digestAlgorithm"}},digest:"digest"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DigestInfo");this.digestAlgorithm=new f.default({schema:r.result.digestAlgorithm}),this.digest=r.result.digest}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}},{key:"toJSON",value:function(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"digestAlgorithm":return new f.default;case"digest":return new u.OctetString;default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"digestAlgorithm":return f.default.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==!1;case"digest":return t.isEqual(this.constructor.defaultValues(e));default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.digestAlgorithm||{names:{blockName:"digestAlgorithm"}}),new u.OctetString({name:t.digest||"digest"})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),this.eContentType=(0,u.getParametersValue)(t,"eContentType",e.defaultValues("eContentType")),"eContent"in t&&(this.eContent=(0,u.getParametersValue)(t,"eContent",e.defaultValues("eContent")),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&this.eContent.idBlock.isConstructed===!1)){for(var r=new s.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,a=this.eContent.valueBlock.valueHex.byteLength;a>0;){for(var o=new Uint8Array(this.eContent.valueBlock.valueHex,n,n+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-n:65536),c=new ArrayBuffer(o.length),l=new Uint8Array(c),f=0;f<l.length;f++)l[f]=o[f];r.valueBlock.value.push(new s.OctetString({valueHex:c})),a-=o.length,n+=o.length}this.eContent=r}"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{eContentType:"eContentType",eContent:"eContent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=r.result.eContentType.valueBlock.toString(),"eContent"in r.result&&(this.eContent=r.result.eContent)}},{key:"toSchema",value:function(){var t=[];return t.push(new s.ObjectIdentifier({value:this.eContentType})),"eContent"in this&&e.compareWithDefault("eContent",this.eContent)===!1&&t.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={eContentType:this.eContentType};return"eContent"in this&&e.compareWithDefault("eContent",this.eContent)===!1&&(t.eContent=this.eContent.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"eContentType":return"";case"eContent":return new s.OctetString;default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"eContentType":return""===r;case"eContent":return r.isEqual(e.defaultValues("eContent"));default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.eContentType||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.eContent||""})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(394),u=n(s),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(u.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(471),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.mac=(0,c.getParametersValue)(t,"mac",e.defaultValues("mac")),this.macSalt=(0,c.getParametersValue)(t,"macSalt",e.defaultValues("macSalt")),"iterations"in t&&(this.iterations=(0,c.getParametersValue)(t,"iterations",e.defaultValues("iterations"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{mac:{names:{blockName:"mac"}},macSalt:"macSalt",iterations:"iterations"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for MacData");this.mac=new f.default({schema:r.result.mac}),this.macSalt=r.result.macSalt,"iterations"in r.result&&(this.iterations=r.result.iterations.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[this.mac.toSchema(),this.macSalt];return"iterations"in this&&e.push(new u.Integer({value:this.iterations})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return"iterations"in this&&(e.iterations=this.iterations.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"mac":return new f.default;case"macSalt":return new u.OctetString;case"iterations":return 1;default:throw new Error("Invalid member name for MacData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"mac":return f.default.compareWithDefault("digestAlgorithm",r.digestAlgorithm)&&f.default.compareWithDefault("digest",r.digest);case"macSalt":return r.isEqual(e.defaultValues(t));case"iterations":return r===e.defaultValues(t);default:throw new Error("Invalid member name for MacData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",optional:t.optional||!0,value:[f.default.schema(t.mac||{names:{blockName:"mac"}}),new u.OctetString({name:t.macSalt||"macSalt"}),new u.Integer({optional:!0,name:t.iterations||"iterations"})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.hashedMessage=(0,c.getParametersValue)(t,"hashedMessage",e.defaultValues("hashedMessage")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm}),this.hashedMessage=r.result.hashedMessage}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default;case"hashedMessage":return new u.OctetString;default:throw new Error("Invalid member name for MessageImprint class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"hashedMessage":return 0===r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for MessageImprint class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.hashAlgorithm||{}),new u.OctetString({name:t.hashedMessage||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(477),h=n(f),m=r(479),d=n(m),p=r(478),v=n(p),g=r(467),y=n(g),b=r(415),w=(n(b),r(388)),S=n(w),k=r(389),P=n(k),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbsRequest=(0,c.getParametersValue)(t,"tbsRequest",e.defaultValues("tbsRequest")),"optionalSignature"in t&&(this.optionalSignature=(0,c.getParametersValue)(t,"optionalSignature",e.defaultValues("optionalSignature"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_REQUEST");this.tbsRequest=new h.default({schema:r.result.tbsRequest}),"optionalSignature"in r.result&&(this.optionalSignature=new d.default({schema:r.result.optionalSignature}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(this.tbsRequest.toSchema(e)),"optionalSignature"in this&&t.push(this.optionalSignature.toSchema()),new u.Sequence({value:t})}},{key:"toJSON",value:function(){
var e={tbsRequest:this.tbsRequest.toJSON()};return"optionalSignature"in this&&(e.optionalSignature=this.optionalSignature.toJSON()),e}},{key:"createForCertificate",value:function(e,t){var r=this,n=Promise.resolve(),i=new y.default;return n=n.then(function(){return i.createForCertificate(e,t)}),n=n.then(function(){r.tbsRequest=new h.default({requestList:[new v.default({reqCert:i})]})},function(e){return Promise.reject(e)})}},{key:"sign",value:function(e,t){var r=this;if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof t)t="SHA-1";else{var n=(0,l.getOIDByAlgorithm)({name:t});if(""===n)return Promise.reject("Unsupported hash algorithm: "+t)}if("optionalSignature"in this==!1)return Promise.reject('Need to create "optionalSignature" field before signing');var i=(0,l.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.optionalSignature.signatureAlgorithm.algorithmId=(0,l.getOIDByAlgorithm)(i.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==t.toUpperCase()){var o=(0,l.getOIDByAlgorithm)({name:t});if(""===o)return Promise.reject("Unsupported hash algorithm: "+t);a.hashAlgorithm=new S.default({algorithmId:o,algorithmParams:new u.Null}),a.maskGenAlgorithm=new S.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var s=new P.default(a);this.optionalSignature.signatureAlgorithm=new S.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}var c=this.tbsRequest.toSchema(!0).toBER(!1),f=(0,l.getCrypto)();return"undefined"==typeof f?Promise.reject("Unable to create WebCrypto object"):f.sign(i.algorithm,e,new Uint8Array(c)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,l.createCMSECDSASignature)(e)),r.optionalSignature.signature=new u.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsRequest":return new h.default;case"optionalSignature":return new d.default;default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"tbsRequest":return h.default.compareWithDefault("tbs",t.tbs)&&h.default.compareWithDefault("version",t.version)&&h.default.compareWithDefault("requestorName",t.requestorName)&&h.default.compareWithDefault("requestList",t.requestList)&&h.default.compareWithDefault("requestExtensions",t.requestExtensions);case"optionalSignature":return d.default.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&d.default.compareWithDefault("signature",t.signature)&&d.default.compareWithDefault("certs",t.certs);default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"OCSPRequest",value:[h.default.schema(t.tbsRequest||{names:{blockName:"tbsRequest"}}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[d.default.schema(t.optionalSignature||{names:{blockName:"optionalSignature"}})]})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(400),f=n(l),h=r(478),m=n(h),d=r(417),p=n(d),v=r(436),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),"version"in t&&(this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version"))),"requestorName"in t&&(this.requestorName=(0,c.getParametersValue)(t,"requestorName",e.defaultValues("requestorName"))),this.requestList=(0,c.getParametersValue)(t,"requestList",e.defaultValues("requestList")),"requestExtensions"in t&&(this.requestExtensions=(0,c.getParametersValue)(t,"requestExtensions",e.defaultValues("requestExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TBSRequest");this.tbs=r.result.TBSRequest.valueBeforeDecode,"TBSRequest.version"in r.result&&(this.version=r.result["TBSRequest.version"].valueBlock.valueDec),"TBSRequest.requestorName"in r.result&&(this.requestorName=new f.default({schema:r.result["TBSRequest.requestorName"]})),this.requestList=Array.from(r.result["TBSRequest.requests"],function(e){return new m.default({schema:e})}),"TBSRequest.requestExtensions"in r.result&&(this.requestExtensions=Array.from(r.result["TBSRequest.requestExtensions"].valueBlock.value,function(e){return new p.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.byteLength)return e.schema();r=u.fromBER(this.tbs).result}else{var n=[];"version"in this&&n.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({value:this.version})]})),"requestorName"in this&&n.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),n.push(new u.Sequence({value:Array.from(this.requestList,function(e){return e.toSchema()})})),"requestExtensions"in this&&n.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new u.Sequence({value:Array.from(this.requestExtensions,function(e){return e.toSchema()})})]})),r=new u.Sequence({value:n})}return r}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"requestorName"in this&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,function(e){return e.toJSON()}),"requestExtensions"in this&&(e.requestExtensions=Array.from(this.requestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"requestorName":return new f.default;case"requestList":case"requestExtensions":return[];default:throw new Error("Invalid member name for TBSRequest class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"version":return r===e.defaultValues(t);case"requestorName":return r.type===f.default.defaultValues("type")&&0===Object.keys(r.value).length;case"requestList":case"requestExtensions":return 0===r.length;default:throw new Error("Invalid member name for TBSRequest class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"TBSRequest",value:[new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Integer({name:t.TBSRequestVersion||"TBSRequest.version"})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[f.default.schema(t.requestorName||{names:{blockName:"TBSRequest.requestorName"}})]}),new u.Sequence({name:t.requestList||"TBSRequest.requestList",value:[new u.Repeated({name:t.requests||"TBSRequest.requests",value:m.default.schema(t.requestNames||{})})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[g.default.schema(t.extensions||{names:{blockName:t.requestExtensions||"TBSRequest.requestExtensions"}})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(467),f=n(l),h=r(417),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.reqCert=(0,c.getParametersValue)(t,"reqCert",e.defaultValues("reqCert")),"singleRequestExtensions"in t&&(this.singleRequestExtensions=(0,c.getParametersValue)(t,"singleRequestExtensions",e.defaultValues("singleRequestExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{reqCert:{names:{blockName:"reqCert"}},singleRequestExtensions:{names:{blockName:"singleRequestExtensions"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for Request");this.reqCert=new f.default({schema:r.result.reqCert}),"singleRequestExtensions"in r.result&&(this.singleRequestExtensions=Array.from(r.result.singleRequestExtensions.valueBlock.value,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.reqCert.toSchema()),"singleRequestExtensions"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Sequence({value:Array.from(this.singleRequestExtensions,function(e){return e.toSchema()})})]})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={reqCert:this.reqCert.toJSON()};return"singleRequestExtensions"in this&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"reqCert":return new f.default;case"singleRequestExtensions":return[];default:throw new Error("Invalid member name for Request class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"reqCert":return r.isEqual(e.defaultValues(t));case"singleRequestExtensions":return 0===r.length;default:throw new Error("Invalid member name for Request class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.reqCert||{}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[m.default.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||""}})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=r(415),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,c.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signature:"signature",certs:"certs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ocsp.Signature");this.signatureAlgorithm=new f.default({schema:r.result.signatureAlgorithm}),this.signature=r.result.signature,"certs"in r.result&&(this.certs=Array.from(r.result.certs,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"signatureAlgorithm":return new f.default;case"signature":return new u.BitString;case"certs":return[];default:throw new Error("Invalid member name for Signature class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for Signature class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[f.default.schema(t.signatureAlgorithm||{}),new u.BitString({name:t.signature||""}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Sequence({value:[new u.Repeated({name:t.certs||"",value:m.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(481),f=n(l),h=r(464),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.responseStatus=(0,c.getParametersValue)(t,"responseStatus",e.defaultValues("responseStatus")),"responseBytes"in t&&(this.responseBytes=(0,c.getParametersValue)(t,"responseBytes",e.defaultValues("responseBytes"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_RESPONSE");this.responseStatus=r.result.responseStatus,"responseBytes"in r.result&&(this.responseBytes=new f.default({schema:r.result.responseBytes}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.responseStatus),"responseBytes"in this&&e.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={responseStatus:this.responseStatus.toJSON()};return"responseBytes"in this&&(e.responseBytes=this.responseBytes.toJSON()),e}},{key:"getCertificateStatus",value:function(e,t){var r=void 0,n={isForCertificate:!1,status:2};if("responseBytes"in this==!1)return n;if("1.3.6.1.5.5.7.48.1.1"!==this.responseBytes.responseType)return n;try{var i=u.fromBER(this.responseBytes.response.valueBlock.valueHex);r=new m.default({schema:i.result})}catch(e){return n}return r.getCertificateStatus(e,t)}},{key:"sign",value:function(e,t){if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var r=u.fromBER(this.responseBytes.response.valueBlock.valueHex),n=new m.default({schema:r.result});return n.sign(e,t)}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}},{key:"verify",value:function(){if("responseBytes"in this==!1)return Promise.reject("Empty ResponseBytes field");if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var e=u.fromBER(this.responseBytes.response.valueBlock.valueHex),t=new m.default({schema:e.result});return t.verify()}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}}],[{key:"defaultValues",value:function(e){switch(e){case"responseStatus":return new u.Enumerated;case"responseBytes":return new f.default;default:throw new Error("Invalid member name for OCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseStatus":return r.isEqual(e.defaultValues(t));case"responseBytes":return f.default.compareWithDefault("responseType",r.responseType)&&f.default.compareWithDefault("response",r.response);default:throw new Error("Invalid member name for OCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"OCSPResponse",value:[new u.Enumerated({name:t.responseStatus||"responseStatus"}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[f.default.schema(t.responseBytes||{names:{blockName:"responseBytes"}})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.responseType=(0,u.getParametersValue)(t,"responseType",e.defaultValues("responseType")),this.response=(0,u.getParametersValue)(t,"response",e.defaultValues("response")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{responseType:"responseType",response:"response"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ResponseBytes");this.responseType=r.result.responseType.valueBlock.toString(),this.response=r.result.response}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.responseType}),this.response]})}},{key:"toJSON",value:function(){return{responseType:this.responseType,response:this.response.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"responseType":return"";case"response":return new s.OctetString;default:throw new Error("Invalid member name for ResponseBytes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseType":return""===r;case"response":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ResponseBytes class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.responseType||""}),new s.OctetString({name:t.response||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.otherCertFormat=(0,u.getParametersValue)(t,"otherCertFormat",e.defaultValues("otherCertFormat")),this.otherCert=(0,u.getParametersValue)(t,"otherCert",e.defaultValues("otherCert")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=r.result.otherCertFormat.valueBlock.toString(),this.otherCert=r.result.otherCert}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.otherCertFormat}),this.otherCert]})}},{key:"toJSON",value:function(){var e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof s.Any||(e.otherCert=this.otherCert.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new s.Any;default:throw new Error("Invalid member name for OtherCertificateFormat class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.otherCertFormat||"otherCertFormat"}),new s.Any({name:t.otherCert||"otherCert"})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(406),h=n(f),m=r(474),d=n(m),p=r(471),v=n(p),g=r(388),y=n(g),b=r(484),w=n(b),S=r(472),k=n(S),P=r(395),A=n(P),C=r(485),_=n(C),O=r(449),E=n(O),I=r(486),B=n(I),x=r(405),N=n(x),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.authSafe=(0,c.getParametersValue)(t,"authSafe",e.defaultValues("authSafe")),"macData"in t&&(this.macData=(0,c.getParametersValue)(t,"macData",e.defaultValues("macData"))),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{version:"version",authSafe:{names:{blockName:"authSafe"}},macData:{names:{blockName:"macData"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PFX");this.version=r.result.version.valueBlock.valueDec,this.authSafe=new h.default({schema:r.result.authSafe}),"macData"in r.result&&(this.macData=new d.default({schema:r.result.macData}))}},{key:"toSchema",value:function(){var e=[new u.Integer({value:this.version}),this.authSafe.toSchema()];return"macData"in this&&e.push(this.macData.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,authSafe:this.authSafe.toJSON()};return"macData"in this&&(e.macData=this.macData.toJSON()),e}},{key:"makeInternalValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("parsedValue"in this==!1)return Promise.reject('Please call "parseValues" function first in order to make "parsedValue" data');if("integrityMode"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "integrityMode" inside "parsedValue"');var r=Promise.resolve(),n=(0,l.getCrypto)();if("undefined"==typeof n)return Promise.reject("Unable to create WebCrypto object");if("authenticatedSafe"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "authenticatedSafe" in "parsedValue"');switch(this.parsedValue.integrityMode){case 0:if("iterations"in t==!1)return Promise.reject('Absent mandatory parameter "iterations"');if("pbkdf2HashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "pbkdf2HashAlgorithm"');if("hmacHashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("password"in t==!1)return Promise.reject('Absent mandatory parameter "password"');var i=new ArrayBuffer(64),a=new Uint8Array(i);(0,l.getRandomValues)(a);var o=void 0;switch(t.hmacHashAlgorithm.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "parameters.hmacHashAlgorithm" parameter: '+t.hmacHashAlgorithm)}var s={name:"HMAC",length:o,hash:{name:t.hmacHashAlgorithm}};r=r.then(function(){var e=new Uint8Array(t.password);return n.importKey("raw",e,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),r=r.then(function(e){return n.deriveKey({name:"PBKDF2",hash:{name:t.pbkdf2HashAlgorithm},salt:a,iterations:t.iterations},e,s,!1,["sign"])},function(e){return Promise.reject(e)}),r=r.then(function(t){e.authSafe=new h.default({contentType:"1.2.840.113549.1.7.1",content:new u.OctetString({valueHex:e.parsedValue.authenticatedSafe.toSchema().toBER(!1)})});var r=e.authSafe.content.toBER(!1),i=new Uint8Array(r);return n.sign(s,t,i)},function(e){return Promise.reject(e)}),r=r.then(function(r){e.macData=new d.default({mac:new v.default({digestAlgorithm:new y.default({algorithmId:(0,l.getOIDByAlgorithm)({name:t.hmacHashAlgorithm})}),digest:new u.OctetString({valueHex:r})}),macSalt:new u.OctetString({valueHex:i}),iterations:t.iterations})},function(e){return Promise.reject(e)});break;case 1:if("signingCertificate"in t==!1)return Promise.reject('Absent mandatory parameter "signingCertificate"');if("privateKey"in t==!1)return Promise.reject('Absent mandatory parameter "privateKey"');if("hashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');var c=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),f=new w.default({version:1,encapContentInfo:new k.default({eContentType:"1.2.840.113549.1.7.1",eContent:new u.OctetString({valueHex:c})}),certificates:[t.signingCertificate]});r=r.then(function(){return n.digest({name:t.hashAlgorithm},new Uint8Array(c))}),r=r.then(function(e){var r=[];r.push(new A.default({type:"1.2.840.113549.1.9.3",values:[new u.ObjectIdentifier({value:"1.2.840.113549.1.7.1"})]})),r.push(new A.default({type:"1.2.840.113549.1.9.5",values:[new u.UTCTime({valueDate:new Date})]})),r.push(new A.default({type:"1.2.840.113549.1.9.4",values:[new u.OctetString({valueHex:e})]})),f.signerInfos.push(new _.default({version:1,sid:new E.default({issuer:t.signingCertificate.issuer,serialNumber:t.signingCertificate.serialNumber}),signedAttrs:new B.default({type:0,attributes:r})}))},function(e){return Promise.reject("Error during making digest for message: "+e)}),r=r.then(function(){return f.sign(t.privateKey,0,t.hashAlgorithm)}),r=r.then(function(){e.authSafe=new h.default({contentType:"1.2.840.113549.1.7.2",content:f.toSchema(!0)})},function(e){return Promise.reject("Error during making signature: "+e)});break;default:return Promise.reject('Parameter "integrityMode" has unknown value: '+t.integrityMode)}return r}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');"checkIntegrity"in e==!1&&(e.checkIntegrity=!0);var r=Promise.resolve(),n=(0,l.getCrypto)();if("undefined"==typeof n)return Promise.reject("Unable to create WebCrypto object");switch(this.parsedValue={},this.authSafe.contentType){case"1.2.840.113549.1.7.1":if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if(this.parsedValue.integrityMode=0,this.authSafe.content instanceof u.OctetString==!1)return Promise.reject('Wrong type of "this.authSafe.content"');var i=u.fromBER(this.authSafe.content.valueBlock.valueHex);if(i.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');if(this.parsedValue.authenticatedSafe=new N.default({schema:i.result}),e.checkIntegrity){if("macData"in this==!1)return Promise.reject('Absent "macData" value, can not check PKCS# data integrity');var a=(0,l.getAlgorithmByOID)(this.macData.mac.digestAlgorithm.algorithmId);if("name"in a==!1)return Promise.reject("Unsupported digest algorithm: "+this.macData.mac.digestAlgorithm.algorithmId);var o=void 0;switch(a.name.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "hashAlgorithm": '+a.name)}var s={name:"HMAC",length:o,hash:{name:a.name}};r=r.then(function(){var t=new Uint8Array(e.password);return n.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),r=r.then(function(e){return n.deriveKey({name:"PBKDF2",hash:{name:a.name},salt:new Uint8Array(t.macData.macSalt.valueBlock.valueHex),iterations:t.macData.iterations},e,s,!1,["verify"])},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=t.authSafe.content.toBER(!1),i=new Uint8Array(r);return n.verify(s,e,new Uint8Array(t.macData.mac.digest.valueBlock.valueHex),i)},function(e){return Promise.reject(e)}),r=r.then(function(e){if(e===!1)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject(e)})}break;case"1.2.840.113549.1.7.2":this.parsedValue.integrityMode=1;var f=new w.default({schema:this.authSafe.content});if("eContent"in f.encapContentInfo==!1)return Promise.reject('Absent of attached data in "cmsSigned.encapContentInfo"');if(f.encapContentInfo.eContent instanceof u.OctetString==!1)return Promise.reject('Wrong type of "cmsSigned.encapContentInfo.eContent"');var h=new ArrayBuffer(0);if(f.encapContentInfo.eContent.idBlock.isConstructed===!1)h=f.encapContentInfo.eContent.valueBlock.valueHex;else for(var m=0;m<f.encapContentInfo.eContent.valueBlock.value.length;m++)h=(0,c.utilConcatBuf)(h,f.encapContentInfo.eContent.valueBlock.value[m].valueBlock.valueHex);var d=u.fromBER(h);if(d.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');this.parsedValue.authenticatedSafe=new N.default({schema:d.result}),r=r.then(function(){return f.verify({signer:0,checkChain:!1})}).then(function(e){if(e===!1)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject("Error during integrity verification: "+e);
});break;default:return Promise.reject('Incorrect value for "this.authSafe.contentType": '+this.authSafe.contentType)}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 3;case"authSafe":return new h.default;case"macData":return new d.default;case"parsedValue":return{};default:throw new Error("Invalid member name for PFX class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"authSafe":return h.default.compareWithDefault("contentType",r.contentType)&&h.default.compareWithDefault("content",r.content);case"macData":return d.default.compareWithDefault("mac",r.mac)&&d.default.compareWithDefault("macSalt",r.macSalt)&&d.default.compareWithDefault("iterations",r.iterations);case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PFX class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.version||"version"}),h.default.schema(t.authSafe||{names:{blockName:"authSafe"}}),d.default.schema(t.macData||{names:{blockName:"macData",optional:!0}})]})}}]),e}();t.default=j},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(383),l=i(c),f=r(384),h=r(387),m=r(388),d=n(m),p=r(472),v=n(p),g=r(415),y=n(g),b=r(482),w=n(b),S=r(438),k=n(S),P=r(445),A=n(P),C=r(485),_=n(C),O=r(443),E=n(O),I=r(444),B=n(I),x=r(449),N=n(x),j=r(487),R=n(j),V=r(468),T=n(V),D=r(464),U=n(D),K=r(389),M=n(K),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.version=(0,f.getParametersValue)(t,"version",e.defaultValues("version")),this.digestAlgorithms=(0,f.getParametersValue)(t,"digestAlgorithms",e.defaultValues("digestAlgorithms")),this.encapContentInfo=(0,f.getParametersValue)(t,"encapContentInfo",e.defaultValues("encapContentInfo")),"certificates"in t&&(this.certificates=(0,f.getParametersValue)(t,"certificates",e.defaultValues("certificates"))),"crls"in t&&(this.crls=(0,f.getParametersValue)(t,"crls",e.defaultValues("crls"))),this.signerInfos=(0,f.getParametersValue)(t,"signerInfos",e.defaultValues("signerInfos")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_SIGNED_DATA");this.version=r.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in r.result&&(this.digestAlgorithms=Array.from(r.result["SignedData.digestAlgorithms"],function(e){return new d.default({schema:e})})),this.encapContentInfo=new v.default({schema:r.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in r.result&&(this.certificates=Array.from(r.result["SignedData.certificates"],function(e){return 1===e.idBlock.tagClass?new y.default({schema:e}):3===e.idBlock.tagClass&&3===e.idBlock.tagNumber?(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new w.default({schema:e})):new y.default})),"SignedData.crls"in r.result&&(this.crls=Array.from(r.result["SignedData.crls"],function(e){return 1===e.idBlock.tagClass?new k.default({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new A.default({schema:e}))})),"SignedData.signerInfos"in r.result&&(this.signerInfos=Array.from(r.result["SignedData.signerInfos"],function(e){return new _.default({schema:e})}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(new l.Integer({value:this.version})),t.push(new l.Set({value:Array.from(this.digestAlgorithms,function(t){return t.toSchema(e)})})),t.push(this.encapContentInfo.toSchema()),"certificates"in this&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.certificates,function(t){if(t instanceof w.default){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=3,r}return t.toSchema(e)})})),"crls"in this&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,function(t){if(t instanceof A.default){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return t.toSchema(e)})})),t.push(new l.Set({value:Array.from(this.signerInfos,function(t){return t.toSchema(e)})})),new l.Sequence({value:t})}},{key:"toJSON",value:function(){var e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,function(e){return e.toJSON()}),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,function(e){return e.toJSON()})),"crls"in this&&(e.crls=Array.from(this.crls,function(e){return e.toJSON()})),e.signerInfos=Array.from(this.signerInfos,function(e){return e.toJSON()}),e}},{key:"verify",value:function(){function e(e){if(e.issuer.isEqual(_.issuer)===!0&&e.serialNumber.isEqual(_.serialNumber)===!0)return null;var t=!1,r=!0,n=!1,i=void 0;try{for(var a,o=e.extensions[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;"2.5.29.19"===s.extnID&&"cA"in s.parsedValue&&s.parsedValue.cA===!0&&(t=!0)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.signer,i=void 0===n?-1:n,o=r.data,u=void 0===o?new ArrayBuffer(0):o,c=r.trustedCerts,m=void 0===c?[]:c,d=r.checkDate,p=void 0===d?new Date:d,v=r.checkChain,g=void 0!==v&&v,b=(r.includeSignerCertificate,r.extendedMode),w=void 0!==b&&b,S=Promise.resolve(),P=new ArrayBuffer(0),A=void 0,C="",_={},O=(0,h.getCrypto)();return"undefined"==typeof O?Promise.reject("Unable to create WebCrypto object"):i===-1?w?Promise.reject({date:p,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to get signer index from input parameters"):"certificates"in this==!1?w?Promise.reject({date:p,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("No certificates attached to this signed data"):(S=this.signerInfos[i].sid instanceof N.default?S.then(function(){var e=!0,r=!1,n=void 0;try{for(var a,o=t.certificates[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;if(s instanceof y.default!=!1&&s.issuer.isEqual(t.signerInfos[i].sid.issuer)&&s.serialNumber.isEqual(t.signerInfos[i].sid.serialNumber))return _=s,Promise.resolve()}}catch(e){r=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}return w?Promise.reject({date:p,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")}):S.then(function(){return Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof y.default}),function(e){return O.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,n=!1,a=void 0;try{for(var o,u=t.certificates.entries()[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=s(o.value,2),l=c[0],h=c[1];if(h instanceof y.default!=!1&&(0,f.isEqualBuffer)(e[l],t.signerInfos[i].sid.valueBlock.valueHex))return _=h,Promise.resolve()}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return w?Promise.reject({date:p,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")},function(){return w?Promise.reject({date:p,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")})}),S=S.then(function(){if("1.2.840.113549.1.9.16.1.4"===t.encapContentInfo.eContentType){if("eContent"in t.encapContentInfo==!1)return!1;var e=l.fromBER(t.encapContentInfo.eContent.valueBlock.valueHex),r=void 0;try{r=new R.default({schema:e.result})}catch(e){return!1}return 0===u.byteLength?w?Promise.reject({date:p,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:_,signerCertificateVerified:null}):Promise.reject("Missed detached data input array"):r.verify({data:u})}return!0}),g&&(S=S.then(function(r){return r!==!1&&Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof y.default}),function(t){return e(t)})).then(function(e){var r,n=new T.default({checkDate:p,certs:Array.from(e.filter(function(e){return null!==e})),trustedCerts:m});if(n.certs.push(_),"crls"in t){var i=!0,o=!1,s=void 0;try{for(var u,c=t.crls[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;l instanceof k.default?n.crls.push(l):"1.3.6.1.5.5.7.48.1.1"===l.otherRevInfoFormat&&n.ocsps.push(new U.default({schema:l.otherRevInfo}))}}catch(e){o=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}}return"ocsps"in t&&(r=n.ocsps).push.apply(r,a(t.ocsps)),n.verify().then(function(e){return e.result===!0?Promise.resolve(!0):w?Promise.reject({date:p,code:5,message:"Validation of signer's certificate failed: "+e.resultMessage,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed")},function(e){return w?Promise.reject({date:p,code:5,message:"Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e),signatureVerified:null,signerCertificate:_,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return w?Promise.reject({date:p,code:6,message:"Error during checking certificates for CA flag: "+e,signatureVerified:null,signerCertificate:_,signerCertificateVerified:null}):Promise.reject("Error during checking certificates for CA flag: "+e)})})),S=S.then(function(e){if(e===!1)return!1;var r=(0,h.getAlgorithmByOID)(t.signerInfos[i].digestAlgorithm.algorithmId);return"name"in r==!1?w?Promise.reject({date:p,code:7,message:"Unsupported signature algorithm: "+t.signerInfos[i].digestAlgorithm.algorithmId,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Unsupported signature algorithm: "+t.signerInfos[i].digestAlgorithm.algorithmId):(C=r.name,!0)}),S=S.then(function(e){if(e===!1)return!1;if("eContent"in t.encapContentInfo)if(1===t.encapContentInfo.eContent.idBlock.tagClass&&4===t.encapContentInfo.eContent.idBlock.tagNumber)if(t.encapContentInfo.eContent.idBlock.isConstructed===!1)u=t.encapContentInfo.eContent.valueBlock.valueHex;else{var r=!0,n=!1,a=void 0;try{for(var o,s=t.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;u=(0,f.utilConcatBuf)(u,c.valueBlock.valueHex)}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}}else u=t.encapContentInfo.eContent.valueBlock.valueHex;else if(0===u.byteLength)return w?Promise.reject({date:p,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Missed detached data input array");if("signedAttrs"in t.signerInfos[i]){var l=!1,h=!1,m=!0,d=!1,v=void 0;try{for(var g,y=t.signerInfos[i].signedAttrs.attributes[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;if("1.2.840.113549.1.9.3"===b.type&&(l=!0),"1.2.840.113549.1.9.4"===b.type&&(h=!0,P=b.values[0].valueBlock.valueHex),l&&h)break}}catch(e){d=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(d)throw v}}if(l===!1)return w?Promise.reject({date:p,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject('Attribute "content-type" is a mandatory attribute for "signed attributes"');if(h===!1)return w?Promise.reject({date:p,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject('Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0}),S=S.then(function(e){if(e===!1)return!1;var t=void 0;t="1.2.840.113549.1.1.10"===_.signatureAlgorithm.algorithmId?_.signatureAlgorithm.algorithmId:_.subjectPublicKeyInfo.algorithm.algorithmId;var r=(0,h.getAlgorithmByOID)(t);if("name"in r==!1)return w?Promise.reject({date:p,code:11,message:"Unsupported public key algorithm: "+t,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Unsupported public key algorithm: "+t);var n=(0,h.getAlgorithmParameters)(r.name,"importkey");if("hash"in n.algorithm&&(n.algorithm.hash.name=C),"ECDSA"===r.name){var i=!1;if("algorithmParams"in _.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in _.subjectPublicKeyInfo.algorithm.algorithmParams&&1===_.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===_.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(i=!0),i===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var a=(0,h.getAlgorithmByOID)(_.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in a==!1)return Promise.reject("Unsupported named curve algorithm: "+_.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());n.algorithm.namedCurve=a.name}var o=_.subjectPublicKeyInfo.toSchema(),s=o.toBER(!1),u=new Uint8Array(s);return O.importKey("spki",u,n.algorithm,!0,n.usages)}),S=S.then(function(e){return"boolean"!=typeof e&&(A=e,!("signedAttrs"in t.signerInfos[i])||O.digest(C,new Uint8Array(u)))}).then(function(e){return e!==!1&&(!("signedAttrs"in t.signerInfos[i])||!!(0,f.isEqualBuffer)(e,P)&&(u=t.signerInfos[i].signedAttrs.encodedValue,!0))}).then(function(e){if(e===!1)return!1;var r=(0,h.getAlgorithmParameters)(A.algorithm.name,"verify");if("hash"in r.algorithm&&(r.algorithm.hash.name=C),"RSA-PSS"===A.algorithm.name){var n=void 0;try{n=new M.default({schema:t.signerInfos[i].signatureAlgorithm.algorithmParams})}catch(e){return w?Promise.reject({date:p,code:12,message:e,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject(e)}"saltLength"in n?r.algorithm.saltLength=n.saltLength:r.algorithm.saltLength=20;var a="SHA-1";if("hashAlgorithm"in n){var o=(0,h.getAlgorithmByOID)(n.hashAlgorithm.algorithmId);if("name"in o==!1)return w?Promise.reject({date:p,code:13,message:"Unrecognized hash algorithm: "+n.hashAlgorithm.algorithmId,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Unrecognized hash algorithm: "+n.hashAlgorithm.algorithmId);a=o.name}r.algorithm.hash.name=a}var s=t.signerInfos[i].signature.valueBlock.valueHex;if("ECDSA"===A.algorithm.name){var c=l.fromBER(s);s=(0,h.createECDSASignatureFromCMS)(c.result)}return O.verify(r.algorithm,A,new Uint8Array(s),new Uint8Array(u))}),S=S.then(function(e){return w?{date:p,code:14,message:"",signatureVerified:e,signerCertificate:_,signerCertificateVerified:!0}:e},function(e){return w?"code"in e?Promise.reject(e):Promise.reject({date:p,code:15,message:"Error during verification: "+e.message,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject(e)}))}},{key:"sign",value:function(e,t,r,n){var i=this;n=n||new ArrayBuffer(0);var a="";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof r&&(r="SHA-1"),a=(0,h.getOIDByAlgorithm)({name:r}),""===a)return Promise.reject("Unsupported hash algorithm: "+r);0===this.digestAlgorithms.filter(function(e){return e.algorithmId===a}).length&&this.digestAlgorithms.push(new d.default({algorithmId:a,algorithmParams:new l.Null})),this.signerInfos[t].digestAlgorithm=new d.default({algorithmId:a,algorithmParams:new l.Null});var o=(0,h.getAlgorithmParameters)(e.algorithm.name,"sign");switch(o.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signerInfos[t].signatureAlgorithm.algorithmId=(0,h.getOIDByAlgorithm)(o.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":o.algorithm.saltLength=32;break;case"SHA-384":o.algorithm.saltLength=48;break;case"SHA-512":o.algorithm.saltLength=64}var s={};if("SHA-1"!==r.toUpperCase()){if(a=(0,h.getOIDByAlgorithm)({name:r}),""===a)return Promise.reject("Unsupported hash algorithm: "+r);s.hashAlgorithm=new d.default({algorithmId:a,algorithmParams:new l.Null}),s.maskGenAlgorithm=new d.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:s.hashAlgorithm.toSchema()})}20!==o.algorithm.saltLength&&(s.saltLength=o.algorithm.saltLength);var u=new M.default(s);this.signerInfos[t].signatureAlgorithm=new d.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}if("signedAttrs"in this.signerInfos[t])if(0!==this.signerInfos[t].signedAttrs.encodedValue.byteLength)n=this.signerInfos[t].signedAttrs.encodedValue;else{n=this.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1);var c=new Uint8Array(n);c[0]=49}else if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(this.encapContentInfo.eContent.idBlock.isConstructed===!1)n=this.encapContentInfo.eContent.valueBlock.valueHex;else{var m=!0,p=!1,v=void 0;try{for(var g,y=this.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;n=(0,f.utilConcatBuf)(n,b.valueBlock.valueHex)}}catch(e){p=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(p)throw v}}}else n=this.encapContentInfo.eContent.valueBlock.valueHex;else if(0===n.byteLength)return Promise.reject("Missed detached data input array");var w=(0,h.getCrypto)();return"undefined"==typeof w?Promise.reject("Unable to create WebCrypto object"):w.sign(o.algorithm,e,new Uint8Array(n)).then(function(e){return"ECDSA"===o.algorithm.name&&(e=(0,h.createCMSECDSASignature)(e)),i.signerInfos[t].signature=new l.OctetString({valueHex:e}),e},function(e){return Promise.reject("Signing error: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new v.default;case"certificates":return[];case"crls":return[];case"signerInfos":return[];default:throw new Error("Invalid member name for SignedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"encapContentInfo":return new v.default;case"digestAlgorithms":case"certificates":case"crls":case"signerInfos":return 0===r.length;default:throw new Error("Invalid member name for SignedData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new l.Sequence({name:t.blockName||"SignedData",optional:t.optional,value:[new l.Integer({name:t.version||"SignedData.version"}),new l.Set({value:[new l.Repeated({name:t.digestAlgorithms||"SignedData.digestAlgorithms",value:d.default.schema()})]}),v.default.schema(t.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:E.default.schema(t.certificates||{names:{certificates:"SignedData.certificates"}}).valueBlock.value}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:B.default.schema(t.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new l.Set({value:[new l.Repeated({name:t.signerInfos||"SignedData.signerInfos",value:_.default.schema()})]})]})}}]),e}();t.default=H},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(388),f=n(l),h=r(486),m=n(h),d=r(449),p=n(d),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.sid=(0,c.getParametersValue)(t,"sid",e.defaultValues("sid")),this.digestAlgorithm=(0,c.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),"signedAttrs"in t&&(this.signedAttrs=(0,c.getParametersValue)(t,"signedAttrs",e.defaultValues("signedAttrs"))),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),"unsignedAttrs"in t&&(this.unsignedAttrs=(0,c.getParametersValue)(t,"unsignedAttrs",e.defaultValues("unsignedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_SIGNER_INFO");this.version=r.result["SignerInfo.version"].valueBlock.valueDec;var n=r.result["SignerInfo.sid"];1===n.idBlock.tagClass?this.sid=new p.default({schema:n}):this.sid=n,this.digestAlgorithm=new f.default({schema:r.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in r.result&&(this.signedAttrs=new m.default({type:0,schema:r.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new f.default({schema:r.result["SignerInfo.signatureAlgorithm"]}),this.signature=r.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in r.result&&(this.unsignedAttrs=new m.default({type:1,schema:r.result["SignerInfo.unsignedAttrs"]}))}},{key:"toSchema",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t=[];return t.push(new u.Integer({value:this.version})),this.sid instanceof p.default?t.push(this.sid.toSchema()):t.push(this.sid),t.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&e.compareWithDefault("signedAttrs",this.signedAttrs)===!1&&t.push(this.signedAttrs.toSchema()),t.push(this.signatureAlgorithm.toSchema()),t.push(this.signature),"unsignedAttrs"in this&&e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)===!1&&t.push(this.unsignedAttrs.toSchema()),new u.Sequence({value:t})}},{key:"toJSON",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t={version:this.version};return this.sid instanceof u.Any||(t.sid=this.sid.toJSON()),t.digestAlgorithm=this.digestAlgorithm.toJSON(),e.compareWithDefault("signedAttrs",this.signedAttrs)===!1&&(t.signedAttrs=this.signedAttrs.toJSON()),t.signatureAlgorithm=this.signatureAlgorithm.toJSON(),t.signature=this.signature.toJSON(),e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)===!1&&(t.unsignedAttrs=this.unsignedAttrs.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"sid":return new u.Any;case"digestAlgorithm":return new f.default;case"signedAttrs":return new m.default({type:0});case"signatureAlgorithm":return new f.default;case"signature":return new u.OctetString;case"unsignedAttrs":return new m.default({type:1});default:throw new Error("Invalid member name for SignerInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return e.defaultValues("version")===r;case"sid":return r instanceof u.Any;case"digestAlgorithm":return r instanceof f.default!=!1&&r.isEqual(e.defaultValues("digestAlgorithm"));case"signedAttrs":return m.default.compareWithDefault("type",r.type)&&m.default.compareWithDefault("attributes",r.attributes)&&m.default.compareWithDefault("encodedValue",r.encodedValue);case"signatureAlgorithm":return r instanceof f.default!=!1&&r.isEqual(e.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return m.default.compareWithDefault("type",r.type)&&m.default.compareWithDefault("attributes",r.attributes)&&m.default.compareWithDefault("encodedValue",r.encodedValue);default:throw new Error("Invalid member name for SignerInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:"SignerInfo",value:[new u.Integer({name:t.version||"SignerInfo.version"}),new u.Choice({value:[p.default.schema(t.sid||{names:{blockName:"SignerInfo.sid"}}),new u.Constructed({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new u.OctetString]})]}),f.default.schema(t.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),m.default.schema(t.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),f.default.schema(t.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new u.OctetString({name:t.signature||"SignerInfo.signature"}),m.default.schema(t.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(395),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,c.getParametersValue)(t,"type",e.defaultValues("type")),this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes")),this.encodedValue=(0,c.getParametersValue)(t,"encodedValue",e.defaultValues("encodedValue")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{tagNumber:this.type,attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SignedUnsignedAttributes");this.type=r.result.idBlock.tagNumber,this.encodedValue=r.result.valueBeforeDecode;var n=new Uint8Array(this.encodedValue);if(n[0]=49,"attributes"in r.result!=!1)this.attributes=Array.from(r.result.attributes,function(e){return new f.default({schema:e})});else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}},{key:"toSchema",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues("type");case"attributes":return 0===r.length;case"encodedValue":return 0===r.byteLength;default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Constructed({name:t.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber},value:[new u.Repeated({name:t.attributes||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(387),f=r(475),h=n(f),m=r(403),d=n(m),p=r(400),v=n(p),g=r(417),y=n(g),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.policy=(0,c.getParametersValue)(t,"policy",e.defaultValues("policy")),this.messageImprint=(0,c.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.genTime=(0,c.getParametersValue)(t,"genTime",e.defaultValues("genTime")),"accuracy"in t&&(this.accuracy=(0,c.getParametersValue)(t,"accuracy",e.defaultValues("accuracy"))),"ordering"in t&&(this.ordering=(0,c.getParametersValue)(t,"ordering",e.defaultValues("ordering"))),"nonce"in t&&(this.nonce=(0,c.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"tsa"in t&&(this.tsa=(0,c.getParametersValue)(t,"tsa",e.defaultValues("tsa"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TST_INFO");this.version=r.result["TSTInfo.version"].valueBlock.valueDec,
this.policy=r.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new h.default({schema:r.result["TSTInfo.messageImprint"]}),this.serialNumber=r.result["TSTInfo.serialNumber"],this.genTime=r.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in r.result&&(this.accuracy=new d.default({schema:r.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in r.result&&(this.ordering=r.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in r.result&&(this.nonce=r.result["TSTInfo.nonce"]),"TSTInfo.tsa"in r.result&&(this.tsa=new v.default({schema:r.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in r.result&&(this.extensions=Array.from(r.result["TSTInfo.extensions"],function(e){return new y.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.version})),e.push(new u.ObjectIdentifier({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new u.GeneralizedTime({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new u.Boolean({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),e}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=void 0,i=void 0,a=void 0,o=(0,l.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");if(!("data"in t))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');n=t.data,"notBefore"in t&&(i=t.notBefore),"notAfter"in t&&(a=t.notAfter);var s=(0,l.getAlgorithmByOID)(this.messageImprint.hashAlgorithm.algorithmId);return"name"in s==!1?Promise.reject("Unsupported signature algorithm: "+this.messageImprint.hashAlgorithm.algorithmId):r=r.then(function(){return o.digest(s.name,new Uint8Array(n))}).then(function(t){return(0,c.isEqualBuffer)(t,e.messageImprint.hashedMessage.valueBlock.valueHex)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new h.default;case"serialNumber":return new u.Integer;case"genTime":return new Date(0,0,0);case"accuracy":return new d.default;case"ordering":return!1;case"nonce":return new u.Integer;case"tsa":return new v.default;case"extensions":return[];default:throw new Error("Invalid member name for TSTInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"policy":case"genTime":case"ordering":return r===e.defaultValues(t);case"messageImprint":return h.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&h.default.compareWithDefault("hashedMessage",r.hashedMessage);case"serialNumber":case"nonce":return r.isEqual(e.defaultValues(t));case"accuracy":return d.default.compareWithDefault("seconds",r.seconds)&&d.default.compareWithDefault("millis",r.millis)&&d.default.compareWithDefault("micros",r.micros);case"tsa":return v.default.compareWithDefault("type",r.type)&&v.default.compareWithDefault("value",r.value);case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TSTInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"TSTInfo",value:[new u.Integer({name:t.version||"TSTInfo.version"}),new u.ObjectIdentifier({name:t.policy||"TSTInfo.policy"}),h.default.schema(t.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new u.Integer({name:t.serialNumber||"TSTInfo.serialNumber"}),new u.GeneralizedTime({name:t.genTime||"TSTInfo.genTime"}),d.default.schema(t.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new u.Boolean({name:t.ordering||"TSTInfo.ordering",optional:!0}),new u.Integer({name:t.nonce||"TSTInfo.nonce",optional:!0}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[v.default.schema(t.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new u.Repeated({name:t.extensions||"TSTInfo.extensions",value:y.default.schema(t.extension||{})})]})]})}}]),e}();t.default=b},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(383),s=n(o),u=r(384),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.status=(0,u.getParametersValue)(t,"status",e.defaultValues("status")),"statusStrings"in t&&(this.statusStrings=(0,u.getParametersValue)(t,"statusStrings",e.defaultValues("statusStrings"))),"failInfo"in t&&(this.failInfo=(0,u.getParametersValue)(t,"failInfo",e.defaultValues("failInfo"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{status:"status",statusStrings:"statusStrings",failInfo:"failInfo"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKIStatusInfo");var n=r.result.status;if(n.valueBlock.isHexOnly===!0||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,"statusStrings"in r.result&&(this.statusStrings=r.result.statusStrings),"failInfo"in r.result&&(this.failInfo=r.result.failInfo)}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.status})),"statusStrings"in this&&e.push(new s.Sequence({optional:!0,value:this.statusStrings})),"failInfo"in this&&e.push(this.failInfo),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"statusStrings"in this&&(e.statusStrings=Array.from(this.statusStrings,function(e){return e.toJSON()})),"failInfo"in this&&(e.failInfo=this.failInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return 2;case"statusStrings":return[];case"failInfo":return new s.BitString;default:throw new Error("Invalid member name for PKIStatusInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"status":return r===e.defaultValues(t);case"statusStrings":return 0===r.length;case"failInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for PKIStatusInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.status||""}),new s.Sequence({optional:!0,value:[new s.Repeated({name:t.statusStrings||"",value:new s.Utf8String})]}),new s.BitString({name:t.failInfo||"",optional:!0})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(475),f=n(l),h=r(417),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.messageImprint=(0,c.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),"reqPolicy"in t&&(this.reqPolicy=(0,c.getParametersValue)(t,"reqPolicy",e.defaultValues("reqPolicy"))),"nonce"in t&&(this.nonce=(0,c.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"certReq"in t&&(this.certReq=(0,c.getParametersValue)(t,"certReq",e.defaultValues("certReq"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TSP_REQUEST");this.version=r.result["TimeStampReq.version"].valueBlock.valueDec,this.messageImprint=new f.default({schema:r.result["TimeStampReq.messageImprint"]}),"TimeStampReq.reqPolicy"in r.result&&(this.reqPolicy=r.result["TimeStampReq.reqPolicy"].valueBlock.toString()),"TimeStampReq.nonce"in r.result&&(this.nonce=r.result["TimeStampReq.nonce"]),"TimeStampReq.certReq"in r.result&&(this.certReq=r.result["TimeStampReq.certReq"].valueBlock.value),"TimeStampReq.extensions"in r.result&&(this.extensions=Array.from(r.result["TimeStampReq.extensions"],function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var t=[];return t.push(new u.Integer({value:this.version})),t.push(this.messageImprint.toSchema()),"reqPolicy"in this&&t.push(new u.ObjectIdentifier({value:this.reqPolicy})),"nonce"in this&&t.push(this.nonce),"certReq"in this&&e.compareWithDefault("certReq",this.certReq)===!1&&t.push(new u.Boolean({value:this.certReq})),"extensions"in this&&t.push(new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={version:this.version,messageImprint:this.messageImprint.toJSON()};return"reqPolicy"in this&&(t.reqPolicy=this.reqPolicy),"nonce"in this&&(t.nonce=this.nonce.toJSON()),"certReq"in this&&e.compareWithDefault("certReq",this.certReq)===!1&&(t.certReq=this.certReq),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"messageImprint":return new f.default;case"reqPolicy":return"";case"nonce":return new u.Integer;case"certReq":return!1;case"extensions":return[];default:throw new Error("Invalid member name for TimeStampReq class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"reqPolicy":case"certReq":return r===e.defaultValues(t);case"messageImprint":return f.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&f.default.compareWithDefault("hashedMessage",r.hashedMessage);case"nonce":return r.isEqual(e.defaultValues(t));case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TimeStampReq class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"TimeStampReq",value:[new u.Integer({name:t.version||"TimeStampReq.version"}),f.default.schema(t.messageImprint||{names:{blockName:"TimeStampReq.messageImprint"}}),new u.ObjectIdentifier({name:t.reqPolicy||"TimeStampReq.reqPolicy",optional:!0}),new u.Integer({name:t.nonce||"TimeStampReq.nonce",optional:!0}),new u.Boolean({name:t.certReq||"TimeStampReq.certReq",optional:!0}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Repeated({name:t.extensions||"TimeStampReq.extensions",value:m.default.schema()})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(383),u=i(s),c=r(384),l=r(488),f=n(l),h=r(406),m=n(h),d=r(484),p=n(d),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.status=(0,c.getParametersValue)(t,"status",e.defaultValues("status")),"timeStampToken"in t&&(this.timeStampToken=(0,c.getParametersValue)(t,"timeStampToken",e.defaultValues("timeStampToken"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TSP_RESPONSE");this.status=new f.default({schema:r.result["TimeStampResp.status"]}),"TimeStampResp.timeStampToken"in r.result&&(this.timeStampToken=new m.default({schema:r.result["TimeStampResp.timeStampToken"]}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.status.toSchema()),"timeStampToken"in this&&e.push(this.timeStampToken.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"timeStampToken"in this&&(e.timeStampToken=this.timeStampToken.toJSON()),e}},{key:"sign",value:function(e,t){if("timeStampToken"in this==!1)return Promise.reject("timeStampToken is absent in TSP response");if("1.2.840.113549.1.7.2"!==this.timeStampToken.contentType)return Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType);var r=new m.default({schema:this.timeStampToken.content});return r.sign(e,0,t)}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{signer:0,trustedCerts:[],data:new ArrayBuffer(0)};if("timeStampToken"in this==!1)return Promise.reject("timeStampToken is absent in TSP response");if("1.2.840.113549.1.7.2"!==this.timeStampToken.contentType)return Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType);var t=new p.default({schema:this.timeStampToken.content});return t.verify(e)}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return new f.default;case"timeStampToken":return new m.default;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"status":return f.default.compareWithDefault("status",t.status)&&"statusStrings"in t==!1&&"failInfo"in t==!1;case"timeStampToken":return""===t.contentType&&t.content instanceof u.Any;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"TimeStampResp",value:[f.default.schema(t.status||{names:{blockName:"TimeStampResp.status"}}),m.default.schema(t.timeStampToken||{names:{blockName:"TimeStampResp.timeStampToken",optional:!0}})]})}}]),e}();t.default=v},function(e,t){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.success=e,this.data=t}return e}();t.T1CResponse=n;var i=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.BoolDataResponse=i;var a=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.DataResponse=a;var o=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.DataArrayResponse=o;var s=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.DataObjectResponse=s;var u=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.InfoResponse=u;var c=function(){function e(e,t,r,n,i,a,o){this.activated=e,this.citrix=t,this.managed=r,this.arch=n,this.os=i,this.uid=a,this.version=o}return e}();t.T1CInfo=c;var l=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.BrowserInfoResponse=l;var f=function(){function e(e,t,r,n){this.browser=e,this.manufacturer=t,this.os=r,this.ua=n}return e}();t.BrowserInfo=f;var h=function(){function e(e,t){this.atr=e,this.description=t}return e}();t.Card=h;var m=function(){function e(e,t,r,n){this.id=e,this.name=t,this.pinpad=r,this.card=n}return e}();t.CardReader=m;var d=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.CardReadersResponse=d;var p=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.CertificateResponse=p;var v=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.CertificatesResponse=v;var g=function(){function e(e,t){this.base64=e,this.parsed=t}return e}();t.T1CCertificate=g;var y=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.SingleReaderResponse=y;var b=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.PluginsResponse=b;var w=function(){function e(e,t,r){this.id=e,this.name=t,this.version=r}return e}();t.Plugin=w;var S=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return r(t,e),t}(n);t.PubKeyResponse=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i=function(){function e(e,t){this.parseCerts=e,this.filters=t}return e}();t.Options=i;var a=function(){function e(e,t,r){this.parseCerts=e,this.params=t,this.callback=r}return e}();t.RequestOptions=a;var o=function(){function e(){}return e.determineOptions=function(e,t){var r=new a(!1);return e?"function"==typeof e?r.callback=e:(r.callback=t,n.has(e,"parseCerts")&&(r.parseCerts=e.parseCerts)):"function"==typeof t&&(r.callback=t),r},e.determineOptionsWithFilter=function(e){var t=new a(!1,{});return n.isArray(e)?e.length&&(t.params.filter=e.join(",")):n.isObject(e)&&(n.has(e,"filters")&&n.isArray(e.filters)&&e.filters.length&&(t.params.filter=e.filters.join(",")),n.has(e,"parseCerts")&&(t.parseCerts=e.parseCerts)),t},e}();t.RequestHandler=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(379),o=r(492),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.rnData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.RN_DATA),void 0,e)},t.prototype.address=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ADDRESS),void 0,e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.citizenCertificate=function(e,r){return this.getCertificate(t.CERT_CITIZEN,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,o.RequestHandler.determineOptions(e,r))},t.prototype.rrnCertificate=function(e,r){return this.getCertificate(t.CERT_RRN,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){var a=new i.VerifyPinData(t.VERIFY_PRIV_KEY_REF,e.pin);return n.connection.post(n.baseUrl,n.containerSuffix(i.GenericCertCard.VERIFY_PIN),a,void 0,r)})},t}(i.GenericCertCard);s.RN_DATA="/rn",s.ADDRESS="/address",s.PHOTO="/picture",s.VERIFY_PRIV_KEY_REF="non-repudiation",t.EidBe=s},function(e,t,r){"use strict";function n(e,t){return{filter:e.filter,pin:t}}function i(e){return{pin:e}}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(378),s=r(379),u=r(382),c=r(339),l=r(492),f=function(e){function t(t,r,n,i,a){var o=e.call(this,t,r,n,i)||this;return o.baseUrl=t,o.containerUrl=r,o.connection=n,o.reader_id=i,o.pin=a,o.pin=s.PinEnforcer.encryptPin(a),o}return a(t,e),t.prototype.allDataFilters=function(){return["authentication-certificate","biometric","non-repudiation-certificate","picture","root-certificates"]},t.prototype.allCertFilters=function(){return["authentication-certificate","non-repudiation-certificate","root-certificates"]},t.prototype.allData=function(e,t){var r=l.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(),n(r.params,this.pin)).then(function(e){return u.CertParser.process(e,r.parseCerts,t)},function(e){return c.ResponseHandler.error(e,t)})},t.prototype.allCerts=function(e,r){var i=l.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),n(i.params,this.pin)).then(function(e){return u.CertParser.process(e,i.parseCerts,r)},function(e){return c.ResponseHandler.error(e,r)})},t.prototype.biometric=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.BIOMETRIC),i(this.pin),e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),i(this.pin),e)},t.prototype.rootCertificate=function(e,r){return this.getCertificateArray(t.CERT_ROOT,l.RequestHandler.determineOptions(e,r),i(this.pin))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,l.RequestHandler.determineOptions(e,r),i(this.pin))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,l.RequestHandler.determineOptions(e,r),i(this.pin))},t.prototype.verifyPin=function(e,r){var n=this;return s.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,i(n.pin),r)})},t.prototype.signData=function(e,r){var n=this;return s.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,i(n.pin),r)})},t.prototype.authenticate=function(e,r){var n=this;return s.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,i(n.pin),r)})},t.prototype.signatureImage=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGNATURE_IMAGE),i(this.pin),e)},t.prototype.getCertificate=function(e,r,n){var i=this;return s.PinEnforcer.checkEncryptedPin(this.connection,this.reader_id,n.pin).then(function(){return i.connection.get(i.baseUrl,i.containerSuffix(t.ALL_CERTIFICATES+e),n).then(function(e){return u.CertParser.process(e,r.parseCerts,r.callback)},function(e){return c.ResponseHandler.error(e,r.callback)})})},t.prototype.getCertificateArray=function(e,r,n){var i=this;return s.PinEnforcer.checkEncryptedPin(this.connection,this.reader_id,n.pin).then(function(){return i.connection.get(i.baseUrl,i.containerSuffix(t.ALL_CERTIFICATES+e),n).then(function(e){return u.CertParser.process(e,r.parseCerts,r.callback)},function(e){return c.ResponseHandler.error(e,r.callback)})})},t}(o.GenericSecuredCertCard);f.BIOMETRIC="/biometric",f.ADDRESS="/address",f.PHOTO="/picture",f.SIGNATURE_IMAGE="/signature-image",t.EidLux=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a="/card-issuing",o="/contracts",s="/picture",u="/status",c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.cardIssuing=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(a),void 0,e)},t.prototype.contracts=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(o),void 0,e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(s),void 0,e)},t.prototype.status=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(u),void 0,e)},t}(i.GenericSmartCard);t.Mobib=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(492),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.activated=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ACTIVATED),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,a.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,a.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,a.RequestHandler.determineOptions(e,r))},t}(i.GenericCertCard);o.ACTIVATED="/activated",t.LuxTrust=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(379),o=r(335),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.challenge=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.CHALLENGE),e,void 0,r)},function(e){return r(e,null)}):new o.Promise(function(r,i){a.PinEnforcer.check(n.connection,n.reader_id,e).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.CHALLENGE),e,void 0))},function(e){i(e)})})},t.prototype.readCounter=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.get(n.baseUrl,n.containerSuffix(t.READ_COUNTER),{pin:e.pin},r)},function(e){return r(e,null)}):new o.Promise(function(r,i){a.PinEnforcer.check(n.connection,n.reader_id,e).then(function(){r(n.connection.get(n.baseUrl,n.containerSuffix(t.READ_COUNTER),{pin:e.pin},void 0))},function(e){i(e)})})},t}(i.GenericPinCard);s.CHALLENGE="/challenge",s.READ_COUNTER="/counter",t.Ocra=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(379),o=r(492),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["applet-info","root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.issuerCertificate=function(e,r){return this.getCertificate(t.CERT_ISSUER,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,o.RequestHandler.determineOptions(e,r))},t.prototype.encryptionCertificate=function(e,r){return this.getCertificate(t.CERT_ENCRYPTION,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t.prototype.resetPin=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.RESET_PIN),e,void 0,r)},t}(i.GenericCertCard);s.DEFAULT_VERIFY_PIN="sign",s.RESET_PIN="/reset-pin",t.Aventra=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(379),o=r(492),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"];
},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.issuerCertificate=function(e,r){return this.getCertificate(t.CERT_ISSUER,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,o.RequestHandler.determineOptions(e,r))},t.prototype.encryptionCertificate=function(e,r){return this.getCertificate(t.CERT_ENCRYPTION,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t}(i.GenericCertCard);t.Oberthur=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(379),o=r(335),s=r(492),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["applet-info","root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["authentication-certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.printedInformation=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.PRINTED_INFORMATION),e,void 0,r)},function(e){return r(e,null)}):new o.Promise(function(r,i){a.PinEnforcer.check(n.connection,n.reader_id,e).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.PRINTED_INFORMATION),e,void 0))},function(e){i(e)})})},t.prototype.facialImage=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.reader_id,e).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.FACIAL_IMAGE),e,void 0,r)},function(e){return r(e,null)}):new o.Promise(function(r,i){a.PinEnforcer.check(n.connection,n.reader_id,e).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.FACIAL_IMAGE),e,void 0))},function(e){i(e)})})},t.prototype.authenticationCertificate=function(e,r,n){return this.getCertificate(t.CERT_AUTHENTICATION,e,s.RequestHandler.determineOptions(r,n),void 0)},t.prototype.signingCertificate=function(e,r,n){return this.getCertificate(t.CERT_SIGNING,e,s.RequestHandler.determineOptions(r,n))},t}(i.GenericSecuredCertCard);u.PRINTED_INFORMATION="/printed-information",u.FACIAL_IMAGE="/facial-image",t.PIV=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(492),o=r(382),s=r(339),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.info=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.INFO),void 0,e)},t.prototype.intermediateCertificate=function(e,r){var n=a.RequestHandler.determineOptions(e,r),i=this;return i.connection.get(i.baseUrl,i.containerSuffix(t.ALL_CERTIFICATES+t.CERT_INTERMEDIATE),void 0).then(function(e){return o.CertParser.process(e,n.parseCerts,n.callback)},function(e){return s.ResponseHandler.error(e,n.callback)})},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,a.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,a.RequestHandler.determineOptions(e,r))},t}(i.GenericCertCard);u.INFO="/info",u.CERT_INTERMEDIATE="/intermediate",t.DNIe=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=r(492),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.idData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ID_DATA),void 0,e)},t.prototype.idDataWithOutPhoto=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ID_DATA),{photo:"false"},e)},t.prototype.address=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ADDRESS),e,void 0,r)},t.prototype.photo=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,a.RequestHandler.determineOptions(e,r))},t.prototype.rootAuthenticationCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT_AUTH,a.RequestHandler.determineOptions(e,r))},t.prototype.rootNonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT_NON_REP,a.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,a.RequestHandler.determineOptions(e,r))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,a.RequestHandler.determineOptions(e,r))},t}(i.GenericCertCard);o.ADDRESS="/address",o.CERT_ROOT_AUTH="/root-authentication",o.CERT_ROOT_NON_REP="/root-non-repudiation",o.ID_DATA="/id",o.PHOTO="/photo",t.EidPt=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(331),a=r(378),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.optionalSessionIdParam=function(e){return e&&e.length?{"session-id":e}:void 0},t.prototype.atr=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.ATR),t.optionalSessionIdParam(e),r)},t.prototype.apdu=function(e,r,n){var a=this.containerSuffix(t.APDU);return i.isArray(e)&&(a=this.containerSuffix(t.APDUS)),this.connection.post(this.baseUrl,a,e,t.optionalSessionIdParam(r),n)},t.prototype.ccid=function(e,r,n,i){return this.connection.post(this.baseUrl,this.containerSuffix(t.CCID),{feature:e,apdu:r},t.optionalSessionIdParam(n),i)},t.prototype.ccidFeatures=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.CCID_FEATURES),t.optionalSessionIdParam(e),r)},t.prototype.command=function(e,r,n){if(i.isArray(e)){var a=[];return i.forEach(e,function(e){a.push({tx:e})}),this.connection.post(this.baseUrl,this.containerSuffix(t.CMDS),a,t.optionalSessionIdParam(r),n)}return this.connection.post(this.baseUrl,this.containerSuffix(t.CMD),{tx:e},t.optionalSessionIdParam(r),n)},t.prototype.closeSession=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.CLOSE_SESSION),t.optionalSessionIdParam(e),r)},t.prototype.isPresent=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.IS_PRESENT),t.optionalSessionIdParam(e),r)},t.prototype.openSession=function(e,r){return e&&e>0?this.connection.post(this.baseUrl,this.containerSuffix(t.OPEN_SESSION),{timeout:e},void 0,r):this.connection.post(this.baseUrl,this.containerSuffix(t.OPEN_SESSION),{timeout:this.connection.cfg.defaultSessionTimeout},void 0,r)},t}(a.GenericReaderContainer);o.ATR="/atr",o.APDU="/apdu",o.APDUS="/apdus",o.CCID="/ccid",o.CCID_FEATURES="/ccid-features",o.CMD="/command",o.CMDS="/commands",o.CLOSE_SESSION="/close-session",o.IS_PRESENT="/is-present",o.OPEN_SESSION="/open-session",t.RemoteLoading=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(503),a=r(505),o=r(339),s=r(331),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.generateStxApdu=function(e,t){return t&&t.length?new a.APDU("F1","95","F7","E4",t+e):new a.APDU("F1","95","F7","E4","00"+e)},t.prototype.isBelfiusReader=function(e,r){var n=this;return e&&e.length?this.connection.get(this.baseUrl,"/card-readers/"+this.reader_id,void 0).then(function(i){return n.apdu(t.NONCE_APDU,e).then(function(e){return o.ResponseHandler.response({data:"9000"===e.data.sw,success:!0},r)})},function(e){return o.ResponseHandler.error(e,r)}):o.ResponseHandler.error({status:400,description:"Session ID is required!",code:"402"},r)},t.prototype.nonce=function(e,r){var n=this;return this.isBelfiusReader(e).then(function(i){return i.data?n.apdu(t.NONCE_APDU,e,r):o.ResponseHandler.error({status:400,description:"Reader is not compatible with this request.",code:"2"},r)})},t.prototype.stx=function(e,r,n){var i=this;return this.isBelfiusReader(r).then(function(a){if(a.data){if(e.length<=500)return i.apdu(t.generateStxApdu(e),r,n);for(var u=[],c=0;c<Math.ceil(e.length/500);c++)u.push(e.substr(500*c,500));return i.apdu(i.generateStxApdus(u),r).then(function(e){var t="";s.forEach(e.data,function(e){e.rx&&(t+=e.rx)});var r={data:{tx:e.data[e.data.length-1].tx,sw:e.data[e.data.length-1].sw},success:e.success};return"9000"===r.data.sw&&t.length>0&&(r.data.rx=t),o.ResponseHandler.response(r,n)})}return o.ResponseHandler.error({status:400,description:"Reader is not compatible with this request.",code:"2"},n)})},t.prototype.generateStxApdus=function(e){var r=[],n=e.length-1;return s.forEach(e,function(e,i){0===i?r.push(t.generateStxApdu(e,"01")):i===n?r.push(t.generateStxApdu(e,"02")):r.push(t.generateStxApdu(e,"03"))}),r},t}(i.RemoteLoading);u.NONCE_APDU=new a.APDU("F1","95","F7","E4","FE0000040001300000"),t.Belfius=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(491),a=function(){function e(e,t,r,n,i,a){this.cla=e,this.ins=t,this.p1=r,this.p2=n,this.data=i,this.le=a}return e}();t.APDU=a;var o=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return n(t,e),t}(i.T1CResponse);t.CommandResponse=o;var s=function(e){function t(t,r){var n=e.call(this,r,t)||this;return n.data=t,n.success=r,n}return n(t,e),t}(i.T1CResponse);t.CommandsResponse=s;var u=function(){function e(e,t,r){this.sw=e,this.tx=t,this.rx=r}return e}();t.Command=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.downloadFile=function(e,r,n){return this.connection.putFile(this.baseUrl,this.containerSuffix(t.DOWNLOAD),{path:e,file:r,fileName:n},void 0)},t.prototype.listFiles=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.FOLDER),e,void 0,r)},t.prototype.setFolder=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.FOLDER),void 0,e)},t.prototype.uploadFile=function(e){return this.connection.requestFile(this.baseUrl,this.containerSuffix(t.UPLOAD),{path:e})},t}(i.GenericContainer);a.DOWNLOAD="/download",a.FOLDER="/folder",a.UPLOAD="/upload",t.FileExchange=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i=r(382),a=r(339),o=r(333),s=r(492),u=r(379),c=function(){function e(e,t,r){this.baseUrl=e,this.containerUrl=t,this.connection=r,o.os.family.indexOf("Win")>-1&&(this.os="win"),o.os.family.indexOf("OS X")>-1&&(this.os="mac"),this.os||(this.os="linux");var n=r.cfg.pkcs11Config;n&&n[this.os]&&(this.modulePath=n[this.os])}return e.prototype.certificates=function(t,r,o){var u=n.extend({slot_id:t},{module:this.modulePath}),c=s.RequestHandler.determineOptions(r,o);return this.connection.post(this.baseUrl,this.containerSuffix(e.ALL_CERTIFICATES),u,void 0).then(function(e){return i.CertParser.process(e,c.parseCerts,c.callback)},function(e){return a.ResponseHandler.error(e,c.callback)})},e.prototype.info=function(t){var r={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.INFO),r,void 0).then(function(e){return a.ResponseHandler.response(e,t)},function(e){return a.ResponseHandler.error(e,t)})},e.prototype.signData=function(t,r){var n={module:this.modulePath,id:t.cert_id,slot_id:t.slot_id,pin:u.PinEnforcer.encryptPin(t.pin),data:t.data,digest:t.algorithm_reference};return this.connection.post(this.baseUrl,this.containerSuffix(e.SIGN),n,void 0).then(function(e){return a.ResponseHandler.response(e,r)},function(e){return a.ResponseHandler.error(e,r)})},e.prototype.slots=function(t){var r={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.SLOTS),r,void 0).then(function(e){return a.ResponseHandler.response(e,t)},function(e){return a.ResponseHandler.error(e,t)})},e.prototype.slotsWithTokenPresent=function(t){var r={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.SLOTS),r,{"token-present":"true"}).then(function(e){return a.ResponseHandler.response(e,t)},function(e){return a.ResponseHandler.error(e,t)})},e.prototype.token=function(t,r){var i=n.extend({slot_id:t},{module:this.modulePath});return this.connection.post(this.baseUrl,this.containerSuffix(e.TOKEN),i,void 0).then(function(e){return a.ResponseHandler.response(e,r)},function(e){return a.ResponseHandler.error(e,r)})},e.prototype.verifySignedData=function(t,r){var n={module:this.modulePath,id:t.cert_id,slot_id:t.slot_id,pin:u.PinEnforcer.encryptPin(t.pin),data:t.data,digest:t.algorithm_reference,signature:t.signature};return this.connection.post(this.baseUrl,this.containerSuffix(e.VERIFY),n,void 0).then(function(e){return a.ResponseHandler.response(e,r)},function(e){return a.ResponseHandler.error(e,r)})},e.prototype.containerSuffix=function(e){return this.containerUrl+e},e}();c.ALL_CERTIFICATES="/certificates",c.INFO="/info",c.SIGN="/sign",c.SLOTS="/slots",c.TOKEN="/token",c.VERIFY="/verify",t.PKCS11=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(378),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(e,t){return this.connection.put(this.baseUrl,this.containerSuffix(),e,void 0,t)},t.prototype.read=function(e,t){return this.connection.get(this.baseUrl,this.containerSuffix(e),void 0,t)},t.prototype.update=function(e,t,r){return this.connection.post(this.baseUrl,this.containerSuffix(),t,void 0,r)},t.prototype.delete=function(e,t){return this.connection.delete(this.baseUrl,this.containerSuffix(e),void 0,t)},t}(i.GenericReaderContainer);t.DataContainer=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=r(493),a=r(339),o=r(331),s=r(510),u=r(498),c=function(){function e(e,t,r,n,i,a,o){this.client=e,this.readerId=t,this.container=r,this.data=n,this.dumpMethod=i,this.dumpOptions=a,this.reader=o}return e}(),l=function(){function e(){}return e.containerForReader=function(e,t,r){return this.checkPrerequisites(e,t,{}).then(function(e){return a.ResponseHandler.response({data:e.container,success:!0},r)}).catch(function(e){return a.ResponseHandler.error(e,r)})},e.dumpData=function(t,r,n,i){return this.checkPrerequisites(t,r,n).then(this.determineDataDumpMethod).then(e.doDataDump).then(function(e){return a.ResponseHandler.response(e,i)}).catch(function(e){return a.ResponseHandler.error(e,i)})},e.authenticateCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanAuthenticate).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return a.ResponseHandler.response(e,t)}).catch(function(e){return a.ResponseHandler.error(e,t)})},e.signCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanSign).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return a.ResponseHandler.response(e,t)}).catch(function(e){return a.ResponseHandler.error(e,t)})},e.verifyPinCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanVerifyPin).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return a.ResponseHandler.response(e,t)}).catch(function(e){return a.ResponseHandler.error(e,t)})},e.authenticate=function(t,r,n,i){return this.checkPrerequisites(t,r,n).then(this.determineAlgorithm).then(e.doAuthenticate).then(function(e){return a.ResponseHandler.response(e,i)}).catch(function(e){return a.ResponseHandler.error(e,i)})},e.sign=function(t,r,n,i){return this.checkPrerequisites(t,r,n).then(this.determineAlgorithm).then(e.doSign).then(function(e){return a.ResponseHandler.response(e,i)}).catch(function(e){return a.ResponseHandler.error(e,i)})},e.verifyPin=function(t,r,n,i){return this.checkPrerequisites(t,r,n).then(e.doVerifyPin).then(function(e){return a.ResponseHandler.response(e,i)}).catch(function(e){return a.ResponseHandler.error(e,i)})},e.checkPKCS11=function(e){var t=this;return new n.Promise(function(r,n){e.pkcs11().slotsWithTokenPresent().then(function(e){if(e&&e.data&&e.data.length){var n=o.find(e.data,function(e){return o.includes(t.PKCS11_FLAGS,e.flags)});r(!!n)}else r(!1)},function(e){n(e)})})},e.checkCanAuthenticate=function(e){return new n.Promise(function(t){e.data=o.filter(e.data,function(e){return s.CardUtil.canAuthenticate(e.card)}),t(e)})},e.checkCanSign=function(e){return new n.Promise(function(t){e.data=o.filter(e.data,function(e){return s.CardUtil.canSign(e.card)}),t(e)})},e.checkCanVerifyPin=function(e){return new n.Promise(function(t){e.data=o.filter(e.data,function(e){return s.CardUtil.canVerifyPin(e.card)}),t(e)})},e.filterByAvailableContainers=function(e){return e.client.core().plugins().then(function(t){return new n.Promise(function(r){e.readers.data=o.filter(e.readers.data,function(e){return o.find(t.data,function(t){return t.id===s.CardUtil.determineContainer(e.card)})}),r(e.readers)})})},e.checkPrerequisites=function(e,t,r){return e.core().readersCardAvailable().then(function(e){return{readerId:t,readers:e}}).then(this.checkReaderPresent).then(function(t){return{reader:t,client:e}}).then(this.determineContainerForCard).then(function(t){return{client:e,container:t}}).then(this.checkContainerAvailable).then(function(e){return new c(e.client,t,e.container,r)})},e.checkReaderPresent=function(e){return new n.Promise(function(t,r){var n=o.find(e.readers.data,function(t){return t.id===e.readerId});n?t(n):r(e.readerId&&e.readerId.length?"No card found for this ID":"Reader ID is required.")})},e.checkContainerAvailable=function(e){return new n.Promise(function(t,r){e&&e.container?e.client.core().plugins().then(function(n){o.find(n.data,function(t){return t.id===e.container})?t(e):r("Container for this card is not available")}):r("Unknown card type")})},e.determineAlgorithm=function(e){return new n.Promise(function(t,r){e.data.algorithm_reference&&e.data.algorithm_reference.length||(e.data.algorithm_reference=s.CardUtil.defaultAlgo(e.container)),e.data.algorithm_reference?t(e):r("No algorithm reference provided and cannot determine default algorithm")})},e.determineContainerForCard=function(t){return new n.Promise(function(r,n){if(t.reader&&t.reader.card){var i=s.CardUtil.determineContainer(t.reader.card);i?r(i):e.checkPKCS11(t.client).then(function(e){r(e?"pkcs11":void 0)},function(){r(void 0)})}else n("No card present in reader")})},e.determineDataDumpMethod=function(e){return new n.Promise(function(t,r){e.dumpMethod=s.CardUtil.dumpMethod(e.container),e.dumpOptions=s.CardUtil.dumpOptions(e.container),e.dumpMethod?t(e):r("Cannot determine method to use for data dump")})},e.doDataDump=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).allData({filters:[],parseCerts:!0}):e.dumpOptions?e.client[e.container](e.readerId)[e.dumpMethod](e.dumpOptions,e.data):e.client[e.container](e.readerId)[e.dumpMethod](e.data)},e.doSign=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).signData(e.data):e.client[e.container](e.readerId).signData(e.data)},e.doAuthenticate=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).authenticate(e.data):e.client[e.container](e.readerId).authenticate(e.data)},e.doVerifyPin=function(e){if("luxeid"===e.container)return e.client.luxeid(e.readerId,e.data.pin).verifyPin(e.data);if("beid"===e.container){var t={pin:e.data.pin,private_key_reference:i.EidBe.VERIFY_PRIV_KEY_REF};return e.client.beid(e.readerId).verifyPin(t)}if("aventra"===e.container){var t={pin:e.data.pin,private_key_reference:u.Aventra.DEFAULT_VERIFY_PIN};return e.client.aventra(e.readerId).verifyPin(t)}return e.client[e.container](e.readerId).verifyPin(e.data)},e}();l.PKCS11_FLAGS=[1,3,5,7],t.GenericService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(331),i=r(492),a=function(){function e(){}return e.canAuthenticate=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"piv":case"pteid":return!0;case"ocra":case"emv":case"mobib":default:return!1}},e.canSign=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"piv":case"pteid":case"pkcs11":return!0;case"ocra":case"emv":case"mobib":default:return!1}},e.canVerifyPin=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"ocra":case"piv":case"pteid":case"emv":return!0;case"mobib":default:return!1}},e.determineContainer=function(e){function t(e,t){return!!n.find(e,function(e){return e.indexOf(t)>-1})}return n.isEmpty(e)||n.isEmpty(e.description)?void 0:t(e.description,"Belgium Electronic ID card")?"beid":t(e.description,"DNI electronico")?"dnie":t(e.description,"Grand Duchy of Luxembourg / Identity card with LuxTrust certificate (eID)")?"luxeid":t(e.description,"LuxTrust card")?"luxtrust":t(e.description,"Juridic Person's Token (PKI)")?"ocra":t(e.description,"MOBIB")?"mobib":t(e.description,"Mastercard")?"emv":t(e.description,"Aventra")?"aventra":t(e.description,"PIV")?"piv":t(e.description,"CIV")?"piv":t(e.description,"Portuguese")?"pteid":void 0},e.defaultAlgo=function(e){switch(e){case"aventra":case"beid":case"dnie":case"oberthur":case"piv":case"luxeid":case"luxtrust":case"pteid":case"pkcs11":return"sha256";default:return}},e.dumpMethod=function(e){switch(e){case"aventra":case"beid":case"dnie":case"emv":case"luxeid":case"luxtrust":case"mobib":case"oberthur":case"ocra":case"piv":case"pteid":return"allData";case"pkcs11":return"slots";default:return}},e.dumpOptions=function(e){switch(e){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"mobib":case"oberthur":case"ocra":case"piv":case"pteid":return new i.Options(!0,[]);case"pkcs11":return;case"emv":return new i.Options(!1,[]);default:return}},e}();t.CardUtil=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=r(339),a=r(331),o=r(512),s=r(516),u="/admin/activate",c="/admin/certificate",l="/admin/containers",f=function(){function e(e,t){this.url=e,this.connection=t}return e.errorHandler=function(t){return t&&401===t.status&&a.includes(e.JWT_ERROR_CODES,t.code)?o.InitUtil.initializeLibrary(s.ClientService.getClient()):n.Promise.reject(t)},e.prototype.activate=function(e,t){return this.post(this.url,u,e,t)},e.prototype.getPubKey=function(e){return this.get(this.url,c,e)},e.prototype.setPubKey=function(e,t){return this.put(this.url,c,{certificate:e},t)},e.prototype.updateContainerConfig=function(e,t){return this.post(this.url,l,e,t)},e.prototype.get=function(t,r,a){var o=this;return new n.Promise(function(n,s){o.connection.get(t,r,void 0).then(function(e){n(i.ResponseHandler.response(e,a))},function(s){e.errorHandler(s).then(function(){o.connection.get(t,r,void 0).then(function(e){n(i.ResponseHandler.response(e,a))},function(e){n(i.ResponseHandler.error(e,a))})},function(e){n(i.ResponseHandler.error(e,a))})})})},e.prototype.post=function(t,r,a,o){var s=this;return new n.Promise(function(n,u){s.connection.post(t,r,a,void 0).then(function(e){n(i.ResponseHandler.response(e,o))},function(u){e.errorHandler(u).then(function(){s.connection.post(t,r,a,void 0).then(function(e){n(i.ResponseHandler.response(e,o))},function(e){n(i.ResponseHandler.error(e,o))})},function(e){n(i.ResponseHandler.error(e,o))})})})},e.prototype.put=function(t,r,a,o){var s=this;return new n.Promise(function(n,u){s.connection.put(t,r,a,void 0).then(function(e){n(i.ResponseHandler.response(e,o))},function(u){e.errorHandler(u).then(function(){s.connection.put(t,r,a,void 0).then(function(e){n(i.ResponseHandler.response(e,o))},function(e){n(i.ResponseHandler.error(e,o))})},function(e){n(i.ResponseHandler.error(e,o))})})})},e}();f.JWT_ERROR_CODES=["200","201","202","203","204","205"],t.AdminService=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=r(331),a=r(513),o=r(514),s=r(517),u=r(518),c=r(381),l=function(){function e(){}return e.initializeLibrary=function(t){return new n.Promise(function(r,i){var a=new n.Promise(function(r,i){var a=t.config();t.core().info().then(function(c){a.citrix=c.data.citrix,a.tokenCompatible=e.checkTokenCompatible(c.data.version),a.v2Compatible=e.coreV2Compatible(c.data.version);var l=c.data.activated,f=c.data.managed,h=c.data.version,m=c.data.uid,d=t.core().infoBrowserSync(),p=new u.DSPlatformInfo(l,d.data,h);if(f)a.apiKey&&a.dsUrlBase&&a.syncManaged?o.SyncUtil.syncDevice(t.ds(),a,p,m).then(function(){r()},function(){r()}):r();else{var v=void 0;v=l?n.Promise.resolve():s.ActivationUtil.unManagedInitialization(t.admin(),t.ds(),a,p,m),v.then(function(){t.updateAuthConnection(a),r(o.SyncUtil.unManagedSynchronization(t.admin(),t.ds(),a,p,m))},function(e){i(e)})}},function(){t.GCLInstalled=!1,r()})});a.then(function(){t.admin().getPubKey().then(function(e){c.PubKeyService.setPubKey(e.data.device),r()})},function(e){i(e)})})},e.coreV2Compatible=function(e){var t=i.split(e,"-")[0];return a.satisfies(t,">=2.0.0")},e.checkTokenCompatible=function(e){var t=i.split(e,"-")[0];return a.satisfies(t,">=1.4.0")},e}();t.InitUtil=l},function(e,t,r){(function(r){function n(e,t){if(e instanceof o)return e;if("string"!=typeof e)return null;if(e.length>Y)return null;var r=t?X[pe]:X[he];if(!r.test(e))return null;try{return new o(e,t)}catch(e){return null}}function i(e,t){var r=n(e,t);return r?r.version:null}function a(e,t){var r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}function o(e,t){if(e instanceof o){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>Y)throw new TypeError("version is longer than "+Y+" characters");if(!(this instanceof o))return new o(e,t);$("SemVer",e,t),this.loose=t;var r=e.trim().match(t?X[pe]:X[he]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Z||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Z||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Z||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<Z)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}function s(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new o(e,r).inc(t,n).version}catch(e){return null}}function u(e,t){if(S(e,t))return null;var r=n(e),i=n(t);if(r.prerelease.length||i.prerelease.length){for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==i[a])return"pre"+a;return"prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==i[a])return a}function c(e,t){var r=He.test(e),n=He.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function l(e,t){return c(t,e)}function f(e,t){return new o(e,t).major}function h(e,t){return new o(e,t).minor}function m(e,t){return new o(e,t).patch}function d(e,t,r){return new o(e,r).compare(new o(t,r))}function p(e,t){return d(e,t,!0)}function v(e,t,r){return d(t,e,r)}function g(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})}function y(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})}function b(e,t,r){return d(e,t,r)>0}function w(e,t,r){return d(e,t,r)<0}function S(e,t,r){return 0===d(e,t,r)}function k(e,t,r){return 0!==d(e,t,r)}function P(e,t,r){return d(e,t,r)>=0}function A(e,t,r){return d(e,t,r)<=0}function C(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=S(e,r,n);break;case"!=":i=k(e,r,n);break;case">":i=b(e,r,n);break;case">=":i=P(e,r,n);break;case"<":i=w(e,r,n);break;case"<=":i=A(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function _(e,t){if(e instanceof _){if(e.loose===t)return e;e=e.value}return this instanceof _?($("comparator",e,t),this.loose=t,this.parse(e),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,void $("comp",this)):new _(e,t)}function O(e,t){if(e instanceof O)return e.loose===t?e:new O(e.raw,t);if(e instanceof _)return new O(e.value,t);if(!(this instanceof O))return new O(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function E(e,t){return new O(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ");
})}function I(e,t){return $("comp",e),e=j(e,t),$("caret",e),e=x(e,t),$("tildes",e),e=V(e,t),$("xrange",e),e=D(e,t),$("stars",e),e}function B(e){return!e||"x"===e.toLowerCase()||"*"===e}function x(e,t){return e.trim().split(/\s+/).map(function(e){return N(e,t)}).join(" ")}function N(e,t){var r=t?X[Oe]:X[_e];return e.replace(r,function(t,r,n,i,a){$("tilde",e,t,r,n,i,a);var o;return B(r)?o="":B(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":B(i)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":a?($("replaceTilde pr",a),"-"!==a.charAt(0)&&(a="-"+a),o=">="+r+"."+n+"."+i+a+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",$("tilde return",o),o})}function j(e,t){return e.trim().split(/\s+/).map(function(e){return R(e,t)}).join(" ")}function R(e,t){$("caret",e,t);var r=t?X[Ne]:X[xe];return e.replace(r,function(t,r,n,i,a){$("caret",e,t,r,n,i,a);var o;return B(r)?o="":B(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":B(i)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":a?($("replaceCaret pr",a),"-"!==a.charAt(0)&&(a="-"+a),o="0"===r?"0"===n?">="+r+"."+n+"."+i+a+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+a+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+a+" <"+(+r+1)+".0.0"):($("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),$("caret return",o),o})}function V(e,t){return $("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return T(e,t)}).join(" ")}function T(e,t){e=e.trim();var r=t?X[ke]:X[Se];return e.replace(r,function(t,r,n,i,a,o){$("xRange",e,t,r,n,i,a,o);var s=B(n),u=s||B(i),c=u||B(a),l=c;return"="===r&&l&&(r=""),s?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(i=0),c&&(a=0),">"===r?(r=">=",u?(n=+n+1,i=0,a=0):c&&(i=+i+1,a=0)):"<="===r&&(r="<",u?n=+n+1:i=+i+1),t=r+n+"."+i+"."+a):u?t=">="+n+".0.0 <"+(+n+1)+".0.0":c&&(t=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0"),$("xRange return",t),t})}function D(e,t){return $("replaceStars",e,t),e.trim().replace(X[Ke],"")}function U(e,t,r,n,i,a,o,s,u,c,l,f,h){return t=B(r)?"":B(n)?">="+r+".0.0":B(i)?">="+r+"."+n+".0":">="+t,s=B(u)?"":B(c)?"<"+(+u+1)+".0.0":B(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+s,(t+" "+s).trim()}function K(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(var r=0;r<e.length;r++)if($(e[r].semver),e[r].semver!==Le&&e[r].semver.prerelease.length>0){var n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}function M(e,t,r){try{t=new O(t,r)}catch(e){return!1}return t.test(e)}function H(e,t,r){var n=null,i=null;try{var a=new O(t,r)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(n&&i.compare(e)!==-1||(n=e,i=new o(n,r)))}),n}function L(e,t,r){var n=null,i=null;try{var a=new O(t,r)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(n&&1!==i.compare(e)||(n=e,i=new o(n,r)))}),n}function q(e,t){try{return new O(e,t).range||"*"}catch(e){return null}}function F(e,t,r){return W(e,t,"<",r)}function J(e,t,r){return W(e,t,">",r)}function W(e,t,r,n){e=new o(e,n),t=new O(t,n);var i,a,s,u,c;switch(r){case">":i=b,a=A,s=w,u=">",c=">=";break;case"<":i=w,a=P,s=b,u="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(M(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var f=t.set[l],h=null,m=null;if(f.forEach(function(e){e.semver===Le&&(e=new _(">=0.0.0")),h=h||e,m=m||e,i(e.semver,h.semver,n)?h=e:s(e.semver,m.semver,n)&&(m=e)}),h.operator===u||h.operator===c)return!1;if((!m.operator||m.operator===u)&&a(e,m.semver))return!1;if(m.operator===c&&s(e,m.semver))return!1}return!0}function G(e,t){var r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}function z(e,t,r){return e=new O(e,r),t=new O(t,r),e.intersects(t)}t=e.exports=o;var $;$="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER")}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var Y=256,Z=Number.MAX_SAFE_INTEGER||9007199254740991,X=t.re=[],Q=t.src=[],ee=0,te=ee++;Q[te]="0|[1-9]\\d*";var re=ee++;Q[re]="[0-9]+";var ne=ee++;Q[ne]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ie=ee++;Q[ie]="("+Q[te]+")\\.("+Q[te]+")\\.("+Q[te]+")";var ae=ee++;Q[ae]="("+Q[re]+")\\.("+Q[re]+")\\.("+Q[re]+")";var oe=ee++;Q[oe]="(?:"+Q[te]+"|"+Q[ne]+")";var se=ee++;Q[se]="(?:"+Q[re]+"|"+Q[ne]+")";var ue=ee++;Q[ue]="(?:-("+Q[oe]+"(?:\\."+Q[oe]+")*))";var ce=ee++;Q[ce]="(?:-?("+Q[se]+"(?:\\."+Q[se]+")*))";var le=ee++;Q[le]="[0-9A-Za-z-]+";var fe=ee++;Q[fe]="(?:\\+("+Q[le]+"(?:\\."+Q[le]+")*))";var he=ee++,me="v?"+Q[ie]+Q[ue]+"?"+Q[fe]+"?";Q[he]="^"+me+"$";var de="[v=\\s]*"+Q[ae]+Q[ce]+"?"+Q[fe]+"?",pe=ee++;Q[pe]="^"+de+"$";var ve=ee++;Q[ve]="((?:<|>)?=?)";var ge=ee++;Q[ge]=Q[re]+"|x|X|\\*";var ye=ee++;Q[ye]=Q[te]+"|x|X|\\*";var be=ee++;Q[be]="[v=\\s]*("+Q[ye]+")(?:\\.("+Q[ye]+")(?:\\.("+Q[ye]+")(?:"+Q[ue]+")?"+Q[fe]+"?)?)?";var we=ee++;Q[we]="[v=\\s]*("+Q[ge]+")(?:\\.("+Q[ge]+")(?:\\.("+Q[ge]+")(?:"+Q[ce]+")?"+Q[fe]+"?)?)?";var Se=ee++;Q[Se]="^"+Q[ve]+"\\s*"+Q[be]+"$";var ke=ee++;Q[ke]="^"+Q[ve]+"\\s*"+Q[we]+"$";var Pe=ee++;Q[Pe]="(?:~>?)";var Ae=ee++;Q[Ae]="(\\s*)"+Q[Pe]+"\\s+",X[Ae]=new RegExp(Q[Ae],"g");var Ce="$1~",_e=ee++;Q[_e]="^"+Q[Pe]+Q[be]+"$";var Oe=ee++;Q[Oe]="^"+Q[Pe]+Q[we]+"$";var Ee=ee++;Q[Ee]="(?:\\^)";var Ie=ee++;Q[Ie]="(\\s*)"+Q[Ee]+"\\s+",X[Ie]=new RegExp(Q[Ie],"g");var Be="$1^",xe=ee++;Q[xe]="^"+Q[Ee]+Q[be]+"$";var Ne=ee++;Q[Ne]="^"+Q[Ee]+Q[we]+"$";var je=ee++;Q[je]="^"+Q[ve]+"\\s*("+de+")$|^$";var Re=ee++;Q[Re]="^"+Q[ve]+"\\s*("+me+")$|^$";var Ve=ee++;Q[Ve]="(\\s*)"+Q[ve]+"\\s*("+de+"|"+Q[be]+")",X[Ve]=new RegExp(Q[Ve],"g");var Te="$1$2$3",De=ee++;Q[De]="^\\s*("+Q[be]+")\\s+-\\s+("+Q[be]+")\\s*$";var Ue=ee++;Q[Ue]="^\\s*("+Q[we]+")\\s+-\\s+("+Q[we]+")\\s*$";var Ke=ee++;Q[Ke]="(<|>)?=?\\s*\\*";for(var Me=0;Me<ee;Me++)$(Me,Q[Me]),X[Me]||(X[Me]=new RegExp(Q[Me]));t.parse=n,t.valid=i,t.clean=a,t.SemVer=o,o.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},o.prototype.toString=function(){return this.version},o.prototype.compare=function(e){return $("SemVer.compare",this.version,this.loose,e),e instanceof o||(e=new o(e,this.loose)),this.compareMain(e)||this.comparePre(e)},o.prototype.compareMain=function(e){return e instanceof o||(e=new o(e,this.loose)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)},o.prototype.comparePre=function(e){if(e instanceof o||(e=new o(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if($("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return c(r,n)}while(++t)},o.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=s,t.diff=u,t.compareIdentifiers=c;var He=/^[0-9]+$/;t.rcompareIdentifiers=l,t.major=f,t.minor=h,t.patch=m,t.compare=d,t.compareLoose=p,t.rcompare=v,t.sort=g,t.rsort=y,t.gt=b,t.lt=w,t.eq=S,t.neq=k,t.gte=P,t.lte=A,t.cmp=C,t.Comparator=_;var Le={};_.prototype.parse=function(e){var t=this.loose?X[je]:X[Re],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new o(r[2],this.loose):this.semver=Le},_.prototype.toString=function(){return this.value},_.prototype.test=function(e){return $("Comparator.test",e,this.loose),this.semver===Le||("string"==typeof e&&(e=new o(e,this.loose)),C(e,this.operator,this.semver,this.loose))},_.prototype.intersects=function(e,t){if(!(e instanceof _))throw new TypeError("a Comparator is required");var r;if(""===this.operator)return r=new O(e.value,t),M(this.value,r,t);if(""===e.operator)return r=new O(this.value,t),M(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=C(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=C(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||a&&o||s||u},t.Range=O,O.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},O.prototype.toString=function(){return this.range},O.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),$("range",e,t);var r=t?X[Ue]:X[De];e=e.replace(r,U),$("hyphen replace",e),e=e.replace(X[Ve],Te),$("comparator trim",e,X[Ve]),e=e.replace(X[Ae],Ce),e=e.replace(X[Ie],Be),e=e.split(/\s+/).join(" ");var n=t?X[je]:X[Re],i=e.split(" ").map(function(e){return I(e,t)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(e){return!!e.match(n)})),i=i.map(function(e){return new _(e,t)})},O.prototype.intersects=function(e,t){if(!(e instanceof O))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=E,O.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new o(e,this.loose));for(var t=0;t<this.set.length;t++)if(K(this.set[t],e))return!0;return!1},t.satisfies=M,t.maxSatisfying=H,t.minSatisfying=L,t.validRange=q,t.ltr=F,t.gtr=J,t.outside=W,t.prerelease=G,t.intersects=z}).call(t,r(336))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=r(515),a=function(){function e(){}return e.unManagedSynchronization=function(t,r,a,o,s){return new n.Promise(function(n,u){t.getPubKey().then(function(u){return r.synchronizationRequest(u.data.device,o,a.dsUrlBase).then(function(u){return t.updateContainerConfig(u.data).then(function(t){return i.DataContainerUtil.setupDataContainers([{id:"atr",name:"ATR",version:"0.0.0.1",type:"data"},{id:"btr",name:"BTR",version:"0.0.0.1",type:"data"}]),e.syncDevice(r,a,o,s).then(function(){o.activated=!0,n()})})})}).catch(function(e){u(e)})})},e.syncDevice=function(e,t,r,n){return e.sync(r,n).then(function(e){return t.jwt=e.token,e})},e}();t.SyncUtil=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(516),i=function(){function e(){}return e.setupDataContainers=function(e){var t=n.ClientService.getClient();e.forEach(function(e){"data"===e.type&&(e.path="/"+e.id,t[e.id]=t.pf().createDataContainer(e.path))})},e}();t.DataContainerUtil=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getClient=function(){return e.client},e.setClient=function(t){e.client=t},e}();t.ClientService=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(335),i=function(){function e(){}return e.unManagedInitialization=function(t,r,i,a,o){return new n.Promise(function(i,s){e.preRegister(t).then(function(e){return n.Promise.resolve({ds:r,uuid:o,pubKey:e.data.device,mergedInfo:a})}).then(e.register).then(function(e){return n.Promise.resolve({admin:t,activationResponse:e})}).then(e.postRegister).then(function(){i()}).catch(function(e){s(e)})})},e.preRegister=function(e){return new n.Promise(function(t,r){e.getPubKey().then(function(e){t(e)}).catch(function(e){r(e)})})},e.register=function(e){return new n.Promise(function(t,r){e.ds.activationRequest(e.pubKey,e.mergedInfo).then(function(e){t(e.data)},function(e){r(e)})})},e.postRegister=function(e){return e.admin.activate(e.activationResponse)},e}();t.ActivationUtil=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(491),a=function(){function e(e,t,r,n,i,a,o,s,u,c,l,f,h,m,d){this.configFile=e,this.build=t,this.version=r,this.environemnt=n,this.storageAppName=i,this.storageServiceAccount=a,this.storageCertPath=o,this.storageBucket=s,this.storageDownloadPrefix=u,this.fileOsx=c,this.fileWin32=l,this.fileWin64=f,this.fileDefaultVersion=h,this.securityEnabled=m,this.securityPrivateKeyAvailable=d}return e}();t.DSInfoResponse=a;var o=function(){function e(e,t){this.url=e,this.success=t}return e}();t.DownloadLinkResponse=o;var s=function(){function e(e){this.token=e}return e}();t.JWTResponse=s;var u=function(){function e(e,t){this.pubkey=e,this.success=t}return e}();t.DSPubKeyResponse=u;var c=function(){function e(e,t,r,n){this.activated=e,this.coreVersion=t,this.managed=r,this.uuid=n}return e}();t.DeviceResponse=c;var l=function(e){function t(t,r,n){var i=e.call(this,r.browser,r.manufacturer,r.os,r.ua)||this;return i.activated=t,i.bi=r,i.core_version=n,i}return n(t,e),t}(i.BrowserInfo);t.DSPlatformInfo=l}]);
//# sourceMappingURL=GCLLib.min.js.map