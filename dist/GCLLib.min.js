var GCLLib=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(1),e.exports=r(329)},function(e,t,r){(function(e){"use strict";function t(e,t,r){e[t]||Object[n](e,t,{writable:!0,configurable:!0,value:r})}if(r(2),r(325),r(326),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var n="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,r){r(3),r(52),r(53),r(54),r(55),r(57),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(68),r(70),r(72),r(74),r(76),r(79),r(80),r(81),r(85),r(87),r(89),r(92),r(93),r(94),r(95),r(97),r(98),r(99),r(100),r(101),r(102),r(103),r(105),r(106),r(107),r(109),r(110),r(111),r(113),r(115),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(125),r(126),r(127),r(132),r(133),r(137),r(138),r(139),r(140),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(158),r(159),r(161),r(162),r(168),r(169),r(171),r(172),r(173),r(177),r(178),r(179),r(180),r(181),r(183),r(184),r(185),r(186),r(189),r(191),r(192),r(193),r(195),r(197),r(199),r(200),r(201),r(203),r(204),r(205),r(206),r(216),r(220),r(221),r(223),r(224),r(228),r(229),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(251),r(252),r(253),r(254),r(255),r(257),r(258),r(259),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(270),r(271),r(273),r(274),r(275),r(276),r(279),r(280),r(282),r(283),r(284),r(285),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(323),r(324),e.exports=r(9)},function(e,t,r){"use strict";var n=r(4),a=r(5),i=r(6),o=r(8),u=r(18),s=r(22).KEY,c=r(7),l=r(23),f=r(24),h=r(19),m=r(25),d=r(26),v=r(27),p=r(29),g=r(42),y=r(45),b=r(12),w=r(32),k=r(16),S=r(17),P=r(46),A=r(49),C=r(51),_=r(11),I=r(30),O=C.f,E=_.f,B=A.f,x=n.Symbol,N=n.JSON,j=N&&N.stringify,V="prototype",R=m("_hidden"),T=m("toPrimitive"),D={}.propertyIsEnumerable,U=l("symbol-registry"),M=l("symbols"),H=l("op-symbols"),L=Object[V],K="function"==typeof x,q=n.QObject,F=!q||!q[V]||!q[V].findChild,J=i&&c(function(){return 7!=P(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=O(L,t);n&&delete L[t],E(e,t,r),n&&e!==L&&E(L,t,n)}:E,W=function(e){var t=M[e]=P(x[V]);return t._k=e,t},G=K&&"symbol"==typeof x.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof x},z=function(e,t,r){return e===L&&z(H,t,r),b(e),t=k(t,!0),b(r),a(M,t)?(r.enumerable?(a(e,R)&&e[R][t]&&(e[R][t]=!1),r=P(r,{enumerable:S(0,!1)})):(a(e,R)||E(e,R,S(1,{})),e[R][t]=!0),J(e,t,r)):E(e,t,r)},$=function(e,t){b(e);for(var r,n=g(t=w(t)),a=0,i=n.length;i>a;)z(e,r=n[a++],t[r]);return e},X=function(e,t){return void 0===t?P(e):$(P(e),t)},Y=function(e){var t=D.call(this,e=k(e,!0));return!(this===L&&a(M,e)&&!a(H,e))&&(!(t||!a(this,e)||!a(M,e)||a(this,R)&&this[R][e])||t)},Q=function(e,t){if(e=w(e),t=k(t,!0),e!==L||!a(M,t)||a(H,t)){var r=O(e,t);return!r||!a(M,t)||a(e,R)&&e[R][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=B(w(e)),n=[],i=0;r.length>i;)a(M,t=r[i++])||t==R||t==s||n.push(t);return n},ee=function(e){for(var t,r=e===L,n=B(r?H:w(e)),i=[],o=0;n.length>o;)!a(M,t=n[o++])||r&&!a(L,t)||i.push(M[t]);return i};K||(x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===L&&t.call(H,r),a(this,R)&&a(this[R],e)&&(this[R][e]=!1),J(this,e,S(1,r))};return i&&F&&J(L,e,{configurable:!0,set:t}),W(e)},u(x[V],"toString",function(){return this._k}),C.f=Q,_.f=z,r(50).f=A.f=Z,r(44).f=Y,r(43).f=ee,i&&!r(28)&&u(L,"propertyIsEnumerable",Y,!0),d.f=function(e){return W(m(e))}),o(o.G+o.W+o.F*!K,{Symbol:x});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)m(te[re++]);for(var ne=I(m.store),ae=0;ne.length>ae;)v(ne[ae++]);o(o.S+o.F*!K,"Symbol",{for:function(e){return a(U,e+="")?U[e]:U[e]=x(e)},keyFor:function(e){if(G(e))return p(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){F=!0},useSimple:function(){F=!1}}),o(o.S+o.F*!K,"Object",{create:X,defineProperty:z,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),N&&o(o.S+o.F*(!K||c(function(){var e=x();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!G(e)){for(var t,r,n=[e],a=1;arguments.length>a;)n.push(arguments[a++]);return t=n[1],"function"==typeof t&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!G(t))return t}),n[1]=t,j.apply(N,n)}}}),x[V][T]||r(10)(x[V],T,x[V].valueOf),f(x,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){e.exports=!r(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(4),a=r(9),i=r(10),o=r(18),u=r(20),s="prototype",c=function(e,t,r){var l,f,h,m,d=e&c.F,v=e&c.G,p=e&c.S,g=e&c.P,y=e&c.B,b=v?n:p?n[t]||(n[t]={}):(n[t]||{})[s],w=v?a:a[t]||(a[t]={}),k=w[s]||(w[s]={});v&&(r=t);for(l in r)f=!d&&b&&void 0!==b[l],h=(f?b:r)[l],m=y&&f?u(h,n):g&&"function"==typeof h?u(Function.call,h):h,b&&o(b,l,h,e&c.U),w[l]!=h&&i(w,l,m),g&&k[l]!=h&&(k[l]=h)};n.core=a,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var r=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(11),a=r(17);e.exports=r(6)?function(e,t,r){return n.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(12),a=r(14),i=r(16),o=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),a)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(13);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(6)&&!r(7)(function(){return 7!=Object.defineProperty(r(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(13),a=r(4).document,i=n(a)&&n(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e))return e;var r,a;if(t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;if("function"==typeof(r=e.valueOf)&&!n(a=r.call(e)))return a;if(!t&&"function"==typeof(r=e.toString)&&!n(a=r.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(4),a=r(10),i=r(5),o=r(19)("src"),u="toString",s=Function[u],c=(""+s).split(u);r(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,u){var s="function"==typeof r;s&&(i(r,"name")||a(r,"name",t)),e[t]!==r&&(s&&(i(r,o)||a(r,o,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:u?e[t]?e[t]=r:a(e,t,r):(delete e[t],a(e,t,r)))})(Function.prototype,u,function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(21);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(19)("meta"),a=r(13),i=r(5),o=r(11).f,u=0,s=Object.isExtensible||function(){return!0},c=!r(7)(function(){return s(Object.preventExtensions({}))}),l=function(e){o(e,n,{value:{i:"O"+ ++u,w:{}}})},f=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!s(e))return"F";if(!t)return"E";l(e)}return e[n].i},h=function(e,t){if(!i(e,n)){if(!s(e))return!0;if(!t)return!1;l(e)}return e[n].w},m=function(e){return c&&d.NEED&&s(e)&&!i(e,n)&&l(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:h,onFreeze:m}},function(e,t,r){var n=r(4),a="__core-js_shared__",i=n[a]||(n[a]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){var n=r(11).f,a=r(5),i=r(25)("toStringTag");e.exports=function(e,t,r){e&&!a(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n=r(23)("wks"),a=r(19),i=r(4).Symbol,o="function"==typeof i,u=e.exports=function(e){return n[e]||(n[e]=o&&i[e]||(o?i:a)("Symbol."+e))};u.store=n},function(e,t,r){t.f=r(25)},function(e,t,r){var n=r(4),a=r(9),i=r(28),o=r(26),u=r(11).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:o.f(e)})}},function(e,t){e.exports=!1},function(e,t,r){var n=r(30),a=r(32);e.exports=function(e,t){for(var r,i=a(e),o=n(i),u=o.length,s=0;u>s;)if(i[r=o[s++]]===t)return r}},function(e,t,r){var n=r(31),a=r(41);e.exports=Object.keys||function(e){return n(e,a)}},function(e,t,r){var n=r(5),a=r(32),i=r(36)(!1),o=r(40)("IE_PROTO");e.exports=function(e,t){var r,u=a(e),s=0,c=[];for(r in u)r!=o&&n(u,r)&&c.push(r);for(;t.length>s;)n(u,r=t[s++])&&(~i(c,r)||c.push(r));return c}},function(e,t,r){var n=r(33),a=r(35);e.exports=function(e){return n(a(e))}},function(e,t,r){var n=r(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(32),a=r(37),i=r(39);e.exports=function(e){return function(t,r,o){var u,s=n(t),c=a(s.length),l=i(o,c);if(e&&r!=r){for(;c>l;)if(u=s[l++],u!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(38),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(38),a=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?a(e+t,0):i(e,t)}},function(e,t,r){var n=r(23)("keys"),a=r(19);e.exports=function(e){return n[e]||(n[e]=a(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(30),a=r(43),i=r(44);e.exports=function(e){var t=n(e),r=a.f;if(r)for(var o,u=r(e),s=i.f,c=0;u.length>c;)s.call(e,o=u[c++])&&t.push(o);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(34);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(12),a=r(47),i=r(41),o=r(40)("IE_PROTO"),u=function(){},s="prototype",c=function(){var e,t=r(15)("iframe"),n=i.length,a="<",o=">";for(t.style.display="none",r(48).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(a+"script"+o+"document.F=Object"+a+"/script"+o),e.close(),c=e.F;n--;)delete c[s][i[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(u[s]=n(e),r=new u,u[s]=null,r[o]=e):r=c(),void 0===t?r:a(r,t)}},function(e,t,r){var n=r(11),a=r(12),i=r(30);e.exports=r(6)?Object.defineProperties:function(e,t){a(e);for(var r,o=i(t),u=o.length,s=0;u>s;)n.f(e,r=o[s++],t[r]);return e}},function(e,t,r){var n=r(4).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(32),a=r(50).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return a(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?u(e):a(n(e))}},function(e,t,r){var n=r(31),a=r(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},function(e,t,r){var n=r(44),a=r(17),i=r(32),o=r(16),u=r(5),s=r(14),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=i(e),t=o(t,!0),s)try{return c(e,t)}catch(e){}if(u(e,t))return a(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(8);n(n.S,"Object",{create:r(46)})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(6),"Object",{defineProperty:r(11).f})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(6),"Object",{defineProperties:r(47)})},function(e,t,r){var n=r(32),a=r(51).f;r(56)("getOwnPropertyDescriptor",function(){return function(e,t){return a(n(e),t)}})},function(e,t,r){var n=r(8),a=r(9),i=r(7);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",o)}},function(e,t,r){var n=r(58),a=r(59);r(56)("getPrototypeOf",function(){return function(e){return a(n(e))}})},function(e,t,r){var n=r(35);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(5),a=r(58),i=r(40)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(58),a=r(30);r(56)("keys",function(){return function(e){return a(n(e))}})},function(e,t,r){r(56)("getOwnPropertyNames",function(){return r(49).f})},function(e,t,r){var n=r(13),a=r(22).onFreeze;r(56)("freeze",function(e){return function(t){return e&&n(t)?e(a(t)):t}})},function(e,t,r){var n=r(13),a=r(22).onFreeze;r(56)("seal",function(e){return function(t){return e&&n(t)?e(a(t)):t}})},function(e,t,r){var n=r(13),a=r(22).onFreeze;r(56)("preventExtensions",function(e){return function(t){return e&&n(t)?e(a(t)):t}})},function(e,t,r){var n=r(13);r(56)("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(13);r(56)("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(13);r(56)("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},function(e,t,r){var n=r(8);n(n.S+n.F,"Object",{assign:r(69)})},function(e,t,r){"use strict";var n=r(30),a=r(43),i=r(44),o=r(58),u=r(33),s=Object.assign;e.exports=!s||r(7)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=s({},e)[r]||Object.keys(s({},t)).join("")!=n})?function(e,t){for(var r=o(e),s=arguments.length,c=1,l=a.f,f=i.f;s>c;)for(var h,m=u(arguments[c++]),d=l?n(m).concat(l(m)):n(m),v=d.length,p=0;v>p;)f.call(m,h=d[p++])&&(r[h]=m[h]);return r}:s},function(e,t,r){var n=r(8);n(n.S,"Object",{is:r(71)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,r){var n=r(8);n(n.S,"Object",{setPrototypeOf:r(73).set})},function(e,t,r){var n=r(13),a=r(12),i=function(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(20)(Function.call,r(51).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){"use strict";var n=r(75),a={};a[r(25)("toStringTag")]="z",a+""!="[object z]"&&r(18)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){var n=r(34),a=r(25)("toStringTag"),i="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),a))?r:i?n(t):"Object"==(u=n(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,r){var n=r(8);n(n.P,"Function",{bind:r(77)})},function(e,t,r){"use strict";var n=r(21),a=r(13),i=r(78),o=[].slice,u={},s=function(e,t,r){if(!(t in u)){for(var n=[],a=0;a<t;a++)n[a]="a["+a+"]";u[t]=Function("F,a","return new F("+n.join(",")+")")}return u[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),u=function(){var n=r.concat(o.call(arguments));return this instanceof u?s(t,n.length,n):i(t,n,e)};return a(t.prototype)&&(u.prototype=t.prototype),u}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(11).f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||r(6)&&n(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(13),a=r(59),i=r(25)("hasInstance"),o=Function.prototype;i in o||r(11).f(o,i,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=a(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(8),a=r(82);n(n.G+n.F*(parseInt!=a),{parseInt:a})},function(e,t,r){var n=r(4).parseInt,a=r(83).trim,i=r(84),o=/^[-+]?0[xX]/;e.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(e,t){var r=a(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},function(e,t,r){var n=r(8),a=r(35),i=r(7),o=r(84),u="["+o+"]",s="​",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(e,t,r){var a={},u=i(function(){return!!o[e]()||s[e]()!=s}),c=a[e]=u?t(h):o[e];r&&(a[r]=c),n(n.P+n.F*u,"String",a)},h=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(8),a=r(86);n(n.G+n.F*(parseFloat!=a),{parseFloat:a})},function(e,t,r){var n=r(4).parseFloat,a=r(83).trim;e.exports=1/n(r(84)+"-0")!==-(1/0)?function(e){var t=a(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){"use strict";var n=r(4),a=r(5),i=r(34),o=r(88),u=r(16),s=r(7),c=r(50).f,l=r(51).f,f=r(11).f,h=r(83).trim,m="Number",d=n[m],v=d,p=d.prototype,g=i(r(46)(p))==m,y="trim"in String.prototype,b=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():h(t,3);var r,n,a,i=t.charCodeAt(0);if(43===i||45===i){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+t}for(var o,s=t.slice(2),c=0,l=s.length;c<l;c++)if(o=s.charCodeAt(c),o<48||o>a)return NaN;return parseInt(s,n)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof d&&(g?s(function(){p.valueOf.call(r)}):i(r)!=m)?o(new v(b(t)),r,d):b(t)};for(var w,k=r(6)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;k.length>S;S++)a(v,w=k[S])&&!a(d,w)&&f(d,w,l(v,w));d.prototype=p,p.constructor=d,r(18)(n,m,d)}},function(e,t,r){var n=r(13),a=r(73).set;e.exports=function(e,t,r){var i,o=t.constructor;return o!==r&&"function"==typeof o&&(i=o.prototype)!==r.prototype&&n(i)&&a&&a(e,i),e}},function(e,t,r){"use strict";var n=r(8),a=r(38),i=r(90),o=r(91),u=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",h=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*c[r],c[r]=n%1e7,n=s(n/1e7)},m=function(e){for(var t=6,r=0;--t>=0;)r+=c[t],c[t]=s(r/e),r=r%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var r=String(c[e]);t=""===t?r:t+o.call(f,7-r.length)+r}return t},v=function(e,t,r){return 0===t?r:t%2===1?v(e,t-1,r*e):v(e*e,t/2,r)},p=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};n(n.P+n.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(7)(function(){u.call({})})),"Number",{toFixed:function(e){var t,r,n,u,s=i(this,l),c=a(e),g="",y=f;if(c<0||c>20)throw RangeError(l);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(g="-",s=-s),s>1e-21)if(t=p(s*v(2,69,1))-69,r=t<0?s*v(2,-t,1):s/v(2,t,1),r*=4503599627370496,t=52-t,t>0){for(h(0,r),n=c;n>=7;)h(1e7,0),n-=7;for(h(v(10,n,1),0),n=t-1;n>=23;)m(1<<23),n-=23;m(1<<n),h(1,1),m(2),y=d()}else h(0,r),h(1<<-t,0),y=d()+o.call(f,c);return c>0?(u=y.length,y=g+(u<=c?"0."+o.call(f,c-u)+y:y.slice(0,u-c)+"."+y.slice(u-c))):y=g+y,y}})},function(e,t,r){var n=r(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){"use strict";var n=r(38),a=r(35);e.exports=function(e){var t=String(a(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},function(e,t,r){"use strict";var n=r(8),a=r(7),i=r(90),o=1..toPrecision;n(n.P+n.F*(a(function(){return"1"!==o.call(1,void 0)})||!a(function(){o.call({})})),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,r){var n=r(8);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(8),a=r(4).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&a(e)}})},function(e,t,r){var n=r(8);n(n.S,"Number",{isInteger:r(96)})},function(e,t,r){var n=r(13),a=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&a(e)===e}},function(e,t,r){var n=r(8);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(8),a=r(96),i=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return a(e)&&i(e)<=9007199254740991}})},function(e,t,r){var n=r(8);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(8);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(8),a=r(86);n(n.S+n.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},function(e,t,r){var n=r(8),a=r(82);n(n.S+n.F*(Number.parseInt!=a),"Number",{parseInt:a})},function(e,t,r){var n=r(8),a=r(104),i=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:a(e-1+i(e-1)*i(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var a=r(8),i=Math.asinh;a(a.S+a.F*!(i&&1/i(0)>0),"Math",{asinh:n})},function(e,t,r){var n=r(8),a=Math.atanh;n(n.S+n.F*!(a&&1/a(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(8),a=r(108);n(n.S,"Math",{cbrt:function(e){return a(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(8);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(8),a=Math.exp;n(n.S,"Math",{cosh:function(e){return(a(e=+e)+a(-e))/2}})},function(e,t,r){var n=r(8),a=r(112);n(n.S+n.F*(a!=Math.expm1),"Math",{expm1:a})},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(8);n(n.S,"Math",{fround:r(114)})},function(e,t,r){var n=r(108),a=Math.pow,i=a(2,-52),o=a(2,-23),u=a(2,127)*(2-o),s=a(2,-126),c=function(e){return e+1/i-1/i};e.exports=Math.fround||function(e){var t,r,a=Math.abs(e),l=n(e);return a<s?l*c(a/s/o)*s*o:(t=(1+o/i)*a,r=t-(t-a),r>u||r!=r?l*(1/0):l*r)}},function(e,t,r){var n=r(8),a=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,u=arguments.length,s=0;o<u;)r=a(arguments[o++]),s<r?(n=s/r,i=i*n*n+1,s=r):r>0?(n=r/s,i+=n*n):i+=r;return s===1/0?1/0:s*Math.sqrt(i)}})},function(e,t,r){var n=r(8),a=Math.imul;n(n.S+n.F*r(7)(function(){return a(4294967295,5)!=-5||2!=a.length}),"Math",{imul:function(e,t){var r=65535,n=+e,a=+t,i=r&n,o=r&a;return 0|i*o+((r&n>>>16)*o+i*(r&a>>>16)<<16>>>0)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(8);n(n.S,"Math",{log1p:r(104)})},function(e,t,r){var n=r(8);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(8);n(n.S,"Math",{sign:r(108)})},function(e,t,r){var n=r(8),a=r(112),i=Math.exp;n(n.S+n.F*r(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(a(e)-a(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(8),a=r(112),i=Math.exp;n(n.S,"Math",{tanh:function(e){var t=a(e=+e),r=a(-e);return t==1/0?1:r==1/0?-1:(t-r)/(i(e)+i(-e))}})},function(e,t,r){var n=r(8);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(8),a=r(39),i=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?i(t):i(((t-=65536)>>10)+55296,t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(8),a=r(32),i=r(37);n(n.S,"String",{raw:function(e){for(var t=a(e.raw),r=i(t.length),n=arguments.length,o=[],u=0;r>u;)o.push(String(t[u++])),u<n&&o.push(String(arguments[u]));return o.join("")}})},function(e,t,r){"use strict";r(83)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){"use strict";var n=r(128)(!0);r(129)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(38),a=r(35);e.exports=function(e){return function(t,r){var i,o,u=String(a(t)),s=n(r),c=u.length;return s<0||s>=c?e?"":void 0:(i=u.charCodeAt(s),i<55296||i>56319||s+1===c||(o=u.charCodeAt(s+1))<56320||o>57343?e?u.charAt(s):i:e?u.slice(s,s+2):(i-55296<<10)+(o-56320)+65536)}}},function(e,t,r){"use strict";var n=r(28),a=r(8),i=r(18),o=r(10),u=r(5),s=r(130),c=r(131),l=r(24),f=r(59),h=r(25)("iterator"),m=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",p="values",g=function(){return this};e.exports=function(e,t,r,y,b,w,k){c(r,t,y);var S,P,A,C=function(e){if(!m&&e in E)return E[e];switch(e){case v:return function(){return new r(this,e)};case p:return function(){return new r(this,e)}}return function(){return new r(this,e)}},_=t+" Iterator",I=b==p,O=!1,E=e.prototype,B=E[h]||E[d]||b&&E[b],x=B||C(b),N=b?I?C("entries"):x:void 0,j="Array"==t?E.entries||B:B;if(j&&(A=f(j.call(new e)),A!==Object.prototype&&A.next&&(l(A,_,!0),n||u(A,h)||o(A,h,g))),I&&B&&B.name!==p&&(O=!0,x=function(){return B.call(this)}),n&&!k||!m&&!O&&E[h]||o(E,h,x),s[t]=x,s[_]=g,b)if(S={values:I?x:C(p),keys:w?x:C(v),entries:N},k)for(P in S)P in E||i(E,P,S[P]);else a(a.P+a.F*(m||O),t,S);return S}},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(46),a=r(17),i=r(24),o={};r(10)(o,r(25)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:a(1,r)}),i(e,t+" Iterator")}},function(e,t,r){"use strict";var n=r(8),a=r(128)(!1);n(n.P,"String",{codePointAt:function(e){return a(this,e)}})},function(e,t,r){"use strict";var n=r(8),a=r(37),i=r(134),o="endsWith",u=""[o];n(n.P+n.F*r(136)(o),"String",{endsWith:function(e){var t=i(this,e,o),r=arguments.length>1?arguments[1]:void 0,n=a(t.length),s=void 0===r?n:Math.min(a(r),n),c=String(e);return u?u.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,r){var n=r(135),a=r(35);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(a(e))}},function(e,t,r){var n=r(13),a=r(34),i=r(25)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},function(e,t,r){var n=r(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){"use strict";var n=r(8),a=r(134),i="includes";n(n.P+n.F*r(136)(i),"String",{includes:function(e){return!!~a(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(8);n(n.P,"String",{repeat:r(91)})},function(e,t,r){"use strict";var n=r(8),a=r(37),i=r(134),o="startsWith",u=""[o];n(n.P+n.F*r(136)(o),"String",{startsWith:function(e){var t=i(this,e,o),r=a(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return u?u.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(141)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,r){var n=r(8),a=r(7),i=r(35),o=/"/g,u=function(e,t,r,n){var a=String(i(e)),u="<"+t;return""!==r&&(u+=" "+r+'="'+String(n).replace(o,"&quot;")+'"'),u+">"+a+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(u),n(n.P+n.F*a(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},function(e,t,r){"use strict";r(141)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,r){"use strict";r(141)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,r){"use strict";r(141)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,r){"use strict";r(141)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,r){"use strict";r(141)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,r){"use strict";r(141)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,r){"use strict";r(141)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,r){"use strict";r(141)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,r){"use strict";r(141)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,r){"use strict";r(141)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,r){"use strict";r(141)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,r){"use strict";r(141)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,r){var n=r(8);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(8),a=r(58),i=r(16);n(n.P+n.F*r(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=a(this),r=i(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(8),a=r(157);n(n.P+n.F*(Date.prototype.toISOString!==a),"Date",{toISOString:a})},function(e,t,r){"use strict";var n=r(7),a=Date.prototype.getTime,i=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!n(function(){
i.call(new Date(NaN))})?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(r>99?r:"0"+o(r))+"Z"}:i},function(e,t,r){var n=Date.prototype,a="Invalid Date",i="toString",o=n[i],u=n.getTime;new Date(NaN)+""!=a&&r(18)(n,i,function(){var e=u.call(this);return e===e?o.call(this):a})},function(e,t,r){var n=r(25)("toPrimitive"),a=Date.prototype;n in a||r(10)(a,n,r(160))},function(e,t,r){"use strict";var n=r(12),a=r(16),i="number";e.exports=function(e){if("string"!==e&&e!==i&&"default"!==e)throw TypeError("Incorrect hint");return a(n(this),e!=i)}},function(e,t,r){var n=r(8);n(n.S,"Array",{isArray:r(45)})},function(e,t,r){"use strict";var n=r(20),a=r(8),i=r(58),o=r(163),u=r(164),s=r(37),c=r(165),l=r(166);a(a.S+a.F*!r(167)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,f,h=i(e),m="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,p=void 0!==v,g=0,y=l(h);if(p&&(v=n(v,d>2?arguments[2]:void 0,2)),void 0==y||m==Array&&u(y))for(t=s(h.length),r=new m(t);t>g;g++)c(r,g,p?v(h[g],g):h[g]);else for(f=y.call(h),r=new m;!(a=f.next()).done;g++)c(r,g,p?o(f,v,[a.value,g],!0):a.value);return r.length=g,r}})},function(e,t,r){var n=r(12);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(130),a=r(25)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[a]===e)}},function(e,t,r){"use strict";var n=r(11),a=r(17);e.exports=function(e,t,r){t in e?n.f(e,t,a(0,r)):e[t]=r}},function(e,t,r){var n=r(75),a=r(25)("iterator"),i=r(130);e.exports=r(9).getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||i[n(e)]}},function(e,t,r){var n=r(25)("iterator"),a=!1;try{var i=[7][n]();i.return=function(){a=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var i=[7],o=i[n]();o.next=function(){return{done:r=!0}},i[n]=function(){return o},e(i)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(8),a=r(165);n(n.S+n.F*r(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)a(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(8),a=r(32),i=[].join;n(n.P+n.F*(r(33)!=Object||!r(170)(i)),"Array",{join:function(e){return i.call(a(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){"use strict";var n=r(8),a=r(48),i=r(34),o=r(39),u=r(37),s=[].slice;n(n.P+n.F*r(7)(function(){a&&s.call(a)}),"Array",{slice:function(e,t){var r=u(this.length),n=i(this);if(t=void 0===t?r:t,"Array"==n)return s.call(this,e,t);for(var a=o(e,r),c=o(t,r),l=u(c-a),f=Array(l),h=0;h<l;h++)f[h]="String"==n?this.charAt(a+h):this[a+h];return f}})},function(e,t,r){"use strict";var n=r(8),a=r(21),i=r(58),o=r(7),u=[].sort,s=[1,2,3];n(n.P+n.F*(o(function(){s.sort(void 0)})||!o(function(){s.sort(null)})||!r(170)(u)),"Array",{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),a(e))}})},function(e,t,r){"use strict";var n=r(8),a=r(174)(0),i=r(170)([].forEach,!0);n(n.P+n.F*!i,"Array",{forEach:function(e){return a(this,e,arguments[1])}})},function(e,t,r){var n=r(20),a=r(33),i=r(58),o=r(37),u=r(175);e.exports=function(e,t){var r=1==e,s=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,m=t||u;return function(t,u,d){for(var v,p,g=i(t),y=a(g),b=n(u,d,3),w=o(y.length),k=0,S=r?m(t,w):s?m(t,0):void 0;w>k;k++)if((h||k in y)&&(v=y[k],p=b(v,k,g),e))if(r)S[k]=p;else if(p)switch(e){case 3:return!0;case 5:return v;case 6:return k;case 2:S.push(v)}else if(l)return!1;return f?-1:c||l?l:S}}},function(e,t,r){var n=r(176);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(13),a=r(45),i=r(25)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),n(t)&&(t=t[i],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(8),a=r(174)(1);n(n.P+n.F*!r(170)([].map,!0),"Array",{map:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),a=r(174)(2);n(n.P+n.F*!r(170)([].filter,!0),"Array",{filter:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),a=r(174)(3);n(n.P+n.F*!r(170)([].some,!0),"Array",{some:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),a=r(174)(4);n(n.P+n.F*!r(170)([].every,!0),"Array",{every:function(e){return a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),a=r(182);n(n.P+n.F*!r(170)([].reduce,!0),"Array",{reduce:function(e){return a(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){var n=r(21),a=r(58),i=r(33),o=r(37);e.exports=function(e,t,r,u,s){n(t);var c=a(e),l=i(c),f=o(c.length),h=s?f-1:0,m=s?-1:1;if(r<2)for(;;){if(h in l){u=l[h],h+=m;break}if(h+=m,s?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:f>h;h+=m)h in l&&(u=t(u,l[h],h,c));return u}},function(e,t,r){"use strict";var n=r(8),a=r(182);n(n.P+n.F*!r(170)([].reduceRight,!0),"Array",{reduceRight:function(e){return a(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(8),a=r(36)(!1),i=[].indexOf,o=!!i&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!r(170)(i)),"Array",{indexOf:function(e){return o?i.apply(this,arguments)||0:a(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),a=r(32),i=r(38),o=r(37),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(s||!r(170)(u)),"Array",{lastIndexOf:function(e){if(s)return u.apply(this,arguments)||0;var t=a(this),r=o(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,i(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(8);n(n.P,"Array",{copyWithin:r(187)}),r(188)("copyWithin")},function(e,t,r){"use strict";var n=r(58),a=r(39),i=r(37);e.exports=[].copyWithin||function(e,t){var r=n(this),o=i(r.length),u=a(e,o),s=a(t,o),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?o:a(c,o))-s,o-u),f=1;for(s<u&&u<s+l&&(f=-1,s+=l-1,u+=l-1);l-- >0;)s in r?r[u]=r[s]:delete r[u],u+=f,s+=f;return r}},function(e,t,r){var n=r(25)("unscopables"),a=Array.prototype;void 0==a[n]&&r(10)(a,n,{}),e.exports=function(e){a[n][e]=!0}},function(e,t,r){var n=r(8);n(n.P,"Array",{fill:r(190)}),r(188)("fill")},function(e,t,r){"use strict";var n=r(58),a=r(39),i=r(37);e.exports=function(e){for(var t=n(this),r=i(t.length),o=arguments.length,u=a(o>1?arguments[1]:void 0,r),s=o>2?arguments[2]:void 0,c=void 0===s?r:a(s,r);c>u;)t[u++]=e;return t}},function(e,t,r){"use strict";var n=r(8),a=r(174)(5),i="find",o=!0;i in[]&&Array(1)[i](function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(188)(i)},function(e,t,r){"use strict";var n=r(8),a=r(174)(6),i="findIndex",o=!0;i in[]&&Array(1)[i](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(188)(i)},function(e,t,r){r(194)("Array")},function(e,t,r){"use strict";var n=r(4),a=r(11),i=r(6),o=r(25)("species");e.exports=function(e){var t=n[e];i&&t&&!t[o]&&a.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(188),a=r(196),i=r(130),o=r(32);e.exports=r(129)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,r):"values"==t?a(0,e[r]):a(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(4),a=r(88),i=r(11).f,o=r(50).f,u=r(135),s=r(198),c=n.RegExp,l=c,f=c.prototype,h=/a/g,m=/a/g,d=new c(h)!==h;if(r(6)&&(!d||r(7)(function(){return m[r(25)("match")]=!1,c(h)!=h||c(m)==m||"/a/i"!=c(h,"i")}))){c=function(e,t){var r=this instanceof c,n=u(e),i=void 0===t;return!r&&n&&e.constructor===c&&i?e:a(d?new l(n&&!i?e.source:e,t):l((n=e instanceof c)?e.source:e,n&&i?s.call(e):t),r?this:f,c)};for(var v=(function(e){e in c||i(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),p=o(l),g=0;p.length>g;)v(p[g++]);f.constructor=c,c.prototype=f,r(18)(n,"RegExp",c)}r(194)("RegExp")},function(e,t,r){"use strict";var n=r(12);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";r(200);var n=r(12),a=r(198),i=r(6),o="toString",u=/./[o],s=function(e){r(18)(RegExp.prototype,o,e,!0)};r(7)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?a.call(e):void 0)}):u.name!=o&&s(function(){return u.call(this)})},function(e,t,r){r(6)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(198)})},function(e,t,r){r(202)("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){"use strict";var n=r(10),a=r(18),i=r(7),o=r(35),u=r(25);e.exports=function(e,t,r){var s=u(e),c=r(o,s,""[e]),l=c[0],f=c[1];i(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(a(String.prototype,e,l),n(RegExp.prototype,s,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,r){r(202)("replace",2,function(e,t,r){return[function(n,a){"use strict";var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i,a):r.call(String(i),n,a)},r]})},function(e,t,r){r(202)("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(202)("split",2,function(e,t,n){"use strict";var a=r(135),i=n,o=[].push,u="split",s="length",c="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[s]||2!="ab"[u](/(?:ab)*/)[s]||4!="."[u](/(.?)(.?)/)[s]||"."[u](/()()/)[s]>1||""[u](/.?/)[s]){var l=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!a(e))return i.call(r,e,t);var n,u,f,h,m,d=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,g=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,v+"g");for(l||(n=new RegExp("^"+y.source+"$(?!\\s)",v));(u=y.exec(r))&&(f=u.index+u[0][s],!(f>p&&(d.push(r.slice(p,u.index)),!l&&u[s]>1&&u[0].replace(n,function(){for(m=1;m<arguments[s]-2;m++)void 0===arguments[m]&&(u[m]=void 0)}),u[s]>1&&u.index<r[s]&&o.apply(d,u.slice(1)),h=u[0][s],p=f,d[s]>=g)));)y[c]===u.index&&y[c]++;return p===r[s]?!h&&y.test("")||d.push(""):d.push(r.slice(p)),d[s]>g?d.slice(0,g):d}}else"0"[u](void 0,0)[s]&&(n=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(r,a){var i=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,i,a):n.call(String(i),r,a)},n]})},function(e,t,r){"use strict";var n,a,i,o,u=r(28),s=r(4),c=r(20),l=r(75),f=r(8),h=r(13),m=r(21),d=r(207),v=r(208),p=r(209),g=r(210).set,y=r(211)(),b=r(212),w=r(213),k=r(214),S="Promise",P=s.TypeError,A=s.process,C=s[S],_="process"==l(A),I=function(){},O=a=b.f,E=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[r(25)("species")]=function(e){e(I,I)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t}catch(e){}}(),B=u?function(e,t){return e===t||e===C&&t===o}:function(e,t){return e===t},x=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,a=1==e._s,i=0,o=function(t){var r,i,o=a?t.ok:t.fail,u=t.resolve,s=t.reject,c=t.domain;try{o?(a||(2==e._h&&R(e),e._h=1),o===!0?r=n:(c&&c.enter(),r=o(n),c&&c.exit()),r===t.promise?s(P("Promise-chain cycle")):(i=x(r))?i.call(r,u,s):u(r)):s(n)}catch(e){s(e)}};r.length>i;)o(r[i++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){g.call(s,function(){var t,r,n,a=e._v,i=V(e);if(i&&(t=w(function(){_?A.emit("unhandledRejection",a,e):(r=s.onunhandledrejection)?r({promise:e,reason:a}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",a)}),e._h=_||V(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},V=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!V(t.promise))return!1;return!0},R=function(e){g.call(s,function(){var t;_?A.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw P("Promise can't be resolved itself");(t=x(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,c(D,n,1),c(T,n,1))}catch(e){T.call(n,e)}}):(r._v=e,r._s=1,N(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};E||(C=function(e){d(this,C,S,"_h"),m(e),n.call(this);try{e(c(D,this,1),c(T,this,1))}catch(e){T.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(215)(C.prototype,{then:function(e,t){var r=O(p(this,C));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=_?A.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&N(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(D,e,1),this.reject=c(T,e,1)},b.f=O=function(e){return B(C,e)?new i(e):a(e)}),f(f.G+f.W+f.F*!E,{Promise:C}),r(24)(C,S),r(194)(S),o=r(9)[S],f(f.S+f.F*!E,S,{reject:function(e){var t=O(this),r=t.reject;return r(e),t.promise}}),f(f.S+f.F*(u||!E),S,{resolve:function(e){return e instanceof C&&B(e.constructor,this)?e:k(this,e)}}),f(f.S+f.F*!(E&&r(167)(function(e){C.all(e).catch(I)})),S,{all:function(e){var t=this,r=O(t),n=r.resolve,a=r.reject,i=w(function(){var r=[],i=0,o=1;v(e,!1,function(e){var u=i++,s=!1;r.push(void 0),o++,t.resolve(e).then(function(e){s||(s=!0,r[u]=e,--o||n(r))},a)}),--o||n(r)});return i.e&&a(i.v),r.promise},race:function(e){var t=this,r=O(t),n=r.reject,a=w(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return a.e&&n(a.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(20),a=r(163),i=r(164),o=r(12),u=r(37),s=r(166),c={},l={},t=e.exports=function(e,t,r,f,h){var m,d,v,p,g=h?function(){return e}:s(e),y=n(r,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(m=u(e.length);m>b;b++)if(p=t?y(o(d=e[b])[0],d[1]):y(e[b]),p===c||p===l)return p}else for(v=g.call(e);!(d=v.next()).done;)if(p=a(v,y,d.value,t),p===c||p===l)return p};t.BREAK=c,t.RETURN=l},function(e,t,r){var n=r(12),a=r(21),i=r(25)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[i])?t:a(r)}},function(e,t,r){var n,a,i,o=r(20),u=r(78),s=r(48),c=r(15),l=r(4),f=l.process,h=l.setImmediate,m=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,p=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},w=function(e){b.call(e.data)};h&&m||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++p]=function(){u("function"==typeof e?e:Function(e),t)},n(p),p},m=function(e){delete g[e]},"process"==r(34)(f)?n=function(e){f.nextTick(o(b,e,1))}:v&&v.now?n=function(e){v.now(o(b,e,1))}:d?(a=new d,i=a.port2,a.port1.onmessage=w,n=o(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",w,!1)):n=y in c("script")?function(e){s.appendChild(c("script"))[y]=function(){s.removeChild(this),b.call(e)}}:function(e){setTimeout(o(b,e,1),0)}),e.exports={set:h,clear:m}},function(e,t,r){var n=r(4),a=r(210).set,i=n.MutationObserver||n.WebKitMutationObserver,o=n.process,u=n.Promise,s="process"==r(34)(o);e.exports=function(){var e,t,r,c=function(){var n,a;for(s&&(n=o.domain)&&n.exit();e;){a=e.fn,e=e.next;try{a()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(s)r=function(){o.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}else if(u&&u.resolve){var h=u.resolve();r=function(){h.then(c)}}else r=function(){a.call(n,c)};return function(n){var a={fn:n,next:void 0};t&&(t.next=a),e||(e=a,r()),t=a}}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=a(t),this.reject=a(r)}var a=r(21);e.exports.f=function(e){return new n(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(212);e.exports=function(e,t){var r=n.f(e),a=r.resolve;return a(t),r.promise}},function(e,t,r){var n=r(18);e.exports=function(e,t,r){for(var a in t)n(e,a,t[a],r);return e}},function(e,t,r){"use strict";var n=r(217),a=r(218),i="Map";e.exports=r(219)(i,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(a(this,i),e);return t&&t.v},set:function(e,t){return n.def(a(this,i),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(11).f,a=r(46),i=r(215),o=r(20),u=r(207),s=r(208),c=r(129),l=r(196),f=r(194),h=r(6),m=r(22).fastKey,d=r(218),v=h?"_s":"size",p=function(e,t){var r,n=m(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){u(e,l,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=n&&s(n,r,e[c],e)});return i(l.prototype,{clear:function(){for(var e=d(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=d(this,t),n=p(r,e);if(n){var a=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=a),a&&(a.p=i),r._f==n&&(r._f=a),r._l==n&&(r._l=i),r[v]--}return!!n},forEach:function(e){d(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!p(d(this,t),e)}}),h&&n(l.prototype,"size",{get:function(){return d(this,t)[v]}}),l},def:function(e,t,r){var n,a,i=p(e,t);return i?i.v=r:(e._l=i={i:a=m(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[v]++,"F"!==a&&(e._i[a]=i)),e},getEntry:p,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=d(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";var n=r(4),a=r(8),i=r(18),o=r(215),u=r(22),s=r(208),c=r(207),l=r(13),f=r(7),h=r(167),m=r(24),d=r(88);e.exports=function(e,t,r,v,p,g){var y=n[e],b=y,w=p?"set":"add",k=b&&b.prototype,S={},P=function(e){var t=k[e];i(k,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(g||k.forEach&&!f(function(){(new b).entries().next()}))){var A=new b,C=A[w](g?{}:-0,1)!=A,_=f(function(){A.has(1)}),I=h(function(e){new b(e)}),O=!g&&f(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});I||(b=t(function(t,r){c(t,b,e);var n=d(new y,t,b);return void 0!=r&&s(r,p,n[w],n),n}),b.prototype=k,k.constructor=b),(_||O)&&(P("delete"),P("has"),p&&P("get")),(O||C)&&P(w),g&&k.clear&&delete k.clear}else b=v.getConstructor(t,e,p,w),o(b.prototype,r),u.NEED=!0;return m(b,e),S[e]=b,a(a.G+a.W+a.F*(b!=y),S),g||v.setStrong(b,e,p),b}},function(e,t,r){"use strict";var n=r(217),a=r(218),i="Set";e.exports=r(219)(i,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(a(this,i),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,a=r(174)(0),i=r(18),o=r(22),u=r(69),s=r(222),c=r(13),l=r(7),f=r(218),h="WeakMap",m=o.getWeak,d=Object.isExtensible,v=s.ufstore,p={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=m(e);return t===!0?v(f(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(f(this,h),e,t)}},b=e.exports=r(219)(h,g,y,s,!0,!0);l(function(){return 7!=(new b).set((Object.freeze||Object)(p),7).get(p)})&&(n=s.getConstructor(g,h),u(n.prototype,y),o.NEED=!0,a(["delete","has","get","set"],function(e){var t=b.prototype,r=t[e];i(t,e,function(t,a){if(c(t)&&!d(t)){this._f||(this._f=new n);var i=this._f[e](t,a);return"set"==e?this:i}return r.call(this,t,a)})}))},function(e,t,r){"use strict";var n=r(215),a=r(22).getWeak,i=r(12),o=r(13),u=r(207),s=r(208),c=r(174),l=r(5),f=r(218),h=c(5),m=c(6),d=0,v=function(e){return e._l||(e._l=new p)},p=function(){this.a=[]},g=function(e,t){return h(e.a,function(e){return e[0]===t})};p.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=m(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,i){var c=e(function(e,n){u(e,c,t,"_i"),e._t=t,e._i=d++,e._l=void 0,void 0!=n&&s(n,r,e[i],e)});return n(c.prototype,{delete:function(e){if(!o(e))return!1;var r=a(e);return r===!0?v(f(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=a(e);return r===!0?v(f(this,t)).has(e):r&&l(r,this._i)}}),c},def:function(e,t,r){var n=a(i(t),!0);return n===!0?v(e).set(t,r):n[e._i]=r,e},ufstore:v}},function(e,t,r){"use strict";var n=r(222),a=r(218),i="WeakSet";r(219)(i,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(a(this,i),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(8),a=r(225),i=r(226),o=r(12),u=r(39),s=r(37),c=r(13),l=r(4).ArrayBuffer,f=r(209),h=i.ArrayBuffer,m=i.DataView,d=a.ABV&&l.isView,v=h.prototype.slice,p=a.VIEW,g="ArrayBuffer";n(n.G+n.W+n.F*(l!==h),{ArrayBuffer:h}),n(n.S+n.F*!a.CONSTR,g,{isView:function(e){return d&&d(e)||c(e)&&p in e}}),n(n.P+n.U+n.F*r(7)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(o(this),e);for(var r=o(this).byteLength,n=u(e,r),a=u(void 0===t?r:t,r),i=new(f(this,h))(s(a-n)),c=new m(this),l=new m(i),d=0;n<a;)l.setUint8(d++,c.getUint8(n++));return i}}),r(194)(g)},function(e,t,r){for(var n,a=r(4),i=r(10),o=r(19),u=o("typed_array"),s=o("view"),c=!(!a.ArrayBuffer||!a.DataView),l=c,f=0,h=9,m="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<h;)(n=a[m[f++]])?(i(n.prototype,u,!0),i(n.prototype,s,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:u,VIEW:s}},function(e,t,r){"use strict";function n(e,t,r){var n,a,i,o=Array(r),u=8*r-t-1,s=(1<<u)-1,c=s>>1,l=23===t?L(2,-24)-L(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for(e=H(e),e!=e||e===U?(a=e!=e?1:0,n=s):(n=K(q(e)/F),e*(i=L(2,-n))<1&&(n--,i*=2),e+=n+c>=1?l/i:l*L(2,1-c),e*i>=2&&(n++,i/=2),n+c>=s?(a=0,n=s):n+c>=1?(a=(e*i-1)*L(2,t),n+=c):(a=e*L(2,c-1)*L(2,t),n=0));t>=8;o[f++]=255&a,a/=256,t-=8);for(n=n<<t|a,u+=t;u>0;o[f++]=255&n,n/=256,u-=8);return o[--f]|=128*h,o}function a(e,t,r){var n,a=8*r-t-1,i=(1<<a)-1,o=i>>1,u=a-7,s=r-1,c=e[s--],l=127&c;for(c>>=7;u>0;l=256*l+e[s],s--,u-=8);for(n=l&(1<<-u)-1,l>>=-u,u+=t;u>0;n=256*n+e[s],s--,u-=8);if(0===l)l=1-o;else{if(l===i)return n?NaN:c?-U:U;n+=L(2,t),l-=o}return(c?-1:1)*n*L(2,l-t)}function i(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function o(e){return[255&e]}function u(e){return[255&e,e>>8&255]}function s(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return n(e,52,8)}function l(e){return n(e,23,4)}function f(e,t,r){_(e[x],t,{get:function(){return this[r]}})}function h(e,t,r,n){var a=+r,i=A(a);if(i+t>e[$])throw D(j);var o=e[z]._b,u=i+e[X],s=o.slice(u,u+t);return n?s:s.reverse()}function m(e,t,r,n,a,i){var o=+r,u=A(o);if(u+t>e[$])throw D(j);for(var s=e[z]._b,c=u+e[X],l=n(+a),f=0;f<t;f++)s[c+f]=l[i?f:t-f-1]}var d=r(4),v=r(6),p=r(28),g=r(225),y=r(10),b=r(215),w=r(7),k=r(207),S=r(38),P=r(37),A=r(227),C=r(50).f,_=r(11).f,I=r(190),O=r(24),E="ArrayBuffer",B="DataView",x="prototype",N="Wrong length!",j="Wrong index!",V=d[E],R=d[B],T=d.Math,D=d.RangeError,U=d.Infinity,M=V,H=T.abs,L=T.pow,K=T.floor,q=T.log,F=T.LN2,J="buffer",W="byteLength",G="byteOffset",z=v?"_b":J,$=v?"_l":W,X=v?"_o":G;if(g.ABV){if(!w(function(){V(1)})||!w(function(){new V(-1)})||w(function(){return new V,new V(1.5),new V(NaN),V.name!=E})){V=function(e){return k(this,V),new M(A(e))};for(var Y,Q=V[x]=M[x],Z=C(M),ee=0;Z.length>ee;)(Y=Z[ee++])in V||y(V,Y,M[Y]);p||(Q.constructor=V)}var te=new R(new V(2)),re=R[x].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||b(R[x],{setInt8:function(e,t){re.call(this,e,t<<24>>24)},setUint8:function(e,t){re.call(this,e,t<<24>>24)}},!0)}else V=function(e){k(this,V,E);var t=A(e);this._b=I.call(Array(t),0),this[$]=t},R=function(e,t,r){k(this,R,B),k(e,V,B);var n=e[$],a=S(t);if(a<0||a>n)throw D("Wrong offset!");if(r=void 0===r?n-a:P(r),a+r>n)throw D(N);this[z]=e,this[X]=a,this[$]=r},v&&(f(V,W,"_l"),f(R,J,"_b"),f(R,W,"_l"),f(R,G,"_o")),b(R[x],{getInt8:function(e){return h(this,1,e)[0]<<24>>24},getUint8:function(e){return h(this,1,e)[0]},getInt16:function(e){var t=h(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=h(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return i(h(this,4,e,arguments[1]))},getUint32:function(e){return i(h(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return a(h(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return a(h(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){m(this,1,e,o,t)},setUint8:function(e,t){m(this,1,e,o,t)},setInt16:function(e,t){m(this,2,e,u,t,arguments[2])},setUint16:function(e,t){m(this,2,e,u,t,arguments[2])},setInt32:function(e,t){m(this,4,e,s,t,arguments[2])},setUint32:function(e,t){m(this,4,e,s,t,arguments[2])},setFloat32:function(e,t){m(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){m(this,8,e,c,t,arguments[2])}});O(V,E),O(R,B),y(R[x],g.VIEW,!0),t[E]=V,t[B]=R},function(e,t,r){var n=r(38),a=r(37);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=a(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(8);n(n.G+n.W+n.F*!r(225).ABV,{DataView:r(226).DataView})},function(e,t,r){r(230)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){"use strict";if(r(6)){var n=r(28),a=r(4),i=r(7),o=r(8),u=r(225),s=r(226),c=r(20),l=r(207),f=r(17),h=r(10),m=r(215),d=r(38),v=r(37),p=r(227),g=r(39),y=r(16),b=r(5),w=r(75),k=r(13),S=r(58),P=r(164),A=r(46),C=r(59),_=r(50).f,I=r(166),O=r(19),E=r(25),B=r(174),x=r(36),N=r(209),j=r(195),V=r(130),R=r(167),T=r(194),D=r(190),U=r(187),M=r(11),H=r(51),L=M.f,K=H.f,q=a.RangeError,F=a.TypeError,J=a.Uint8Array,W="ArrayBuffer",G="Shared"+W,z="BYTES_PER_ELEMENT",$="prototype",X=Array[$],Y=s.ArrayBuffer,Q=s.DataView,Z=B(0),ee=B(2),te=B(3),re=B(4),ne=B(5),ae=B(6),ie=x(!0),oe=x(!1),ue=j.values,se=j.keys,ce=j.entries,le=X.lastIndexOf,fe=X.reduce,he=X.reduceRight,me=X.join,de=X.sort,ve=X.slice,pe=X.toString,ge=X.toLocaleString,ye=E("iterator"),be=E("toStringTag"),we=O("typed_constructor"),ke=O("def_constructor"),Se=u.CONSTR,Pe=u.TYPED,Ae=u.VIEW,Ce="Wrong length!",_e=B(1,function(e,t){return xe(N(e,e[ke]),t)}),Ie=i(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Oe=!!J&&!!J[$].set&&i(function(){new J(1).set({})}),Ee=function(e,t){var r=d(e);if(r<0||r%t)throw q("Wrong offset!");return r},Be=function(e){if(k(e)&&Pe in e)return e;throw F(e+" is not a typed array!")},xe=function(e,t){if(!(k(e)&&we in e))throw F("It is not a typed array constructor!");return new e(t)},Ne=function(e,t){return je(N(e,e[ke]),t)},je=function(e,t){for(var r=0,n=t.length,a=xe(e,n);n>r;)a[r]=t[r++];return a},Ve=function(e,t,r){L(e,t,{get:function(){return this._d[r]}})},Re=function(e){var t,r,n,a,i,o,u=S(e),s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,h=I(u);if(void 0!=h&&!P(h)){for(o=h.call(u),n=[],t=0;!(i=o.next()).done;t++)n.push(i.value);u=n}for(f&&s>2&&(l=c(l,arguments[2],2)),t=0,r=v(u.length),a=xe(this,r);r>t;t++)a[t]=f?l(u[t],t):u[t];return a},Te=function(){for(var e=0,t=arguments.length,r=xe(this,t);t>e;)r[e]=arguments[e++];return r},De=!!J&&i(function(){ge.call(new J(1))}),Ue=function(){return ge.apply(De?ve.call(Be(this)):Be(this),arguments)},Me={copyWithin:function(e,t){return U.call(Be(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(Be(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return D.apply(Be(this),arguments)},filter:function(e){return Ne(this,ee(Be(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ne(Be(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ae(Be(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Be(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return oe(Be(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ie(Be(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return me.apply(Be(this),arguments)},lastIndexOf:function(e){return le.apply(Be(this),arguments)},map:function(e){return _e(Be(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Be(this),arguments)},reduceRight:function(e){return he.apply(Be(this),arguments)},reverse:function(){for(var e,t=this,r=Be(t).length,n=Math.floor(r/2),a=0;a<n;)e=t[a],t[a++]=t[--r],t[r]=e;return t},some:function(e){return te(Be(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(Be(this),e)},subarray:function(e,t){var r=Be(this),n=r.length,a=g(e,n);return new(N(r,r[ke]))(r.buffer,r.byteOffset+a*r.BYTES_PER_ELEMENT,v((void 0===t?n:g(t,n))-a))}},He=function(e,t){return Ne(this,ve.call(Be(this),e,t))},Le=function(e){Be(this);var t=Ee(arguments[1],1),r=this.length,n=S(e),a=v(n.length),i=0;if(a+t>r)throw q(Ce);for(;i<a;)this[t+i]=n[i++]},Ke={entries:function(){return ce.call(Be(this))},keys:function(){return se.call(Be(this))},values:function(){return ue.call(Be(this))}},qe=function(e,t){return k(e)&&e[Pe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return qe(e,t=y(t,!0))?f(2,e[t]):K(e,t)},Je=function(e,t,r){return!(qe(e,t=y(t,!0))&&k(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?L(e,t,r):(e[t]=r.value,e)};Se||(H.f=Fe,M.f=Je),o(o.S+o.F*!Se,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Je}),i(function(){pe.call({})})&&(pe=ge=function(){return me.call(this)});var We=m({},Me);m(We,Ke),h(We,ye,Ke.values),m(We,{slice:He,set:Le,constructor:function(){},toString:pe,toLocaleString:Ue}),Ve(We,"buffer","b"),Ve(We,"byteOffset","o"),Ve(We,"byteLength","l"),Ve(We,"length","e"),L(We,be,{get:function(){return this[Pe]}}),e.exports=function(e,t,r,s){s=!!s;var c=e+(s?"Clamped":"")+"Array",f="get"+e,m="set"+e,d=a[c],g=d||{},y=d&&C(d),b=!d||!u.ABV,S={},P=d&&d[$],I=function(e,r){
var n=e._d;return n.v[f](r*t+n.o,Ie)},O=function(e,r,n){var a=e._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),a.v[m](r*t+a.o,n,Ie)},E=function(e,t){L(e,t,{get:function(){return I(this,t)},set:function(e){return O(this,t,e)},enumerable:!0})};b?(d=r(function(e,r,n,a){l(e,d,c,"_d");var i,o,u,s,f=0,m=0;if(k(r)){if(!(r instanceof Y||(s=w(r))==W||s==G))return Pe in r?je(d,r):Re.call(d,r);i=r,m=Ee(n,t);var g=r.byteLength;if(void 0===a){if(g%t)throw q(Ce);if(o=g-m,o<0)throw q(Ce)}else if(o=v(a)*t,o+m>g)throw q(Ce);u=o/t}else u=p(r),o=u*t,i=new Y(o);for(h(e,"_d",{b:i,o:m,l:o,e:u,v:new Q(i)});f<u;)E(e,f++)}),P=d[$]=A(We),h(P,"constructor",d)):i(function(){d(1)})&&i(function(){new d(-1)})&&R(function(e){new d,new d(null),new d(1.5),new d(e)},!0)||(d=r(function(e,r,n,a){l(e,d,c);var i;return k(r)?r instanceof Y||(i=w(r))==W||i==G?void 0!==a?new g(r,Ee(n,t),a):void 0!==n?new g(r,Ee(n,t)):new g(r):Pe in r?je(d,r):Re.call(d,r):new g(p(r))}),Z(y!==Function.prototype?_(g).concat(_(y)):_(g),function(e){e in d||h(d,e,g[e])}),d[$]=P,n||(P.constructor=d));var B=P[ye],x=!!B&&("values"==B.name||void 0==B.name),N=Ke.values;h(d,we,!0),h(P,Pe,c),h(P,Ae,!0),h(P,ke,d),(s?new d(1)[be]==c:be in P)||L(P,be,{get:function(){return c}}),S[c]=d,o(o.G+o.W+o.F*(d!=g),S),o(o.S,c,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*i(function(){g.of.call(d,1)}),c,{from:Re,of:Te}),z in P||h(P,z,t),o(o.P,c,Me),T(c),o(o.P+o.F*Oe,c,{set:Le}),o(o.P+o.F*!x,c,Ke),n||P.toString==pe||(P.toString=pe),o(o.P+o.F*i(function(){new d(1).slice()}),c,{slice:He}),o(o.P+o.F*(i(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!i(function(){P.toLocaleString.call([1,2])})),c,{toLocaleString:Ue}),V[c]=x?B:N,n||x||h(P,ye,N)}}else e.exports=function(){}},function(e,t,r){r(230)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){r(230)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(230)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){var n=r(8),a=r(21),i=r(12),o=(r(4).Reflect||{}).apply,u=Function.apply;n(n.S+n.F*!r(7)(function(){o(function(){})}),"Reflect",{apply:function(e,t,r){var n=a(e),s=i(r);return o?o(n,t,s):u.call(n,t,s)}})},function(e,t,r){var n=r(8),a=r(46),i=r(21),o=r(12),u=r(13),s=r(7),c=r(77),l=(r(4).Reflect||{}).construct,f=s(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),h=!s(function(){l(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(e,t){i(e),o(t);var r=arguments.length<3?e:i(arguments[2]);if(h&&!f)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var s=r.prototype,m=a(u(s)?s:Object.prototype),d=Function.apply.call(e,m,t);return u(d)?d:m}})},function(e,t,r){var n=r(11),a=r(8),i=r(12),o=r(16);a(a.S+a.F*r(7)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){i(e),t=o(t,!0),i(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(8),a=r(51).f,i=r(12);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=a(i(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(8),a=r(12),i=function(e){this._t=a(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(131)(i,"Object",function(){var e,t=this,r=t._k;do if(t._i>=r.length)return{value:void 0,done:!0};while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,r){function n(e,t){var r,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(r=a.f(e,t))?o(r,"value")?r.value:void 0!==r.get?r.get.call(l):void 0:s(u=i(e))?n(u,t,l):void 0}var a=r(51),i=r(59),o=r(5),u=r(8),s=r(13),c=r(12);u(u.S,"Reflect",{get:n})},function(e,t,r){var n=r(51),a=r(8),i=r(12);a(a.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(i(e),t)}})},function(e,t,r){var n=r(8),a=r(59),i=r(12);n(n.S,"Reflect",{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,r){var n=r(8);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(8),a=r(12),i=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return a(e),!i||i(e)}})},function(e,t,r){var n=r(8);n(n.S,"Reflect",{ownKeys:r(250)})},function(e,t,r){var n=r(50),a=r(43),i=r(12),o=r(4).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(i(e)),r=a.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(8),a=r(12),i=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){a(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,r){function n(e,t,r){var s,h,m=arguments.length<4?e:arguments[3],d=i.f(l(e),t);if(!d){if(f(h=o(e)))return n(h,t,r,m);d=c(0)}return u(d,"value")?!(d.writable===!1||!f(m))&&(s=i.f(m,t)||c(0),s.value=r,a.f(m,t,s),!0):void 0!==d.set&&(d.set.call(m,r),!0)}var a=r(11),i=r(51),o=r(59),u=r(5),s=r(8),c=r(17),l=r(12),f=r(13);s(s.S,"Reflect",{set:n})},function(e,t,r){var n=r(8),a=r(73);a&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){a.check(e,t);try{return a.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){"use strict";var n=r(8),a=r(36)(!0);n(n.P,"Array",{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(188)("includes")},function(e,t,r){"use strict";var n=r(8),a=r(256),i=r(58),o=r(37),u=r(21),s=r(175);n(n.P,"Array",{flatMap:function(e){var t,r,n=i(this);return u(e),t=o(n.length),r=s(n,0),a(r,n,n,t,0,1,e,arguments[1]),r}}),r(188)("flatMap")},function(e,t,r){"use strict";function n(e,t,r,c,l,f,h,m){for(var d,v,p=l,g=0,y=!!h&&u(h,m,3);g<c;){if(g in r){if(d=y?y(r[g],g,t):r[g],v=!1,i(d)&&(v=d[s],v=void 0!==v?!!v:a(d)),v&&f>0)p=n(e,t,d,o(d.length),p,f-1)-1;else{if(p>=9007199254740991)throw TypeError();e[p]=d}p++}g++}return p}var a=r(45),i=r(13),o=r(37),u=r(20),s=r(25)("isConcatSpreadable");e.exports=n},function(e,t,r){"use strict";var n=r(8),a=r(256),i=r(58),o=r(37),u=r(38),s=r(175);n(n.P,"Array",{flatten:function(){var e=arguments[0],t=i(this),r=o(t.length),n=s(t,0);return a(n,t,t,r,0,void 0===e?1:u(e)),n}}),r(188)("flatten")},function(e,t,r){"use strict";var n=r(8),a=r(128)(!0);n(n.P,"String",{at:function(e){return a(this,e)}})},function(e,t,r){"use strict";var n=r(8),a=r(260);n(n.P,"String",{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){var n=r(37),a=r(91),i=r(35);e.exports=function(e,t,r,o){var u=String(i(e)),s=u.length,c=void 0===r?" ":String(r),l=n(t);if(l<=s||""==c)return u;var f=l-s,h=a.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),o?h+u:u+h}},function(e,t,r){"use strict";var n=r(8),a=r(260);n(n.P,"String",{padEnd:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(83)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,r){"use strict";r(83)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,r){"use strict";var n=r(8),a=r(35),i=r(37),o=r(135),u=r(198),s=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};r(131)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(a(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in s?String(e.flags):u.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=i(e.lastIndex),new c(n,t)}})},function(e,t,r){r(27)("asyncIterator")},function(e,t,r){r(27)("observable")},function(e,t,r){var n=r(8),a=r(250),i=r(32),o=r(51),u=r(165);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=i(e),s=o.f,c=a(n),l={},f=0;c.length>f;)r=s(n,t=c[f++]),void 0!==r&&u(l,t,r);return l}})},function(e,t,r){var n=r(8),a=r(269)(!1);n(n.S,"Object",{values:function(e){return a(e)}})},function(e,t,r){var n=r(30),a=r(32),i=r(44).f;e.exports=function(e){return function(t){for(var r,o=a(t),u=n(o),s=u.length,c=0,l=[];s>c;)i.call(o,r=u[c++])&&l.push(e?[r,o[r]]:o[r]);return l}}},function(e,t,r){var n=r(8),a=r(269)(!0);n(n.S,"Object",{entries:function(e){return a(e)}})},function(e,t,r){"use strict";var n=r(8),a=r(58),i=r(21),o=r(11);r(6)&&n(n.P+r(272),"Object",{__defineGetter__:function(e,t){o.f(a(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";e.exports=r(28)||!r(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(4)[e]})},function(e,t,r){"use strict";var n=r(8),a=r(58),i=r(21),o=r(11);r(6)&&n(n.P+r(272),"Object",{__defineSetter__:function(e,t){o.f(a(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(8),a=r(58),i=r(16),o=r(59),u=r(51).f;r(6)&&n(n.P+r(272),"Object",{__lookupGetter__:function(e){var t,r=a(this),n=i(e,!0);do if(t=u(r,n))return t.get;while(r=o(r))}})},function(e,t,r){"use strict";var n=r(8),a=r(58),i=r(16),o=r(59),u=r(51).f;r(6)&&n(n.P+r(272),"Object",{__lookupSetter__:function(e){var t,r=a(this),n=i(e,!0);do if(t=u(r,n))return t.set;while(r=o(r))}})},function(e,t,r){var n=r(8);n(n.P+n.R,"Map",{toJSON:r(277)("Map")})},function(e,t,r){var n=r(75),a=r(278);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},function(e,t,r){var n=r(208);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(8);n(n.P+n.R,"Set",{toJSON:r(277)("Set")})},function(e,t,r){r(281)("Map")},function(e,t,r){"use strict";var n=r(8);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(281)("Set")},function(e,t,r){r(281)("WeakMap")},function(e,t,r){r(281)("WeakSet")},function(e,t,r){r(286)("Map")},function(e,t,r){"use strict";var n=r(8),a=r(21),i=r(20),o=r(208);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,u,s=arguments[1];return a(this),t=void 0!==s,t&&a(s),void 0==e?new this:(r=[],t?(n=0,u=i(s,arguments[2],2),o(e,!1,function(e){r.push(u(e,n++))})):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){r(286)("Set")},function(e,t,r){r(286)("WeakMap")},function(e,t,r){r(286)("WeakSet")},function(e,t,r){var n=r(8);n(n.G,{global:r(4)})},function(e,t,r){var n=r(8);n(n.S,"System",{global:r(4)})},function(e,t,r){var n=r(8),a=r(34);n(n.S,"Error",{isError:function(e){return"Error"===a(e)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},function(e,t,r){var n=r(8);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,r){var n=r(8),a=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*a}})},function(e,t,r){var n=r(8),a=r(297),i=r(114);n(n.S,"Math",{fscale:function(e,t,r,n,o){return i(a(e,t,r,n,o))}})},function(e,t){e.exports=Math.scale||function(e,t,r,n,a){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||a!=a?NaN:e===1/0||e===-(1/0)?e:(e-t)*(a-n)/(r-t)+n}},function(e,t,r){var n=r(8);n(n.S,"Math",{iaddh:function(e,t,r,n){var a=e>>>0,i=t>>>0,o=r>>>0;return i+(n>>>0)+((a&o|(a|o)&~(a+o>>>0))>>>31)|0}})},function(e,t,r){var n=r(8);n(n.S,"Math",{isubh:function(e,t,r,n){var a=e>>>0,i=t>>>0,o=r>>>0;return i-(n>>>0)-((~a&o|~(a^o)&a-o>>>0)>>>31)|0}})},function(e,t,r){var n=r(8);n(n.S,"Math",{imulh:function(e,t){var r=65535,n=+e,a=+t,i=n&r,o=a&r,u=n>>16,s=a>>16,c=(u*o>>>0)+(i*o>>>16);return u*s+(c>>16)+((i*s>>>0)+(c&r)>>16)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,r){var n=r(8),a=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*a}})},function(e,t,r){var n=r(8);n(n.S,"Math",{scale:r(297)})},function(e,t,r){var n=r(8);n(n.S,"Math",{umulh:function(e,t){var r=65535,n=+e,a=+t,i=n&r,o=a&r,u=n>>>16,s=a>>>16,c=(u*o>>>0)+(i*o>>>16);return u*s+(c>>>16)+((i*s>>>0)+(c&r)>>>16)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,r){"use strict";var n=r(8),a=r(9),i=r(4),o=r(209),u=r(214);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,a.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then(function(){return r})}:e,r?function(r){return u(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(8),a=r(212),i=r(213);n(n.S,"Promise",{try:function(e){var t=a.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){var n=r(309),a=r(12),i=n.key,o=n.set;n.exp({defineMetadata:function(e,t,r,n){o(e,t,a(r),i(n))}})},function(e,t,r){var n=r(216),a=r(8),i=r(23)("metadata"),o=i.store||(i.store=new(r(221))),u=function(e,t,r){var a=o.get(e);if(!a){if(!r)return;o.set(e,a=new n)}var i=a.get(t);if(!i){if(!r)return;a.set(t,i=new n)}return i},s=function(e,t,r){var n=u(t,r,!1);return void 0!==n&&n.has(e)},c=function(e,t,r){var n=u(t,r,!1);return void 0===n?void 0:n.get(e)},l=function(e,t,r,n){u(r,n,!0).set(e,t)},f=function(e,t){var r=u(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},m=function(e){a(a.S,"Reflect",e)};e.exports={store:o,map:u,has:s,get:c,set:l,keys:f,key:h,exp:m}},function(e,t,r){var n=r(309),a=r(12),i=n.key,o=n.map,u=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:i(arguments[2]),n=o(a(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var s=u.get(t);return s.delete(r),!!s.size||u.delete(t)}})},function(e,t,r){var n=r(309),a=r(12),i=r(59),o=n.has,u=n.get,s=n.key,c=function(e,t,r){var n=o(e,t,r);if(n)return u(e,t,r);var a=i(t);return null!==a?c(e,a,r):void 0};n.exp({getMetadata:function(e,t){return c(e,a(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,r){var n=r(220),a=r(278),i=r(309),o=r(12),u=r(59),s=i.keys,c=i.key,l=function(e,t){var r=s(e,t),i=u(e);if(null===i)return r;var o=l(i,t);return o.length?r.length?a(new n(r.concat(o))):o:r};i.exp({getMetadataKeys:function(e){return l(o(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,r){var n=r(309),a=r(12),i=n.get,o=n.key;n.exp({getOwnMetadata:function(e,t){return i(e,a(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(309),a=r(12),i=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(e){return i(a(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,r){var n=r(309),a=r(12),i=r(59),o=n.has,u=n.key,s=function(e,t,r){var n=o(e,t,r);if(n)return!0;var a=i(t);return null!==a&&s(e,a,r)};n.exp({hasMetadata:function(e,t){return s(e,a(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,r){var n=r(309),a=r(12),i=n.has,o=n.key;n.exp({hasOwnMetadata:function(e,t){return i(e,a(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(309),a=r(12),i=r(21),o=n.key,u=n.set;n.exp({metadata:function(e,t){return function(r,n){u(e,t,(void 0!==n?a:i)(r),o(n))}}})},function(e,t,r){var n=r(8),a=r(211)(),i=r(4).process,o="process"==r(34)(i);n(n.G,{asap:function(e){var t=o&&i.domain;a(t?t.bind(e):e)}})},function(e,t,r){"use strict";var n=r(8),a=r(4),i=r(9),o=r(211)(),u=r(25)("observable"),s=r(21),c=r(12),l=r(207),f=r(215),h=r(10),m=r(208),d=m.RETURN,v=function(e){return null==e?void 0:s(e)},p=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,p(e))},b=function(e,t){c(e),this._c=void 0,this._o=e,e=new w(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:s(r),this._c=r)}catch(t){return void e.error(t)}g(this)&&p(this)};b.prototype=f({},{unsubscribe:function(){y(this)}});var w=function(e){this._s=e};w.prototype=f({},{next:function(e){var t=this._s;if(!g(t)){var r=t._o;try{var n=v(r.next);if(n)return n.call(r,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var r=t._o;t._o=void 0;try{var n=v(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{p(t)}finally{throw e}}return p(t),e},complete:function(e){var t=this._s;if(!g(t)){var r=t._o;t._o=void 0;try{var n=v(r.complete);e=n?n.call(r,e):void 0}catch(e){try{p(t)}finally{throw e}}return p(t),e}}});var k=function(e){l(this,k,"Observable","_f")._f=s(e)};f(k.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(i.Promise||a.Promise)(function(r,n){s(e);var a=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),a.unsubscribe()}},error:n,complete:r})})}}),f(k,{from:function(e){var t="function"==typeof this?this:k,r=v(c(e)[u]);if(r){var n=c(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return o(function(){if(!r){try{if(m(e,!1,function(e){if(t.next(e),r)return d})===d)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:k)(function(e){var t=!1;return o(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),h(k.prototype,u,function(){return this}),n(n.G,{Observable:k}),r(194)("Observable")},function(e,t,r){var n=r(4),a=r(8),i=r(78),o=r(321),u=n.navigator,s=!!u&&/MSIE .\./.test(u.userAgent),c=function(e){return s?function(t,r){return e(i(o,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),r)}:e};a(a.G+a.B+a.F*s,{setTimeout:c(n.setTimeout),setInterval:c(n.setInterval)})},function(e,t,r){"use strict";var n=r(322),a=r(78),i=r(21);e.exports=function(){for(var e=i(this),t=arguments.length,r=Array(t),o=0,u=n._,s=!1;t>o;)(r[o]=arguments[o++])===u&&(s=!0);return function(){var n,i=this,o=arguments.length,c=0,l=0;if(!s&&!o)return a(e,r,i);if(n=r.slice(),s)for(;t>c;c++)n[c]===u&&(n[c]=arguments[l++]);for(;o>l;)n.push(arguments[l++]);return a(e,n,i)}}},function(e,t,r){e.exports=r(4)},function(e,t,r){var n=r(8),a=r(210);n(n.G+n.B,{setImmediate:a.set,clearImmediate:a.clear})},function(e,t,r){for(var n=r(195),a=r(30),i=r(18),o=r(4),u=r(10),s=r(130),c=r(25),l=c("iterator"),f=c("toStringTag"),h=s.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=a(m),v=0;v<d.length;v++){var p,g=d[v],y=m[g],b=o[g],w=b&&b.prototype;if(w&&(w[l]||u(w,l,h),w[f]||u(w,f,g),s[g]=h,y))for(p in n)w[p]||i(w,p,n[p],!0)}},function(e,t){(function(t){!function(t){"use strict";function r(e,t,r,n){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),u=new m(n||[]);return o._invoke=c(e,r,u),o}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function a(){}function i(){}function o(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function r(t,a,i,o){var u=n(e[t],e,a);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,i,o)},function(e){r("throw",e,i,o)}):Promise.resolve(c).then(function(e){s.value=e,i(s)},o)}o(u.arg)}function a(e,t){function n(){return new Promise(function(n,a){r(e,t,n,a)})}return i=i?i.then(n,n):n()}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var i;this._invoke=a}function c(e,t,r){var a=C;return function(i,o){if(a===I)throw new Error("Generator is already running");if(a===O){if("throw"===i)throw o;return v()}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var s=l(u,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===C)throw a=O,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=I;var c=n(e,t,r);if("normal"===c.type){if(a=r.done?O:_,c.arg===E)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=O,r.method="throw",r.arg=c.arg)}}}function l(e,t){var r=e.iterator[t.method];if(r===p){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=p,l(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var a=n(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,E;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=p),t.delegate=null,E):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function d(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=p,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:p,done:!0}}var p,g=Object.prototype,y=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",k=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",P="object"==typeof e,A=t.regeneratorRuntime;if(A)return void(P&&(e.exports=A));A=t.regeneratorRuntime=P?e.exports:{},A.wrap=r;var C="suspendedStart",_="suspendedYield",I="executing",O="completed",E={},B={};B[w]=function(){return this};var x=Object.getPrototypeOf,N=x&&x(x(d([])));N&&N!==g&&y.call(N,w)&&(B=N);var j=o.prototype=a.prototype=Object.create(B);i.prototype=j.constructor=o,o.constructor=i,o[S]=i.displayName="GeneratorFunction",A.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},A.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(j),e},A.awrap=function(e){return{__await:e}},u(s.prototype),s.prototype[k]=function(){return this},A.AsyncIterator=s,A.async=function(e,t,n,a){var i=new s(r(e,t,n,a));return A.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},u(j),j[S]="Generator",j[w]=function(){return this},j.toString=function(){return"[object Generator]"},A.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},A.values=d,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=p)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,n&&(r.method="next",r.arg=p),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=y.call(a,"catchLoc"),u=y.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;h(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=p),E}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},function(e,t,r){r(327),e.exports=r(9).RegExp.escape},function(e,t,r){var n=r(8),a=r(328)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return a(e)}})},function(e,t){e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=r(331),i=r(333);t.GCLConfig=i.GCLConfig;var o=r(334),u=r(341),s=r(375),c=r(376),l=r(337),f=r(377),h=r(505),m=r(340),d=r(368),v=function(){function e(t,r){var n=this;this.core=function(){return n.coreService},this.config=function(){return n.cfg},this.agent=function(){return n.agentClient},this.ds=function(){return n.dsClient},this.ocv=function(){return n.ocvClient},this.beid=function(e){return n.pluginFactory.createEidBE(e)},this.dnie=function(e){return n.pluginFactory.createDNIe(e)},this.luxeid=function(e,t){return n.pluginFactory.createEidLUX(e,t)},this.luxtrust=function(e,t){return n.pluginFactory.createLuxTrust(e)},this.emv=function(e){return n.pluginFactory.createEmv(e)},this.mobib=function(e){return n.pluginFactory.createMobib(e)},this.ocra=function(e){return n.pluginFactory.createOcra(e)},this.aventra=function(e){return n.pluginFactory.createAventraNO(e)},this.oberthur=function(e){return n.pluginFactory.createOberthurNO(e)},this.piv=function(e){return n.pluginFactory.createPIV(e)},this.pteid=function(e){return n.pluginFactory.createEidPT(e)},this.safenet=function(e,t){return n.pluginFactory.createSafeNet(t)},this.readerapi=function(e){return n.pluginFactory.createRemoteLoading(e)},this.belfius=function(e){return n.pluginFactory.createBelfius(e)},this.fileExchange=function(){return n.pluginFactory.createFileExchange()};this.cfg=e.resolveConfig(t),this.connection=new u.LocalConnection(this.cfg),this.authConnection=new u.LocalAuthConnection(this.cfg),this.remoteConnection=new u.RemoteConnection(this.cfg),this.localTestConnection=new u.LocalTestConnection(this.cfg),this.pluginFactory=new f.PluginFactory(this.cfg.gclUrl,this.connection),this.coreService=new o.CoreService(this.cfg.gclUrl,this.authConnection),this.agentClient=new d.AgentClient(this.cfg.gclUrl,this.connection),this.cfg.localTestMode?this.dsClient=new s.DSClient(this.cfg.dsUrl,this.localTestConnection,this.cfg):this.dsClient=new s.DSClient(this.cfg.dsUrl,this.remoteConnection,this.cfg),this.ocvClient=new c.OCVClient(this.cfg.ocvUrl,this.remoteConnection),this.cfg.implicitDownload&&this.implicitDownload(),r||this.initLibrary()}return e.initialize=function(t,r){return new l.Promise(function(n,a){var i=new e(t,!0);i.GCLInstalled=!0,i.initLibrary().then(function(){r&&"function"==typeof r&&r(null,i),n(i)},function(e){r&&"function"==typeof r&&r(e,null),a(e)})})},e.checkTokenCompatible=function(e){var t=n.split(e,"-")[0];return a.satisfies(t,">=1.4.0")},e.resolveConfig=function(e){var t=new i.GCLConfig(e.dsUrlBase,e.apiKey);return t.allowAutoUpdate=e.allowAutoUpdate,t.client_id=e.client_id,t.client_secret=e.client_secret,t.jwt=e.jwt,t.gclUrl=e.gclUrl,t.ocvUrl=e.ocvUrl,t.implicitDownload=e.implicitDownload,t.localTestMode=e.localTestMode,t.forceHardwarePinpad=e.forceHardwarePinpad,t.defaultSessionTimeout=e.defaultSessionTimeout,t.defaultConsentDuration=e.defaultConsentDuration,t.citrix=e.citrix,t.agentPort=e.agentPort,t.syncManaged=e.syncManaged,t},e.prototype.containerFor=function(e,t){return h.GenericService.containerForReader(this,e,t)},e.prototype.download=function(e){var t=this;return this.core().infoBrowser().then(function(r){return t.ds().downloadLink(r.data,e)},function(t){return m.ResponseHandler.error(t,e)})},e.prototype.dumpData=function(e,t,r){return h.GenericService.dumpData(this,e,t,r)},e.prototype.readersCanAuthenticate=function(e){return h.GenericService.authenticateCapable(this,e)},e.prototype.authenticate=function(e,t,r){return h.GenericService.authenticate(this,e,t,r)},e.prototype.readersCanSign=function(e){return h.GenericService.signCapable(this,e)},e.prototype.sign=function(e,t,r){return h.GenericService.sign(this,e,t,r)},e.prototype.readersCanVerifyPin=function(e){return h.GenericService.verifyPinCapable(this,e)},e.prototype.verifyPin=function(e,t,r){return h.GenericService.verifyPin(this,e,t,r)},e.prototype.initOCVContext=function(e){return this.ocvClient.getInfo(e)},e.prototype.initLibrary=function(){var t=this,r=this,a=this.cfg;return new l.Promise(function(i,o){r.core().info().then(function(u){a.citrix=u.data.citrix,a.tokenCompatible=e.checkTokenCompatible(u.data.version);var s=u.data.activated,c=u.data.managed,l=u.data.version,f=u.data.uid,h=r.core().infoBrowserSync(),m=n.merge({managed:c,core_version:l,activated:s},h.data);c?a.apiKey&&a.dsUrlBase&&a.syncManaged?r.syncDevice(r,a,m,f).then(function(){i()},function(){i()}):i():t.core().getPubKey().then(function(){i()},function(e){e&&!e.success&&201===e.code&&r.dsClient.getPubKey().then(function(e){return r.core().setPubKey(e.pubkey).then(function(){return s?r.syncDevice(r,a,m,f).then(function(){i()}):r.registerDevice(r,a,m,f).then(function(){return r.core().activate().then(function(){m.activated=!0,r.syncDevice(r,a,m,f).then(function(){i()})})})})}).catch(function(e){o(e)})})},function(){r.GCLInstalled=!1,i()})})},e.prototype.registerDevice=function(e,t,r,n){return e.dsClient.register(r,n).then(function(r){return t.jwt=r.token,e.authConnection=new u.LocalAuthConnection(e.cfg),e.coreService=new o.CoreService(e.cfg.gclUrl,e.authConnection),r})},e.prototype.syncDevice=function(e,t,r,n){return e.dsClient.sync(r,n).then(function(e){return t.jwt=e.token,e})},e.prototype.implicitDownload=function(){var e=this;this.core().info(function(t){if(t){var r=e.core().infoBrowserSync();e.ds().downloadLink(r.data,function(e,t){window.open(t.url)})}})},e}();t.GCLClient=v},function(e,t){(function(){function r(e,t){return e.set(t[0],t[1]),e}function n(e,t){return e.add(t),e}function a(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function i(e,t,r,n){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(n,o,r(o),e)}return n}function o(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function u(e,t){for(var r=null==e?0:e.length;r--&&t(e[r],r,e)!==!1;);return e}function s(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;
return!0}function c(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}function l(e,t){var r=null==e?0:e.length;return!!r&&k(e,t,0)>-1}function f(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function h(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function m(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function d(e,t,r,n){var a=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++a]);++a<i;)r=t(r,e[a],a,e);return r}function v(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function p(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function g(e){return e.split("")}function y(e){return e.match(Ht)||[]}function b(e,t,r){var n;return r(e,function(e,r,a){if(t(e,r,a))return n=r,!1}),n}function w(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function k(e,t,r){return t===t?z(e,t,r):w(e,P,r)}function S(e,t,r,n){for(var a=r-1,i=e.length;++a<i;)if(n(e[a],t))return a;return-1}function P(e){return e!==e}function A(e,t){var r=null==e?0:e.length;return r?E(e,t)/r:Ve}function C(e){return function(t){return null==t?te:t[e]}}function _(e){return function(t){return null==e?te:e[t]}}function I(e,t,r,n,a){return a(e,function(e,a,i){r=n?(n=!1,e):t(r,e,a,i)}),r}function O(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function E(e,t){for(var r,n=-1,a=e.length;++n<a;){var i=t(e[n]);i!==te&&(r=r===te?i:r+i)}return r}function B(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function x(e,t){return h(t,function(t){return[t,e[t]]})}function N(e){return function(t){return e(t)}}function j(e,t){return h(t,function(t){return e[t]})}function V(e,t){return e.has(t)}function R(e,t){for(var r=-1,n=e.length;++r<n&&k(t,e[r],0)>-1;);return r}function T(e,t){for(var r=e.length;r--&&k(t,e[r],0)>-1;);return r}function D(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}function U(e){return"\\"+Qr[e]}function M(e,t){return null==e?te:e[t]}function H(e){return qr.test(e)}function L(e){return Fr.test(e)}function K(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function q(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function F(e,t){return function(r){return e(t(r))}}function J(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var o=e[r];o!==t&&o!==se||(e[r]=se,i[a++]=r)}return i}function W(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function G(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function z(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}function $(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}function X(e){return H(e)?Q(e):pn(e)}function Y(e){return H(e)?Z(e):g(e)}function Q(e){for(var t=Lr.lastIndex=0;Lr.test(e);)++t;return t}function Z(e){return e.match(Lr)||[]}function ee(e){return e.match(Kr)||[]}var te,re="4.17.4",ne=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ie="Expected a function",oe="__lodash_hash_undefined__",ue=500,se="__lodash_placeholder__",ce=1,le=2,fe=4,he=1,me=2,de=1,ve=2,pe=4,ge=8,ye=16,be=32,we=64,ke=128,Se=256,Pe=512,Ae=30,Ce="...",_e=800,Ie=16,Oe=1,Ee=2,Be=3,xe=1/0,Ne=9007199254740991,je=1.7976931348623157e308,Ve=NaN,Re=4294967295,Te=Re-1,De=Re>>>1,Ue=[["ary",ke],["bind",de],["bindKey",ve],["curry",ge],["curryRight",ye],["flip",Pe],["partial",be],["partialRight",we],["rearg",Se]],Me="[object Arguments]",He="[object Array]",Le="[object AsyncFunction]",Ke="[object Boolean]",qe="[object Date]",Fe="[object DOMException]",Je="[object Error]",We="[object Function]",Ge="[object GeneratorFunction]",ze="[object Map]",$e="[object Number]",Xe="[object Null]",Ye="[object Object]",Qe="[object Promise]",Ze="[object Proxy]",et="[object RegExp]",tt="[object Set]",rt="[object String]",nt="[object Symbol]",at="[object Undefined]",it="[object WeakMap]",ot="[object WeakSet]",ut="[object ArrayBuffer]",st="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",ht="[object Int16Array]",mt="[object Int32Array]",dt="[object Uint8Array]",vt="[object Uint8ClampedArray]",pt="[object Uint16Array]",gt="[object Uint32Array]",yt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kt=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Pt=RegExp(kt.source),At=RegExp(St.source),Ct=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,Bt=/^\./,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Nt.source),Vt=/^\s+|\s+$/g,Rt=/^\s+/,Tt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Lt=/\\(\\)?/g,Kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qt=/\w*$/,Ft=/^[-+]0x[0-9a-f]+$/i,Jt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,zt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xt=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Qt="\\ud800-\\udfff",Zt="\\u0300-\\u036f",er="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",rr=Zt+er+tr,nr="\\u2700-\\u27bf",ar="a-z\\xdf-\\xf6\\xf8-\\xff",ir="\\xac\\xb1\\xd7\\xf7",or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ur="\\u2000-\\u206f",sr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",lr="\\ufe0e\\ufe0f",fr=ir+or+ur+sr,hr="['’]",mr="["+Qt+"]",dr="["+fr+"]",vr="["+rr+"]",pr="\\d+",gr="["+nr+"]",yr="["+ar+"]",br="[^"+Qt+fr+pr+nr+ar+cr+"]",wr="\\ud83c[\\udffb-\\udfff]",kr="(?:"+vr+"|"+wr+")",Sr="[^"+Qt+"]",Pr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ar="[\\ud800-\\udbff][\\udc00-\\udfff]",Cr="["+cr+"]",_r="\\u200d",Ir="(?:"+yr+"|"+br+")",Or="(?:"+Cr+"|"+br+")",Er="(?:"+hr+"(?:d|ll|m|re|s|t|ve))?",Br="(?:"+hr+"(?:D|LL|M|RE|S|T|VE))?",xr=kr+"?",Nr="["+lr+"]?",jr="(?:"+_r+"(?:"+[Sr,Pr,Ar].join("|")+")"+Nr+xr+")*",Vr="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Rr="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Tr=Nr+xr+jr,Dr="(?:"+[gr,Pr,Ar].join("|")+")"+Tr,Ur="(?:"+[Sr+vr+"?",vr,Pr,Ar,mr].join("|")+")",Mr=RegExp(hr,"g"),Hr=RegExp(vr,"g"),Lr=RegExp(wr+"(?="+wr+")|"+Ur+Tr,"g"),Kr=RegExp([Cr+"?"+yr+"+"+Er+"(?="+[dr,Cr,"$"].join("|")+")",Or+"+"+Br+"(?="+[dr,Cr+Ir,"$"].join("|")+")",Cr+"?"+Ir+"+"+Er,Cr+"+"+Br,Rr,Vr,pr,Dr].join("|"),"g"),qr=RegExp("["+_r+Qt+rr+lr+"]"),Fr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wr=-1,Gr={};Gr[ct]=Gr[lt]=Gr[ft]=Gr[ht]=Gr[mt]=Gr[dt]=Gr[vt]=Gr[pt]=Gr[gt]=!0,Gr[Me]=Gr[He]=Gr[ut]=Gr[Ke]=Gr[st]=Gr[qe]=Gr[Je]=Gr[We]=Gr[ze]=Gr[$e]=Gr[Ye]=Gr[et]=Gr[tt]=Gr[rt]=Gr[it]=!1;var zr={};zr[Me]=zr[He]=zr[ut]=zr[st]=zr[Ke]=zr[qe]=zr[ct]=zr[lt]=zr[ft]=zr[ht]=zr[mt]=zr[ze]=zr[$e]=zr[Ye]=zr[et]=zr[tt]=zr[rt]=zr[nt]=zr[dt]=zr[vt]=zr[pt]=zr[gt]=!0,zr[Je]=zr[We]=zr[it]=!1;var $r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Xr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zr=parseFloat,en=parseInt,tn="object"==typeof global&&global&&global.Object===Object&&global,rn="object"==typeof self&&self&&self.Object===Object&&self,nn=tn||rn||Function("return this")(),an="object"==typeof t&&t&&!t.nodeType&&t,on=an&&"object"==typeof e&&e&&!e.nodeType&&e,un=on&&on.exports===an,sn=un&&tn.process,cn=function(){try{return sn&&sn.binding&&sn.binding("util")}catch(e){}}(),ln=cn&&cn.isArrayBuffer,fn=cn&&cn.isDate,hn=cn&&cn.isMap,mn=cn&&cn.isRegExp,dn=cn&&cn.isSet,vn=cn&&cn.isTypedArray,pn=C("length"),gn=_($r),yn=_(Xr),bn=_(Yr),wn=function e(t){function g(e){if(cs(e)&&!kh(e)&&!(e instanceof Q)){if(e instanceof z)return e;if(wl.call(e,"__wrapped__"))return io(e)}return new z(e)}function _(){}function z(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=te}function Q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function Z(){var e=new Q(this.__wrapped__);return e.__actions__=Ha(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ha(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ha(this.__views__),e}function Ht(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Qt(){var e=this.__wrapped__.value(),t=this.__dir__,r=kh(e),n=t<0,a=r?e.length:0,i=Ei(0,a,this.__views__),o=i.start,u=i.end,s=u-o,c=n?u:o-1,l=this.__iteratees__,f=l.length,h=0,m=Xl(s,this.__takeCount__);if(!r||!n&&a==s&&m==s)return ka(e,this.__actions__);var d=[];e:for(;s--&&h<m;){c+=t;for(var v=-1,p=e[c];++v<f;){var g=l[v],y=g.iteratee,b=g.type,w=y(p);if(b==Ee)p=w;else if(!w){if(b==Oe)continue e;break e}}d[h++]=p}return d}function Zt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function er(){this.__data__=uf?uf(null):{},this.size=0}function tr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function rr(e){var t=this.__data__;if(uf){var r=t[e];return r===oe?te:r}return wl.call(t,e)?t[e]:te}function nr(e){var t=this.__data__;return uf?t[e]!==te:wl.call(t,e)}function ar(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=uf&&t===te?oe:t,this}function ir(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function or(){this.__data__=[],this.size=0}function ur(e){var t=this.__data__,r=Nr(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Vl.call(t,r,1),--this.size,!0}function sr(e){var t=this.__data__,r=Nr(t,e);return r<0?te:t[r][1]}function cr(e){return Nr(this.__data__,e)>-1}function lr(e,t){var r=this.__data__,n=Nr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function hr(){this.size=0,this.__data__={hash:new Zt,map:new(rf||ir),string:new Zt}}function mr(e){var t=Ci(this,e).delete(e);return this.size-=t?1:0,t}function dr(e){return Ci(this,e).get(e)}function vr(e){return Ci(this,e).has(e)}function pr(e,t){var r=Ci(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function gr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new fr;++t<r;)this.add(e[t])}function yr(e){return this.__data__.set(e,oe),this}function br(e){return this.__data__.has(e)}function wr(e){var t=this.__data__=new ir(e);this.size=t.size}function kr(){this.__data__=new ir,this.size=0}function Sr(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Pr(e){return this.__data__.get(e)}function Ar(e){return this.__data__.has(e)}function Cr(e,t){var r=this.__data__;if(r instanceof ir){var n=r.__data__;if(!rf||n.length<ne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fr(n)}return r.set(e,t),this.size=r.size,this}function _r(e,t){var r=kh(e),n=!r&&wh(e),a=!r&&!n&&Ph(e),i=!r&&!n&&!a&&Oh(e),o=r||n||a||i,u=o?B(e.length,ml):[],s=u.length;for(var c in e)!t&&!wl.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Di(c,s))||u.push(c);return u}function Ir(e){var t=e.length;return t?e[ra(0,t-1)]:te}function Or(e,t){return to(Ha(e),Ur(t,0,e.length))}function Er(e){return to(Ha(e))}function Br(e,t,r){(r===te||$u(e[t],r))&&(r!==te||t in e)||Tr(e,t,r)}function xr(e,t,r){var n=e[t];wl.call(e,t)&&$u(n,r)&&(r!==te||t in e)||Tr(e,t,r)}function Nr(e,t){for(var r=e.length;r--;)if($u(e[r][0],t))return r;return-1}function jr(e,t,r,n){return bf(e,function(e,a,i){t(n,e,r(e),i)}),n}function Vr(e,t){return e&&La(t,Fs(t),e)}function Rr(e,t){return e&&La(t,Js(t),e)}function Tr(e,t,r){"__proto__"==t&&Ul?Ul(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Dr(e,t){for(var r=-1,n=t.length,a=ol(n),i=null==e;++r<n;)a[r]=i?te:Ls(e,t[r]);return a}function Ur(e,t,r){return e===e&&(r!==te&&(e=e<=r?e:r),t!==te&&(e=e>=t?e:t)),e}function Lr(e,t,r,n,a,i){var u,s=t&ce,c=t&le,l=t&fe;if(r&&(u=a?r(e,n,a,i):r(e)),u!==te)return u;if(!ss(e))return e;var f=kh(e);if(f){if(u=Ni(e),!s)return Ha(e,u)}else{var h=xf(e),m=h==We||h==Ge;if(Ph(e))return Oa(e,s);if(h==Ye||h==Me||m&&!a){if(u=c||m?{}:ji(e),!s)return c?qa(e,Rr(u,e)):Ka(e,Vr(u,e))}else{if(!zr[h])return a?e:{};u=Vi(e,h,Lr,s)}}i||(i=new wr);var d=i.get(e);if(d)return d;i.set(e,u);var v=l?c?ki:wi:c?Js:Fs,p=f?te:v(e);return o(p||e,function(n,a){p&&(a=n,n=e[a]),xr(u,a,Lr(n,t,r,a,e,i))}),u}function Kr(e){var t=Fs(e);return function(r){return qr(r,e,t)}}function qr(e,t,r){var n=r.length;if(null==e)return!n;for(e=fl(e);n--;){var a=r[n],i=t[a],o=e[a];if(o===te&&!(a in e)||!i(o))return!1}return!0}function Fr(e,t,r){if("function"!=typeof e)throw new dl(ie);return Vf(function(){e.apply(te,r)},t)}function $r(e,t,r,n){var a=-1,i=l,o=!0,u=e.length,s=[],c=t.length;if(!u)return s;r&&(t=h(t,N(r))),n?(i=f,o=!1):t.length>=ne&&(i=V,o=!1,t=new gr(t));e:for(;++a<u;){var m=e[a],d=null==r?m:r(m);if(m=n||0!==m?m:0,o&&d===d){for(var v=c;v--;)if(t[v]===d)continue e;s.push(m)}else i(t,d,n)||s.push(m)}return s}function Xr(e,t){var r=!0;return bf(e,function(e,n,a){return r=!!t(e,n,a)}),r}function Yr(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(null!=o&&(u===te?o===o&&!ws(o):r(o,u)))var u=o,s=i}return s}function Qr(e,t,r,n){var a=e.length;for(r=_s(r),r<0&&(r=-r>a?0:a+r),n=n===te||n>a?a:_s(n),n<0&&(n+=a),n=r>n?0:Is(n);r<n;)e[r++]=t;return e}function tn(e,t){var r=[];return bf(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r}function rn(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=Ti),a||(a=[]);++i<o;){var u=e[i];t>0&&r(u)?t>1?rn(u,t-1,r,n,a):m(a,u):n||(a[a.length]=u)}return a}function an(e,t){return e&&kf(e,t,Fs)}function on(e,t){return e&&Sf(e,t,Fs)}function sn(e,t){return c(t,function(t){return is(e[t])})}function cn(e,t){t=_a(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[ro(t[r++])];return r&&r==n?e:te}function pn(e,t,r){var n=t(e);return kh(e)?n:m(n,r(e))}function wn(e){return null==e?e===te?at:Xe:Dl&&Dl in fl(e)?Oi(e):$i(e)}function Sn(e,t){return e>t}function Pn(e,t){return null!=e&&wl.call(e,t)}function An(e,t){return null!=e&&t in fl(e)}function Cn(e,t,r){return e>=Xl(t,r)&&e<$l(t,r)}function _n(e,t,r){for(var n=r?f:l,a=e[0].length,i=e.length,o=i,u=ol(i),s=1/0,c=[];o--;){var m=e[o];o&&t&&(m=h(m,N(t))),s=Xl(m.length,s),u[o]=!r&&(t||a>=120&&m.length>=120)?new gr(o&&m):te}m=e[0];var d=-1,v=u[0];e:for(;++d<a&&c.length<s;){var p=m[d],g=t?t(p):p;if(p=r||0!==p?p:0,!(v?V(v,g):n(c,g,r))){for(o=i;--o;){var y=u[o];if(!(y?V(y,g):n(e[o],g,r)))continue e}v&&v.push(g),c.push(p)}}return c}function In(e,t,r,n){return an(e,function(e,a,i){t(n,r(e),a,i)}),n}function On(e,t,r){t=_a(t,e),e=Yi(e,t);var n=null==e?e:e[ro(Co(t))];return null==n?te:a(n,e,r)}function En(e){return cs(e)&&wn(e)==Me}function Bn(e){return cs(e)&&wn(e)==ut}function xn(e){return cs(e)&&wn(e)==qe}function Nn(e,t,r,n,a){return e===t||(null==e||null==t||!cs(e)&&!cs(t)?e!==e&&t!==t:jn(e,t,r,n,Nn,a))}function jn(e,t,r,n,a,i){var o=kh(e),u=kh(t),s=o?He:xf(e),c=u?He:xf(t);s=s==Me?Ye:s,c=c==Me?Ye:c;var l=s==Ye,f=c==Ye,h=s==c;if(h&&Ph(e)){if(!Ph(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new wr),o||Oh(e)?pi(e,t,r,n,a,i):gi(e,t,s,r,n,a,i);if(!(r&he)){var m=l&&wl.call(e,"__wrapped__"),d=f&&wl.call(t,"__wrapped__");if(m||d){var v=m?e.value():e,p=d?t.value():t;return i||(i=new wr),a(v,p,r,n,i)}}return!!h&&(i||(i=new wr),yi(e,t,r,n,a,i))}function Vn(e){return cs(e)&&xf(e)==ze}function Rn(e,t,r,n){var a=r.length,i=a,o=!n;if(null==e)return!i;for(e=fl(e);a--;){var u=r[a];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<i;){u=r[a];var s=u[0],c=e[s],l=u[1];if(o&&u[2]){if(c===te&&!(s in e))return!1}else{var f=new wr;if(n)var h=n(c,l,s,e,t,f);if(!(h===te?Nn(l,c,he|me,n,f):h))return!1}}return!0}function Tn(e){if(!ss(e)||Ki(e))return!1;var t=is(e)?_l:Wt;return t.test(no(e))}function Dn(e){return cs(e)&&wn(e)==et}function Un(e){return cs(e)&&xf(e)==tt}function Mn(e){return cs(e)&&us(e.length)&&!!Gr[wn(e)]}function Hn(e){return"function"==typeof e?e:null==e?Vc:"object"==typeof e?kh(e)?Wn(e[0],e[1]):Jn(e):Kc(e)}function Ln(e){if(!qi(e))return zl(e);var t=[];for(var r in fl(e))wl.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Kn(e){if(!ss(e))return zi(e);var t=qi(e),r=[];for(var n in e)("constructor"!=n||!t&&wl.call(e,n))&&r.push(n);return r}function qn(e,t){return e<t}function Fn(e,t){var r=-1,n=Xu(e)?ol(e.length):[];return bf(e,function(e,a,i){n[++r]=t(e,a,i)}),n}function Jn(e){var t=_i(e);return 1==t.length&&t[0][2]?Ji(t[0][0],t[0][1]):function(r){return r===e||Rn(r,e,t)}}function Wn(e,t){return Mi(e)&&Fi(t)?Ji(ro(e),t):function(r){var n=Ls(r,e);return n===te&&n===t?qs(r,e):Nn(t,n,he|me)}}function Gn(e,t,r,n,a){e!==t&&kf(t,function(i,o){if(ss(i))a||(a=new wr),zn(e,t,o,r,Gn,n,a);else{var u=n?n(e[o],i,o+"",e,t,a):te;u===te&&(u=i),Br(e,o,u)}},Js)}function zn(e,t,r,n,a,i,o){var u=e[r],s=t[r],c=o.get(s);if(c)return void Br(e,r,c);var l=i?i(u,s,r+"",e,t,o):te,f=l===te;if(f){var h=kh(s),m=!h&&Ph(s),d=!h&&!m&&Oh(s);l=s,h||m||d?kh(u)?l=u:Yu(u)?l=Ha(u):m?(f=!1,l=Oa(s,!0)):d?(f=!1,l=Ra(s,!0)):l=[]:gs(s)||wh(s)?(l=u,wh(u)?l=Es(u):(!ss(u)||n&&is(u))&&(l=ji(s))):f=!1}f&&(o.set(s,l),a(l,s,n,i,o),o.delete(s)),Br(e,r,l)}function $n(e,t){var r=e.length;if(r)return t+=t<0?r:0,Di(t,r)?e[t]:te}function Xn(e,t,r){var n=-1;t=h(t.length?t:[Vc],N(Ai()));var a=Fn(e,function(e,r,a){var i=h(t,function(t){return t(e)});return{criteria:i,index:++n,value:e}});return O(a,function(e,t){return Da(e,t,r)})}function Yn(e,t){return Qn(e,t,function(t,r){return qs(e,r)})}function Qn(e,t,r){for(var n=-1,a=t.length,i={};++n<a;){var o=t[n],u=cn(e,o);r(u,o)&&sa(i,_a(o,e),u)}return i}function Zn(e){return function(t){return cn(t,e)}}function ea(e,t,r,n){var a=n?S:k,i=-1,o=t.length,u=e;for(e===t&&(t=Ha(t)),r&&(u=h(e,N(r)));++i<o;)for(var s=0,c=t[i],l=r?r(c):c;(s=a(u,l,s,n))>-1;)u!==e&&Vl.call(u,s,1),Vl.call(e,s,1);return e}function ta(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==i){var i=a;Di(a)?Vl.call(e,a,1):ya(e,a)}}return e}function ra(e,t){return e+ql(Zl()*(t-e+1))}function na(e,t,r,n){for(var a=-1,i=$l(Kl((t-e)/(r||1)),0),o=ol(i);i--;)o[n?i:++a]=e,e+=r;return o}function aa(e,t){var r="";if(!e||t<1||t>Ne)return r;do t%2&&(r+=e),t=ql(t/2),t&&(e+=e);while(t);return r}function ia(e,t){return Rf(Xi(e,t,Vc),e+"")}function oa(e){return Ir(nc(e))}function ua(e,t){var r=nc(e);return to(r,Ur(t,0,r.length))}function sa(e,t,r,n){if(!ss(e))return e;t=_a(t,e);for(var a=-1,i=t.length,o=i-1,u=e;null!=u&&++a<i;){var s=ro(t[a]),c=r;if(a!=o){var l=u[s];c=n?n(l,s,u):te,c===te&&(c=ss(l)?l:Di(t[a+1])?[]:{})}xr(u,s,c),u=u[s]}return e}function ca(e){return to(nc(e))}function la(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=ol(a);++n<a;)i[n]=e[n+t];return i}function fa(e,t){var r;return bf(e,function(e,n,a){return r=t(e,n,a),!r}),!!r}function ha(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t===t&&a<=De){for(;n<a;){var i=n+a>>>1,o=e[i];null!==o&&!ws(o)&&(r?o<=t:o<t)?n=i+1:a=i}return a}return ma(e,t,Vc,r)}function ma(e,t,r,n){t=r(t);for(var a=0,i=null==e?0:e.length,o=t!==t,u=null===t,s=ws(t),c=t===te;a<i;){var l=ql((a+i)/2),f=r(e[l]),h=f!==te,m=null===f,d=f===f,v=ws(f);if(o)var p=n||d;else p=c?d&&(n||h):u?d&&h&&(n||!m):s?d&&h&&!m&&(n||!v):!m&&!v&&(n?f<=t:f<t);p?a=l+1:i=l}return Xl(i,Te)}function da(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var o=e[r],u=t?t(o):o;if(!r||!$u(u,s)){var s=u;i[a++]=0===o?0:o}}return i}function va(e){return"number"==typeof e?e:ws(e)?Ve:+e}function pa(e){if("string"==typeof e)return e;if(kh(e))return h(e,pa)+"";if(ws(e))return gf?gf.call(e):"";var t=e+"";return"0"==t&&1/e==-xe?"-0":t}function ga(e,t,r){var n=-1,a=l,i=e.length,o=!0,u=[],s=u;if(r)o=!1,a=f;else if(i>=ne){var c=t?null:If(e);if(c)return W(c);o=!1,a=V,s=new gr}else s=t?[]:u;e:for(;++n<i;){var h=e[n],m=t?t(h):h;if(h=r||0!==h?h:0,o&&m===m){for(var d=s.length;d--;)if(s[d]===m)continue e;t&&s.push(m),u.push(h)}else a(s,m,r)||(s!==u&&s.push(m),u.push(h))}return u}function ya(e,t){return t=_a(t,e),e=Yi(e,t),null==e||delete e[ro(Co(t))]}function ba(e,t,r,n){return sa(e,t,r(cn(e,t)),n)}function wa(e,t,r,n){for(var a=e.length,i=n?a:-1;(n?i--:++i<a)&&t(e[i],i,e););return r?la(e,n?0:i,n?i+1:a):la(e,n?i+1:0,n?a:i)}function ka(e,t){var r=e;return r instanceof Q&&(r=r.value()),d(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},r)}function Sa(e,t,r){var n=e.length;if(n<2)return n?ga(e[0]):[];for(var a=-1,i=ol(n);++a<n;)for(var o=e[a],u=-1;++u<n;)u!=a&&(i[a]=$r(i[a]||o,e[u],t,r));return ga(rn(i,1),t,r)}function Pa(e,t,r){for(var n=-1,a=e.length,i=t.length,o={};++n<a;){var u=n<i?t[n]:te;r(o,e[n],u)}return o}function Aa(e){return Yu(e)?e:[]}function Ca(e){return"function"==typeof e?e:Vc}function _a(e,t){return kh(e)?e:Mi(e,t)?[e]:Tf(xs(e))}function Ia(e,t,r){var n=e.length;return r=r===te?n:r,!t&&r>=n?e:la(e,t,r)}function Oa(e,t){if(t)return e.slice();var r=e.length,n=Bl?Bl(r):new e.constructor(r);return e.copy(n),n}function Ea(e){var t=new e.constructor(e.byteLength);return new El(t).set(new El(e)),t}function Ba(e,t){var r=t?Ea(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function xa(e,t,n){var a=t?n(q(e),ce):q(e);return d(a,r,new e.constructor)}function Na(e){var t=new e.constructor(e.source,qt.exec(e));return t.lastIndex=e.lastIndex,t}function ja(e,t,r){var a=t?r(W(e),ce):W(e);return d(a,n,new e.constructor)}function Va(e){return pf?fl(pf.call(e)):{}}function Ra(e,t){var r=t?Ea(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ta(e,t){if(e!==t){var r=e!==te,n=null===e,a=e===e,i=ws(e),o=t!==te,u=null===t,s=t===t,c=ws(t);if(!u&&!c&&!i&&e>t||i&&o&&s&&!u&&!c||n&&o&&s||!r&&s||!a)return 1;if(!n&&!i&&!c&&e<t||c&&r&&a&&!n&&!i||u&&r&&a||!o&&a||!s)return-1}return 0}function Da(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,u=r.length;++n<o;){var s=Ta(a[n],i[n]);if(s){if(n>=u)return s;var c=r[n];return s*("desc"==c?-1:1)}}return e.index-t.index}function Ua(e,t,r,n){for(var a=-1,i=e.length,o=r.length,u=-1,s=t.length,c=$l(i-o,0),l=ol(s+c),f=!n;++u<s;)l[u]=t[u];for(;++a<o;)(f||a<i)&&(l[r[a]]=e[a]);for(;c--;)l[u++]=e[a++];return l}function Ma(e,t,r,n){for(var a=-1,i=e.length,o=-1,u=r.length,s=-1,c=t.length,l=$l(i-u,0),f=ol(l+c),h=!n;++a<l;)f[a]=e[a];for(var m=a;++s<c;)f[m+s]=t[s];for(;++o<u;)(h||a<i)&&(f[m+r[o]]=e[a++]);return f}function Ha(e,t){var r=-1,n=e.length;for(t||(t=ol(n));++r<n;)t[r]=e[r];return t}function La(e,t,r,n){var a=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var u=t[i],s=n?n(r[u],e[u],u,r,e):te;s===te&&(s=e[u]),a?Tr(r,u,s):xr(r,u,s)}return r}function Ka(e,t){return La(e,Ef(e),t)}function qa(e,t){return La(e,Bf(e),t)}function Fa(e,t){return function(r,n){var a=kh(r)?i:jr,o=t?t():{};return a(r,e,Ai(n,2),o)}}function Ja(e){return ia(function(t,r){var n=-1,a=r.length,i=a>1?r[a-1]:te,o=a>2?r[2]:te;for(i=e.length>3&&"function"==typeof i?(a--,i):te,o&&Ui(r[0],r[1],o)&&(i=a<3?te:i,a=1),t=fl(t);++n<a;){var u=r[n];u&&e(t,u,n,i)}return t})}function Wa(e,t){return function(r,n){if(null==r)return r;if(!Xu(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=fl(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}function Ga(e){return function(t,r,n){for(var a=-1,i=fl(t),o=n(t),u=o.length;u--;){var s=o[e?u:++a];if(r(i[s],s,i)===!1)break}return t}}function za(e,t,r){function n(){var t=this&&this!==nn&&this instanceof n?i:e;return t.apply(a?r:this,arguments)}var a=t&de,i=Ya(e);return n}function $a(e){return function(t){t=xs(t);var r=H(t)?Y(t):te,n=r?r[0]:t.charAt(0),a=r?Ia(r,1).join(""):t.slice(1);return n[e]()+a}}function Xa(e){return function(t){return d(Ec(cc(t).replace(Mr,"")),e,"")}}function Ya(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=yf(e.prototype),n=e.apply(r,t);return ss(n)?n:r}}function Qa(e,t,r){function n(){for(var o=arguments.length,u=ol(o),s=o,c=Pi(n);s--;)u[s]=arguments[s];var l=o<3&&u[0]!==c&&u[o-1]!==c?[]:J(u,c);if(o-=l.length,o<r)return ci(e,t,ti,n.placeholder,te,u,l,te,te,r-o);var f=this&&this!==nn&&this instanceof n?i:e;return a(f,this,u)}var i=Ya(e);return n}function Za(e){return function(t,r,n){var a=fl(t);if(!Xu(t)){var i=Ai(r,3);t=Fs(t),r=function(e){return i(a[e],e,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:te}}function ei(e){return bi(function(t){var r=t.length,n=r,a=z.prototype.thru;for(e&&t.reverse();n--;){var i=t[n];if("function"!=typeof i)throw new dl(ie);if(a&&!o&&"wrapper"==Si(i))var o=new z([],!0)}for(n=o?n:r;++n<r;){i=t[n];var u=Si(i),s="wrapper"==u?Of(i):te;o=s&&Li(s[0])&&s[1]==(ke|ge|be|Se)&&!s[4].length&&1==s[9]?o[Si(s[0])].apply(o,s[3]):1==i.length&&Li(i)?o[u]():o.thru(i)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&kh(n))return o.plant(n).value();for(var a=0,i=r?t[a].apply(this,e):n;++a<r;)i=t[a].call(this,i);return i}})}function ti(e,t,r,n,a,i,o,u,s,c){function l(){for(var g=arguments.length,y=ol(g),b=g;b--;)y[b]=arguments[b];if(d)var w=Pi(l),k=D(y,w);if(n&&(y=Ua(y,n,a,d)),i&&(y=Ma(y,i,o,d)),g-=k,d&&g<c){var S=J(y,w);return ci(e,t,ti,l.placeholder,r,y,S,u,s,c-g)}var P=h?r:this,A=m?P[e]:e;return g=y.length,u?y=Qi(y,u):v&&g>1&&y.reverse(),f&&s<g&&(y.length=s),this&&this!==nn&&this instanceof l&&(A=p||Ya(A)),A.apply(P,y)}var f=t&ke,h=t&de,m=t&ve,d=t&(ge|ye),v=t&Pe,p=m?te:Ya(e);return l}function ri(e,t){return function(r,n){return In(r,e,t(n),{})}}function ni(e,t){return function(r,n){var a;if(r===te&&n===te)return t;if(r!==te&&(a=r),n!==te){if(a===te)return n;"string"==typeof r||"string"==typeof n?(r=pa(r),n=pa(n)):(r=va(r),n=va(n)),a=e(r,n)}return a}}function ai(e){return bi(function(t){return t=h(t,N(Ai())),ia(function(r){var n=this;return e(t,function(e){return a(e,n,r)})})})}function ii(e,t){t=t===te?" ":pa(t);var r=t.length;if(r<2)return r?aa(t,e):t;var n=aa(t,Kl(e/X(t)));return H(t)?Ia(Y(n),0,e).join(""):n.slice(0,e)}function oi(e,t,r,n){function i(){for(var t=-1,s=arguments.length,c=-1,l=n.length,f=ol(l+s),h=this&&this!==nn&&this instanceof i?u:e;++c<l;)f[c]=n[c];for(;s--;)f[c++]=arguments[++t];return a(h,o?r:this,f)}var o=t&de,u=Ya(e);return i}function ui(e){return function(t,r,n){return n&&"number"!=typeof n&&Ui(t,r,n)&&(r=n=te),t=Cs(t),r===te?(r=t,t=0):r=Cs(r),n=n===te?t<r?1:-1:Cs(n),na(t,r,n,e)}}function si(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Os(t),r=Os(r)),e(t,r)}}function ci(e,t,r,n,a,i,o,u,s,c){var l=t&ge,f=l?o:te,h=l?te:o,m=l?i:te,d=l?te:i;t|=l?be:we,t&=~(l?we:be),t&pe||(t&=~(de|ve));var v=[e,t,a,m,f,d,h,u,s,c],p=r.apply(te,v);return Li(e)&&jf(p,v),p.placeholder=n,Zi(p,e,t)}function li(e){var t=ll[e];return function(e,r){if(e=Os(e),r=null==r?0:Xl(_s(r),292)){var n=(xs(e)+"e").split("e"),a=t(n[0]+"e"+(+n[1]+r));return n=(xs(a)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(e)}}function fi(e){return function(t){var r=xf(t);return r==ze?q(t):r==tt?G(t):x(t,e(t))}}function hi(e,t,r,n,a,i,o,u){var s=t&ve;if(!s&&"function"!=typeof e)throw new dl(ie);var c=n?n.length:0;if(c||(t&=~(be|we),n=a=te),o=o===te?o:$l(_s(o),0),u=u===te?u:_s(u),c-=a?a.length:0,t&we){var l=n,f=a;n=a=te}var h=s?te:Of(e),m=[e,t,r,n,a,l,f,i,o,u];if(h&&Gi(m,h),e=m[0],t=m[1],r=m[2],n=m[3],a=m[4],u=m[9]=m[9]===te?s?0:e.length:$l(m[9]-c,0),!u&&t&(ge|ye)&&(t&=~(ge|ye)),t&&t!=de)d=t==ge||t==ye?Qa(e,t,u):t!=be&&t!=(de|be)||a.length?ti.apply(te,m):oi(e,t,r,n);else var d=za(e,t,r);var v=h?Pf:jf;return Zi(v(d,m),e,t)}function mi(e,t,r,n){return e===te||$u(e,gl[r])&&!wl.call(n,r)?t:e}function di(e,t,r,n,a,i){return ss(e)&&ss(t)&&(i.set(t,e),Gn(e,t,te,di,i),i.delete(t)),e}function vi(e){return gs(e)?te:e}function pi(e,t,r,n,a,i){var o=r&he,u=e.length,s=t.length;if(u!=s&&!(o&&s>u))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,h=r&me?new gr:te;for(i.set(e,t),i.set(t,e);++l<u;){var m=e[l],d=t[l];if(n)var v=o?n(d,m,l,t,e,i):n(m,d,l,e,t,i);if(v!==te){if(v)continue;f=!1;break}if(h){if(!p(t,function(e,t){if(!V(h,t)&&(m===e||a(m,e,r,n,i)))return h.push(t)})){f=!1;break}}else if(m!==d&&!a(m,d,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function gi(e,t,r,n,a,i,o){switch(r){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ut:return!(e.byteLength!=t.byteLength||!i(new El(e),new El(t)));case Ke:case qe:case $e:return $u(+e,+t);case Je:return e.name==t.name&&e.message==t.message;case et:case rt:return e==t+"";case ze:var u=q;case tt:var s=n&he;if(u||(u=W),e.size!=t.size&&!s)return!1;var c=o.get(e);if(c)return c==t;n|=me,o.set(e,t);var l=pi(u(e),u(t),n,a,i,o);return o.delete(e),l;case nt:if(pf)return pf.call(e)==pf.call(t)}return!1}function yi(e,t,r,n,a,i){var o=r&he,u=wi(e),s=u.length,c=wi(t),l=c.length;if(s!=l&&!o)return!1;for(var f=s;f--;){var h=u[f];if(!(o?h in t:wl.call(t,h)))return!1}var m=i.get(e);if(m&&i.get(t))return m==t;var d=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<s;){h=u[f];var p=e[h],g=t[h];if(n)var y=o?n(g,p,h,t,e,i):n(p,g,h,e,t,i);if(!(y===te?p===g||a(p,g,r,n,i):y)){d=!1;break}v||(v="constructor"==h)}if(d&&!v){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return i.delete(e),i.delete(t),d}function bi(e){return Rf(Xi(e,te,go),e+"")}function wi(e){return pn(e,Fs,Ef)}function ki(e){return pn(e,Js,Bf)}function Si(e){for(var t=e.name+"",r=cf[t],n=wl.call(cf,t)?r.length:0;n--;){var a=r[n],i=a.func;if(null==i||i==e)return a.name}return t}function Pi(e){var t=wl.call(g,"placeholder")?g:e;return t.placeholder}function Ai(){var e=g.iteratee||Rc;return e=e===Rc?Hn:e,arguments.length?e(arguments[0],arguments[1]):e;
}function Ci(e,t){var r=e.__data__;return Hi(t)?r["string"==typeof t?"string":"hash"]:r.map}function _i(e){for(var t=Fs(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Fi(a)]}return t}function Ii(e,t){var r=M(e,t);return Tn(r)?r:te}function Oi(e){var t=wl.call(e,Dl),r=e[Dl];try{e[Dl]=te;var n=!0}catch(e){}var a=Pl.call(e);return n&&(t?e[Dl]=r:delete e[Dl]),a}function Ei(e,t,r){for(var n=-1,a=r.length;++n<a;){var i=r[n],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Xl(t,e+o);break;case"takeRight":e=$l(e,t-o)}}return{start:e,end:t}}function Bi(e){var t=e.match(Ut);return t?t[1].split(Mt):[]}function xi(e,t,r){t=_a(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=ro(t[n]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=null==e?0:e.length,!!a&&us(a)&&Di(o,a)&&(kh(e)||wh(e)))}function Ni(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&wl.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function ji(e){return"function"!=typeof e.constructor||qi(e)?{}:yf(xl(e))}function Vi(e,t,r,n){var a=e.constructor;switch(t){case ut:return Ea(e);case Ke:case qe:return new a(+e);case st:return Ba(e,n);case ct:case lt:case ft:case ht:case mt:case dt:case vt:case pt:case gt:return Ra(e,n);case ze:return xa(e,n,r);case $e:case rt:return new a(e);case et:return Na(e);case tt:return ja(e,n,r);case nt:return Va(e)}}function Ri(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function Ti(e){return kh(e)||wh(e)||!!(Rl&&e&&e[Rl])}function Di(e,t){return t=null==t?Ne:t,!!t&&("number"==typeof e||zt.test(e))&&e>-1&&e%1==0&&e<t}function Ui(e,t,r){if(!ss(r))return!1;var n=typeof t;return!!("number"==n?Xu(r)&&Di(t,r.length):"string"==n&&t in r)&&$u(r[t],e)}function Mi(e,t){if(kh(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ws(e))||(Et.test(e)||!Ot.test(e)||null!=t&&e in fl(t))}function Hi(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Li(e){var t=Si(e),r=g[t];if("function"!=typeof r||!(t in Q.prototype))return!1;if(e===r)return!0;var n=Of(r);return!!n&&e===n[0]}function Ki(e){return!!Sl&&Sl in e}function qi(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||gl;return e===r}function Fi(e){return e===e&&!ss(e)}function Ji(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==te||e in fl(r)))}}function Wi(e){var t=Ru(e,function(e){return r.size===ue&&r.clear(),e}),r=t.cache;return t}function Gi(e,t){var r=e[1],n=t[1],a=r|n,i=a<(de|ve|ke),o=n==ke&&r==ge||n==ke&&r==Se&&e[7].length<=t[8]||n==(ke|Se)&&t[7].length<=t[8]&&r==ge;if(!i&&!o)return e;n&de&&(e[2]=t[2],a|=r&de?0:pe);var u=t[3];if(u){var s=e[3];e[3]=s?Ua(s,u,t[4]):u,e[4]=s?J(e[3],se):t[4]}return u=t[5],u&&(s=e[5],e[5]=s?Ma(s,u,t[6]):u,e[6]=s?J(e[5],se):t[6]),u=t[7],u&&(e[7]=u),n&ke&&(e[8]=null==e[8]?t[8]:Xl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function zi(e){var t=[];if(null!=e)for(var r in fl(e))t.push(r);return t}function $i(e){return Pl.call(e)}function Xi(e,t,r){return t=$l(t===te?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=$l(n.length-t,0),u=ol(o);++i<o;)u[i]=n[t+i];i=-1;for(var s=ol(t+1);++i<t;)s[i]=n[i];return s[t]=r(u),a(e,this,s)}}function Yi(e,t){return t.length<2?e:cn(e,la(t,0,-1))}function Qi(e,t){for(var r=e.length,n=Xl(t.length,r),a=Ha(e);n--;){var i=t[n];e[n]=Di(i,r)?a[i]:te}return e}function Zi(e,t,r){var n=t+"";return Rf(e,Ri(n,ao(Bi(n),r)))}function eo(e){var t=0,r=0;return function(){var n=Yl(),a=Ie-(n-r);if(r=n,a>0){if(++t>=_e)return arguments[0]}else t=0;return e.apply(te,arguments)}}function to(e,t){var r=-1,n=e.length,a=n-1;for(t=t===te?n:t;++r<t;){var i=ra(r,a),o=e[i];e[i]=e[r],e[r]=o}return e.length=t,e}function ro(e){if("string"==typeof e||ws(e))return e;var t=e+"";return"0"==t&&1/e==-xe?"-0":t}function no(e){if(null!=e){try{return bl.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ao(e,t){return o(Ue,function(r){var n="_."+r[0];t&r[1]&&!l(e,n)&&e.push(n)}),e.sort()}function io(e){if(e instanceof Q)return e.clone();var t=new z(e.__wrapped__,e.__chain__);return t.__actions__=Ha(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function oo(e,t,r){t=(r?Ui(e,t,r):t===te)?1:$l(_s(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var a=0,i=0,o=ol(Kl(n/t));a<n;)o[i++]=la(e,a,a+=t);return o}function uo(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var i=e[t];i&&(a[n++]=i)}return a}function so(){var e=arguments.length;if(!e)return[];for(var t=ol(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return m(kh(r)?Ha(r):[r],rn(t,1))}function co(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:_s(t),la(e,t<0?0:t,n)):[]}function lo(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:_s(t),t=n-t,la(e,0,t<0?0:t)):[]}function fo(e,t){return e&&e.length?wa(e,Ai(t,3),!0,!0):[]}function ho(e,t){return e&&e.length?wa(e,Ai(t,3),!0):[]}function mo(e,t,r,n){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&Ui(e,t,r)&&(r=0,n=a),Qr(e,t,r,n)):[]}function vo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:_s(r);return a<0&&(a=$l(n+a,0)),w(e,Ai(t,3),a)}function po(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=n-1;return r!==te&&(a=_s(r),a=r<0?$l(n+a,0):Xl(a,n-1)),w(e,Ai(t,3),a,!0)}function go(e){var t=null==e?0:e.length;return t?rn(e,1):[]}function yo(e){var t=null==e?0:e.length;return t?rn(e,xe):[]}function bo(e,t){var r=null==e?0:e.length;return r?(t=t===te?1:_s(t),rn(e,t)):[]}function wo(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n}function ko(e){return e&&e.length?e[0]:te}function So(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:_s(r);return a<0&&(a=$l(n+a,0)),k(e,t,a)}function Po(e){var t=null==e?0:e.length;return t?la(e,0,-1):[]}function Ao(e,t){return null==e?"":Gl.call(e,t)}function Co(e){var t=null==e?0:e.length;return t?e[t-1]:te}function _o(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=n;return r!==te&&(a=_s(r),a=a<0?$l(n+a,0):Xl(a,n-1)),t===t?$(e,t,a):w(e,P,a,!0)}function Io(e,t){return e&&e.length?$n(e,_s(t)):te}function Oo(e,t){return e&&e.length&&t&&t.length?ea(e,t):e}function Eo(e,t,r){return e&&e.length&&t&&t.length?ea(e,t,Ai(r,2)):e}function Bo(e,t,r){return e&&e.length&&t&&t.length?ea(e,t,te,r):e}function xo(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],i=e.length;for(t=Ai(t,3);++n<i;){var o=e[n];t(o,n,e)&&(r.push(o),a.push(n))}return ta(e,a),r}function No(e){return null==e?e:ef.call(e)}function jo(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Ui(e,t,r)?(t=0,r=n):(t=null==t?0:_s(t),r=r===te?n:_s(r)),la(e,t,r)):[]}function Vo(e,t){return ha(e,t)}function Ro(e,t,r){return ma(e,t,Ai(r,2))}function To(e,t){var r=null==e?0:e.length;if(r){var n=ha(e,t);if(n<r&&$u(e[n],t))return n}return-1}function Do(e,t){return ha(e,t,!0)}function Uo(e,t,r){return ma(e,t,Ai(r,2),!0)}function Mo(e,t){var r=null==e?0:e.length;if(r){var n=ha(e,t,!0)-1;if($u(e[n],t))return n}return-1}function Ho(e){return e&&e.length?da(e):[]}function Lo(e,t){return e&&e.length?da(e,Ai(t,2)):[]}function Ko(e){var t=null==e?0:e.length;return t?la(e,1,t):[]}function qo(e,t,r){return e&&e.length?(t=r||t===te?1:_s(t),la(e,0,t<0?0:t)):[]}function Fo(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:_s(t),t=n-t,la(e,t<0?0:t,n)):[]}function Jo(e,t){return e&&e.length?wa(e,Ai(t,3),!1,!0):[]}function Wo(e,t){return e&&e.length?wa(e,Ai(t,3)):[]}function Go(e){return e&&e.length?ga(e):[]}function zo(e,t){return e&&e.length?ga(e,Ai(t,2)):[]}function $o(e,t){return t="function"==typeof t?t:te,e&&e.length?ga(e,te,t):[]}function Xo(e){if(!e||!e.length)return[];var t=0;return e=c(e,function(e){if(Yu(e))return t=$l(e.length,t),!0}),B(t,function(t){return h(e,C(t))})}function Yo(e,t){if(!e||!e.length)return[];var r=Xo(e);return null==t?r:h(r,function(e){return a(t,te,e)})}function Qo(e,t){return Pa(e||[],t||[],xr)}function Zo(e,t){return Pa(e||[],t||[],sa)}function eu(e){var t=g(e);return t.__chain__=!0,t}function tu(e,t){return t(e),e}function ru(e,t){return t(e)}function nu(){return eu(this)}function au(){return new z(this.value(),this.__chain__)}function iu(){this.__values__===te&&(this.__values__=As(this.value()));var e=this.__index__>=this.__values__.length,t=e?te:this.__values__[this.__index__++];return{done:e,value:t}}function ou(){return this}function uu(e){for(var t,r=this;r instanceof _;){var n=io(r);n.__index__=0,n.__values__=te,t?a.__wrapped__=n:t=n;var a=n;r=r.__wrapped__}return a.__wrapped__=e,t}function su(){var e=this.__wrapped__;if(e instanceof Q){var t=e;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:ru,args:[No],thisArg:te}),new z(t,this.__chain__)}return this.thru(No)}function cu(){return ka(this.__wrapped__,this.__actions__)}function lu(e,t,r){var n=kh(e)?s:Xr;return r&&Ui(e,t,r)&&(t=te),n(e,Ai(t,3))}function fu(e,t){var r=kh(e)?c:tn;return r(e,Ai(t,3))}function hu(e,t){return rn(yu(e,t),1)}function mu(e,t){return rn(yu(e,t),xe)}function du(e,t,r){return r=r===te?1:_s(r),rn(yu(e,t),r)}function vu(e,t){var r=kh(e)?o:bf;return r(e,Ai(t,3))}function pu(e,t){var r=kh(e)?u:wf;return r(e,Ai(t,3))}function gu(e,t,r,n){e=Xu(e)?e:nc(e),r=r&&!n?_s(r):0;var a=e.length;return r<0&&(r=$l(a+r,0)),bs(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&k(e,t,r)>-1}function yu(e,t){var r=kh(e)?h:Fn;return r(e,Ai(t,3))}function bu(e,t,r,n){return null==e?[]:(kh(t)||(t=null==t?[]:[t]),r=n?te:r,kh(r)||(r=null==r?[]:[r]),Xn(e,t,r))}function wu(e,t,r){var n=kh(e)?d:I,a=arguments.length<3;return n(e,Ai(t,4),r,a,bf)}function ku(e,t,r){var n=kh(e)?v:I,a=arguments.length<3;return n(e,Ai(t,4),r,a,wf)}function Su(e,t){var r=kh(e)?c:tn;return r(e,Tu(Ai(t,3)))}function Pu(e){var t=kh(e)?Ir:oa;return t(e)}function Au(e,t,r){t=(r?Ui(e,t,r):t===te)?1:_s(t);var n=kh(e)?Or:ua;return n(e,t)}function Cu(e){var t=kh(e)?Er:ca;return t(e)}function _u(e){if(null==e)return 0;if(Xu(e))return bs(e)?X(e):e.length;var t=xf(e);return t==ze||t==tt?e.size:Ln(e).length}function Iu(e,t,r){var n=kh(e)?p:fa;return r&&Ui(e,t,r)&&(t=te),n(e,Ai(t,3))}function Ou(e,t){if("function"!=typeof t)throw new dl(ie);return e=_s(e),function(){if(--e<1)return t.apply(this,arguments)}}function Eu(e,t,r){return t=r?te:t,t=e&&null==t?e.length:t,hi(e,ke,te,te,te,te,t)}function Bu(e,t){var r;if("function"!=typeof t)throw new dl(ie);return e=_s(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=te),r}}function xu(e,t,r){t=r?te:t;var n=hi(e,ge,te,te,te,te,te,t);return n.placeholder=xu.placeholder,n}function Nu(e,t,r){t=r?te:t;var n=hi(e,ye,te,te,te,te,te,t);return n.placeholder=Nu.placeholder,n}function ju(e,t,r){function n(t){var r=h,n=m;return h=m=te,y=t,v=e.apply(n,r)}function a(e){return y=e,p=Vf(u,t),b?n(e):v}function i(e){var r=e-g,n=e-y,a=t-r;return w?Xl(a,d-n):a}function o(e){var r=e-g,n=e-y;return g===te||r>=t||r<0||w&&n>=d}function u(){var e=ch();return o(e)?s(e):void(p=Vf(u,i(e)))}function s(e){return p=te,k&&h?n(e):(h=m=te,v)}function c(){p!==te&&_f(p),y=0,h=g=m=p=te}function l(){return p===te?v:s(ch())}function f(){var e=ch(),r=o(e);if(h=arguments,m=this,g=e,r){if(p===te)return a(g);if(w)return p=Vf(u,t),n(g)}return p===te&&(p=Vf(u,t)),v}var h,m,d,v,p,g,y=0,b=!1,w=!1,k=!0;if("function"!=typeof e)throw new dl(ie);return t=Os(t)||0,ss(r)&&(b=!!r.leading,w="maxWait"in r,d=w?$l(Os(r.maxWait)||0,t):d,k="trailing"in r?!!r.trailing:k),f.cancel=c,f.flush=l,f}function Vu(e){return hi(e,Pe)}function Ru(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new dl(ie);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Ru.Cache||fr),r}function Tu(e){if("function"!=typeof e)throw new dl(ie);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Du(e){return Bu(2,e)}function Uu(e,t){if("function"!=typeof e)throw new dl(ie);return t=t===te?t:_s(t),ia(e,t)}function Mu(e,t){if("function"!=typeof e)throw new dl(ie);return t=null==t?0:$l(_s(t),0),ia(function(r){var n=r[t],i=Ia(r,0,t);return n&&m(i,n),a(e,this,i)})}function Hu(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new dl(ie);return ss(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),ju(e,t,{leading:n,maxWait:t,trailing:a})}function Lu(e){return Eu(e,1)}function Ku(e,t){return vh(Ca(t),e)}function qu(){if(!arguments.length)return[];var e=arguments[0];return kh(e)?e:[e]}function Fu(e){return Lr(e,fe)}function Ju(e,t){return t="function"==typeof t?t:te,Lr(e,fe,t)}function Wu(e){return Lr(e,ce|fe)}function Gu(e,t){return t="function"==typeof t?t:te,Lr(e,ce|fe,t)}function zu(e,t){return null==t||qr(e,t,Fs(t))}function $u(e,t){return e===t||e!==e&&t!==t}function Xu(e){return null!=e&&us(e.length)&&!is(e)}function Yu(e){return cs(e)&&Xu(e)}function Qu(e){return e===!0||e===!1||cs(e)&&wn(e)==Ke}function Zu(e){return cs(e)&&1===e.nodeType&&!gs(e)}function es(e){if(null==e)return!0;if(Xu(e)&&(kh(e)||"string"==typeof e||"function"==typeof e.splice||Ph(e)||Oh(e)||wh(e)))return!e.length;var t=xf(e);if(t==ze||t==tt)return!e.size;if(qi(e))return!Ln(e).length;for(var r in e)if(wl.call(e,r))return!1;return!0}function ts(e,t){return Nn(e,t)}function rs(e,t,r){r="function"==typeof r?r:te;var n=r?r(e,t):te;return n===te?Nn(e,t,te,r):!!n}function ns(e){if(!cs(e))return!1;var t=wn(e);return t==Je||t==Fe||"string"==typeof e.message&&"string"==typeof e.name&&!gs(e)}function as(e){return"number"==typeof e&&Wl(e)}function is(e){if(!ss(e))return!1;var t=wn(e);return t==We||t==Ge||t==Le||t==Ze}function os(e){return"number"==typeof e&&e==_s(e)}function us(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ne}function ss(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function cs(e){return null!=e&&"object"==typeof e}function ls(e,t){return e===t||Rn(e,t,_i(t))}function fs(e,t,r){return r="function"==typeof r?r:te,Rn(e,t,_i(t),r)}function hs(e){return ps(e)&&e!=+e}function ms(e){if(Nf(e))throw new sl(ae);return Tn(e)}function ds(e){return null===e}function vs(e){return null==e}function ps(e){return"number"==typeof e||cs(e)&&wn(e)==$e}function gs(e){if(!cs(e)||wn(e)!=Ye)return!1;var t=xl(e);if(null===t)return!0;var r=wl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&bl.call(r)==Al}function ys(e){return os(e)&&e>=-Ne&&e<=Ne}function bs(e){return"string"==typeof e||!kh(e)&&cs(e)&&wn(e)==rt}function ws(e){return"symbol"==typeof e||cs(e)&&wn(e)==nt}function ks(e){return e===te}function Ss(e){return cs(e)&&xf(e)==it}function Ps(e){return cs(e)&&wn(e)==ot}function As(e){if(!e)return[];if(Xu(e))return bs(e)?Y(e):Ha(e);if(Tl&&e[Tl])return K(e[Tl]());var t=xf(e),r=t==ze?q:t==tt?W:nc;return r(e)}function Cs(e){if(!e)return 0===e?e:0;if(e=Os(e),e===xe||e===-xe){var t=e<0?-1:1;return t*je}return e===e?e:0}function _s(e){var t=Cs(e),r=t%1;return t===t?r?t-r:t:0}function Is(e){return e?Ur(_s(e),0,Re):0}function Os(e){if("number"==typeof e)return e;if(ws(e))return Ve;if(ss(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ss(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Vt,"");var r=Jt.test(e);return r||Gt.test(e)?en(e.slice(2),r?2:8):Ft.test(e)?Ve:+e}function Es(e){return La(e,Js(e))}function Bs(e){return e?Ur(_s(e),-Ne,Ne):0===e?e:0}function xs(e){return null==e?"":pa(e)}function Ns(e,t){var r=yf(e);return null==t?r:Vr(r,t)}function js(e,t){return b(e,Ai(t,3),an)}function Vs(e,t){return b(e,Ai(t,3),on)}function Rs(e,t){return null==e?e:kf(e,Ai(t,3),Js)}function Ts(e,t){return null==e?e:Sf(e,Ai(t,3),Js)}function Ds(e,t){return e&&an(e,Ai(t,3))}function Us(e,t){return e&&on(e,Ai(t,3))}function Ms(e){return null==e?[]:sn(e,Fs(e))}function Hs(e){return null==e?[]:sn(e,Js(e))}function Ls(e,t,r){var n=null==e?te:cn(e,t);return n===te?r:n}function Ks(e,t){return null!=e&&xi(e,t,Pn)}function qs(e,t){return null!=e&&xi(e,t,An)}function Fs(e){return Xu(e)?_r(e):Ln(e)}function Js(e){return Xu(e)?_r(e,!0):Kn(e)}function Ws(e,t){var r={};return t=Ai(t,3),an(e,function(e,n,a){Tr(r,t(e,n,a),e)}),r}function Gs(e,t){var r={};return t=Ai(t,3),an(e,function(e,n,a){Tr(r,n,t(e,n,a))}),r}function zs(e,t){return $s(e,Tu(Ai(t)))}function $s(e,t){if(null==e)return{};var r=h(ki(e),function(e){return[e]});return t=Ai(t),Qn(e,r,function(e,r){return t(e,r[0])})}function Xs(e,t,r){t=_a(t,e);var n=-1,a=t.length;for(a||(a=1,e=te);++n<a;){var i=null==e?te:e[ro(t[n])];i===te&&(n=a,i=r),e=is(i)?i.call(e):i}return e}function Ys(e,t,r){return null==e?e:sa(e,t,r)}function Qs(e,t,r,n){return n="function"==typeof n?n:te,null==e?e:sa(e,t,r,n)}function Zs(e,t,r){var n=kh(e),a=n||Ph(e)||Oh(e);if(t=Ai(t,4),null==r){var i=e&&e.constructor;r=a?n?new i:[]:ss(e)&&is(i)?yf(xl(e)):{}}return(a?o:an)(e,function(e,n,a){return t(r,e,n,a)}),r}function ec(e,t){return null==e||ya(e,t)}function tc(e,t,r){return null==e?e:ba(e,t,Ca(r))}function rc(e,t,r,n){return n="function"==typeof n?n:te,null==e?e:ba(e,t,Ca(r),n)}function nc(e){return null==e?[]:j(e,Fs(e))}function ac(e){return null==e?[]:j(e,Js(e))}function ic(e,t,r){return r===te&&(r=t,t=te),r!==te&&(r=Os(r),r=r===r?r:0),t!==te&&(t=Os(t),t=t===t?t:0),Ur(Os(e),t,r)}function oc(e,t,r){return t=Cs(t),r===te?(r=t,t=0):r=Cs(r),e=Os(e),Cn(e,t,r)}function uc(e,t,r){if(r&&"boolean"!=typeof r&&Ui(e,t,r)&&(t=r=te),r===te&&("boolean"==typeof t?(r=t,t=te):"boolean"==typeof e&&(r=e,e=te)),e===te&&t===te?(e=0,t=1):(e=Cs(e),t===te?(t=e,e=0):t=Cs(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var a=Zl();return Xl(e+a*(t-e+Zr("1e-"+((a+"").length-1))),t)}return ra(e,t)}function sc(e){return em(xs(e).toLowerCase())}function cc(e){return e=xs(e),e&&e.replace($t,gn).replace(Hr,"")}function lc(e,t,r){e=xs(e),t=pa(t);var n=e.length;r=r===te?n:Ur(_s(r),0,n);var a=r;return r-=t.length,r>=0&&e.slice(r,a)==t}function fc(e){return e=xs(e),e&&At.test(e)?e.replace(St,yn):e}function hc(e){return e=xs(e),e&&jt.test(e)?e.replace(Nt,"\\$&"):e}function mc(e,t,r){e=xs(e),t=_s(t);var n=t?X(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return ii(ql(a),r)+e+ii(Kl(a),r)}function dc(e,t,r){e=xs(e),t=_s(t);var n=t?X(e):0;return t&&n<t?e+ii(t-n,r):e}function vc(e,t,r){e=xs(e),t=_s(t);var n=t?X(e):0;return t&&n<t?ii(t-n,r)+e:e}function pc(e,t,r){return r||null==t?t=0:t&&(t=+t),Ql(xs(e).replace(Rt,""),t||0)}function gc(e,t,r){return t=(r?Ui(e,t,r):t===te)?1:_s(t),aa(xs(e),t)}function yc(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function bc(e,t,r){return r&&"number"!=typeof r&&Ui(e,t,r)&&(t=r=te),(r=r===te?Re:r>>>0)?(e=xs(e),e&&("string"==typeof t||null!=t&&!_h(t))&&(t=pa(t),!t&&H(e))?Ia(Y(e),0,r):e.split(t,r)):[]}function wc(e,t,r){return e=xs(e),r=null==r?0:Ur(_s(r),0,e.length),t=pa(t),e.slice(r,r+t.length)==t}function kc(e,t,r){var n=g.templateSettings;r&&Ui(e,t,r)&&(t=te),e=xs(e),t=jh({},t,n,mi);var a,i,o=jh({},t.imports,n.imports,mi),u=Fs(o),s=j(o,u),c=0,l=t.interpolate||Xt,f="__p += '",h=hl((t.escape||Xt).source+"|"+l.source+"|"+(l===It?Kt:Xt).source+"|"+(t.evaluate||Xt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Wr+"]")+"\n";e.replace(h,function(t,r,n,o,u,s){return n||(n=o),f+=e.slice(c,s).replace(Yt,U),r&&(a=!0,f+="' +\n__e("+r+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=s+t.length,t}),f+="';\n";var d=t.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(i?f.replace(yt,""):f).replace(bt,"$1").replace(wt,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=tm(function(){return cl(u,m+"return "+f).apply(te,s)});if(v.source=f,ns(v))throw v;return v}function Sc(e){return xs(e).toLowerCase()}function Pc(e){return xs(e).toUpperCase()}function Ac(e,t,r){if(e=xs(e),e&&(r||t===te))return e.replace(Vt,"");if(!e||!(t=pa(t)))return e;var n=Y(e),a=Y(t),i=R(n,a),o=T(n,a)+1;return Ia(n,i,o).join("")}function Cc(e,t,r){if(e=xs(e),e&&(r||t===te))return e.replace(Tt,"");if(!e||!(t=pa(t)))return e;var n=Y(e),a=T(n,Y(t))+1;return Ia(n,0,a).join("")}function _c(e,t,r){if(e=xs(e),e&&(r||t===te))return e.replace(Rt,"");if(!e||!(t=pa(t)))return e;var n=Y(e),a=R(n,Y(t));return Ia(n,a).join("")}function Ic(e,t){var r=Ae,n=Ce;if(ss(t)){var a="separator"in t?t.separator:a;r="length"in t?_s(t.length):r,n="omission"in t?pa(t.omission):n}e=xs(e);var i=e.length;if(H(e)){var o=Y(e);i=o.length}if(r>=i)return e;var u=r-X(n);if(u<1)return n;var s=o?Ia(o,0,u).join(""):e.slice(0,u);if(a===te)return s+n;if(o&&(u+=s.length-u),_h(a)){if(e.slice(u).search(a)){var c,l=s;for(a.global||(a=hl(a.source,xs(qt.exec(a))+"g")),a.lastIndex=0;c=a.exec(l);)var f=c.index;s=s.slice(0,f===te?u:f)}}else if(e.indexOf(pa(a),u)!=u){var h=s.lastIndexOf(a);h>-1&&(s=s.slice(0,h))}return s+n}function Oc(e){return e=xs(e),e&&Pt.test(e)?e.replace(kt,bn):e}function Ec(e,t,r){return e=xs(e),t=r?te:t,t===te?L(e)?ee(e):y(e):e.match(t)||[]}function Bc(e){var t=null==e?0:e.length,r=Ai();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new dl(ie);return[r(e[0]),e[1]]}):[],ia(function(r){for(var n=-1;++n<t;){var i=e[n];if(a(i[0],this,r))return a(i[1],this,r)}})}function xc(e){return Kr(Lr(e,ce))}function Nc(e){return function(){return e}}function jc(e,t){return null==e||e!==e?t:e}function Vc(e){return e}function Rc(e){return Hn("function"==typeof e?e:Lr(e,ce))}function Tc(e){return Jn(Lr(e,ce))}function Dc(e,t){return Wn(e,Lr(t,ce))}function Uc(e,t,r){var n=Fs(t),a=sn(t,n);null!=r||ss(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=sn(t,Fs(t)));var i=!(ss(r)&&"chain"in r&&!r.chain),u=is(e);return o(a,function(r){var n=t[r];e[r]=n,u&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__),a=r.__actions__=Ha(this.__actions__);return a.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,m([this.value()],arguments))})}),e}function Mc(){return nn._===this&&(nn._=Cl),this}function Hc(){}function Lc(e){return e=_s(e),ia(function(t){return $n(t,e)})}function Kc(e){return Mi(e)?C(ro(e)):Zn(e)}function qc(e){return function(t){return null==e?te:cn(e,t)}}function Fc(){return[]}function Jc(){return!1}function Wc(){return{}}function Gc(){return""}function zc(){return!0}function $c(e,t){if(e=_s(e),e<1||e>Ne)return[];var r=Re,n=Xl(e,Re);t=Ai(t),e-=Re;for(var a=B(n,t);++r<e;)t(r);return a}function Xc(e){return kh(e)?h(e,ro):ws(e)?[e]:Ha(Tf(xs(e)))}function Yc(e){var t=++kl;return xs(e)+t}function Qc(e){return e&&e.length?Yr(e,Vc,Sn):te}function Zc(e,t){return e&&e.length?Yr(e,Ai(t,2),Sn):te}function el(e){return A(e,Vc)}function tl(e,t){return A(e,Ai(t,2))}function rl(e){return e&&e.length?Yr(e,Vc,qn):te}function nl(e,t){return e&&e.length?Yr(e,Ai(t,2),qn):te}function al(e){return e&&e.length?E(e,Vc):0}function il(e,t){return e&&e.length?E(e,Ai(t,2)):0}t=null==t?nn:kn.defaults(nn.Object(),t,kn.pick(nn,Jr));var ol=t.Array,ul=t.Date,sl=t.Error,cl=t.Function,ll=t.Math,fl=t.Object,hl=t.RegExp,ml=t.String,dl=t.TypeError,vl=ol.prototype,pl=cl.prototype,gl=fl.prototype,yl=t["__core-js_shared__"],bl=pl.toString,wl=gl.hasOwnProperty,kl=0,Sl=function(){var e=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Pl=gl.toString,Al=bl.call(fl),Cl=nn._,_l=hl("^"+bl.call(wl).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Il=un?t.Buffer:te,Ol=t.Symbol,El=t.Uint8Array,Bl=Il?Il.allocUnsafe:te,xl=F(fl.getPrototypeOf,fl),Nl=fl.create,jl=gl.propertyIsEnumerable,Vl=vl.splice,Rl=Ol?Ol.isConcatSpreadable:te,Tl=Ol?Ol.iterator:te,Dl=Ol?Ol.toStringTag:te,Ul=function(){try{var e=Ii(fl,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ml=t.clearTimeout!==nn.clearTimeout&&t.clearTimeout,Hl=ul&&ul.now!==nn.Date.now&&ul.now,Ll=t.setTimeout!==nn.setTimeout&&t.setTimeout,Kl=ll.ceil,ql=ll.floor,Fl=fl.getOwnPropertySymbols,Jl=Il?Il.isBuffer:te,Wl=t.isFinite,Gl=vl.join,zl=F(fl.keys,fl),$l=ll.max,Xl=ll.min,Yl=ul.now,Ql=t.parseInt,Zl=ll.random,ef=vl.reverse,tf=Ii(t,"DataView"),rf=Ii(t,"Map"),nf=Ii(t,"Promise"),af=Ii(t,"Set"),of=Ii(t,"WeakMap"),uf=Ii(fl,"create"),sf=of&&new of,cf={},lf=no(tf),ff=no(rf),hf=no(nf),mf=no(af),df=no(of),vf=Ol?Ol.prototype:te,pf=vf?vf.valueOf:te,gf=vf?vf.toString:te,yf=function(){function e(){}return function(t){if(!ss(t))return{};if(Nl)return Nl(t);e.prototype=t;var r=new e;return e.prototype=te,r}}();g.templateSettings={escape:Ct,evaluate:_t,interpolate:It,variable:"",imports:{_:g}},g.prototype=_.prototype,g.prototype.constructor=g,z.prototype=yf(_.prototype),z.prototype.constructor=z,Q.prototype=yf(_.prototype),Q.prototype.constructor=Q,Zt.prototype.clear=er,Zt.prototype.delete=tr,Zt.prototype.get=rr,Zt.prototype.has=nr,Zt.prototype.set=ar,ir.prototype.clear=or,ir.prototype.delete=ur,ir.prototype.get=sr,ir.prototype.has=cr,ir.prototype.set=lr,fr.prototype.clear=hr,fr.prototype.delete=mr,fr.prototype.get=dr,fr.prototype.has=vr,fr.prototype.set=pr,gr.prototype.add=gr.prototype.push=yr,gr.prototype.has=br,wr.prototype.clear=kr,wr.prototype.delete=Sr,wr.prototype.get=Pr,wr.prototype.has=Ar,wr.prototype.set=Cr;var bf=Wa(an),wf=Wa(on,!0),kf=Ga(),Sf=Ga(!0),Pf=sf?function(e,t){return sf.set(e,t),e}:Vc,Af=Ul?function(e,t){return Ul(e,"toString",{configurable:!0,enumerable:!1,value:Nc(t),writable:!0})}:Vc,Cf=ia,_f=Ml||function(e){return nn.clearTimeout(e)},If=af&&1/W(new af([,-0]))[1]==xe?function(e){return new af(e)}:Hc,Of=sf?function(e){return sf.get(e)}:Hc,Ef=Fl?function(e){return null==e?[]:(e=fl(e),c(Fl(e),function(t){return jl.call(e,t)}))}:Fc,Bf=Fl?function(e){for(var t=[];e;)m(t,Ef(e)),e=xl(e);return t}:Fc,xf=wn;(tf&&xf(new tf(new ArrayBuffer(1)))!=st||rf&&xf(new rf)!=ze||nf&&xf(nf.resolve())!=Qe||af&&xf(new af)!=tt||of&&xf(new of)!=it)&&(xf=function(e){var t=wn(e),r=t==Ye?e.constructor:te,n=r?no(r):"";if(n)switch(n){case lf:return st;case ff:return ze;case hf:return Qe;case mf:return tt;case df:return it}return t});var Nf=yl?is:Jc,jf=eo(Pf),Vf=Ll||function(e,t){return nn.setTimeout(e,t)},Rf=eo(Af),Tf=Wi(function(e){var t=[];return Bt.test(e)&&t.push(""),e.replace(xt,function(e,r,n,a){t.push(n?a.replace(Lt,"$1"):r||e)}),t}),Df=ia(function(e,t){return Yu(e)?$r(e,rn(t,1,Yu,!0)):[]}),Uf=ia(function(e,t){var r=Co(t);return Yu(r)&&(r=te),Yu(e)?$r(e,rn(t,1,Yu,!0),Ai(r,2)):[]}),Mf=ia(function(e,t){var r=Co(t);return Yu(r)&&(r=te),Yu(e)?$r(e,rn(t,1,Yu,!0),te,r):[]}),Hf=ia(function(e){var t=h(e,Aa);return t.length&&t[0]===e[0]?_n(t):[]}),Lf=ia(function(e){var t=Co(e),r=h(e,Aa);return t===Co(r)?t=te:r.pop(),r.length&&r[0]===e[0]?_n(r,Ai(t,2)):[]}),Kf=ia(function(e){var t=Co(e),r=h(e,Aa);return t="function"==typeof t?t:te,t&&r.pop(),r.length&&r[0]===e[0]?_n(r,te,t):[]}),qf=ia(Oo),Ff=bi(function(e,t){var r=null==e?0:e.length,n=Dr(e,t);return ta(e,h(t,function(e){return Di(e,r)?+e:e}).sort(Ta)),n}),Jf=ia(function(e){return ga(rn(e,1,Yu,!0))}),Wf=ia(function(e){var t=Co(e);return Yu(t)&&(t=te),ga(rn(e,1,Yu,!0),Ai(t,2))}),Gf=ia(function(e){var t=Co(e);return t="function"==typeof t?t:te,ga(rn(e,1,Yu,!0),te,t)}),zf=ia(function(e,t){return Yu(e)?$r(e,t):[]}),$f=ia(function(e){return Sa(c(e,Yu))}),Xf=ia(function(e){var t=Co(e);return Yu(t)&&(t=te),Sa(c(e,Yu),Ai(t,2))}),Yf=ia(function(e){var t=Co(e);return t="function"==typeof t?t:te,Sa(c(e,Yu),te,t)}),Qf=ia(Xo),Zf=ia(function(e){var t=e.length,r=t>1?e[t-1]:te;return r="function"==typeof r?(e.pop(),r):te,Yo(e,r)}),eh=bi(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,a=function(t){return Dr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Q&&Di(r)?(n=n.slice(r,+r+(t?1:0)),n.__actions__.push({func:ru,args:[a],thisArg:te}),new z(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(te),e})):this.thru(a)}),th=Fa(function(e,t,r){wl.call(e,r)?++e[r]:Tr(e,r,1)}),rh=Za(vo),nh=Za(po),ah=Fa(function(e,t,r){wl.call(e,r)?e[r].push(t):Tr(e,r,[t])}),ih=ia(function(e,t,r){var n=-1,i="function"==typeof t,o=Xu(e)?ol(e.length):[];return bf(e,function(e){o[++n]=i?a(t,e,r):On(e,t,r)}),o}),oh=Fa(function(e,t,r){Tr(e,r,t)}),uh=Fa(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),sh=ia(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Ui(e,t[0],t[1])?t=[]:r>2&&Ui(t[0],t[1],t[2])&&(t=[t[0]]),Xn(e,rn(t,1),[])}),ch=Hl||function(){return nn.Date.now()},lh=ia(function(e,t,r){var n=de;if(r.length){var a=J(r,Pi(lh));n|=be}return hi(e,n,t,r,a)}),fh=ia(function(e,t,r){var n=de|ve;if(r.length){var a=J(r,Pi(fh));n|=be}return hi(t,n,e,r,a)}),hh=ia(function(e,t){return Fr(e,1,t)}),mh=ia(function(e,t,r){return Fr(e,Os(t)||0,r)});Ru.Cache=fr;var dh=Cf(function(e,t){t=1==t.length&&kh(t[0])?h(t[0],N(Ai())):h(rn(t,1),N(Ai()));var r=t.length;return ia(function(n){for(var i=-1,o=Xl(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return a(e,this,n)})}),vh=ia(function(e,t){var r=J(t,Pi(vh));return hi(e,be,te,t,r)}),ph=ia(function(e,t){var r=J(t,Pi(ph));return hi(e,we,te,t,r)}),gh=bi(function(e,t){return hi(e,Se,te,te,te,t)}),yh=si(Sn),bh=si(function(e,t){return e>=t}),wh=En(function(){return arguments}())?En:function(e){return cs(e)&&wl.call(e,"callee")&&!jl.call(e,"callee")},kh=ol.isArray,Sh=ln?N(ln):Bn,Ph=Jl||Jc,Ah=fn?N(fn):xn,Ch=hn?N(hn):Vn,_h=mn?N(mn):Dn,Ih=dn?N(dn):Un,Oh=vn?N(vn):Mn,Eh=si(qn),Bh=si(function(e,t){return e<=t}),xh=Ja(function(e,t){if(qi(t)||Xu(t))return void La(t,Fs(t),e);for(var r in t)wl.call(t,r)&&xr(e,r,t[r])}),Nh=Ja(function(e,t){La(t,Js(t),e)}),jh=Ja(function(e,t,r,n){La(t,Js(t),e,n)}),Vh=Ja(function(e,t,r,n){La(t,Fs(t),e,n)}),Rh=bi(Dr),Th=ia(function(e){return e.push(te,mi),a(jh,te,e)}),Dh=ia(function(e){return e.push(te,di),a(Kh,te,e)}),Uh=ri(function(e,t,r){e[t]=r},Nc(Vc)),Mh=ri(function(e,t,r){wl.call(e,t)?e[t].push(r):e[t]=[r]},Ai),Hh=ia(On),Lh=Ja(function(e,t,r){Gn(e,t,r)}),Kh=Ja(function(e,t,r,n){Gn(e,t,r,n)}),qh=bi(function(e,t){var r={};if(null==e)return r;var n=!1;t=h(t,function(t){return t=_a(t,e),n||(n=t.length>1),t}),La(e,ki(e),r),n&&(r=Lr(r,ce|le|fe,vi));for(var a=t.length;a--;)ya(r,t[a]);return r}),Fh=bi(function(e,t){return null==e?{}:Yn(e,t)}),Jh=fi(Fs),Wh=fi(Js),Gh=Xa(function(e,t,r){return t=t.toLowerCase(),e+(r?sc(t):t)}),zh=Xa(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),$h=Xa(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Xh=$a("toLowerCase"),Yh=Xa(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Qh=Xa(function(e,t,r){return e+(r?" ":"")+em(t)}),Zh=Xa(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),em=$a("toUpperCase"),tm=ia(function(e,t){try{return a(e,te,t)}catch(e){return ns(e)?e:new sl(e)}}),rm=bi(function(e,t){return o(t,function(t){t=ro(t),Tr(e,t,lh(e[t],e))}),e}),nm=ei(),am=ei(!0),im=ia(function(e,t){return function(r){return On(r,e,t)}}),om=ia(function(e,t){return function(r){return On(e,r,t)}}),um=ai(h),sm=ai(s),cm=ai(p),lm=ui(),fm=ui(!0),hm=ni(function(e,t){return e+t},0),mm=li("ceil"),dm=ni(function(e,t){return e/t},1),vm=li("floor"),pm=ni(function(e,t){return e*t},1),gm=li("round"),ym=ni(function(e,t){return e-t},0);return g.after=Ou,g.ary=Eu,g.assign=xh,g.assignIn=Nh,g.assignInWith=jh,g.assignWith=Vh,g.at=Rh,g.before=Bu,g.bind=lh,g.bindAll=rm,g.bindKey=fh,g.castArray=qu,g.chain=eu,g.chunk=oo,g.compact=uo,g.concat=so,g.cond=Bc,g.conforms=xc,g.constant=Nc,g.countBy=th,g.create=Ns,g.curry=xu,g.curryRight=Nu,g.debounce=ju,g.defaults=Th,g.defaultsDeep=Dh,g.defer=hh,g.delay=mh,g.difference=Df,g.differenceBy=Uf,g.differenceWith=Mf,g.drop=co,g.dropRight=lo,g.dropRightWhile=fo,g.dropWhile=ho,g.fill=mo,g.filter=fu,g.flatMap=hu,g.flatMapDeep=mu,g.flatMapDepth=du,g.flatten=go,g.flattenDeep=yo,g.flattenDepth=bo,g.flip=Vu,g.flow=nm,g.flowRight=am,g.fromPairs=wo,g.functions=Ms,g.functionsIn=Hs,g.groupBy=ah,g.initial=Po,g.intersection=Hf,g.intersectionBy=Lf,
g.intersectionWith=Kf,g.invert=Uh,g.invertBy=Mh,g.invokeMap=ih,g.iteratee=Rc,g.keyBy=oh,g.keys=Fs,g.keysIn=Js,g.map=yu,g.mapKeys=Ws,g.mapValues=Gs,g.matches=Tc,g.matchesProperty=Dc,g.memoize=Ru,g.merge=Lh,g.mergeWith=Kh,g.method=im,g.methodOf=om,g.mixin=Uc,g.negate=Tu,g.nthArg=Lc,g.omit=qh,g.omitBy=zs,g.once=Du,g.orderBy=bu,g.over=um,g.overArgs=dh,g.overEvery=sm,g.overSome=cm,g.partial=vh,g.partialRight=ph,g.partition=uh,g.pick=Fh,g.pickBy=$s,g.property=Kc,g.propertyOf=qc,g.pull=qf,g.pullAll=Oo,g.pullAllBy=Eo,g.pullAllWith=Bo,g.pullAt=Ff,g.range=lm,g.rangeRight=fm,g.rearg=gh,g.reject=Su,g.remove=xo,g.rest=Uu,g.reverse=No,g.sampleSize=Au,g.set=Ys,g.setWith=Qs,g.shuffle=Cu,g.slice=jo,g.sortBy=sh,g.sortedUniq=Ho,g.sortedUniqBy=Lo,g.split=bc,g.spread=Mu,g.tail=Ko,g.take=qo,g.takeRight=Fo,g.takeRightWhile=Jo,g.takeWhile=Wo,g.tap=tu,g.throttle=Hu,g.thru=ru,g.toArray=As,g.toPairs=Jh,g.toPairsIn=Wh,g.toPath=Xc,g.toPlainObject=Es,g.transform=Zs,g.unary=Lu,g.union=Jf,g.unionBy=Wf,g.unionWith=Gf,g.uniq=Go,g.uniqBy=zo,g.uniqWith=$o,g.unset=ec,g.unzip=Xo,g.unzipWith=Yo,g.update=tc,g.updateWith=rc,g.values=nc,g.valuesIn=ac,g.without=zf,g.words=Ec,g.wrap=Ku,g.xor=$f,g.xorBy=Xf,g.xorWith=Yf,g.zip=Qf,g.zipObject=Qo,g.zipObjectDeep=Zo,g.zipWith=Zf,g.entries=Jh,g.entriesIn=Wh,g.extend=Nh,g.extendWith=jh,Uc(g,g),g.add=hm,g.attempt=tm,g.camelCase=Gh,g.capitalize=sc,g.ceil=mm,g.clamp=ic,g.clone=Fu,g.cloneDeep=Wu,g.cloneDeepWith=Gu,g.cloneWith=Ju,g.conformsTo=zu,g.deburr=cc,g.defaultTo=jc,g.divide=dm,g.endsWith=lc,g.eq=$u,g.escape=fc,g.escapeRegExp=hc,g.every=lu,g.find=rh,g.findIndex=vo,g.findKey=js,g.findLast=nh,g.findLastIndex=po,g.findLastKey=Vs,g.floor=vm,g.forEach=vu,g.forEachRight=pu,g.forIn=Rs,g.forInRight=Ts,g.forOwn=Ds,g.forOwnRight=Us,g.get=Ls,g.gt=yh,g.gte=bh,g.has=Ks,g.hasIn=qs,g.head=ko,g.identity=Vc,g.includes=gu,g.indexOf=So,g.inRange=oc,g.invoke=Hh,g.isArguments=wh,g.isArray=kh,g.isArrayBuffer=Sh,g.isArrayLike=Xu,g.isArrayLikeObject=Yu,g.isBoolean=Qu,g.isBuffer=Ph,g.isDate=Ah,g.isElement=Zu,g.isEmpty=es,g.isEqual=ts,g.isEqualWith=rs,g.isError=ns,g.isFinite=as,g.isFunction=is,g.isInteger=os,g.isLength=us,g.isMap=Ch,g.isMatch=ls,g.isMatchWith=fs,g.isNaN=hs,g.isNative=ms,g.isNil=vs,g.isNull=ds,g.isNumber=ps,g.isObject=ss,g.isObjectLike=cs,g.isPlainObject=gs,g.isRegExp=_h,g.isSafeInteger=ys,g.isSet=Ih,g.isString=bs,g.isSymbol=ws,g.isTypedArray=Oh,g.isUndefined=ks,g.isWeakMap=Ss,g.isWeakSet=Ps,g.join=Ao,g.kebabCase=zh,g.last=Co,g.lastIndexOf=_o,g.lowerCase=$h,g.lowerFirst=Xh,g.lt=Eh,g.lte=Bh,g.max=Qc,g.maxBy=Zc,g.mean=el,g.meanBy=tl,g.min=rl,g.minBy=nl,g.stubArray=Fc,g.stubFalse=Jc,g.stubObject=Wc,g.stubString=Gc,g.stubTrue=zc,g.multiply=pm,g.nth=Io,g.noConflict=Mc,g.noop=Hc,g.now=ch,g.pad=mc,g.padEnd=dc,g.padStart=vc,g.parseInt=pc,g.random=uc,g.reduce=wu,g.reduceRight=ku,g.repeat=gc,g.replace=yc,g.result=Xs,g.round=gm,g.runInContext=e,g.sample=Pu,g.size=_u,g.snakeCase=Yh,g.some=Iu,g.sortedIndex=Vo,g.sortedIndexBy=Ro,g.sortedIndexOf=To,g.sortedLastIndex=Do,g.sortedLastIndexBy=Uo,g.sortedLastIndexOf=Mo,g.startCase=Qh,g.startsWith=wc,g.subtract=ym,g.sum=al,g.sumBy=il,g.template=kc,g.times=$c,g.toFinite=Cs,g.toInteger=_s,g.toLength=Is,g.toLower=Sc,g.toNumber=Os,g.toSafeInteger=Bs,g.toString=xs,g.toUpper=Pc,g.trim=Ac,g.trimEnd=Cc,g.trimStart=_c,g.truncate=Ic,g.unescape=Oc,g.uniqueId=Yc,g.upperCase=Zh,g.upperFirst=em,g.each=vu,g.eachRight=pu,g.first=ko,Uc(g,function(){var e={};return an(g,function(t,r){wl.call(g.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),g.VERSION=re,o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){g[e].placeholder=g}),o(["drop","take"],function(e,t){Q.prototype[e]=function(r){r=r===te?1:$l(_s(r),0);var n=this.__filtered__&&!t?new Q(this):this.clone();return n.__filtered__?n.__takeCount__=Xl(r,n.__takeCount__):n.__views__.push({size:Xl(r,Re),type:e+(n.__dir__<0?"Right":"")}),n},Q.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==Oe||r==Be;Q.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ai(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),o(["head","last"],function(e,t){var r="take"+(t?"Right":"");Q.prototype[e]=function(){return this[r](1).value()[0]}}),o(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Q.prototype[e]=function(){return this.__filtered__?new Q(this):this[r](1)}}),Q.prototype.compact=function(){return this.filter(Vc)},Q.prototype.find=function(e){return this.filter(e).head()},Q.prototype.findLast=function(e){return this.reverse().find(e)},Q.prototype.invokeMap=ia(function(e,t){return"function"==typeof e?new Q(this):this.map(function(r){return On(r,e,t)})}),Q.prototype.reject=function(e){return this.filter(Tu(Ai(e)))},Q.prototype.slice=function(e,t){e=_s(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Q(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==te&&(t=_s(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Q.prototype.toArray=function(){return this.take(Re)},an(Q.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),a=g[n?"take"+("last"==t?"Right":""):t],i=n||/^find/.test(t);a&&(g.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,u=t instanceof Q,s=o[0],c=u||kh(t),l=function(e){var t=a.apply(g,m([e],o));return n&&f?t[0]:t};c&&r&&"function"==typeof s&&1!=s.length&&(u=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=i&&!f,v=u&&!h;if(!i&&c){t=v?t:new Q(this);var p=e.apply(t,o);return p.__actions__.push({func:ru,args:[l],thisArg:te}),new z(p,f)}return d&&v?e.apply(this,o):(p=this.thru(l),d?n?p.value()[0]:p.value():p)})}),o(["pop","push","shift","sort","splice","unshift"],function(e){var t=vl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);g.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(kh(a)?a:[],e)}return this[r](function(r){return t.apply(kh(r)?r:[],e)})}}),an(Q.prototype,function(e,t){var r=g[t];if(r){var n=r.name+"",a=cf[n]||(cf[n]=[]);a.push({name:t,func:r})}}),cf[ti(te,ve).name]=[{name:"wrapper",func:te}],Q.prototype.clone=Z,Q.prototype.reverse=Ht,Q.prototype.value=Qt,g.prototype.at=eh,g.prototype.chain=nu,g.prototype.commit=au,g.prototype.next=iu,g.prototype.plant=uu,g.prototype.reverse=su,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=cu,g.prototype.first=g.prototype.head,Tl&&(g.prototype[Tl]=ou),g},kn=wn();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nn._=kn,define(function(){return kn})):on?((on.exports=kn)._=kn,an._=kn):nn._=kn}).call(this)},function(e,t,r){(function(r){function n(e,t){if(e instanceof o)return e;if("string"!=typeof e)return null;if(e.length>X)return null;var r=t?Q[ve]:Q[he];if(!r.test(e))return null;try{return new o(e,t)}catch(e){return null}}function a(e,t){var r=n(e,t);return r?r.version:null}function i(e,t){var r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}function o(e,t){if(e instanceof o){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>X)throw new TypeError("version is longer than "+X+" characters");if(!(this instanceof o))return new o(e,t);$("SemVer",e,t),this.loose=t;var r=e.trim().match(t?Q[ve]:Q[he]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Y||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Y||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Y||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<Y)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}function u(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new o(e,r).inc(t,n).version}catch(e){return null}}function s(e,t){if(k(e,t))return null;var r=n(e),a=n(t);if(r.prerelease.length||a.prerelease.length){for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==a[i])return"pre"+i;return"prerelease"}for(var i in r)if(("major"===i||"minor"===i||"patch"===i)&&r[i]!==a[i])return i}function c(e,t){var r=Le.test(e),n=Le.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function l(e,t){return c(t,e)}function f(e,t){return new o(e,t).major}function h(e,t){return new o(e,t).minor}function m(e,t){return new o(e,t).patch}function d(e,t,r){return new o(e,r).compare(new o(t,r))}function v(e,t){return d(e,t,!0)}function p(e,t,r){return d(t,e,r)}function g(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})}function y(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})}function b(e,t,r){return d(e,t,r)>0}function w(e,t,r){return d(e,t,r)<0}function k(e,t,r){return 0===d(e,t,r)}function S(e,t,r){return 0!==d(e,t,r)}function P(e,t,r){return d(e,t,r)>=0}function A(e,t,r){return d(e,t,r)<=0}function C(e,t,r,n){var a;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),a=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),a=e!==r;break;case"":case"=":case"==":a=k(e,r,n);break;case"!=":a=S(e,r,n);break;case">":a=b(e,r,n);break;case">=":a=P(e,r,n);break;case"<":a=w(e,r,n);break;case"<=":a=A(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return a}function _(e,t){if(e instanceof _){if(e.loose===t)return e;e=e.value}return this instanceof _?($("comparator",e,t),this.loose=t,this.parse(e),this.semver===Ke?this.value="":this.value=this.operator+this.semver.version,void $("comp",this)):new _(e,t)}function I(e,t){if(e instanceof I)return e.loose===t?e:new I(e.raw,t);if(e instanceof _)return new I(e.value,t);if(!(this instanceof I))return new I(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function O(e,t){return new I(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function E(e,t){return $("comp",e),e=j(e,t),$("caret",e),e=x(e,t),$("tildes",e),e=R(e,t),$("xrange",e),e=D(e,t),$("stars",e),e}function B(e){return!e||"x"===e.toLowerCase()||"*"===e}function x(e,t){return e.trim().split(/\s+/).map(function(e){return N(e,t)}).join(" ")}function N(e,t){var r=t?Q[Ie]:Q[_e];return e.replace(r,function(t,r,n,a,i){$("tilde",e,t,r,n,a,i);var o;return B(r)?o="":B(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":B(a)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":i?($("replaceTilde pr",i),"-"!==i.charAt(0)&&(i="-"+i),o=">="+r+"."+n+"."+a+i+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+a+" <"+r+"."+(+n+1)+".0",$("tilde return",o),o})}function j(e,t){return e.trim().split(/\s+/).map(function(e){return V(e,t)}).join(" ")}function V(e,t){$("caret",e,t);var r=t?Q[Ne]:Q[xe];return e.replace(r,function(t,r,n,a,i){$("caret",e,t,r,n,a,i);var o;return B(r)?o="":B(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":B(a)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":i?($("replaceCaret pr",i),"-"!==i.charAt(0)&&(i="-"+i),o="0"===r?"0"===n?">="+r+"."+n+"."+a+i+" <"+r+"."+n+"."+(+a+1):">="+r+"."+n+"."+a+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+a+i+" <"+(+r+1)+".0.0"):($("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+a+" <"+r+"."+n+"."+(+a+1):">="+r+"."+n+"."+a+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+a+" <"+(+r+1)+".0.0"),$("caret return",o),o})}function R(e,t){return $("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return T(e,t)}).join(" ")}function T(e,t){e=e.trim();var r=t?Q[Se]:Q[ke];return e.replace(r,function(t,r,n,a,i,o){$("xRange",e,t,r,n,a,i,o);var u=B(n),s=u||B(a),c=s||B(i),l=c;return"="===r&&l&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(s&&(a=0),c&&(i=0),">"===r?(r=">=",s?(n=+n+1,a=0,i=0):c&&(a=+a+1,i=0)):"<="===r&&(r="<",s?n=+n+1:a=+a+1),t=r+n+"."+a+"."+i):s?t=">="+n+".0.0 <"+(+n+1)+".0.0":c&&(t=">="+n+"."+a+".0 <"+n+"."+(+a+1)+".0"),$("xRange return",t),t})}function D(e,t){return $("replaceStars",e,t),e.trim().replace(Q[Me],"")}function U(e,t,r,n,a,i,o,u,s,c,l,f,h){return t=B(r)?"":B(n)?">="+r+".0.0":B(a)?">="+r+"."+n+".0":">="+t,u=B(s)?"":B(c)?"<"+(+s+1)+".0.0":B(l)?"<"+s+"."+(+c+1)+".0":f?"<="+s+"."+c+"."+l+"-"+f:"<="+u,(t+" "+u).trim()}function M(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(var r=0;r<e.length;r++)if($(e[r].semver),e[r].semver!==Ke&&e[r].semver.prerelease.length>0){var n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}function H(e,t,r){try{t=new I(t,r)}catch(e){return!1}return t.test(e)}function L(e,t,r){var n=null,a=null;try{var i=new I(t,r)}catch(e){return null}return e.forEach(function(e){i.test(e)&&(n&&a.compare(e)!==-1||(n=e,a=new o(n,r)))}),n}function K(e,t,r){var n=null,a=null;try{var i=new I(t,r)}catch(e){return null}return e.forEach(function(e){i.test(e)&&(n&&1!==a.compare(e)||(n=e,a=new o(n,r)))}),n}function q(e,t){try{return new I(e,t).range||"*"}catch(e){return null}}function F(e,t,r){return W(e,t,"<",r)}function J(e,t,r){return W(e,t,">",r)}function W(e,t,r,n){e=new o(e,n),t=new I(t,n);var a,i,u,s,c;switch(r){case">":a=b,i=A,u=w,s=">",c=">=";break;case"<":a=w,i=P,u=b,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(H(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var f=t.set[l],h=null,m=null;if(f.forEach(function(e){e.semver===Ke&&(e=new _(">=0.0.0")),h=h||e,m=m||e,a(e.semver,h.semver,n)?h=e:u(e.semver,m.semver,n)&&(m=e)}),h.operator===s||h.operator===c)return!1;if((!m.operator||m.operator===s)&&i(e,m.semver))return!1;if(m.operator===c&&u(e,m.semver))return!1}return!0}function G(e,t){var r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}function z(e,t,r){return e=new I(e,r),t=new I(t,r),e.intersects(t)}t=e.exports=o;var $;$="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER")}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var X=256,Y=Number.MAX_SAFE_INTEGER||9007199254740991,Q=t.re=[],Z=t.src=[],ee=0,te=ee++;Z[te]="0|[1-9]\\d*";var re=ee++;Z[re]="[0-9]+";var ne=ee++;Z[ne]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ae=ee++;Z[ae]="("+Z[te]+")\\.("+Z[te]+")\\.("+Z[te]+")";var ie=ee++;Z[ie]="("+Z[re]+")\\.("+Z[re]+")\\.("+Z[re]+")";var oe=ee++;Z[oe]="(?:"+Z[te]+"|"+Z[ne]+")";var ue=ee++;Z[ue]="(?:"+Z[re]+"|"+Z[ne]+")";var se=ee++;Z[se]="(?:-("+Z[oe]+"(?:\\."+Z[oe]+")*))";var ce=ee++;Z[ce]="(?:-?("+Z[ue]+"(?:\\."+Z[ue]+")*))";var le=ee++;Z[le]="[0-9A-Za-z-]+";var fe=ee++;Z[fe]="(?:\\+("+Z[le]+"(?:\\."+Z[le]+")*))";var he=ee++,me="v?"+Z[ae]+Z[se]+"?"+Z[fe]+"?";Z[he]="^"+me+"$";var de="[v=\\s]*"+Z[ie]+Z[ce]+"?"+Z[fe]+"?",ve=ee++;Z[ve]="^"+de+"$";var pe=ee++;Z[pe]="((?:<|>)?=?)";var ge=ee++;Z[ge]=Z[re]+"|x|X|\\*";var ye=ee++;Z[ye]=Z[te]+"|x|X|\\*";var be=ee++;Z[be]="[v=\\s]*("+Z[ye]+")(?:\\.("+Z[ye]+")(?:\\.("+Z[ye]+")(?:"+Z[se]+")?"+Z[fe]+"?)?)?";var we=ee++;Z[we]="[v=\\s]*("+Z[ge]+")(?:\\.("+Z[ge]+")(?:\\.("+Z[ge]+")(?:"+Z[ce]+")?"+Z[fe]+"?)?)?";var ke=ee++;Z[ke]="^"+Z[pe]+"\\s*"+Z[be]+"$";var Se=ee++;Z[Se]="^"+Z[pe]+"\\s*"+Z[we]+"$";var Pe=ee++;Z[Pe]="(?:~>?)";var Ae=ee++;Z[Ae]="(\\s*)"+Z[Pe]+"\\s+",Q[Ae]=new RegExp(Z[Ae],"g");var Ce="$1~",_e=ee++;Z[_e]="^"+Z[Pe]+Z[be]+"$";var Ie=ee++;Z[Ie]="^"+Z[Pe]+Z[we]+"$";var Oe=ee++;Z[Oe]="(?:\\^)";var Ee=ee++;Z[Ee]="(\\s*)"+Z[Oe]+"\\s+",Q[Ee]=new RegExp(Z[Ee],"g");var Be="$1^",xe=ee++;Z[xe]="^"+Z[Oe]+Z[be]+"$";var Ne=ee++;Z[Ne]="^"+Z[Oe]+Z[we]+"$";var je=ee++;Z[je]="^"+Z[pe]+"\\s*("+de+")$|^$";var Ve=ee++;Z[Ve]="^"+Z[pe]+"\\s*("+me+")$|^$";var Re=ee++;Z[Re]="(\\s*)"+Z[pe]+"\\s*("+de+"|"+Z[be]+")",Q[Re]=new RegExp(Z[Re],"g");var Te="$1$2$3",De=ee++;Z[De]="^\\s*("+Z[be]+")\\s+-\\s+("+Z[be]+")\\s*$";var Ue=ee++;Z[Ue]="^\\s*("+Z[we]+")\\s+-\\s+("+Z[we]+")\\s*$";var Me=ee++;Z[Me]="(<|>)?=?\\s*\\*";for(var He=0;He<ee;He++)$(He,Z[He]),Q[He]||(Q[He]=new RegExp(Z[He]));t.parse=n,t.valid=a,t.clean=i,t.SemVer=o,o.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},o.prototype.toString=function(){return this.version},o.prototype.compare=function(e){return $("SemVer.compare",this.version,this.loose,e),e instanceof o||(e=new o(e,this.loose)),this.compareMain(e)||this.comparePre(e)},o.prototype.compareMain=function(e){return e instanceof o||(e=new o(e,this.loose)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)},o.prototype.comparePre=function(e){if(e instanceof o||(e=new o(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if($("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return c(r,n)}while(++t)},o.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=u,t.diff=s,t.compareIdentifiers=c;var Le=/^[0-9]+$/;t.rcompareIdentifiers=l,t.major=f,t.minor=h,t.patch=m,t.compare=d,t.compareLoose=v,t.rcompare=p,t.sort=g,t.rsort=y,t.gt=b,t.lt=w,t.eq=k,t.neq=S,t.gte=P,t.lte=A,t.cmp=C,t.Comparator=_;var Ke={};_.prototype.parse=function(e){var t=this.loose?Q[je]:Q[Ve],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new o(r[2],this.loose):this.semver=Ke},_.prototype.toString=function(){return this.value},_.prototype.test=function(e){return $("Comparator.test",e,this.loose),this.semver===Ke||("string"==typeof e&&(e=new o(e,this.loose)),C(e,this.operator,this.semver,this.loose))},_.prototype.intersects=function(e,t){if(!(e instanceof _))throw new TypeError("a Comparator is required");var r;if(""===this.operator)return r=new I(e.value,t),H(this.value,r,t);if(""===e.operator)return r=new I(this.value,t),H(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),a=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),u=C(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=C(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||a||i&&o||u||s},t.Range=I,I.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},I.prototype.toString=function(){return this.range},I.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),$("range",e,t);var r=t?Q[Ue]:Q[De];e=e.replace(r,U),$("hyphen replace",e),e=e.replace(Q[Re],Te),$("comparator trim",e,Q[Re]),e=e.replace(Q[Ae],Ce),e=e.replace(Q[Ee],Be),e=e.split(/\s+/).join(" ");var n=t?Q[je]:Q[Ve],a=e.split(" ").map(function(e){return E(e,t)}).join(" ").split(/\s+/);return this.loose&&(a=a.filter(function(e){return!!e.match(n)})),a=a.map(function(e){return new _(e,t)})},I.prototype.intersects=function(e,t){if(!(e instanceof I))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=O,I.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new o(e,this.loose));for(var t=0;t<this.set.length;t++)if(M(this.set[t],e))return!0;return!1},t.satisfies=H,t.maxSatisfying=L,t.minSatisfying=K,t.validRange=q,t.ltr=F,t.gtr=J,t.outside=W,t.prerelease=G,t.intersects=z}).call(t,r(332))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){v&&m&&(v=!1,m.length?d=m.concat(d):p=-1,d.length&&u())}function u(){if(!v){var e=a(o);v=!0;for(var t=d.length;t;){for(m=d,d=[];++p<t;)m&&m[p].run();p=-1,t=d.length}m=null,v=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var m,d=[],v=!1,p=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new s(e,t)),1!==d.length||v||a(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a="https://localhost:10443/v1",i="/trust1team/gclds/v1",o="/trust1team/ocv-api/v1",u="/gcl-ds-web/v1",s="/trust1team/gclds-file/v1",c=!0,l=!1,f=!1,h=function(){function e(e,t){this._gclUrl=a,this._dsUrl=e+i,this._ocvUrl=e+o,this._dsFileDownloadUrl=e+s,this._dsUrlBase=e,this._apiKey=t,this._jwt="none",this._citrix=!1,this._agentPort=-1,this._allowAutoUpdate=c,this._implicitDownload=l,this._localTestMode=f,this._forceHardwarePinpad=!1,this._defaultSessionTimeout=5,this._defaultConsentDuration=1,this._syncManaged=!0}return Object.defineProperty(e.prototype,"ocvUrl",{get:function(){return this._ocvUrl},set:function(e){this._ocvUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gclUrl",{get:function(){return this._gclUrl},set:function(e){this._gclUrl=e||a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsUrl",{get:function(){return this._dsUrl},set:function(e){n.endsWith(e,i)?(this._dsUrlBase=n.replace(e,i,""),this._dsUrl=e,this._dsFileDownloadUrl=this._dsUrlBase+s,this._ocvUrl=this._dsUrlBase+o):(this._dsUrl=e+i,this._dsFileDownloadUrl=e+s,this._dsUrlBase=e,this._ocvUrl=e+o)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){return this._apiKey},set:function(e){this._apiKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowAutoUpdate",{get:function(){return this._allowAutoUpdate},set:function(e){this._allowAutoUpdate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_id",{get:function(){return this._client_id},set:function(e){this._client_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_secret",{get:function(){return this._client_secret},set:function(e){this._client_secret=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jwt",{get:function(){return this._jwt},set:function(e){this._jwt=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citrix",{get:function(){return this._citrix},set:function(e){this._citrix=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"agentPort",{get:function(){return this._agentPort},set:function(e){this._agentPort=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implicitDownload",{get:function(){return this._implicitDownload},set:function(e){this._implicitDownload=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsFileDownloadUrl",{get:function(){return this._dsFileDownloadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsUrlBase",{get:function(){return this._dsUrlBase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localTestMode",{get:function(){return this._localTestMode},set:function(e){this._localTestMode=e,this._localTestMode&&(this._dsUrl=this._dsUrlBase+u)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceHardwarePinpad",{get:function(){return this._forceHardwarePinpad},set:function(e){this._forceHardwarePinpad=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultSessionTimeout",{get:function(){return this._defaultSessionTimeout},set:function(e){this._defaultSessionTimeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenCompatible",{get:function(){return this._tokenCompatible},set:function(e){this._tokenCompatible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultConsentDuration",{get:function(){return this._defaultConsentDuration},set:function(e){this._defaultConsentDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"syncManaged",{get:function(){return this._syncManaged},set:function(e){this._syncManaged=e},enumerable:!0,configurable:!0}),e}();t.GCLConfig=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=r(335),i=r(337),o=r(340),u="/consent",s="/",c="/plugins",l="/card-readers",f="/admin/activate",h="/admin/certificate",m=function(){function e(e,t){this.url=e,this.connection=t}return e.cardInsertedFilter=function(e){return{"card-inserted":e}},e.platformInfo=function(){return{data:{manufacturer:a.manufacturer||"",browser:{name:a.name,version:a.version},os:{name:a.os.family,version:a.os.version,architecture:a.os.architecture},ua:a.ua},success:!0}},e.prototype.activate=function(e){return this.connection.post(this.url,f,{},void 0,e)},e.prototype.getConsent=function(e,t,r,n,a,i,s){if(!e||!e.length)return o.ResponseHandler.error({status:400,description:"Title is required!",code:"801"},s);if(!t||!t.length)return o.ResponseHandler.error({status:400,description:"Code word is required!",code:"801"},s);var c=this.connection.cfg.defaultConsentDuration;return r&&(c=r),this.connection.post(this.url,u,{title:e,text:t,days:c,alert_level:n,alert_position:a,type:i},void 0,s)},e.prototype.getPubKey=function(e){return this.connection.get(this.url,h,void 0,e)},e.prototype.info=function(e){return this.connection.getSkipCitrix(this.url,s,void 0,e)},e.prototype.infoBrowser=function(t){return t?void t(null,e.platformInfo()):i.Promise.resolve(e.platformInfo())},e.prototype.plugins=function(e){return this.connection.getSkipCitrix(this.url,c,void 0,e)},e.prototype.pollCardInserted=function(e,t,r,a,o){function u(e,i){n.delay(function(){--s,c.readers(function(c,l){if(c&&(r&&r(),u(e,i)),0===s){if(o)return o();i&&i({success:!1,message:"Timed out"})}else if(0===l.data.length)r&&r(),u(e,i);else{var f=n.find(l.data,function(e){return n.has(e,"card")});null!=f?(t(null,f),e(f)):(a&&a(),u(e,i))}})},1e3)}var s=e||30,c=this;return t&&"function"==typeof t||(t=function(){}),new i.Promise(function(e,t){u(e,t)})},e.prototype.pollReadersWithCards=function(e,t,r,a,o){function u(e,i){n.delay(function(){--s,c.readers(function(c,l){if(c&&(r&&r(),u(e,i)),0===s){if(o)return o();i&&i({success:!1,message:"Timed out"})}else if(n.isEmpty(l)||n.isEmpty(l.data))r&&r(),u(e,i);else{var f=n.filter(l.data,function(e){return n.has(e,"card")});if(f.length){var h={data:f,success:!0};t(null,h),e(h)}else a&&a(),u(e,i)}})},1e3)}var s=e||30,c=this;return t&&"function"==typeof t||(t=function(){}),new i.Promise(function(e,t){u(e,t)})},e.prototype.pollReaders=function(e,t,r,a){function o(e,i){n.delay(function(){--u,s.readers(function(s,c){if(s&&(r&&r(),o(e,i)),0===u){if(a)return a();i&&i({success:!1,message:"Timed out"})}else n.isEmpty(c)||n.isEmpty(c.data)?(r&&r(),o(e,i)):(t(null,c),e(c))})},1e3)}var u=e||30,s=this;return t&&"function"==typeof t||(t=function(){}),new i.Promise(function(e,t){o(e,t)})},e.prototype.reader=function(e,t){return this.connection.get(this.url,l+"/"+e,void 0,t)},e.prototype.readers=function(e){return this.connection.get(this.url,l,void 0,e)},e.prototype.readersCardAvailable=function(t){return this.connection.get(this.url,l,e.cardInsertedFilter(!0),t)},e.prototype.readersCardsUnavailable=function(t){return this.connection.get(this.url,l,e.cardInsertedFilter(!1),t)},e.prototype.setPubKey=function(e,t){return this.connection.put(this.url,h,{certificate:e},void 0,t)},e.prototype.infoBrowserSync=function(){return e.platformInfo()},e.prototype.getUrl=function(){return this.url},e.prototype.version=function(){return i.Promise.resolve("v1.8.0")},e}();t.CoreService=m},function(e,t,r){var n;(function(e,a){(function(){"use strict";function i(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t,r){var n={6.4:"10",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),e=s(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").split(" on ")[0])}function u(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=S)for(;++r<n;)t(e[r],r,e);else c(e,t)}function s(e){return e=d(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:i(e)}function c(e,t){for(var r in e)_.call(e,r)&&t(e[r],r,e)}function l(e){return null==e?i(e):I.call(e).slice(8,-1)}function f(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}function h(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var r=null;return u(e,function(n,a){r=t(r,n,a,e)}),r}function d(e){return String(e).replace(/^ +| +$/g,"")}function v(e){function t(t){return m(t,function(t,r){return t||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(e)&&(r.label||r)})}function r(t){return m(t,function(t,r,n){return t||(r[$]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec($)]||RegExp("\\b"+h(n)+"(?:\\b|\\w*\\d)","i").exec(e))&&n})}function n(t){return m(t,function(t,r){return t||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(e)&&(r.label||r)})}function a(t){return m(t,function(t,r){var n=r.pattern||h(r);return!t&&(t=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=o(t,n,r.label||r)),
t})}function i(t){return m(t,function(t,r){var n=r.pattern||h(r);return!t&&(t=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),r=r.label||r,t=s(t[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function u(t){return m(t,function(t,r){return t||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function p(){return this.description||""}var b=g,w=e&&"object"==typeof e&&"String"!=l(e);w&&(b=e,e=null);var k=b.navigator||{},S=k.userAgent||"";e||(e=S);var C,_,O=w||A==y,E=w?!!k.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(I.toString()),B="Object",x=w?B:"ScriptBridgingProxyObject",N=w?B:"Environment",j=w&&b.java?"JavaPackage":l(b.java),V=w?B:"RuntimeObject",R=/\bJava/.test(j)&&b.java,T=R&&l(b.environment)==N,D=R?"a":"α",U=R?"b":"β",M=b.document||{},H=b.operamini||b.opera,L=P.test(L=w&&H?H["[[Class]]"]:l(H))?L:H=null,K=e,q=[],F=null,J=e==S,W=J&&H&&"function"==typeof H.version&&H.version(),G=t(["Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),z=n(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),$=i([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),X=r({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Y=a(["Windows Phone ","Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(G&&(G=[G]),X&&!$&&($=i([X])),(C=/\bGoogle TV\b/.exec($))&&($=C[0]),/\bSimulator\b/i.test(e)&&($=($?$+" ":"")+"Simulator"),"Opera Mini"==z&&/\bOPiOS\b/.test(e)&&q.push("running in Turbo/Uncompressed mode"),/^iP/.test($)?(z||(z="Safari"),Y="iOS"+((C=/ OS ([\d_]+)/i.exec(e))?" "+C[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test(Y)?X&&"Google"!=X&&(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test($))?(z="Android Browser",Y=/\bAndroid\b/.test(Y)?Y:"Android"):z&&!(C=!/\bMinefield\b|\(Android;/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(z))||(z&&!$&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(C+"/")+8))&&(z=null),(C=$||X||Y)&&($||X||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Y))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Y)?Y:C)+" Browser")):Y="Kubuntu",(C=/\((Mobile|Tablet).*?Firefox\b/i.exec(e))&&C[1]&&(Y="Firefox OS",$||($=C[1])),W||(W=u(["(?:Cloud9|CriOS|CrMo|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",h(z),"(?:Firefox|Minefield|NetFront)"])),"iCab"==G&&parseFloat(W)>3?G=["WebKit"]:"Trident"!=G&&(C=/\bOpera\b/.test(z)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&"WebKit"||!G&&/\bMSIE\b/i.test(e)&&("Mac OS"==Y?"Tasman":"Trident"))?G=[C]:/\bPlayStation\b(?! Vita\b)/i.test(z)&&"WebKit"==G&&(G=["NetFront"]),"IE"==z&&(C=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(z+=" Mobile",Y="Windows Phone "+(/\+$/.test(C)?C:C+".x"),q.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(z="IE Mobile",Y="Windows Phone 8+",q.unshift("desktop mode"),W||(W=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=z&&"Trident"==G&&(C=/\brv:([\d.]+)/.exec(e))?(/\bWPDesktop\b/i.test(e)||(z&&q.push("identifying as "+z+(W?" "+W:"")),z="IE"),W=C[1]):"Chrome"!=z&&"IE"==z||!(C=/\bEdge\/([\d.]+)/.exec(e))||(z="Microsoft Edge",W=C[1],G=["Trident"]),J){if(f(b,"global"))if(R&&(C=R.lang.System,K=C.getProperty("os.arch"),Y=Y||C.getProperty("os.name")+" "+C.getProperty("os.version")),O&&f(b,"system")&&(C=[b.system])[0]){Y||(Y=C[0].os||null);try{C[1]=b.require("ringo/engine").version,W=C[1].join("."),z="RingoJS"}catch(e){C[0].global.system==b.system&&(z="Narwhal")}}else"object"==typeof b.process&&(C=b.process)?(z="Node.js",K=C.arch,Y=C.platform,W=/[\d.]+/.exec(C.version)[0]):T&&(z="Rhino");else l(C=b.runtime)==x?(z="Adobe AIR",Y=C.flash.system.Capabilities.os):l(C=b.phantom)==V?(z="PhantomJS",W=(C=C.version||null)&&C.major+"."+C.minor+"."+C.patch):"number"==typeof M.documentMode&&(C=/\bTrident\/(\d+)/i.exec(e))&&(W=[W,M.documentMode],(C=+C[1]+4)!=W[1]&&(q.push("IE "+W[1]+" mode"),G&&(G[1]=""),W[1]=C),W="IE"==z?String(W[1].toFixed(1)):W[0]);Y=Y&&s(Y)}W&&(C=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(W)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(J&&k.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(F=/b/i.test(C)?"beta":"alpha",W=W.replace(RegExp(C+"\\+?$"),"")+("beta"==F?U:D)+(/\d+\+?/.exec(C)||"")),"Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test(Y)?z="Firefox Mobile":"Maxthon"==z&&W?W=W.replace(/\.[\d.]+/,".x"):"Silk"==z?(/\bMobi/i.test(e)||(Y="Android",q.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&q.unshift("accelerated")):/\bXbox\b/i.test($)?(Y=null,"Xbox 360"==$&&/\bIEMobile\b/.test(e)&&q.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||$||/Browser|Mobi/.test(z))||"Windows CE"!=Y&&!/Mobi/i.test(e)?"IE"==z&&J&&null===b.external?q.unshift("platform preview"):(/\bBlackBerry\b/.test($)||/\bBB10\b/.test(e))&&(C=(RegExp($.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||W)?(C=[C,/BB10/.test(e)],Y=(C[1]?($=null,X="BlackBerry"):"Device Software")+" "+C[0],W=null):this!=c&&"Wii"!=$&&(J&&H||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test(Y)||"IE"==z&&(Y&&!/^Win/.test(Y)&&W>5.5||/\bWindows XP\b/.test(Y)&&W>8||8==W&&!/\bTrident\b/.test(e)))&&!P.test(C=v.call(c,e.replace(P,"")+";"))&&C.name&&(C="ing as "+C.name+((C=C.version)?" "+C:""),P.test(z)?(/\bIE\b/.test(C)&&"Mac OS"==Y&&(Y=null),C="identify"+C):(C="mask"+C,z=L?s(L.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(C)&&(Y=null),J||(W=null)),G=["Presto"],q.push(C)):z+=" Mobile",(C=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(C=[parseFloat(C.replace(/\.(\d)$/,".0$1")),C],"Safari"==z&&"+"==C[1].slice(-1)?(z="WebKit Nightly",F="alpha",W=C[1].slice(0,-1)):W!=C[1]&&W!=(C[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(W=null),C[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==C[0]&&537.36==C[2]&&parseFloat(C[1])>=28&&"IE"!=z&&"Microsoft Edge"!=z&&(G=["Blink"]),J&&(E||C[1])?(G&&(G[1]="like Chrome"),C=C[1]||(C=C[0],C<530?1:C<532?2:C<532.05?3:C<533?4:C<534.03?5:C<534.07?6:C<534.1?7:C<534.13?8:C<534.16?9:C<534.24?10:C<534.3?11:C<535.01?12:C<535.02?"13+":C<535.07?15:C<535.11?16:C<535.19?17:C<536.05?18:C<536.1?19:C<537.01?20:C<537.11?"21+":C<537.13?23:C<537.18?24:C<537.24?25:C<537.36?26:"Blink"!=G?"27":"28")):(G&&(G[1]="like Safari"),C=C[0],C=C<400?1:C<500?2:C<526?3:C<533?4:C<534?"4+":C<535?5:C<537?6:C<538?7:C<601?8:"8"),G&&(G[1]+=" "+(C+="number"==typeof C?".x":/[.+]/.test(C)?"":"+")),"Safari"==z&&(!W||parseInt(W)>45)&&(W=C)),"Opera"==z&&(C=/\bzbov|zvav$/.exec(Y))?(z+=" ",q.unshift("desktop mode"),"zvav"==C?(z+="Mini",W=null):z+="Mobile",Y=Y.replace(RegExp(" *"+C+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(G&&G[1])&&(q.unshift("desktop mode"),z="Chrome Mobile",W=null,/\bOS X\b/.test(Y)?(X="Apple",Y="iOS 4.3+"):Y=null),W&&0==W.indexOf(C=/[\d.]+$/.exec(Y))&&e.indexOf("/"+C+"-")>-1&&(Y=d(Y.replace(C,""))),G&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(z)&&G[1])&&(C=G[G.length-1])&&q.push(C),q.length&&(q=["("+q.join("; ")+")"]),X&&$&&$.indexOf(X)<0&&q.push("on "+X),$&&q.push((/^on /.test(q[q.length-1])?"":"on ")+$),Y&&(C=/ ([\d.+]+)$/.exec(Y),_=C&&"/"==Y.charAt(Y.length-C[0].length-1),Y={architecture:32,family:C&&!_?Y.replace(C[0],""):Y,version:C?C[1]:null,toString:function(){var e=this.version;return this.family+(e&&!_?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(C=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(K))&&!/\bi686\b/i.test(K)&&(Y&&(Y.architecture=64,Y.family=Y.family.replace(RegExp(" *"+C),"")),z&&(/\bWOW64\b/i.test(e)||J&&/\w(?:86|32)$/.test(k.cpuClass||k.platform)&&!/\bWin64; x64\b/i.test(e))&&q.unshift("32-bit")),e||(e=null);var Q={};return Q.description=e,Q.layout=G&&G[0],Q.manufacturer=X,Q.name=z,Q.prerelease=F,Q.product=$,Q.ua=e,Q.version=z&&W,Q.os=Y||{architecture:null,family:null,version:null,toString:function(){return"null"}},Q.parse=v,Q.toString=p,Q.version&&q.unshift(W),Q.name&&q.unshift(z),Y&&z&&(Y!=String(Y).split(" ")[0]||Y!=z.split(" ")[0]&&!$)&&q.push($?"("+Y+")":"on "+Y),q.length&&(Q.description=q.join(" ")),Q}var p={function:!0,object:!0},g=p[typeof window]&&window||this,y=g,b=p[typeof t]&&t,w=p[typeof e]&&e&&!e.nodeType&&e,k=b&&w&&"object"==typeof a&&a;!k||k.global!==k&&k.window!==k&&k.self!==k||(g=k);var S=Math.pow(2,53)-1,P=/\bOpera/,A=this,C=Object.prototype,_=C.hasOwnProperty,I=C.toString;n=function(){return v()}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}).call(this)}).call(t,r(336)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){var n;(function(e,a,i){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function s(e){X=e}function c(e){ee=e}function l(){return function(){e.nextTick(v)}}function f(){return function(){$(v)}}function h(){var e=0,t=new ne(v),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function m(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(v,1)}}function v(){for(var e=0;e<Z;e+=2){var t=oe[e],r=oe[e+1];t(r),oe[e]=void 0,oe[e+1]=void 0}Z=0}function p(){try{var e=r(338);return $=e.runOnLoop||e.runOnContext,f()}catch(e){return d()}}function g(e,t){var r=this,n=new this.constructor(b);void 0===n[ce]&&U(n);var a=r._state;if(a){var i=arguments[a-1];ee(function(){R(a,n,i,r._result)})}else x(r,n,e,t);return n}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(b);return I(r,e),r}function b(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function k(){return new TypeError("A promises callback cannot return that same promise.")}function S(e){try{return e.then}catch(e){return me.error=e,me}}function P(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function A(e,t,r){ee(function(e){var n=!1,a=P(r,t,function(r){n||(n=!0,t!==r?I(e,r):E(e,r))},function(t){n||(n=!0,B(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&a&&(n=!0,B(e,a))},e)}function C(e,t){t._state===fe?E(e,t._result):t._state===he?B(e,t._result):x(t,void 0,function(t){I(e,t)},function(t){B(e,t)})}function _(e,t,r){t.constructor===e.constructor&&r===ue&&constructor.resolve===se?C(e,t):r===me?B(e,me.error):void 0===r?E(e,t):u(r)?A(e,t,r):E(e,t)}function I(e,t){e===t?B(e,w()):o(t)?_(e,t,S(t)):E(e,t)}function O(e){e._onerror&&e._onerror(e._result),N(e)}function E(e,t){e._state===le&&(e._result=t,e._state=fe,0!==e._subscribers.length&&ee(N,e))}function B(e,t){e._state===le&&(e._state=he,e._result=t,ee(O,e))}function x(e,t,r,n){var a=e._subscribers,i=a.length;e._onerror=null,a[i]=t,a[i+fe]=r,a[i+he]=n,0===i&&e._state&&ee(N,e)}function N(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,a,i=e._result,o=0;o<t.length;o+=3)n=t[o],a=t[o+r],n?R(r,n,a,i):a(i);e._subscribers.length=0}}function j(){this.error=null}function V(e,t){try{return e(t)}catch(e){return de.error=e,de}}function R(e,t,r,n){var a,i,o,s,c=u(r);if(c){if(a=V(r,n),a===de?(s=!0,i=a.error,a=null):o=!0,t===a)return void B(t,k())}else a=n,o=!0;t._state!==le||(c&&o?I(t,a):s?B(t,i):e===fe?E(t,a):e===he&&B(t,a))}function T(e,t){try{t(function(t){I(e,t)},function(t){B(e,t)})}catch(t){B(e,t)}}function D(){return ve++}function U(e){e[ce]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e){return new we(this,e).promise}function H(e){var t=this;return new t(Q(e)?function(r,n){for(var a=e.length,i=0;i<a;i++)t.resolve(e[i]).then(r,n)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function L(e){var t=this,r=new t(b);return B(r,e),r}function K(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[ce]=D(),this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&K(),this instanceof F?T(this,e):q())}function J(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[ce]||U(this.promise),Q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):B(this.promise,W())}function W(){return new Error("Array Methods must be provided an Array")}function G(){var e;if("undefined"!=typeof a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=be)}var z;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var $,X,Y,Q=z,Z=0,ee=function(e,t){oe[Z]=e,oe[Z+1]=t,Z+=2,2===Z&&(X?X(v):Y())},te="undefined"!=typeof window?window:void 0,re=te||{},ne=re.MutationObserver||re.WebKitMutationObserver,ae="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),ie="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,oe=new Array(1e3);Y=ae?l():ne?h():ie?m():void 0===te?p():d();var ue=g,se=y,ce=Math.random().toString(36).substring(16),le=void 0,fe=1,he=2,me=new j,de=new j,ve=0,pe=M,ge=H,ye=L,be=F;F.all=pe,F.race=ge,F.resolve=se,F.reject=ye,F._setScheduler=s,F._setAsap=c,F._asap=ee,F.prototype={constructor:F,then:ue,catch:function(e){return this.then(null,e)}};var we=J;J.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===le&&r<e;r++)this._eachEntry(t[r],r)},J.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===se){var a=S(e);if(a===ue&&e._state!==le)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(r===be){var i=new r(b);_(i,e,a),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){t(e)}),t)}else this._willSettleAt(n(e),t)},J.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===le&&(this._remaining--,e===he?B(n,r):this._result[t]=r),0===this._remaining&&E(n,this._result)},J.prototype._willSettleAt=function(e,t){var r=this;x(e,void 0,function(e){r._settledAt(fe,t,e)},function(e){r._settledAt(he,t,e)})};var ke=G,Se={Promise:be,polyfill:ke};r(339).amd?(n=function(){return Se}.call(t,r,t,i),!(void 0!==n&&(i.exports=n))):"undefined"!=typeof i&&i.exports?i.exports=Se:"undefined"!=typeof this&&(this.ES6Promise=Se),ke()}).call(this)}).call(t,r(332),function(){return this}(),r(336)(e))},function(e,t){},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(337),a=function(){function e(){}return e.error=function(e,t){return t&&"function"==typeof t&&t(e,null),n.Promise.reject(e)},e.response=function(e,t){return t&&"function"==typeof t&&t(null,e),n.Promise.resolve(e)},e}();t.ResponseHandler=a},function(e,t,r){"use strict";function n(e,t,r,n,a,i,u,l,m){if(l&&"function"==typeof l||(l=function(){}),m||!n.citrix||n.agentPort!==-1){var d={url:c.UrlUtil.create(e,t,n,m),method:r,headers:{"Accept-Language":"en-US"},responseType:"json"};return i&&(d.data=i),u&&(d.params=u),n.apiKey&&(d.headers.apikey=n.apiKey),n.jwt&&(d.headers.Authorization="Bearer "+n.jwt),n.tokenCompatible&&a&&(d.headers[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),new s.Promise(function(e,t){o.default.request(d).then(function(t){return l(null,t.data),e(t.data)}).catch(function(e){return e.response?e.response.data?(l(e.response.data,null),t(e.response.data)):(l(e.response,null),t(e.response)):(l(e,null),t(e))})})}var v={description:"Running in Citrix environment but no Agent port was defined in config.",status:400,code:"801"};return l(v,null),s.Promise.reject(v)}function a(e,t,r,n,a,i,u){if(u&&"function"==typeof u||(u=function(){}),n.citrix&&n.agentPort===-1){var f={description:"Running in Citrix environment but no Agent port was defined in config.",status:400,code:"801"};return u(f,null),s.Promise.reject(f)}var m={url:c.UrlUtil.create(e,t,n,!0),method:r,headers:(d={"Accept-Language":"en-US","X-Consumer-Username":"testorg.testapp.v1"},d[h.AUTH_TOKEN_HEADER]=l.get(h.BROWSER_AUTH_TOKEN),d),responseType:"json"};return a&&(m.data=a),i&&(m.params=i),n.jwt&&(m.headers.Authorization="Bearer "+n.jwt),new s.Promise(function(e,t){o.default.request(m).then(function(t){return u(null,t.data),e(t.data)}).catch(function(e){return e.response?(u(e.response,null),t(e.response)):(u(e,null),t(e))})});var d}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(342),u=r(330),s=r(337),c=r(367),l=r(369),f=r(372),h=function(){function e(e){this.cfg=e}return e.prototype.get=function(t,r,a,i){return n(t,r,"GET",this.cfg,e.SHOULD_SEND_TOKEN,void 0,a,i)},e.prototype.post=function(t,r,a,i,o){return n(t,r,"POST",this.cfg,e.SHOULD_SEND_TOKEN,a,i,o)},e.prototype.put=function(t,r,a,i,o){return n(t,r,"PUT",this.cfg,e.SHOULD_SEND_TOKEN,a,i,o)},e}();h.AUTH_TOKEN_HEADER="X-Authentication-Token",h.BROWSER_AUTH_TOKEN="t1c-js-browser-id-token",h.SHOULD_SEND_TOKEN=!0,t.GenericConnection=h;var m=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r}return i(t,e),t.prototype.get=function(e,t,r,a){var i=u.omit(this.cfg,"apiKey");return n(e,t,"GET",i,h.SHOULD_SEND_TOKEN,void 0,r,a)},t.prototype.getSkipCitrix=function(e,t,r,a){var i=u.omit(this.cfg,"apiKey");return n(e,t,"GET",i,h.SHOULD_SEND_TOKEN,void 0,r,a,!0)},t.prototype.post=function(e,t,r,a,i){var o=u.omit(this.cfg,"apiKey");return n(e,t,"POST",o,h.SHOULD_SEND_TOKEN,r,a,i)},t.prototype.put=function(e,t,r,a,i){var o=u.omit(this.cfg,"apiKey");return n(e,t,"PUT",o,h.SHOULD_SEND_TOKEN,r,a,i)},t}(h);t.LocalAuthConnection=m;var d=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r}return i(t,e),t.prototype.get=function(e,t,r,a){var i=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"GET",i,h.SHOULD_SEND_TOKEN,void 0,r,a)},t.prototype.getSkipCitrix=function(e,t,r,a){var i=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"GET",i,h.SHOULD_SEND_TOKEN,void 0,r,a,!0)},t.prototype.post=function(e,t,r,a,i){var o=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"POST",o,h.SHOULD_SEND_TOKEN,r,a,i)},t.prototype.put=function(e,t,r,a,i){var o=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"PUT",o,h.SHOULD_SEND_TOKEN,r,a,i)},t.prototype.requestFile=function(e,t,r,n){var a=u.omit(this.cfg,["apiKey","jwt"]);return n&&"function"==typeof n||(n=function(){}),new s.Promise(function(i,u){var s={};a.tokenCompatible&&h.SHOULD_SEND_TOKEN&&(s[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),o.default.post(c.UrlUtil.create(e,t,a,!1),r,{responseType:"blob",headers:s}).then(function(e){return n(null,e),i(e)},function(e){return e.response?e.response.data?(n(e.response.data,null),u(e.response.data)):(n(e.response,null),u(e.response)):(n(e,null),u(e))})})},t.prototype.putFile=function(e,t,r,n,a){var i=u.omit(this.cfg,["apiKey","jwt"]);a&&"function"==typeof a||(a=function(){});var l=new FormData;l.append("path",r.path),l.append("file",r.file,r.fileName);var m={"Content-Type":"multipart/form-data"};return i.tokenCompatible&&h.SHOULD_SEND_TOKEN&&(m[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),new s.Promise(function(r,n){o.default.put(c.UrlUtil.create(e,t,i,!1),l,{headers:m}).then(function(e){return a(null,e.data),r(e.data)},function(e){return e.response?e.response.data?(a(e.response.data,null),n(e.response.data)):(a(e.response,null),n(e.response)):(a(e,null),n(e))})})},t}(h);t.LocalConnection=d;var v=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r.SHOULD_SEND_TOKEN=!1,r}return i(t,e),t.prototype.get=function(e,t,r,a){var i=u.omit(this.cfg,"jwt");return n(e,t,"GET",i,this.SHOULD_SEND_TOKEN,void 0,r,a,!0)},t.prototype.post=function(e,t,r,a,i){var o=u.omit(this.cfg,"jwt");return n(e,t,"POST",o,this.SHOULD_SEND_TOKEN,r,a,i,!0)},t.prototype.put=function(e,t,r,a,i){var o=u.omit(this.cfg,"jwt");return n(e,t,"PUT",o,this.SHOULD_SEND_TOKEN,r,a,i,!0)},t}(h);t.RemoteConnection=v;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=void 0,t}return i(t,e),t.prototype.get=function(e,t,r,n){return a(e,t,"GET",this.config,void 0,r,n)},t.prototype.post=function(e,t,r,n,i){return a(e,t,"POST",this.config,r,n,i)},t.prototype.put=function(e,t,r,n,i){return a(e,t,"PUT",this.config,r,n,i)},t}(h);t.LocalTestConnection=p},function(e,t,r){e.exports=r(343)},function(e,t,r){"use strict";function n(e){var t=new o(e),r=i(o.prototype.request,t);return a.extend(r,o.prototype,t),a.extend(r,t),r}var a=r(344),i=r(345),o=r(346),u=r(347),s=n(u);s.Axios=o,s.create=function(e){return n(a.merge(u,e))},s.Cancel=r(364),s.CancelToken=r(365),s.isCancel=r(361),s.all=function(e){return Promise.all(e)},s.spread=r(366),e.exports=s,e.exports.default=s},function(e,t,r){"use strict";function n(e){return"[object Array]"===P.call(e)}function a(e){return"[object ArrayBuffer]"===P.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function o(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function u(e){return"string"==typeof e}function s(e){return"number"==typeof e}function c(e){return"undefined"==typeof e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===P.call(e)}function h(e){return"[object File]"===P.call(e)}function m(e){return"[object Blob]"===P.call(e)}function d(e){return"[object Function]"===P.call(e)}function v(e){return l(e)&&d(e.pipe)}function p(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function w(){function e(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=w(t[r],e):t[r]=e}for(var t={},r=0,n=arguments.length;r<n;r++)b(arguments[r],e);return t}function k(e,t,r){return b(t,function(t,n){r&&"function"==typeof t?e[n]=S(t,r):e[n]=t}),e}var S=r(345),P=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:a,isFormData:i,isArrayBufferView:o,isString:u,isNumber:s,isObject:l,isUndefined:c,isDate:f,isFile:h,isBlob:m,isFunction:d,isStream:v,isURLSearchParams:p,isStandardBrowserEnv:y,forEach:b,merge:w,extend:k,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new o,response:new o}}var a=r(347),i=r(344),o=r(358),u=r(359),s=r(362),c=r(363);n.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(a,this.defaults,{method:"get"},e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url));var t=[u,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head"],function(e){n.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},function(e,t,r){(function(t){"use strict";function n(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function a(){var e;return"undefined"!=typeof XMLHttpRequest?e=r(349):"undefined"!=typeof t&&(e=r(349)),e}var i=r(344),o=r(348),u=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},c={adapter:a(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(u,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){c.headers[e]={}}),i.forEach(["post","put","patch"],function(e){c.headers[e]=i.merge(s)}),e.exports=c}).call(t,r(332))},function(e,t,r){"use strict";var n=r(344);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){(function(t){"use strict";var n=r(344),a=r(350),i=r(353),o=r(354),u=r(355),s=r(351),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(356);e.exports=function(e){return new Promise(function(l,f){var h=e.data,m=e.headers;n.isFormData(h)&&delete m["Content-Type"];var d=new XMLHttpRequest,v="onreadystatechange",p=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||u(e.url)||(d=new window.XDomainRequest,v="onload",p=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";m.Authorization="Basic "+c(g+":"+y)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[v]=function(){if(d&&(4===d.readyState||p)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?d.response:d.responseText,n={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:t,config:e,request:d};a(l,f,n),d=null}},d.onerror=function(){f(s("Network Error",e)),d=null},d.ontimeout=function(){f(s("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),d=null},n.isStandardBrowserEnv()){var b=r(357),w=(e.withCredentials||u(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;w&&(m[e.xsrfHeaderName]=w)}if("setRequestHeader"in d&&n.forEach(m,function(e,t){"undefined"==typeof h&&"content-type"===t.toLowerCase()?delete m[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(e){if("json"!==d.responseType)throw e}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===h&&(h=null),d.send(h)})}}).call(t,r(332))},function(e,t,r){"use strict";var n=r(351);e.exports=function(e,t,r){var a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r)):e(r)}},function(e,t,r){"use strict";var n=r(352);e.exports=function(e,t,r,a){var i=new Error(e);return n(i,t,r,a)}},function(e,t){"use strict";e.exports=function(e,t,r,n){return e.config=t,r&&(e.code=r),e.response=n,e}},function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var a=r(344);e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(a.isURLSearchParams(t))i=t.toString();else{var o=[];a.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(a.isArray(e)&&(t+="[]"),a.isArray(e)||(e=[e]),a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))}))}),i=o.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},function(e,t,r){"use strict";var n=r(344);e.exports=function(e){var t,r,a,i={};return e?(n.forEach(e.split("\n"),function(e){a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t&&(i[t]=i[t]?i[t]+", "+r:r)}),i):i}},function(e,t,r){"use strict";var n=r(344);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(a.setAttribute("href",t),t=a.href),a.setAttribute("href",t),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");return t=e(window.location.href),function(r){var a=n.isString(r)?e(r):r;return a.protocol===t.protocol&&a.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function r(){this.message="String contains an invalid character"}function n(e){for(var t,n,i=String(e),o="",u=0,s=a;i.charAt(0|u)||(s="=",u%1);o+=s.charAt(63&t>>8-u%1*8)){if(n=i.charCodeAt(u+=.75),n>255)throw new r;t=t<<8|n}return o}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=n},function(e,t,r){"use strict";var n=r(344);
e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,a,i,o){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(a)&&u.push("path="+a),n.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,r){"use strict";function n(){this.handlers=[]}var a=r(344);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){a.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var a=r(344),i=r(360),o=r(361),u=r(347);e.exports=function(e){n(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=a.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),a.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||u.adapter;return t(e).then(function(t){return n(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(n(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(344);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new a(e),t(r.reason))})}var a=r(364);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e,t=new n(function(t){e=t});return{token:t,cancel:e}},e.exports=n},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(368),a=function(){function e(){}return e.create=function(e,t,r,a){return r.citrix&&r.agentPort!==-1&&!a?e+n.AgentClient.urlPrefix(r.agentPort)+t:e+t},e}();t.UrlUtil=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.url=e,this.connection=t}return e.urlPrefix=function(t){return e.AGENT_PATH+"/"+t},e.prototype.get=function(t,r){return this.connection.getSkipCitrix(this.url,e.AGENT_PATH,t,r)},e}();r.AGENT_PATH="/agent",t.AgentClient=r},function(e,t,r){(function(t){"use strict";function n(e,t){return 1===arguments.length?a(e):i(e,t)}function a(e){return JSON.parse(l.getItem(e))}function i(e,t){try{return l.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}}function o(e){return l.removeItem(e)}function u(){return l.clear()}var s=r(370),c=r(371),l="localStorage"in t&&t.localStorage?t.localStorage:s;n.set=i,n.get=a,n.remove=o,n.clear=u,n.on=c.on,n.off=c.off,e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){return e in o?o[e]:null}function n(e,t){return o[e]=t,!0}function a(e){var t=e in o;return!!t&&delete o[e]}function i(){return o={},!0}var o={};e.exports={getItem:r,setItem:n,removeItem:a,clear:i}},function(e,t){(function(t){"use strict";function r(){t.addEventListener?t.addEventListener("storage",n,!1):t.attachEvent?t.attachEvent("onstorage",n):t.onstorage=n}function n(e){function r(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var n=o[e.key];n&&n.forEach(r)}function a(e,t){o[e]?o[e].push(t):o[e]=[t],u===!1&&r()}function i(e,t){var r=o[e];r.length>1?r.splice(r.indexOf(t),1):o[e]=[]}var o={},u=!1;e.exports={on:a,off:i}}).call(t,function(){return this}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(373),a=r(369),i=r(374),o=r(330),u=function(){function e(){}return e.get=function(){return e.checkValidFingerprint()},e.checkValidFingerprint=function(){var t;try{t=a.get(e.BROWSER_AUTH_TOKEN_LOCATION)}catch(e){}return t||(t=e.generateFingerprint()),e.validateFingerprint(t)?t:e.generateFingerprint()},e.validateFingerprint=function(e){var t=o.join(o.dropRight(o.split(e,""),2),""),r=t.substr(1,8),n=t+i.fromBase36(r)%97;return n===e},e.generateFingerprint=function(){var t=n(),r=t.substr(1,8),o=t+i.fromBase36(r)%97;return a.set(e.BROWSER_AUTH_TOKEN_LOCATION,o),o},e}();u.BROWSER_AUTH_TOKEN_LOCATION="t1c-js-browser-id-token",t.BrowserFingerprint=u},function(e,t,r){!function(t){"use strict";var r="cuid",n=0,a=4,i=36,o=Math.pow(i,a),u=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},s=function(){return u((Math.random()*o<<0).toString(i),a)},c=function(){return n=n<o?n:0,n++,n-1},l=function(){var e,t="c",r=(new Date).getTime().toString(i),n=l.fingerprint(),o=s()+s();return e=u(c().toString(i),a),t+r+e+n+o};l.slug=function(){var e,t=(new Date).getTime().toString(36),r=l.fingerprint().slice(0,1)+l.fingerprint().slice(-1),n=s().slice(-2);return e=c().toString(36).slice(-4),t.slice(-2)+e+r+n},l.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return l.globalCount=function(){return e},e},l.fingerprint=function(){return u((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+l.globalCount().toString(36),4)},t.register?t.register(r,l):e.exports=l}(this.applitude||this)},function(e,t,r){function n(e,t){a["toBase"+e]=function(e){return a.toAlphabet(e,t)},a["fromBase"+e]=function(e){return a.fromAlphabet(e,t)}}var a=t;a.toAlphabet=function(e,t){var r=t.length,n=[];do n.push(e%r),e=Math.floor(e/r);while(e>0);for(var a=[];n.length;)a.push(t[n.pop()]);return a.join("")},a.fromAlphabet=function(e,t){for(var r,n=t.length,a=0,i=0;e.length;)r=e[e.length-1],e=e.substr(0,e.length-1),i+=Math.pow(n,a)*t.indexOf(r),a++;return i},a.NUMERALS="0123456789",a.LETTERS_LOWERCASE="abcdefghijklmnopqrstuvwxyz",a.LETTERS_UPPERCASE=a.LETTERS_LOWERCASE.toUpperCase(),a.KNOWN_ALPHABETS={};for(var i=2;i<=10;i++)a.KNOWN_ALPHABETS[i]=a.NUMERALS.substr(0,i);for(var i=11;i<=16;i++)a.KNOWN_ALPHABETS[i]=a.NUMERALS+a.LETTERS_LOWERCASE.substr(0,i-10);a.KNOWN_ALPHABETS[36]=a.NUMERALS+a.LETTERS_LOWERCASE,a.KNOWN_ALPHABETS[62]=a.NUMERALS+a.LETTERS_LOWERCASE+a.LETTERS_UPPERCASE,a.KNOWN_ALPHABETS[26]=a.LETTERS_LOWERCASE,a.KNOWN_ALPHABETS[52]=a.LETTERS_LOWERCASE+a.LETTERS_UPPERCASE,a.KNOWN_ALPHABETS[64]=a.LETTERS_UPPERCASE+a.LETTERS_LOWERCASE+a.NUMERALS+"+/",a.KNOWN_ALPHABETS[58]=a.KNOWN_ALPHABETS[62].replace(/[0OlI]/g,""),a.KNOWN_ALPHABETS[32]=a.NUMERALS+a.LETTERS_UPPERCASE.replace(/[ILOU]/g,"");for(var o in a.KNOWN_ALPHABETS)a.KNOWN_ALPHABETS.hasOwnProperty(o)&&n(o,a.KNOWN_ALPHABETS[o]);a.toBase=function(e,t){return a.toAlphabet(e,a.KNOWN_ALPHABETS[t])},a.fromBase=function(e,t){return a.fromAlphabet(e,a.KNOWN_ALPHABETS[t])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=r(337),i="/",o="?apikey=",u="/security",s="/system/status",c=u+"/jwt/issue",l=u+"/jwt/refresh",f="/download/gcl",h=u+"/keys/public",m="/devices",d=function(){function e(e,t,r){this.url=e,this.connection=t,this.cfg=r}return e.prototype.getUrl=function(){return this.url},e.prototype.getInfo=function(e){return this.connection.get(this.url,s,void 0,e)},e.prototype.getDevice=function(e,t){return this.connection.get(this.url,m+i+e,void 0,t)},e.prototype.getJWT=function(e){function t(t,n){r.connection.get(r.url,c,void 0,function(a,i){if(a){if(e)return e(a,null);n(a)}else{if(i&&i.token&&(r.cfg.jwt=i.token),e)return e(null,i);t(i)}})}var r=this;return e?void t():new a.Promise(function(e,r){t(e,r)})},e.prototype.refreshJWT=function(e){var t=this.cfg.jwt;if(t)return this.connection.post(this.url,l,{originalJWT:t},void 0,e);var r={code:"500",description:"No JWT available",status:412};return e?e(r,null):a.Promise.reject(r)},e.prototype.getPubKey=function(e){return this.connection.get(this.url,h,void 0,e)},e.prototype.downloadLink=function(e,t){function r(r,a){n.connection.post(n.url,f,e,void 0,function(e,i){if(!e){var u={url:n.cfg.dsUrlBase+i.path+o+n.cfg.apiKey,success:!0};return t?t(null,u):r(u)}return t?t(e,null):void a(e)})}var n=this;return t?void r():new a.Promise(function(e,t){r(e,t)})},e.prototype.register=function(e,t,r){var a=n.merge({uuid:t,version:e.core_version},n.omit(e,"core_version"));return this.connection.put(this.url,m+i+t,a,void 0,r)},e.prototype.sync=function(e,t,r){var a=n.merge({uuid:t,version:e.core_version},n.omit(e,"core_version"));return this.connection.post(this.url,m+i+t,a,void 0,r)},e}();t.DSClient=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="/challenge",n="/certs/validate-chain",a="/system/status",i="/signature/validate",o=function(){function e(e,t){this.url=e,this.connection=t}return e.prototype.getUrl=function(){return this.url},e.prototype.validateSignature=function(e,t){return this.connection.post(this.url,i,e,void 0,t)},e.prototype.getInfo=function(e){return this.connection.get(this.url,a,void 0,e)},e.prototype.getChallenge=function(e,t){return this.connection.get(this.url,r,{digest:e},t)},e.prototype.validateChallengeSignedHash=function(e,t){return this.connection.post(this.url,r,e,void 0,t)},e.prototype.validateCertificateChain=function(e,t){return this.connection.post(this.url,n,e,void 0,t)},e}();t.OCVClient=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(378),a=r(491),i=r(492),o=r(493),u=r(494),s=r(495),c=r(496),l=r(497),f=r(498),h=r(499),m=r(500),d=r(501),v=r(502),p=r(503),g=r(504),y="/plugins/",b=y+"beid",w=y+"luxeid",k=y+"dnie",S=y+"emv",P=y+"file",A=y+"luxtrust",C=y+"mobib",_=y+"ocra",I=y+"aventra",O=y+"oberthur",E=y+"piv",B=y+"pteid",x=y+"safenet",N=y+"readerapi",j=function(){function e(e,t){this.url=e,this.connection=t}return e.prototype.createDNIe=function(e){return new m.DNIe(this.url,k,this.connection,e)},e.prototype.createEidBE=function(e){return new a.EidBe(this.url,b,this.connection,e)},e.prototype.createEidLUX=function(e,t){return new i.EidLux(this.url,w,this.connection,e,t)},e.prototype.createEidPT=function(e){return new d.EidPt(this.url,B,this.connection,e)},e.prototype.createEmv=function(e){return new n.EMV(this.url,S,this.connection,e)},e.prototype.createLuxTrust=function(e){return new u.LuxTrust(this.url,A,this.connection,e)},e.prototype.createMobib=function(e){return new o.Mobib(this.url,C,this.connection,e)},e.prototype.createOcra=function(e){return new s.Ocra(this.url,_,this.connection,e)},e.prototype.createAventraNO=function(e){return new c.Aventra(this.url,I,this.connection,e)},e.prototype.createOberthurNO=function(e){return new l.Oberthur(this.url,O,this.connection,e)},e.prototype.createPIV=function(e){return new f.PIV(this.url,E,this.connection,e)},e.prototype.createSafeNet=function(e){return new h.SafeNet(this.url,x,this.connection,e)},e.prototype.createRemoteLoading=function(e){return new v.RemoteLoading(this.url,N,this.connection,e)},e.prototype.createBelfius=function(e){return new p.Belfius(this.url,N,this.connection,e)},e.prototype.createFileExchange=function(){return new g.FileExchange(this.url,P,this.connection)},e}();t.PluginFactory=j},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.applicationData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.APPLICATION_DATA),void 0,e)},t.prototype.applications=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.APPLICATIONS),void 0,e)},t.prototype.iccPublicKeyCertificate=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ICC_PUBLIC_KEY_CERT),{aid:e},void 0,r)},t.prototype.issuerPublicKeyCertificate=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ISSUER_PUBLIC_KEY_CERT),{aid:e},void 0,r)},t}(a.GenericPinCard);i.APPLICATIONS="/applications",i.APPLICATION_DATA="/application-data",i.ISSUER_PUBLIC_KEY_CERT="/issuer-public-key-certificate",i.ICC_PUBLIC_KEY_CERT="/icc-public-key-certificate",t.EMV=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(380),i=r(381),o=r(340),u=r(490),s=function(){function e(e,t,r){this.baseUrl=e,this.containerUrl=t,this.connection=r}return e.prototype.containerSuffix=function(e){return e&&e.length?this.containerUrl+e:this.containerUrl},e}();t.GenericContainer=s;var c=function(e){function t(t,r,n,a){var i=e.call(this,t,r,n)||this;return i.baseUrl=t,i.containerUrl=r,i.connection=n,i.reader_id=a,i}return n(t,e),t.prototype.containerSuffix=function(e){return e&&e.length?this.containerUrl+"/"+this.reader_id+e:this.containerUrl+"/"+this.reader_id},t}(s);t.GenericReaderContainer=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allData=function(e,t){var r=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(),r.params).then(function(e){return i.CertParser.process(e,r.parseCerts,t)},function(e){return o.ResponseHandler.error(e,t)})},t}(c);t.GenericSmartCard=l;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t}(l);f.VERIFY_PIN="/verify-pin",t.GenericPinCard=f;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allAlgoRefsForAuthentication=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.AUTHENTICATE),void 0,e)},t.prototype.allAlgoRefsForSigning=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGN_DATA),void 0,e)},t.prototype.allCerts=function(e,r){var n=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),n.params).then(function(e){return i.CertParser.process(e,n.parseCerts,r)},function(e){return o.ResponseHandler.error(e,r)})},t.prototype.authenticate=function(e,r){var n=this;return e.algorithm_reference=e.algorithm_reference.toLocaleLowerCase(),a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,void 0,r)})},t.prototype.signData=function(e,r){var n=this;return e.algorithm_reference&&(e.algorithm_reference=e.algorithm_reference.toLocaleLowerCase()),a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,void 0,r)})},t.prototype.getCertificate=function(e,r){var n=this;return n.connection.get(this.baseUrl,n.containerSuffix(t.ALL_CERTIFICATES+e),void 0).then(function(e){return i.CertParser.process(e,r.parseCerts,r.callback)},function(e){return o.ResponseHandler.error(e,r.callback)})},t}(f);h.ALL_CERTIFICATES="/certificates",h.AUTHENTICATE="/authenticate",h.CERT_ROOT="/root",h.CERT_AUTHENTICATION="/authentication",h.CERT_NON_REPUDIATION="/non-repudiation",h.CERT_ISSUER="/issuer",h.CERT_SIGNING="/signing",h.CERT_ENCRYPTION="/encryption",h.CERT_CITIZEN="/citizen",h.CERT_RRN="/rrn",h.SIGN_DATA="/sign",t.GenericCertCard=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allAlgoRefsForAuthentication=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.AUTHENTICATE),void 0,e)},t.prototype.allAlgoRefsForSigning=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGN_DATA),void 0,e)},t.prototype.allData=function(e,t,r){var n=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.post(this.baseUrl,this.containerSuffix(),t,n.params).then(function(e){return i.CertParser.process(e,n.parseCerts,r)},function(e){return o.ResponseHandler.error(e,r)})},t.prototype.allCerts=function(e,r,n){var a=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.post(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),r,a.params).then(function(e){return i.CertParser.process(e,a.parseCerts,n)},function(e){return o.ResponseHandler.error(e,n)})},t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t.prototype.signData=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,void 0,r)})},t.prototype.authenticate=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,void 0,r)})},t.prototype.getCertificate=function(e,r,n,u){var s=this,c=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,r.pin).then(function(){return c.connection.post(s.baseUrl,c.containerSuffix(t.ALL_CERTIFICATES+e),r,u)}).then(function(e){return i.CertParser.process(e,n.parseCerts,n.callback)}).catch(function(e){return o.ResponseHandler.error(e,n.callback)})},t.prototype.getCertificateArray=function(e,r,n,u){var s=this,c=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,r.pin).then(function(){return c.connection.post(s.baseUrl,c.containerSuffix(t.ALL_CERTIFICATES+e),r,u)}).then(function(e){return i.CertParser.process(e,n.parseCerts,n.callback)}).catch(function(e){return o.ResponseHandler.error(e,n.callback)})},t}(c);m.ALL_CERTIFICATES="/certificates",m.AUTHENTICATE="/authenticate",m.CERT_AUTHENTICATION="/authentication",m.CERT_NON_REPUDIATION="/non-repudiation",m.CERT_INTERMEDIATE="/intermediate",m.CERT_ROOT="/root",m.CERT_SIGNING="/signing",m.SIGN_DATA="/sign",m.VERIFY_PIN="/verify-pin",t.GenericSecuredCertCard=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(337),a="/card-readers",i=function(){function e(){}return e.check=function(e,t,r,i){return new n.Promise(function(n,o){e.cfg.forceHardwarePinpad?e.get(t,a+"/"+r,void 0).then(function(e){e.data.pinpad?i?o({data:{message:"Strict pinpad enforcement is enabled. This request was sent with a PIN, but the reader has a pinpad."}}):n():i?n():o({data:{message:"Strict pinpad enforcement is enabled. This request was sent without a PIN, but the reader does not have a pinpad."}})},function(e){o(e)}):n()})},e}();t.PinEnforcer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=r(382),i=r(384),o=r(385),u=r(340),s=function(){function e(){}return e.process=function(t,r,a){if(t&&t.data&&"object"==typeof t.data&&!n.isArray(t.data))n.forEach(t.data,function(a,i){if(i.indexOf("certificate")>-1&&("string"==typeof a&&(t.data[i]={base64:a},r&&(t.data[i].parsed=e.processCert(a))),n.isArray(a))){var o=[];n.forEach(a,function(t){var n={base64:t};r&&(n.parsed=e.processCert(t)),o.push(n)}),t.data[i]=o}});else if(n.isArray(t.data)){var i=[];n.forEach(t.data,function(t){if("string"==typeof t){var n={base64:t};r&&(n.parsed=e.processCert(t)),i.push(n)}else{var n=t;r&&(n.parsed=e.processCert(t.base64)),i.push(n)}}),t.data=i}else{var o={base64:t.data};r&&(o.parsed=e.processCert(t.data)),t.data=o}return u.ResponseHandler.response(t,a)},e.processCert=function(t){var r=i.atob(t),n=e.str2ab(r),u=a.fromBER(n);return new o.Certificate({schema:u.result})},e.str2ab=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0,a=e.length;n<a;n++)r[n]=e.charCodeAt(n);return t},e}();t.CertParser=s},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){function n(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}var a=t,i=new k({},Object);if((0,m.checkBufferParams)(new p,e,t,r)===!1)return i.error="Wrong input parameters",{offset:-1,result:i};var o=new Uint8Array(e,t,r);if(0===o.length)return this.error="Zero buffer length",{offset:-1,result:i};var u=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),u===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=u,r-=i.idBlock.blockLength,u=i.lenBlock.fromBER(e,t,r),i.warnings.concat(i.lenBlock.warnings),u===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=u,r-=i.lenBlock.blockLength,i.idBlock.isConstructed===!1&&i.lenBlock.isIndefiniteForm===!0)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var s=k;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed===!0&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};s=I;break;case 1:s=E;break;case 2:s=U;break;case 3:s=T;break;case 4:s=V;break;case 5:s=N;break;case 6:s=K;break;case 10:s=M;break;case 12:s=F;break;case 14:s=he;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:s=B;break;case 17:s=x;break;case 18:s=Y;break;case 19:s=Q;break;case 20:s=Z;break;case 21:s=ee;break;case 22:s=te;break;case 23:s=oe;break;case 24:s=ue;break;case 25:s=re;break;case 26:s=ne;break;case 27:s=ae;break;case 28:s=z;break;case 29:s=ie;break;case 30:s=W;break;case 31:s=se;break;case 32:s=ce;break;case 33:s=le;break;case 34:s=fe;break;default:var c=void 0;c=i.idBlock.isConstructed===!0?new C:new P,c.idBlock=i.idBlock,c.lenBlock=i.lenBlock,c.warnings=i.warnings,i=c,u=i.fromBER(e,t,r)}break;case 2:case 3:case 4:default:s=i.idBlock.isConstructed===!0?C:P}return i=n(i,s),u=i.fromBER(e,t,i.lenBlock.isIndefiniteForm===!0?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(a,a+i.blockLength),{offset:u,result:i}}function u(e){if(0===e.byteLength){var t=new k({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return o(e,0,e.byteLength)}function s(e,t,r){if(r instanceof me){for(var n=!1,a=0;a<r.value.length;a++){var i=s(e,t,r.value[a]);if(i.verified===!0)return{verified:!0,result:e}}if(n===!1){var o={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(o.name=r.name),o}}if(r instanceof de)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var c=r.idBlock.toBER(!1);if(0===c.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};var l=r.idBlock.fromBER(c,0,c.byteLength);if(l===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty("tagClass")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("tagNumber")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("isConstructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly===!0){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var f=new Uint8Array(r.idBlock.valueHex),h=new Uint8Array(t.idBlock.valueHex);if(f.length!==h.length)return{verified:!1,result:e};for(var m=0;m<f.length;m++)if(f[m]!==h[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),r.idBlock.isConstructed===!0){var d=0,v={verified:!1},p=r.valueBlock.value.length;if(p>0&&r.valueBlock.value[0]instanceof ve&&(p=t.valueBlock.value.length),0===p)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var g=!0,y=0;y<r.valueBlock.value.length;y++)g=g&&(r.valueBlock.value[y].optional||!1);return g===!0?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var b=0;b<p;b++)if(b-d>=t.valueBlock.value.length){if(r.valueBlock.value[b].optional===!1){var w={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],w.name=r.name)),w}}else if(r.valueBlock.value[0]instanceof ve){if(v=s(e,t.valueBlock.value[b],r.valueBlock.value[0].value),v.verified===!1){if(r.valueBlock.value[0].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),v;d++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var k={};k="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local===!0?t:e,"undefined"==typeof k[r.valueBlock.value[0].name]&&(k[r.valueBlock.value[0].name]=[]),k[r.valueBlock.value[0].name].push(t.valueBlock.value[b])}}else if(v=s(e,t.valueBlock.value[b-d],r.valueBlock.value[b]),v.verified===!1){if(r.valueBlock.value[b].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),v;d++}if(v.verified===!1){var S={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],S.name=r.name)),S}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var P=u(t.valueBlock.valueHex);if(P.offset===-1){var A={verified:!1,result:P.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],A.name=r.name)),A}return s(e,P.result,r.primitiveSchema)}return{verified:!0,result:e}}function c(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=u(e);return r.offset===-1?{verified:!1,result:r.result}:s(r.result,r.result,t)}function l(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=void 0;var f=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.fromBER=u,t.compareSchema=s,t.verifySchema=c,t.fromJSON=l;var m=r(383),d=(new Uint8Array([0]),[new Uint8Array([1])]),v="0123456789",p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.blockLength=(0,m.getParametersValue)(t,"blockLength",0),this.error=(0,m.getParametersValue)(t,"error",""),this.warnings=(0,m.getParametersValue)(t,"warnings",[]),"valueBeforeDecode"in t?this.valueBeforeDecode=t.valueBeforeDecode.slice(0):this.valueBeforeDecode=new ArrayBuffer(0)}return h(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,m.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),g=function(e){return function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);return 0===n.length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly!==!0?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):e===!0?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),t}(e)},y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));
return"idBlock"in e?(r.isHexOnly=(0,m.getParametersValue)(e.idBlock,"isHexOnly",!1),r.valueHex=(0,m.getParametersValue)(e.idBlock,"valueHex",new ArrayBuffer(0)),r.tagClass=(0,m.getParametersValue)(e.idBlock,"tagClass",-1),r.tagNumber=(0,m.getParametersValue)(e.idBlock,"tagNumber",-1),r.isConstructed=(0,m.getParametersValue)(e.idBlock,"isConstructed",!1)):(r.tagClass=-1,r.tagNumber=-1,r.isConstructed=!1),r}return a(t,e),h(t,[{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,r=void 0,n=void 0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),n=new Uint8Array(r),!e){var a=this.tagNumber;a&=31,t|=a,n[0]=t}return r}if(this.isHexOnly===!1){var i=(0,m.utilToBase)(this.tagNumber,7),o=new Uint8Array(i),u=i.byteLength;if(r=new ArrayBuffer(u+1),n=new Uint8Array(r),n[0]=31|t,!e){for(var s=0;s<u-1;s++)n[s+1]=128|o[s];n[u]=o[u-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r),n[0]=31|t,e===!1){for(var c=new Uint8Array(this.valueHex),l=0;l<c.length-1;l++)n[l+1]=128|c[l];n[this.valueHex.byteLength]=c[c.length-1]}return r}},{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;var a=192&n[0];switch(a){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&n[0]),this.isHexOnly=!1;var i=31&n[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{var o=1;this.valueHex=new ArrayBuffer(255);for(var u=255,s=new Uint8Array(this.valueHex);128&n[o];){if(s[o-1]=127&n[o],o++,o>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(o===u){u+=255;for(var c=new ArrayBuffer(u),l=new Uint8Array(c),f=0;f<s.length;f++)l[f]=s[f];this.valueHex=new ArrayBuffer(u),s=new Uint8Array(this.valueHex)}}this.blockLength=o+1,s[o-1]=127&n[o];for(var h=new ArrayBuffer(o),d=new Uint8Array(h),v=0;v<o;v++)d[v]=s[v];this.valueHex=new ArrayBuffer(o),s=new Uint8Array(this.valueHex),s.set(d),this.blockLength<=9?this.tagNumber=(0,m.utilFromBase)(s,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),t}(g(p)),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"lenBlock"in e?(r.isIndefiniteForm=(0,m.getParametersValue)(e.lenBlock,"isIndefiniteForm",!1),r.longFormUsed=(0,m.getParametersValue)(e.lenBlock,"longFormUsed",!1),r.length=(0,m.getParametersValue)(e.lenBlock,"length",0)):(r.isIndefiniteForm=!1,r.longFormUsed=!1,r.length=0),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm===!0)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),this.longFormUsed===!1)return this.length=n[0],this.blockLength=1,t+this.blockLength;var a=127&n[0];if(a>8)return this.error="Too big integer",-1;if(a+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var i=new Uint8Array(a),o=0;o<a;o++)i[o]=n[o+1];return 0===i[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,m.utilFromBase)(i,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=a+1,t+this.blockLength}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=128),t;if(this.longFormUsed===!0){var n=(0,m.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength+1),e===!0)return t;var a=new Uint8Array(n);r=new Uint8Array(t),r[0]=128|n.byteLength;for(var i=0;i<n.byteLength;i++)r[i+1]=a[i];return t}return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=this.length),t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),t}(p),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),t}(p),k=t.BaseBlock=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;i(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"name"in e&&(a.name=e.name),"optional"in e&&(a.optional=e.optional),"primitiveSchema"in e&&(a.primitiveSchema=e.primitiveSchema),a.idBlock=new y(e),a.lenBlock=new b(e),a.valueBlock=new r(e),a}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=this.idBlock.toBER(e),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var a=this.lenBlock.toBER(e);t=(0,m.utilConcatBuf)(r,a);var i=void 0;if(i=e===!1?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=(0,m.utilConcatBuf)(t,i),this.lenBlock.isIndefiniteForm===!0){var o=new ArrayBuffer(2);if(e===!1){var u=new Uint8Array(o);u[0]=0,u[1]=0}t=(0,m.utilConcatBuf)(t,o)}return t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),t}(p),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!0),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),t}(w),P=t.Primitive=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,S));return r.idBlock.isConstructed=!1,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),t}(k),A=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value=(0,m.getParametersValue)(e,"value",[]),r.isIndefiniteForm=(0,m.getParametersValue)(e,"isIndefiniteForm",!1),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){function n(e,t){return e===!0?1:t}var a=t,i=r;if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var u=new Uint8Array(e,t,r);if(0===u.length)return this.warnings.push("Zero buffer length"),t;for(var s=t;n(this.isIndefiniteForm,r)>0;){var c=o(e,s,r);if(c.offset===-1)return this.error=c.result.error,this.warnings.concat(c.result.warnings),-1;if(s=c.offset,this.blockLength+=c.result.blockLength,r-=c.result.blockLength,this.value.push(c.result),this.isIndefiniteForm===!0&&c.result.constructor.blockName()===I.blockName())break}return this.isIndefiniteForm===!0&&(this.value[this.value.length-1].constructor.blockName()===I.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(a,a+i),s}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,m.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var r=0;r<this.value.length;r++)e.value.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),t}(w),C=t.Constructed=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,A));return r.idBlock.isConstructed=!0,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),t}(k),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),t}(w),I=t.EndOfContent=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,_));return r.idBlock.tagClass=1,r.idBlock.tagNumber=0,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),t}(k),O=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.value=(0,m.getParametersValue)(e,"value",!1),r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e)r.valueHex=e.valueHex.slice(0);else if(r.valueHex=new ArrayBuffer(1),r.value===!0){var a=new Uint8Array(r.valueHex);a[0]=255}return r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.value=0!==n[0],this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),t}(w),E=t.Boolean=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,O));return r.idBlock.tagClass=1,r.idBlock.tagNumber=1,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"Boolean"}}]),t}(k),B=t.Sequence=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=16,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"Sequence"}}]),t}(C),x=t.Set=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=17,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"Set"}}]),t}(C),N=t.Null=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p));return r.idBlock.tagClass=1,r.idBlock.tagNumber=5,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(e===!0)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),t}(k),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isConstructed=(0,m.getParametersValue)(e,"isConstructed",!1),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,r,n){var a=0;if(this.isConstructed===!0){if(this.isHexOnly=!1,a=A.prototype.fromBER.call(this,e,r,n),a===-1)return a;for(var i=0;i<this.value.length;i++){var o=this.value[i].constructor.blockName();if(o===I.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==V.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n),this.blockLength=n;return a}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return A.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return e===!0?t:0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),t}(g(A)),V=t.OctetString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,j));return r.idBlock.tagClass=1,r.idBlock.tagNumber=4,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r):f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n)}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),t}(k),R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.unusedBits=(0,m.getParametersValue)(e,"unusedBits",0),r.isConstructed=(0,m.getParametersValue)(e,"isConstructed",!1),r.blockLength=r.valueHex.byteLength+1,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(this.isConstructed===!0){if(n=A.prototype.fromBER.call(this,e,t,r),n===-1)return n;for(var a=0;a<this.value.length;a++){var i=this.value[a].constructor.blockName();if(i===I.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(i!==T.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var u=new Uint8Array(this.valueHex),s=0;s<r-1;s++)u[s]=o[s+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return A.prototype.toBER.call(this,e);if(e===!0)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var a=0;a<this.valueHex.byteLength;a++)n[a+1]=t[a];return r}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),t}(g(A)),T=t.BitString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,R));return r.idBlock.tagClass=1,r.idBlock.tagNumber=3,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,r,n){return 0===n?r:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n))}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),t}(k),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"value"in e&&(r.valueDec=e.value),r}return a(t,e),h(t,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.fromBER(e,t,r);if(a===-1)return a;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!==(128&i[1])){var o=new ArrayBuffer(this._valueHex.byteLength-1),u=new Uint8Array(o);u.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=o.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var s=new ArrayBuffer(n),c=new Uint8Array(s);c.set(i,n-this._valueHex.byteLength),this._valueHex=s.slice(0)}return a}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!==(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0===(128&t[1]):var a=new ArrayBuffer(this._valueHex.byteLength-1),i=new Uint8Array(a);i.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,r,n){var a=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n);return a===-1?a:(this.blockLength=n,r+n)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),a=new Uint8Array(t),i=n.slice(0),o=i.length-1,u=a.slice(0),s=u.length-1,c=0,l=s<o?o:s,f=0,h=l;h>=0;h--,f++){switch(!0){case f<u.length:c=i[o-f]+u[s-f]+r[0];break;default:c=i[o-f]+r[0]}switch(r[0]=c/10,!0){case f>=i.length:i=(0,m.utilConcatView)(new Uint8Array([c%10]),i);break;default:i[o-f]=c%10}}return r[0]>0&&(i=(0,m.utilConcatView)(r,i)),i.slice(0)}function t(e){if(e>=d.length)for(var t=d.length;t<=e;t++){for(var r=new Uint8Array([0]),n=d[t-1].slice(0),a=n.length-1;a>=0;a--){var i=new Uint8Array([(n[a]<<1)+r[0]]);r[0]=i[0]/10,n[a]=i[0]%10}r[0]>0&&(n=(0,m.utilConcatView)(r,n)),d.push(n)}return d[e]}function r(e,t){for(var r=0,n=new Uint8Array(e),a=new Uint8Array(t),i=n.slice(0),o=i.length-1,u=a.slice(0),s=u.length-1,c=void 0,l=0,f=s;f>=0;f--,l++)switch(c=i[o-l]-u[s-l]-r,!0){case c<0:r=1,i[o-l]=c+10;break;default:r=0,i[o-l]=c}if(r>0)for(var h=o-s+1;h>=0;h--,l++){if(c=i[o-l]-r,!(c<0)){r=0,i[o-l]=c;break}r=1,i[o-l]=c+10}return i.slice()}for(var n=8*this._valueHex.byteLength-1,a=new Uint8Array(8*this._valueHex.byteLength/3),i=0,o=void 0,u=new Uint8Array(this._valueHex),s="",c=!1,l=this._valueHex.byteLength-1;l>=0;l--){o=u[l];for(var f=0;f<8;f++){if(1===(1&o))switch(i){case n:a=r(t(i),a),s="-";break;default:a=e(a,t(i))}i++,o>>=1}}for(var h=0;h<a.length;h++)a[h]&&(c=!0),c&&(s+=v.charAt(a[h]));return c===!1&&(s+=v.charAt(0)),s}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=m.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,m.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),t}(g(w)),U=t.Integer=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,D));return r.idBlock.tagClass=1,r.idBlock.tagNumber=2,r}return a(t,e),h(t,[{key:"isEqual",value:function(e){return e instanceof t?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,m.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,m.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new t({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,r=new t({valueHex:this.valueBlock.valueHex});return r.valueBlock.fromDER(r.valueBlock.valueHex,0,r.valueBlock.valueHex.byteLength,e),r}}],[{key:"blockName",value:function(){return"Integer"}}]),t}(k),M=t.Enumerated=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=10,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"Enumerated"}}]),t}(U),H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.valueDec=(0,m.getParametersValue)(e,"valueDec",-1),r.isFirstSid=(0,m.getParametersValue)(e,"isFirstSid",!1),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!==(128&n[i]));i++);for(var o=new ArrayBuffer(this.blockLength),u=new Uint8Array(o),s=0;s<this.blockLength;s++)u[s]=a[s];return this.valueHex=o.slice(0),a=new Uint8Array(this.valueHex),0!==(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,m.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.isHexOnly){if(e===!0)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(var a=0;a<this.blockLength-1;a++)r[a]=128|n[a];return r[this.blockLength-1]=n[this.blockLength-1],t}var i=(0,m.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength),e===!1){var o=new Uint8Array(i);r=new Uint8Array(t);for(var u=0;u<i.byteLength-1;u++)r[u]=128|o[u];r[i.byteLength-1]=o[i.byteLength-1]}return t}},{key:"toString",value:function(){var e="";if(this.isHexOnly===!0)e=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),t}(g(p)),L=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.fromString((0,m.getParametersValue)(e,"value","")),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new H;if(n=a.fromBER(e,n,r),n===-1)return this.blockLength=0,this.error=a.error,n;0===this.value.length&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,m.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",a=!1;do if(r=e.indexOf(".",t),n=r===-1?e.substr(t):e.substr(t,r-t),t=r+1,a){var i=this.value[0],o=0;switch(i.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=[],!1}var u=parseInt(n,10);if(isNaN(u))return!0;i.valueDec=u+o,a=!1}else{var s=new H;if(s.valueDec=parseInt(n,10),isNaN(s.valueDec))return!0;0===this.value.length&&(s.isFirstSid=!0,a=!0),this.value.push(s)}while(r!==-1);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e+="."),t?(n="{"+n+"}",this.value[r].isFirstSid?e="2.{"+n+" - 80}":e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),t}(w),K=t.ObjectIdentifier=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,L));return r.idBlock.tagClass=1,r.idBlock.tagNumber=6,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),t}(k),q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return a(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),t}(g(p)),F=t.Utf8String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,q));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=12,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{
this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '+e+", using raw string")}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),t}(k),J=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return a(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),t}(g(p)),W=t.BmpString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,J));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=30,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var a=r[n];r[n]=r[n+1],r[n+1]=a}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,m.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>2))for(var o=2-i.length,u=i.length-1;u>=0;u--)r[2*n+u+o]=i[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),t}(k),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return a(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),t}(g(p)),z=t.UniversalString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,G));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=28,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,m.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>4))for(var o=4-i.length,u=i.length-1;u>=0;u--)r[4*n+u+o]=i[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),t}(k),$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value="",r.isHexOnly=!0,r}return a(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),t}(g(p)),X=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,$));return"value"in e&&r.fromString(e.value),r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),t}(k),Y=t.NumericString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=18,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"NumericString"}}]),t}(X),Q=t.PrintableString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=19,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"PrintableString"}}]),t}(X),Z=t.TeletexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=20,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"TeletexString"}}]),t}(X),ee=t.VideotexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=21,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"VideotexString"}}]),t}(X),te=t.IA5String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=22,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"IA5String"}}]),t}(X),re=t.GraphicString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=25,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"GraphicString"}}]),t}(X),ne=t.VisibleString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=26,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"VisibleString"}}]),t}(X),ae=t.GeneralString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=27,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"GeneralString"}}]),t}(X),ie=t.CharacterString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=29,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"CharacterString"}}]),t}(X),oe=t.UTCTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var a=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)a[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=23,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi,r=t.exec(e);if(null===r)return void(this.error="Wrong input string for convertion");var n=parseInt(r[1],10);n>=50?this.year=1900+n:this.year=2e3+n,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,m.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,m.padNumber)(this.month,2),e[2]=(0,m.padNumber)(this.day,2),e[3]=(0,m.padNumber)(this.hour,2),e[4]=(0,m.padNumber)(this.minute,2),e[5]=(0,m.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),t}(ne),ue=t.GeneralizedTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.millisecond=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var a=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)a[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=24,r}return a(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t=!1,r="",n="",a=0,i=void 0,o=0,u=0;if("Z"===e[e.length-1])r=e.substr(0,e.length-1),t=!0;else{var s=new Number(e[e.length-1]);if(isNaN(s.valueOf()))throw new Error("Wrong input string for convertion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for convertion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for convertion")}else{var c=1,l=r.indexOf("+"),f="";if(l===-1&&(l=r.indexOf("-"),c=-1),l!==-1){if(f=r.substr(l+1),r=r.substr(0,l),2!==f.length&&4!==f.length)throw new Error("Wrong input string for convertion");var h=new Number(f.substr(0,2));if(isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");if(o=c*h,4===f.length){if(h=new Number(f.substr(2,2)),isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");u=c*h}}}var m=r.indexOf(".");if(m===-1&&(m=r.indexOf(",")),m!==-1){var d=new Number("0"+r.substr(m));if(isNaN(d.valueOf()))throw new Error("Wrong input string for convertion");a=d.valueOf(),n=r.substr(0,m)}else n=r;switch(!0){case 8===n.length:if(i=/(\d{4})(\d{2})(\d{2})/gi,m!==-1)throw new Error("Wrong input string for convertion");break;case 10===n.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var v=60*a;this.minute=Math.floor(v),v=60*(v-this.minute),this.second=Math.floor(v),v=1e3*(v-this.second),this.millisecond=Math.floor(v)}break;case 12===n.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var p=60*a;this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case 14===n.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var g=1e3*a;this.millisecond=Math.floor(g)}break;default:throw new Error("Wrong input string for convertion")}var y=i.exec(n);if(null===y)throw new Error("Wrong input string for convertion");for(var b=1;b<y.length;b++)switch(b){case 1:this.year=parseInt(y[b],10);break;case 2:this.month=parseInt(y[b],10);break;case 3:this.day=parseInt(y[b],10);break;case 4:this.hour=parseInt(y[b],10)+o;break;case 5:this.minute=parseInt(y[b],10)+u;break;case 6:this.second=parseInt(y[b],10);break;default:throw new Error("Wrong input string for convertion")}if(t===!1){var w=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=w.getUTCFullYear(),this.month=w.getUTCMonth(),this.day=w.getUTCDay(),this.hour=w.getUTCHours(),this.minute=w.getUTCMinutes(),this.second=w.getUTCSeconds(),this.millisecond=w.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,m.padNumber)(this.year,4)),e.push((0,m.padNumber)(this.month,2)),e.push((0,m.padNumber)(this.day,2)),e.push((0,m.padNumber)(this.hour,2)),e.push((0,m.padNumber)(this.minute,2)),e.push((0,m.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,m.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),t}(ne),se=t.DATE=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=31,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"DATE"}}]),t}(F),ce=t.TimeOfDay=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=32,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),t}(F),le=t.DateTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=33,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"DateTime"}}]),t}(F),fe=t.Duration=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=34,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"Duration"}}]),t}(F),he=t.TIME=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=14,r}return a(t,e),h(t,null,[{key:"blockName",value:function(){return"TIME"}}]),t}(F),me=t.Choice=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.value=(0,m.getParametersValue)(t,"value",[]),this.optional=(0,m.getParametersValue)(t,"optional",!1)},de=t.Any=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.name=(0,m.getParametersValue)(t,"name",""),this.optional=(0,m.getParametersValue)(t,"optional",!1)},ve=t.Repeated=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.name=(0,m.getParametersValue)(t,"name",""),this.optional=(0,m.getParametersValue)(t,"optional",!1),this.value=(0,m.getParametersValue)(t,"value",new de),this.local=(0,m.getParametersValue)(t,"local",!1)};t.RawData=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.data=(0,m.getParametersValue)(t,"data",new ArrayBuffer(0))}return h(e,[{key:"fromBER",value:function(e,t,r){this.data=e.slice(t,r)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data}}]),e}()},function(e,t){"use strict";function r(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function n(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,n="",a=!0,i=!1,o=void 0;try{for(var u,s=new Uint8Array(e,t,r)[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var c=u.value,l=c.toString(16).toUpperCase();n=n+(1===l.length?"0":"")+l}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}return n}function i(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)}function o(e,t){for(var r=0,n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function u(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=r||-1,a=e,i=0,o=Math.pow(2,t),u=1;u<8;u++){if(e<o){var s=void 0;if(n<0)s=new ArrayBuffer(u),i=u;else{if(n<u)return new ArrayBuffer(0);s=new ArrayBuffer(n),i=n}for(var c=new Uint8Array(s),l=u-1;l>=0;l--){var f=Math.pow(2,l*t);c[i-l-1]=Math.floor(a/f),a-=c[i-l-1]*f}return s}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function s(){for(var e=0,t=0,r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=!0,o=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;e+=l.byteLength}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}var f=new ArrayBuffer(e),h=new Uint8Array(f),m=!0,d=!1,v=void 0;try{for(var p,g=n[Symbol.iterator]();!(m=(p=g.next()).done);m=!0){var y=p.value;h.set(new Uint8Array(y),t),t+=y.byteLength}}catch(e){d=!0,v=e}finally{try{!m&&g.return&&g.return()}finally{if(d)throw v}}return f}function c(){for(var e=0,t=0,r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=!0,o=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;e+=l.length}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}var f=new ArrayBuffer(e),h=new Uint8Array(f),m=!0,d=!1,v=void 0;try{for(var p,g=n[Symbol.iterator]();!(m=(p=g.next()).done);m=!0){var y=p.value;h.set(y,t),t+=y.length}}catch(e){d=!0,v=e}finally{try{!m&&g.return&&g.return()}finally{if(d)throw v}}return h}function l(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0===(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(n),i=0;i<this.valueHex.byteLength;i++)a[i]=0;a[0]=128&e[0];for(var u=o(a,8),s=new ArrayBuffer(this.valueHex.byteLength),c=new Uint8Array(s),l=0;l<this.valueHex.byteLength;l++)c[l]=e[l];c[0]&=127;var f=o(c,8);return f-u}function f(e){for(var t=e<0?e*-1:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var a=r-t,i=u(a,8,n),o=new Uint8Array(i);return o[0]|=128,i}var s=u(t,8,n),c=new Uint8Array(s);if(128&c[0]){var l=s.slice(0),f=new Uint8Array(l);s=new ArrayBuffer(s.byteLength+1),c=new Uint8Array(s);for(var h=0;h<l.byteLength;h++)c[h+1]=f[h];c[0]=0}return s}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function h(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}function m(e,t){for(var r=e.toString(10),n=t-r.length,a=new Array(n),i=0;i<n;i++)a[i]="0";var o=a.join("");return o.concat(r)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=0,i=0,o=0,u="",s=t?k:w;if(n){for(var c=0,l=0;l<e.length;l++)if(0!==e.charCodeAt(l)){c=l;break}e=e.slice(c)}for(;a<e.length;){var f=e.charCodeAt(a++);a>=e.length&&(i=1);var h=e.charCodeAt(a++);a>=e.length&&(o=1);var m=e.charCodeAt(a++),d=f>>2,v=(3&f)<<4|h>>4,p=(15&h)<<2|m>>6,g=63&m;1===i?p=g=64:1===o&&(g=64),u+=r?64===p?""+s.charAt(d)+s.charAt(v):64===g?""+s.charAt(d)+s.charAt(v)+s.charAt(p):""+s.charAt(d)+s.charAt(v)+s.charAt(p)+s.charAt(g):""+s.charAt(d)+s.charAt(v)+s.charAt(p)+s.charAt(g)}return u}function v(e){function t(e){for(var t=0;t<64;t++)if(i.charAt(t)===e)return t;return 64}function r(e){return 64===e?0:e}for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?k:w,o=0,u="";o<e.length;){var s=t(e.charAt(o++)),c=o>=e.length?0:t(e.charAt(o++)),l=o>=e.length?0:t(e.charAt(o++)),f=o>=e.length?0:t(e.charAt(o++)),h=r(s)<<2|r(c)>>4,m=(15&r(c))<<4|r(l)>>2,d=(3&r(l))<<6|r(f);u+=String.fromCharCode(h),64!==l&&(u+=String.fromCharCode(m)),64!==f&&(u+=String.fromCharCode(d))}if(a){for(var v=u.length,p=-1,g=v-1;g>=0;g--)if(0!==u.charCodeAt(g)){p=g;break}p!==-1&&(u=u.slice(0,p+1))}return u}function p(e){var t="",r=new Uint8Array(e),n=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;t+=String.fromCharCode(s)}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}function g(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),a=0;a<t;a++)n[a]=e.charCodeAt(a);return r}function y(e){var t=Math.log(e)/S,r=Math.floor(t),n=Math.round(t);return r===n?r:n}function b(e){if(!P(e)){if(!A(e))throw new Error("Only generator instance of generator function is a valid input");e=e()}return new Promise(function(t,r){var n=function(t){var n=void 0;try{n=e.throw(t)}catch(e){return r(e)}return a(n)},a=function a(i){var o=void 0;try{o=e.next(i)}catch(e){return r(e)}switch(!0){case o.value instanceof Promise:return o.done?t(o.value):o.value.then(a,n);case A(o.value):case P(o.value):return o.done?b(o.value).then(function(e){t(e)},n):b(o.value).then(a,n);case"function"==typeof o.value:o.value=o.value();default:return o.done?t(o.value):a(o.value)}};a()})}Object.defineProperty(t,"__esModule",{value:!0}),t.getUTCDate=r,t.getParametersValue=n,t.bufferToHexCodes=a,t.checkBufferParams=i,t.utilFromBase=o,t.utilToBase=u,t.utilConcatBuf=s,t.utilConcatView=c,t.utilDecodeTC=l,t.utilEncodeTC=f,t.isEqualBuffer=h,t.padNumber=m,t.toBase64=d,t.fromBase64=v,t.arrayBufferToString=p,t.stringToArrayBuffer=g,t.nearestPowerOf2=y,t.generatorsDriver=b;var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",S=Math.log(2),P=function(e){return"undefined"!=typeof e&&("function"==typeof e.next&&"function"==typeof e.throw)},A=function(e){if("undefined"==typeof e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||P(e))}},function(e,t,r){!function(){function e(e){this.message=e}var r=t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",r.btoa||(r.btoa=function(t){for(var r,a,i=String(t),o=0,u=n,s="";i.charAt(0|o)||(u="=",o%1);s+=u.charAt(63&r>>8-o%1*8)){if(a=i.charCodeAt(o+=.75),a>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|a}return s}),r.atob||(r.atob=function(t){var r=String(t).replace(/[=]+$/,"");if(r.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,i,o=0,u=0,s="";i=r.charAt(u++);~i&&(a=o%4?64*a+i:i,o++%4)?s+=String.fromCharCode(255&a>>(-2*o&6)):0)i=n.indexOf(i);return s})}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeStampResp=t.TimeStampReq=t.Time=t.TSTInfo=t.TBSRequest=t.SubjectDirectoryAttributes=t.SingleResponse=t.SignerInfo=t.SignedData=t.SignedAndUnsignedAttributes=t.Signature=t.SecretBag=t.SafeContents=t.SafeBag=t.RevokedCertificate=t.RevocationInfoChoices=void 0,t.ResponseData=t.ResponseBytes=t.Request=t.RelativeDistinguishedNames=t.RecipientKeyIdentifier=t.RecipientInfo=t.RecipientIdentifier=t.RecipientEncryptedKeys=t.RecipientEncryptedKey=t.RSASSAPSSParams=t.RSAPublicKey=t.RSAPrivateKey=t.RSAESOAEPParams=t.PublicKeyInfo=t.PrivateKeyUsagePeriod=t.PrivateKeyInfo=t.PolicyQualifierInfo=t.PolicyMappings=t.PolicyMapping=t.PolicyInformation=t.PolicyConstraints=t.PasswordRecipientinfo=t.PKIStatusInfo=t.PKCS8ShroudedKeyBag=t.PFX=t.PBKDF2Params=t.PBES2Params=t.OtherRevocationInfoFormat=t.OtherRecipientInfo=t.OtherPrimeInfo=t.OtherKeyAttribute=t.OtherCertificateFormat=t.OriginatorPublicKey=t.OriginatorInfo=t.OriginatorIdentifierOrKey=t.OCSPResponse=t.OCSPRequest=t.NameConstraints=t.MessageImprint=t.MacData=t.KeyTransRecipientInfo=t.KeyBag=t.KeyAgreeRecipientInfo=t.KeyAgreeRecipientIdentifier=t.KEKRecipientInfo=t.KEKIdentifier=t.IssuingDistributionPoint=t.IssuerAndSerialNumber=t.InfoAccess=t.GeneratorsDriver=t.GeneralSubtree=t.GeneralNames=t.GeneralName=t.Extensions=t.Extension=t.ExtKeyUsage=t.EnvelopedData=t.EncryptedData=t.EncryptedContentInfo=t.EncapsulatedContentInfo=t.ECPublicKey=t.ECPrivateKey=t.ECCCMSSharedInfo=t.DistributionPoint=t.DigestInfo=t.CryptoEngine=t.ContentInfo=t.CertificationRequest=t.CertificateSet=t.CertificateRevocationList=t.CertificatePolicies=t.CertificateChainValidationEngine=t.Certificate=t.CertID=t.CertBag=t.CRLDistributionPoints=t.CRLBag=t.BasicOCSPResponse=t.BasicConstraints=t.AuthorityKeyIdentifier=t.AuthenticatedSafe=t.AttributeTypeAndValue=t.Attribute=t.AltName=t.AlgorithmIdentifier=t.Accuracy=t.AccessDescription=t.kdf=t.kdfWithCounter=t.getHashAlgorithm=t.getAlgorithmByOID=t.createECDSASignatureFromCMS=t.stringPrep=t.createCMSECDSASignature=t.getAlgorithmParameters=t.getOIDByAlgorithm=t.getRandomValues=t.getCrypto=t.getEngine=t.setEngine=void 0;var a=r(386),i=r(398),o=n(i),u=r(402),s=n(u),c=r(387),l=n(c),f=r(403),h=n(f),m=r(394),d=n(m),v=r(401),p=n(v),g=r(404),y=n(g),b=r(431),w=n(b),k=r(419),S=n(k),P=r(463),A=n(P),C=r(436),_=n(C),I=r(424),O=n(I),E=r(413),B=n(E),x=r(466),N=n(x),j=r(414),V=n(j),R=r(467),T=n(R),D=r(426),U=n(D),M=r(437),H=n(M),L=r(442),K=n(L),q=r(469),F=n(q),J=r(405),W=n(J),G=r(389),z=n(G),$=r(470),X=n($),Y=r(425),Q=n(Y),Z=r(462),ee=n(Z),te=r(395),re=n(te),ne=r(391),ae=n(ne),ie=r(471),oe=n(ie),ue=r(410),se=n(ue),ce=r(409),le=n(ce),fe=r(440),he=n(fe),me=r(433),de=n(me),ve=r(416),pe=n(ve),ge=r(435),ye=n(ge),be=r(399),we=n(be),ke=r(421),Se=n(ke),Pe=r(423),Ae=n(Pe),Ce=r(468),_e=n(Ce),Ie=r(434),Oe=n(Ie),Ee=r(448),Be=n(Ee),xe=r(420),Ne=n(xe),je=r(458),Ve=n(je),Re=r(457),Te=n(Re),De=r(454),Ue=n(De),Me=r(449),He=n(Me),Le=r(472),Ke=n(Le),qe=r(446),Fe=n(qe),Je=r(473),We=n(Je),Ge=r(474),ze=n(Ge),$e=r(422),Xe=n($e),Ye=r(475),Qe=n(Ye),Ze=r(479),et=n(Ze),tt=r(450),rt=n(tt),nt=r(441),at=n(nt),it=r(451),ot=n(it),ut=r(481),st=n(ut),ct=r(456),lt=n(ct),ft=r(397),ht=n(ft),mt=r(460),dt=n(mt),vt=r(444),pt=n(vt),gt=r(412),yt=n(gt),bt=r(411),wt=n(bt),kt=r(482),St=n(kt),Pt=r(408),At=n(Pt),Ct=r(487),_t=n(Ct),It=r(459),Ot=n(It),Et=r(432),Bt=n(Et),xt=r(427),Nt=n(xt),jt=r(430),Vt=n(jt),Rt=r(429),Tt=n(Rt),Dt=r(428),Ut=n(Dt),Mt=r(393),Ht=n(Mt),Lt=r(418),Kt=n(Lt),qt=r(390),Ft=n(qt),Jt=r(461),Wt=n(Jt),Gt=r(396),zt=n(Gt),$t=r(392),Xt=n($t),Yt=r(388),Qt=n(Yt),Zt=r(453),er=n(Zt),tr=r(452),rr=n(tr),nr=r(447),ar=n(nr),ir=r(445),or=n(ir),ur=r(455),sr=n(ur),cr=r(400),lr=n(cr),fr=r(477),hr=n(fr),mr=r(480),dr=n(mr),vr=r(464),pr=n(vr),gr=r(443),yr=n(gr),br=r(438),wr=n(br),kr=r(407),Sr=n(kr),Pr=r(406),Ar=n(Pr),Cr=r(439),_r=n(Cr),Ir=r(478),Or=n(Ir),Er=r(485),Br=n(Er),xr=r(483),Nr=n(xr),jr=r(484),Vr=n(jr),Rr=r(465),Tr=n(Rr),Dr=r(417),Ur=n(Dr),Mr=r(476),Hr=n(Mr),Lr=r(486),Kr=n(Lr),qr=r(415),Fr=n(qr),Jr=r(488),Wr=n(Jr),Gr=r(489),zr=n(Gr);t.setEngine=a.setEngine,t.getEngine=a.getEngine,t.getCrypto=a.getCrypto,t.getRandomValues=a.getRandomValues,t.getOIDByAlgorithm=a.getOIDByAlgorithm,t.getAlgorithmParameters=a.getAlgorithmParameters,t.createCMSECDSASignature=a.createCMSECDSASignature,t.stringPrep=a.stringPrep,t.createECDSASignatureFromCMS=a.createECDSASignatureFromCMS,t.getAlgorithmByOID=a.getAlgorithmByOID,t.getHashAlgorithm=a.getHashAlgorithm,t.kdfWithCounter=a.kdfWithCounter,t.kdf=a.kdf,t.AccessDescription=o.default,t.Accuracy=s.default,t.AlgorithmIdentifier=l.default,t.AltName=h.default,t.Attribute=d.default,t.AttributeTypeAndValue=p.default,t.AuthenticatedSafe=y.default,t.AuthorityKeyIdentifier=w.default,t.BasicConstraints=S.default,t.BasicOCSPResponse=A.default,t.CRLBag=_.default,t.CRLDistributionPoints=O.default,t.CertBag=B.default,t.CertID=N.default,t.Certificate=V.default,t.CertificateChainValidationEngine=T.default,t.CertificatePolicies=U.default,t.CertificateRevocationList=H.default,t.CertificateSet=K.default,t.CertificationRequest=F.default,t.ContentInfo=W.default,t.CryptoEngine=z.default,t.DigestInfo=X.default,t.DistributionPoint=Q.default,t.ECCCMSSharedInfo=ee.default,t.ECPrivateKey=re.default,t.ECPublicKey=ae.default,t.EncapsulatedContentInfo=oe.default,
t.EncryptedContentInfo=se.default,t.EncryptedData=le.default,t.EnvelopedData=he.default,t.ExtKeyUsage=de.default,t.Extension=pe.default,t.Extensions=ye.default,t.GeneralName=we.default,t.GeneralNames=Se.default,t.GeneralSubtree=Ae.default,t.GeneratorsDriver=_e.default,t.InfoAccess=Oe.default,t.IssuerAndSerialNumber=Be.default,t.IssuingDistributionPoint=Ne.default,t.KEKIdentifier=Ve.default,t.KEKRecipientInfo=Te.default,t.KeyAgreeRecipientIdentifier=Ue.default,t.KeyAgreeRecipientInfo=He.default,t.KeyBag=Ke.default,t.KeyTransRecipientInfo=Fe.default,t.MacData=We.default,t.MessageImprint=ze.default,t.NameConstraints=Xe.default,t.OCSPRequest=Qe.default,t.OCSPResponse=et.default,t.OriginatorIdentifierOrKey=rt.default,t.OriginatorInfo=at.default,t.OriginatorPublicKey=ot.default,t.OtherCertificateFormat=st.default,t.OtherKeyAttribute=lt.default,t.OtherPrimeInfo=ht.default,t.OtherRecipientInfo=dt.default,t.OtherRevocationInfoFormat=pt.default,t.PBES2Params=yt.default,t.PBKDF2Params=wt.default,t.PFX=St.default,t.PKCS8ShroudedKeyBag=At.default,t.PKIStatusInfo=_t.default,t.PasswordRecipientinfo=Ot.default,t.PolicyConstraints=Bt.default,t.PolicyInformation=Nt.default,t.PolicyMapping=Vt.default,t.PolicyMappings=Tt.default,t.PolicyQualifierInfo=Ut.default,t.PrivateKeyInfo=Ht.default,t.PrivateKeyUsagePeriod=Kt.default,t.PublicKeyInfo=Ft.default,t.RSAESOAEPParams=Wt.default,t.RSAPrivateKey=zt.default,t.RSAPublicKey=Xt.default,t.RSASSAPSSParams=Qt.default,t.RecipientEncryptedKey=er.default,t.RecipientEncryptedKeys=rr.default,t.RecipientIdentifier=ar.default,t.RecipientInfo=or.default,t.RecipientKeyIdentifier=sr.default,t.RelativeDistinguishedNames=lr.default,t.Request=hr.default,t.ResponseBytes=dr.default,t.ResponseData=pr.default,t.RevocationInfoChoices=yr.default,t.RevokedCertificate=wr.default,t.SafeBag=Sr.default,t.SafeContents=Ar.default,t.SecretBag=_r.default,t.Signature=Or.default,t.SignedAndUnsignedAttributes=Br.default,t.SignedData=Nr.default,t.SignerInfo=Vr.default,t.SingleResponse=Tr.default,t.SubjectDirectoryAttributes=Ur.default,t.TBSRequest=Hr.default,t.TSTInfo=Kr.default,t.Time=Fr.default,t.TimeStampReq=Wr.default,t.TimeStampResp=zr.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t,r){_={name:e,crypto:t,subtle:r}}function o(){return _}function u(){if(null!==_.subtle)return _.subtle}function s(e){if(null!==_.crypto)return _.crypto.getRandomValues(e);throw new Error("No support for Web Cryptography API")}function c(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}function l(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:s(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:s(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e3},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}function f(e){if(e.byteLength%2!==0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t),n=new Uint8Array(r);n.set(new Uint8Array(e,0,t));var a=new b.Integer({valueHex:r}),i=new ArrayBuffer(t),o=new Uint8Array(i);o.set(new Uint8Array(e,t,t));var u=new b.Integer({valueHex:i});return new b.Sequence({value:[a.convertToDER(),u.convertToDER()]}).toBER(!1)}function h(e){var t=e.replace(/^\s+|\s+$/g,"");return t=t.replace(/\s+/g," "),t=t.toLowerCase()}function m(e){if(e instanceof b.Sequence==!1)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof b.Integer==!1)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof b.Integer==!1)return new ArrayBuffer(0);var t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();return(0,w.utilConcatBuf)(t.valueBlock.valueHex,r.valueBlock.valueHex)}function d(e){switch(e){case"1.2.840.113549.1.1.1":case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}function v(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new P.default({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=d(r.hashAlgorithm.algorithmId);if("name"in n==!1)return"";t=n.name}else t="SHA-1"}catch(e){}}return t}function p(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');var a=new ArrayBuffer(4),i=new Uint8Array(a);i[0]=0,i[1]=0,i[2]=0,i[3]=r;var o=new ArrayBuffer(0),s=u();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):(o=(0,w.utilConcatBuf)(o,t),o=(0,w.utilConcatBuf)(o,a),o=(0,w.utilConcatBuf)(o,n),s.digest({name:e},o).then(function(e){return{counter:r,result:e}}))}function g(e,t,r,n){var a=0,i=1,o=[];switch(e.toUpperCase()){case"SHA-1":a=160;break;case"SHA-256":a=256;break;case"SHA-384":a=384;break;case"SHA-512":a=512;break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var u=r/a;Math.floor(u)>0&&(i=Math.floor(u),u-i>0&&i++);for(var s=1;s<=i;s++)o.push(p(e,t,s,n));return Promise.all(o).then(function(e){for(var t=new ArrayBuffer(0),n=1,a=!0;a;){a=!1;var i=!0,o=!1,u=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;if(l.counter===n){t=(0,w.utilConcatBuf)(t,l.result),a=!0;break}}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}n++}if(r>>=3,t.byteLength>r){for(var f=new ArrayBuffer(r),h=new Uint8Array(f),m=new Uint8Array(t),d=0;d<r;d++)h[d]=m[d];return f}return t})}Object.defineProperty(t,"__esModule",{value:!0}),t.setEngine=i,t.getEngine=o,t.getCrypto=u,t.getRandomValues=s,t.getOIDByAlgorithm=c,t.getAlgorithmParameters=l,t.createCMSECDSASignature=f,t.stringPrep=h,t.createECDSASignatureFromCMS=m,t.getAlgorithmByOID=d,t.getHashAlgorithm=v,t.kdfWithCounter=p,t.kdf=g;var y=r(382),b=a(y),w=r(383),k=r(387),S=(n(k),r(388)),P=n(S),A=r(389),C=n(A),_={name:"none",crypto:null,subtle:null};!function(){if("undefined"!=typeof self&&"crypto"in self){var e="webcrypto",t=self.crypto,r=null;if("webkitSubtle"in self.crypto){try{r=self.crypto.webkitSubtle}catch(e){r=self.crypto.subtle}e="safari"}"subtle"in self.crypto&&(r=self.crypto.subtle),_={name:e,crypto:t,subtle:new C.default({name:e,crypto:r})}}}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithmId=(0,s.getParametersValue)(t,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in t&&(this.algorithmParams=(0,s.getParametersValue)(t,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new u.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof u.Any==!1&&e.push(this.algorithmParams),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof u.Any==!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new u.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof u.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new u.ObjectIdentifier({name:t.algorithmIdentifier||""}),new u.Any({name:t.algorithmParams||"",optional:!0})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,c.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=(0,c.getParametersValue)(t,"saltLength",e.defaultValues("saltLength")),this.trailerField=(0,c.getParametersValue)(t,"trailerField",e.defaultValues("trailerField")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSASSA_PSS_params");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new f.default({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new s.Integer({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new s.Integer({value:this.trailerField})]})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null});case"maskGenAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[f.default.schema(t.hashAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[f.default.schema(t.maskGenAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new s.Integer({name:t.saltLength||""})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new s.Integer({name:t.trailerField||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(390),f=n(l),h=r(393),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.crypto=(0,c.getParametersValue)(t,"crypto",{}),this.name=(0,c.getParametersValue)(t,"name","")}return o(e,[{key:"importKey",value:function(e,t,r,n,a){var i=this,o={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.crypto.importKey("raw",t,r,n,a);case"spki":var u=s.fromBER(t);if(u.offset===-1)return Promise.reject("Incorrect keyData");var l=new f.default;try{l.fromSchema(u.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="PS1";break;case"SHA-256":o.alg="PS256";break;case"SHA-384":o.alg="PS384";break;case"SHA-512":o.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(a=["verify"],o.kty="RSA",o.ext=n,o.key_ops=a,"1.2.840.113549.1.1.1"!==l.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId);if("alg"in o==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RS1";break;case"SHA-256":o.alg="RS256";break;case"SHA-384":o.alg="RS384";break;case"SHA-512":o.alg="RS512";break;default:return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId)}var h=l.toJSON(),d=!0,v=!1,p=void 0;try{for(var g,y=Object.keys(h)[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var b=g.value;o[b]=h[b]}}catch(e){v=!0,p=e}finally{try{!d&&y.return&&y.return()}finally{if(v)throw p}}break;case"ECDSA":a=["verify"];case"ECDH":if(o={kty:"EC",ext:n,key_ops:a},"1.2.840.10045.2.1"!==l.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId);var w=l.toJSON(),k=!0,S=!1,P=void 0;try{for(var A,C=Object.keys(w)[Symbol.iterator]();!(k=(A=C.next()).done);k=!0){var _=A.value;o[_]=w[_]}}catch(e){S=!0,P=e}finally{try{!k&&C.return&&C.return()}finally{if(S)throw P}}break;case"RSA-OAEP":if(o.kty="RSA",o.ext=n,o.key_ops=a,"safari"===this.name.toLowerCase())o.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RSA-OAEP-1";break;case"SHA-256":o.alg="RSA-OAEP-256";break;case"SHA-384":o.alg="RSA-OAEP-384";break;case"SHA-512":o.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId)}var I=l.toJSON(),O=!0,E=!1,B=void 0;try{for(var x,N=Object.keys(I)[Symbol.iterator]();!(O=(x=N.next()).done);O=!0){var j=x.value;o[j]=I[j]}}catch(e){E=!0,B=e}finally{try{!O&&N.return&&N.return()}finally{if(E)throw B}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"pkcs8":var V=new m.default,R=s.fromBER(t);if(R.offset===-1)return Promise.reject("Incorrect keyData");try{V.fromSchema(R.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="PS1";break;case"SHA-256":o.alg="PS256";break;case"SHA-384":o.alg="PS384";break;case"SHA-512":o.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(a=["sign"],o.kty="RSA",o.ext=n,o.key_ops=a,"1.2.840.113549.1.1.1"!==V.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: "+V.privateKeyAlgorithm.algorithmId);if("alg"in o==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RS1";break;case"SHA-256":o.alg="RS256";break;case"SHA-384":o.alg="RS384";break;case"SHA-512":o.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var T=V.toJSON(),D=!0,U=!1,M=void 0;try{for(var H,L=Object.keys(T)[Symbol.iterator]();!(D=(H=L.next()).done);D=!0){var K=H.value;o[K]=T[K]}}catch(e){U=!0,M=e}finally{try{!D&&L.return&&L.return()}finally{if(U)throw M}}break;case"ECDSA":a=["sign"];case"ECDH":if(o={kty:"EC",ext:n,key_ops:a},"1.2.840.10045.2.1"!==V.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: "+V.privateKeyAlgorithm.algorithmId);var q=V.toJSON(),F=!0,J=!1,W=void 0;try{for(var G,z=Object.keys(q)[Symbol.iterator]();!(F=(G=z.next()).done);F=!0){var $=G.value;o[$]=q[$]}}catch(e){J=!0,W=e}finally{try{!F&&z.return&&z.return()}finally{if(J)throw W}}break;case"RSA-OAEP":if(o.kty="RSA",o.ext=n,o.key_ops=a,"safari"===this.name.toLowerCase())o.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RSA-OAEP-1";break;case"SHA-256":o.alg="RSA-OAEP-256";break;case"SHA-384":o.alg="RSA-OAEP-384";break;case"SHA-512":o.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var X=V.toJSON(),Y=!0,Q=!1,Z=void 0;try{for(var ee,te=Object.keys(X)[Symbol.iterator]();!(Y=(ee=te.next()).done);Y=!0){var re=ee.value;o[re]=X[re]}}catch(e){Q=!0,Z=e}finally{try{!Y&&te.return&&te.return()}finally{if(Q)throw Z}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"jwk":o=t;break;default:return Promise.reject("Incorrect format: "+e)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(function(){return i.crypto.importKey("jwk",(0,c.stringToArrayBuffer)(JSON.stringify(o)),r,n,a)}).then(function(e){return e},function(e){return i.crypto.importKey("jwk",o,r,n,a)}):this.crypto.importKey("jwk",o,r,n,a)}},{key:"exportKey",value:function(e,t){var r=this.crypto.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(function(e){return e instanceof ArrayBuffer?JSON.parse((0,c.arrayBufferToString)(e)):e})),e.toLowerCase()){case"raw":return this.crypto.exportKey("raw",t);case"spki":r=r.then(function(e){var t=new f.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(function(e){var t=new m.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: "+e)}return r}},{key:"convert",value:function(e,t,r,n,a,i){var o=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(function(){return o.importKey("raw",r,n,a,i)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("raw",r,n,a,i)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve().then(function(){return o.importKey("raw",r,n,a,i)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("spki",r,n,a,i)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(function(){return o.importKey("spki",r,n,a,i)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,a,i)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,a,i)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,a,i)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,a,i)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,a,i)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: "+t)}default:return Promise.reject("Incorrect inputFormat: "+e)}}},{key:"encrypt",value:function(){var e;return(e=this.crypto).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.crypto).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.crypto).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.crypto).verify.apply(e,arguments);
}},{key:"digest",value:function(){var e;return(e=this.crypto).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.crypto).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.crypto).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.crypto).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.crypto).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.crypto).unwrapKey.apply(e,arguments)}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(387),h=n(f),m=r(391),d=n(m),v=r(392),p=n(v),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.algorithm=(0,c.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=(0,c.getParametersValue)(t,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in t&&(this.parsedKey=(0,c.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PUBLIC_KEY_INFO");switch(this.algorithm=new h.default({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":"algorithmParams"in this.algorithm&&this.algorithm.algorithmParams instanceof s.ObjectIdentifier&&(this.parsedKey=new d.default({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex}));break;case"1.2.840.113549.1.1.1":var n=s.fromBER(this.subjectPublicKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new p.default({schema:n.result}))}}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}var t=this.parsedKey.toJSON(),r=!0,n=!1,a=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;e[u]=t[u]}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new d.default({json:e}),this.algorithm=new h.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new s.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new p.default({json:e}),this.algorithm=new h.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new s.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.subjectPublicKey=new s.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if("undefined"==typeof e)return Promise.reject("Need to provide publicKey input parameter");var n=(0,l.getCrypto)();return"undefined"==typeof n?Promise.reject("Unable to create WebCrypto object"):(t=t.then(function(){return n.exportKey("spki",e)}),t=t.then(function(e){var t=s.fromBER(e);try{r.fromSchema(t.result)}catch(e){return Promise.reject("Error during initializing object from schema")}},function(e){return Promise.reject("Error during exporting public key: "+e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new h.default;case"subjectPublicKey":return new s.BitString;default:throw new Error("Invalid member name for PublicKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[h.default.schema(t.algorithm||{}),new s.BitString({name:t.subjectPublicKey||""})]})}}]),e}();t.default=g},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.x=(0,s.getParametersValue)(t,"x",e.defaultValues("x")),this.y=(0,s.getParametersValue)(t,"y",e.defaultValues("y")),this.namedCurve=(0,s.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return i(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==!1)throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=new Uint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var r=void 0;switch(this.namedCurve){case"1.2.840.10045.3.1.7":r=32;break;case"1.3.132.0.34":r=48;break;case"1.3.132.0.35":r=66;break;default:throw new Error("Incorrect curve OID: "+this.namedCurve)}if(e.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,r+1),this.y=e.slice(1+r,2*r+1)}},{key:"toSchema",value:function(){return new u.RawData({data:(0,s.utilConcatBuf)(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}return{crv:e,x:(0,s.toBase64)((0,s.arrayBufferToString)(this.x),!0,!0,!0),y:(0,s.toBase64)((0,s.arrayBufferToString)(this.y),!0,!0,!0)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');if(this.x=(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.x,!0)).slice(0,t),!("y"in e))throw new Error('Absent mandatory parameter "y"');this.y=(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.y,!0)).slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return(0,s.isEqualBuffer)(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: "+t)}}},{key:"schema",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new u.RawData}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.modulus=(0,s.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,s.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:(0,s.toBase64)((0,s.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,s.toBase64)((0,s.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.n,!0)).slice(0,256)}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":return new u.Integer;case"publicExponent":return new u.Integer;default:throw new Error("Invalid member name for RSAPublicKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.modulus||""}),new u.Integer({name:t.publicExponent||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=r(394),m=n(h),d=r(395),v=n(d),p=r(396),g=n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKeyAlgorithm=(0,c.getParametersValue)(t,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=(0,c.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"attributes"in t&&(this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),"parsedKey"in t&&(this.parsedKey=(0,c.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new f.default({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,function(e){return new m.default({schema:e})})),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var n=s.fromBER(this.privateKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new g.default({schema:n.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof s.ObjectIdentifier){var a=s.fromBER(this.privateKey.valueBlock.valueHex);a.offset!==-1&&(this.parsedKey=new v.default({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:a.result}))}}}},{key:"toSchema",value:function(){var e=[new s.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}var r=this.parsedKey.toJSON(),n=!0,a=!1,i=void 0;try{for(var o,u=Object.keys(r)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;t[s]=r[s]}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new v.default({json:e}),this.privateKeyAlgorithm=new f.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new s.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new g.default({json:e}),this.privateKeyAlgorithm=new f.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new s.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.privateKey=new s.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new f.default;case"privateKey":return new s.OctetString;case"attributes":return[];default:throw new Error("Invalid member name for PrivateKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),f.default.schema(t.privateKeyAlgorithm||{}),new s.OctetString({name:t.privateKey||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.attributes||"",value:m.default.schema()})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,s.getParametersValue)(t,"type",e.defaultValues("type")),this.values=(0,s.getParametersValue)(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{type:"type",values:"values"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTRIBUTE");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.type}),new u.Set({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.type||""}),new u.Set({name:t.setName||"",value:[new u.Repeated({name:t.values||"",value:new u.Any})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(391),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKey=(0,c.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"namedCurve"in t&&(this.namedCurve=(0,c.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in t&&(this.publicKey=(0,c.getParametersValue)(t,"publicKey",e.defaultValues("publicKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var n={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(n.namedCurve=this.namedCurve),this.publicKey=new f.default(n)}}},{key:"toSchema",value:function(){var e=[new s.Integer({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.ObjectIdentifier({value:this.namedCurve})]})),"publicKey"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new s.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==!1||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:(0,c.toBase64)((0,c.arrayBufferToString)(this.privateKey.valueBlock.valueHex),!0,!0,!0)};if("publicKey"in this){var n=this.publicKey.toJSON();r.x=n.x,r.y=n.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');this.privateKey=new s.OctetString({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.d,!0)).slice(0,t)}),"x"in e&&"y"in e&&(this.publicKey=new f.default({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new s.OctetString;case"namedCurve":return"";case"publicKey":return new f.default;default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return f.default.compareWithDefault("namedCurve",r.namedCurve)&&f.default.compareWithDefault("x",r.x)&&f.default.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.OctetString({name:t.privateKey||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.ObjectIdentifier({name:t.namedCurve||""})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.BitString({name:t.publicKey||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(397),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.modulus=(0,c.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,c.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=(0,c.getParametersValue)(t,"privateExponent",e.defaultValues("privateExponent")),this.prime1=(0,c.getParametersValue)(t,"prime1",e.defaultValues("prime1")),this.prime2=(0,c.getParametersValue)(t,"prime2",e.defaultValues("prime2")),this.exponent1=(0,c.getParametersValue)(t,"exponent1",e.defaultValues("exponent1")),this.exponent2=(0,c.getParametersValue)(t,"exponent2",e.defaultValues("exponent2")),this.coefficient=(0,c.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in t&&(this.otherPrimeInfos=(0,c.getParametersValue)(t,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new s.Sequence({value:Array.from(this.otherPrimeInfos,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={n:(0,c.toBase64)((0,c.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,c.toBase64)((0,c.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:(0,c.toBase64)((0,c.arrayBufferToString)(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:(0,c.toBase64)((0,c.arrayBufferToString)(this.prime1.valueBlock.valueHex),!0,!0,!0),q:(0,c.toBase64)((0,c.arrayBufferToString)(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:(0,c.toBase64)((0,c.arrayBufferToString)(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:(0,c.toBase64)((0,c.arrayBufferToString)(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:(0,c.toBase64)((0,c.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,function(e){return e.toJSON()})),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,function(e){return new f.default({json:e})}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":return new s.Integer;case"publicExponent":return new s.Integer;case"privateExponent":return new s.Integer;case"prime1":return new s.Integer;case"prime2":return new s.Integer;case"exponent1":return new s.Integer;case"exponent2":return new s.Integer;case"coefficient":return new s.Integer;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Integer({name:t.modulus||""}),new s.Integer({name:t.publicExponent||""}),new s.Integer({name:t.privateExponent||""}),new s.Integer({name:t.prime1||""}),new s.Integer({name:t.prime2||""}),new s.Integer({name:t.exponent1||""}),new s.Integer({name:t.exponent2||""}),new s.Integer({name:t.coefficient||""}),new s.Sequence({optional:!0,value:[new s.Repeated({name:t.otherPrimeInfosName||"",value:f.default.schema(t.otherPrimeInfo||{})})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.prime=(0,s.getParametersValue)(t,"prime",e.defaultValues("prime")),this.exponent=(0,s.getParametersValue)(t,"exponent",e.defaultValues("exponent")),this.coefficient=(0,s.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:(0,s.toBase64)((0,s.arrayBufferToString)(this.prime.valueBlock.valueHex),!0,!0),d:(0,s.toBase64)((0,s.arrayBufferToString)(this.exponent.valueBlock.valueHex),!0,!0),t:(0,s.toBase64)((0,s.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":return new u.Integer;case"exponent":return new u.Integer;case"coefficient":return new u.Integer;default:throw new Error("Invalid member name for OtherPrimeInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.prime||""}),new u.Integer({name:t.exponent||""}),new u.Integer({name:t.coefficient||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);
return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.accessMethod=(0,c.getParametersValue)(t,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=(0,c.getParametersValue)(t,"accessLocation",e.defaultValues("accessLocation")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new f.default({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new f.default;default:throw new Error("Invalid member name for AccessDescription class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.accessMethod||""}),f.default.schema(t.accessLocation||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,h.getParametersValue)(e,"names",{});return new f.Sequence({optional:t,value:[new f.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new f.Primitive({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new f.Constructed({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new f.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new f.Constructed({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new f.Repeated({value:new f.PrintableString})]})]})}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new f.Sequence({optional:e,value:[new f.PrintableString,new f.PrintableString]})}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new f.Set({optional:e,value:[new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new f.Any]})]})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(382),f=a(l),h=r(383),m=r(400),d=n(m),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,h.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,h.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return c(e,[{key:"fromSchema",value:function(t){var r=f.compareSchema(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GENERAL_NAME");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var n=r.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;var a=n.toBER(!1);this.value=f.fromBER(a).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new d.default({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new f.OctetString({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var i=r.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;var o=i.toBER(!1);this.value=f.fromBER(o).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new f.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new f.IA5String({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new f.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var n=new f.ObjectIdentifier({value:this.value});return n.idBlock.tagClass=3,n.idBlock.tagNumber=this.type,n;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type};return"string"==typeof this.value?e.value=this.value:e.value=this.value.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,h.getParametersValue)(e,"names",{});return new f.Choice({value:[new f.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new f.ObjectIdentifier,new f.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new f.Any]})]}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new f.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[o(t.builtInStandardAttributes||{},!1),u(!0),s(!0)]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[d.default.schema(t.directoryName||{})]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new f.Choice({value:[new f.TeletexString,new f.PrintableString,new f.UniversalString,new f.Utf8String,new f.BmpString]})]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new f.Choice({value:[new f.TeletexString,new f.PrintableString,new f.UniversalString,new f.Utf8String,new f.BmpString]})]})]}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(382),c=a(s),l=r(383),f=r(401),h=n(f),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.typesAndValues=(0,l.getParametersValue)(t,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=(0,l.getParametersValue)(t,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RDN");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,function(e){return new h.default({schema:e})})),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){if(0===this.valueBeforeDecode.byteLength)return new c.Sequence({value:[new c.Set({value:Array.from(this.typesAndValues,function(e){return e.toSchema()})})]});var e=c.fromBER(this.valueBeforeDecode);return e.result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,function(e){return e.toJSON()})}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r=!0,n=!1,a=void 0;try{for(var i,u=this.typesAndValues.entries()[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var s=o(i.value,2),c=s[0],f=s[1];if(f.isEqual(t.typesAndValues[c])===!1)return!1}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return!0}return t instanceof ArrayBuffer&&(0,l.isEqualBuffer)(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"",value:[new c.Repeated({name:t.repeatedSequence||"",value:new c.Set({value:[new c.Repeated({name:t.repeatedSet||"",value:h.default.schema(t.typeAndValue||{})})]})})]})}}]),e}();t.default=m},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=r(386),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,s.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,s.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTR_TYPE_AND_VALUE");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.type!==t.type)return!1;if(this.value instanceof u.Utf8String&&t.value instanceof u.Utf8String||this.value instanceof u.BmpString&&t.value instanceof u.BmpString||this.value instanceof u.UniversalString&&t.value instanceof u.UniversalString||this.value instanceof u.NumericString&&t.value instanceof u.NumericString||this.value instanceof u.PrintableString&&t.value instanceof u.PrintableString||this.value instanceof u.TeletexString&&t.value instanceof u.TeletexString||this.value instanceof u.VideotexString&&t.value instanceof u.VideotexString||this.value instanceof u.IA5String&&t.value instanceof u.IA5String||this.value instanceof u.GraphicString&&t.value instanceof u.GraphicString||this.value instanceof u.VisibleString&&t.value instanceof u.VisibleString||this.value instanceof u.GeneralString&&t.value instanceof u.GeneralString||this.value instanceof u.CharacterString&&t.value instanceof u.CharacterString){var r=(0,c.stringPrep)(this.value.valueBlock.value),n=(0,c.stringPrep)(t.value.valueBlock.value);if(0!==r.localeCompare(n))return!1}else if((0,s.isEqualBuffer)(this.value.valueBeforeDecode,t.value.valueBeforeDecode)===!1)return!1;return!0}return t instanceof ArrayBuffer&&(0,s.isEqualBuffer)(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.type||""}),new u.Any({name:t.value||""})]})}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"seconds"in t&&(this.seconds=(0,s.getParametersValue)(t,"seconds",e.defaultValues("seconds"))),"millis"in t&&(this.millis=(0,s.getParametersValue)(t,"millis",e.defaultValues("millis"))),"micros"in t&&(this.micros=(0,s.getParametersValue)(t,"micros",e.defaultValues("micros"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for tsp.Accuracy");if("seconds"in r.result&&(this.seconds=r.result.seconds.valueBlock.valueDec),"millis"in r.result){var n=new u.Integer({valueHex:r.result.millis.valueBlock.valueHex});this.millis=n.valueBlock.valueDec}if("micros"in r.result){var a=new u.Integer({valueHex:r.result.micros.valueBlock.valueHex});this.micros=a.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("seconds"in this&&e.push(new u.Integer({value:this.seconds})),"millis"in this){var t=new u.Integer({value:this.millis});e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHex}))}if("micros"in this){var r=new u.Integer({value:this.micros});e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:r.valueBlock.valueHex}))}return new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}],[{key:"defaultValues",value:function(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error("Invalid member name for Accuracy class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"seconds":case"millis":case"micros":return r===e.defaultValues(t);default:throw new Error("Invalid member name for Accuracy class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",optional:!0,value:[new u.Integer({optional:!0,name:t.seconds||""}),new u.Primitive({name:t.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Primitive({name:t.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.altNames=(0,c.getParametersValue)(t,"altNames",e.defaultValues("altNames")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{altNames:"altNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.altNames,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.altNames||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(382),l=a(c),f=r(383),h=r(405),m=n(h),d=r(406),v=n(d),p=r(440),g=n(p),y=r(409),b=n(y),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.safeContents=(0,f.getParametersValue)(t,"safeContents",e.defaultValues("safeContents")),"parsedValue"in t&&(this.parsedValue=(0,f.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{contentInfos:"contentInfos"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthenticatedSafe");this.safeContents=Array.from(r.result.contentInfos,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.safeContents,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeContents:Array.from(this.safeContents,function(e){return e.toJSON()})}}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');var r=Promise.resolve();this.parsedValue={safeContents:[]};var n=!0,a=!1,i=void 0;try{for(var s,c=this.safeContents.entries()[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var f=u(s.value,2),h=f[0],m=f[1];switch(m.contentType){case"1.2.840.113549.1.7.1":if(m.content instanceof l.OctetString==!1)return Promise.reject('Wrong type of "this.safeContents[j].content"');var d=l.fromBER(m.content.valueBlock.valueHex);if(d.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "content.content"');this.parsedValue.safeContents.push({privacyMode:0,value:new v.default({schema:d.result})});break;case"1.2.840.113549.1.7.3":var p=function(){var n=new g.default({schema:m.content});if("recipientCertificate"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientCertificate" in "parameters.safeContents[j]"')};var a=e.safeContents[h].recipientCertificate;if("recipientKey"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientKey" in "parameters.safeContents[j]"')};var i=e.safeContents[h].recipientKey;r=r.then(function(){return n.decrypt(0,{recipientCertificate:a,recipientPrivateKey:i})}),r=r.then(function(e){var r=l.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:2,value:new v.default({schema:r.result})}),Promise.resolve())})}();if("object"===("undefined"==typeof p?"undefined":o(p)))return p.v;break;case"1.2.840.113549.1.7.6":var y=function(){var n=new b.default({schema:m.content});if("password"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "password" in "parameters.safeContents[j]"')};var a=e.safeContents[h].password;r=r.then(function(){return n.decrypt({password:a})},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=l.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:1,value:new v.default({schema:r.result})}),Promise.resolve())},function(e){return Promise.reject(e)})}();if("object"===("undefined"==typeof y?"undefined":o(y)))return y.v;break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '+m.contentType)}}}catch(e){a=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw i}}return r}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please run "parseValues" first or add "parsedValue" manually');if(this.parsedValue instanceof Object==!1)return Promise.reject('The "this.parsedValue" must has "Object" type');if(this.parsedValue.safeContents instanceof Array==!1)return Promise.reject('The "this.parsedValue.safeContents" must has "Array" type');if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.parsedValue.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');var r=Promise.resolve();this.safeContents=[];var n=!0,a=!1,i=void 0;try{for(var s,c=this.parsedValue.safeContents.entries()[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var f=u(s.value,2),h=f[0],d=f[1];if("privacyMode"in d==!1)return Promise.reject('The "privacyMode" is a mandatory parameter for "content"');if("value"in d==!1)return Promise.reject('The "value" is a mandatory parameter for "content"');if(d.value instanceof v.default==!1)return Promise.reject('The "content.value" must has "SafeContents" type');switch(d.privacyMode){case 0:!function(){var e=d.value.toSchema().toBER(!1);r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.1",content:new l.OctetString({valueHex:e})}))})}();break;case 1:!function(){var n=new b.default,a=e.safeContents[h];a.contentToEncrypt=d.value.toSchema().toBER(!1),r=r.then(function(){return n.encrypt(a)},function(e){return Promise.reject(e)}),r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.6",content:n.toSchema()}))},function(e){return Promise.reject(e)})}();break;case 2:var p=function(){var n=new g.default,a=d.value.toSchema().toBER(!1);if("encryptingCertificate"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptingCertificate" in "parameters.safeContents[i]"')};if("encryptionAlgorithm"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptionAlgorithm" in "parameters.safeContents[i]"')};switch(!0){case"aes-cbc"===e.safeContents[h].encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===e.safeContents[h].encryptionAlgorithm.name.toLowerCase():break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '+e.safeContents[h].encryptionAlgorithm)}}switch(!0){case 128===e.safeContents[h].encryptionAlgorithm.length:case 192===e.safeContents[h].encryptionAlgorithm.length:case 256===e.safeContents[h].encryptionAlgorithm.length:break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '+e.safeContents[h].encryptionAlgorithm.length)}}var i=e.safeContents[h].encryptionAlgorithm;n.addRecipientByCertificate(e.safeContents[h].encryptingCertificate),r=r.then(function(){return n.encrypt(i,a)}),r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.3",content:n.toSchema()}))})}();if("object"===("undefined"==typeof p?"undefined":o(p)))return p.v;break;default:return Promise.reject('Incorrect value for "content.privacyMode": '+d.privacyMode)}}}catch(e){a=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw i}}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"safeContents":return[];case"parsedValue":return{};default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeContents":return 0===t.length;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.contentInfos||"",value:m.default.schema()})]})}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.contentType=(0,s.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.content=(0,s.getParametersValue)(t,"content",e.defaultValues("content")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_CONTENT_INFO");this.contentType=r.result.contentType.valueBlock.toString(),this.content=r.result.content}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.contentType}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}},{key:"toJSON",value:function(){var e={contentType:this.contentType};return this.content instanceof u.Any||(e.content=this.content.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"content":return new u.Any;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"contentType":return""===t;case"content":return t instanceof u.Any;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,
s.getParametersValue)(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new u.Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new u.ObjectIdentifier({name:t.contentType||"contentType"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.content||"content"})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(407),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.safeBags=(0,c.getParametersValue)(t,"safeBags",e.defaultValues("safeBags")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{safeBags:"safeBags"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SafeContents");this.safeBags=Array.from(r.result.safeBags,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.safeBags,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeBags:Array.from(this.safeBags,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"safeBags":return[];default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeBags":return 0===t.length;default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.safeBags||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(394),f=n(l),h=r(393),m=n(h),d=r(408),v=n(d),p=r(413),g=n(p),y=r(436),b=n(y),w=r(439),k=n(w),S=r(406),P=n(S),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.bagId=(0,c.getParametersValue)(t,"bagId",e.defaultValues("bagId")),this.bagValue=(0,c.getParametersValue)(t,"bagValue",e.defaultValues("bagValue")),"bagAttributes"in t&&(this.bagAttributes=(0,c.getParametersValue)(t,"bagAttributes",e.defaultValues("bagAttributes"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{bagId:"bagId",bagValue:"bagValue",bagAttributes:"bagAttributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SafeBag");switch(this.bagId=r.result.bagId.valueBlock.toString(),this.bagId){case"1.2.840.113549.1.12.10.1.1":this.bagValue=new m.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.2":this.bagValue=new v.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.3":this.bagValue=new g.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.4":this.bagValue=new b.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.5":this.bagValue=new k.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.6":this.bagValue=new P.default({schema:r.result.bagValue});break;default:throw new Error('Invalid "bagId" for SafeBag: '+this.bagId)}"bagAttributes"in r.result&&(this.bagAttributes=Array.from(r.result.bagAttributes,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[new s.ObjectIdentifier({value:this.bagId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return"bagAttributes"in this&&e.push(new s.Set({value:Array.from(this.bagAttributes,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return"bagAttributes"in this&&(e.bagAttributes=Array.from(this.bagAttributes,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"bagId":return"";case"bagValue":return new s.Any;case"bagAttributes":return[];default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"bagId":return""===t;case"bagValue":return t instanceof s.Any;case"bagAttributes":return 0===t.length;default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.bagId||"bagId"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.bagValue||"bagValue"})]}),new s.Set({optional:!0,value:[new s.Repeated({name:t.bagAttributes||"bagAttributes",value:f.default.schema()})]})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=r(409),m=n(h),d=r(410),v=n(d),p=r(393),g=n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.encryptionAlgorithm=(0,c.getParametersValue)(t,"encryptionAlgorithm",e.defaultValues("encryptionAlgorithm")),this.encryptedData=(0,c.getParametersValue)(t,"encryptedData",e.defaultValues("encryptedData")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{encryptionAlgorithm:{names:{blockName:"encryptionAlgorithm"}},encryptedData:"encryptedData"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8ShroudedKeyBag");this.encryptionAlgorithm=new f.default({schema:r.result.encryptionAlgorithm}),this.encryptedData=r.result.encryptedData}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}},{key:"toJSON",value:function(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}},{key:"parseInternalValues",value:function(e){var t=this,r=Promise.resolve(),n=new m.default({encryptedContentInfo:new v.default({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});return r=r.then(function(){return n.decrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=s.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing ASN.1 data"):void(t.parsedValue=new g.default({schema:r.result}))},function(e){return Promise.reject(e)})}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please initialize "parsedValue" first');var r=Promise.resolve(),n=new m.default;return r=r.then(function(){return e.contentToEncrypt=t.parsedValue.toSchema().toBER(!1),n.encrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(){t.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,t.encryptedData=n.encryptedContentInfo.encryptedContent})}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptionAlgorithm":return new f.default;case"encryptedData":return new s.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"encryptionAlgorithm":return f.default.compareWithDefault("algorithmId",r.algorithmId)&&"algorithmParams"in r==!1;case"encryptedData":return r.isEqual(e.defaultValues(t));case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.encryptionAlgorithm||{names:{blockName:"encryptionAlgorithm"}}),new s.Choice({value:[new s.OctetString({name:t.encryptedData||"encryptedData"}),new s.OctetString({idBlock:{isConstructed:!0},name:t.encryptedData||"encryptedData"})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(410),h=n(f),m=r(394),d=n(m),v=r(411),p=n(v),g=r(387),y=n(g),b=r(412),w=n(b),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.encryptedContentInfo=(0,c.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,c.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_ENCRYPTED_DATA");this.version=r.result.version.valueBlock.valueDec,this.encryptedContentInfo=new h.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new d.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"encrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==!1)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');var r=(0,l.getOIDByAlgorithm)(e.contentEncryptionAlgorithm);if(""===r)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var n=(0,l.getOIDByAlgorithm)({name:"PBKDF2"});if(""===n)return Promise.reject("Can not find OID for PBKDF2");var a=(0,l.getOIDByAlgorithm)({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===a)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '+e.hmacHashAlgorithm);var i=(0,l.getCrypto)();if("undefined"==typeof i)return Promise.reject("Unable to create WebCrypto object");var o=Promise.resolve(),u=new ArrayBuffer(16),c=new Uint8Array(u);(0,l.getRandomValues)(c);var f=new ArrayBuffer(64),m=new Uint8Array(f);(0,l.getRandomValues)(m);var d=new Uint8Array(e.contentToEncrypt),v=new p.default({salt:new s.OctetString({valueHex:f}),iterationCount:e.iterationCount,prf:new y.default({algorithmId:a,algorithmParams:new s.Null})});return o=o.then(function(){var t=new Uint8Array(e.password);return i.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),o=o.then(function(t){return i.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:m,iterations:e.iterationCount},t,e.contentEncryptionAlgorithm,!1,["encrypt"])},function(e){return Promise.reject(e)}),o=o.then(function(t){return i.encrypt({name:e.contentEncryptionAlgorithm.name,iv:c},t,d)},function(e){return Promise.reject(e)}),o=o.then(function(e){var a=new w.default({keyDerivationFunc:new y.default({algorithmId:n,algorithmParams:v.toSchema()}),encryptionScheme:new y.default({algorithmId:r,algorithmParams:new s.OctetString({valueHex:u})})});t.encryptedContentInfo=new h.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new y.default({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:a.toSchema()}),encryptedContent:new s.OctetString({valueHex:e})})},function(e){return Promise.reject(e)})}},{key:"decrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("1.2.840.113549.1.5.13"!==this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '+this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=(0,l.getCrypto)();if("undefined"==typeof r)return Promise.reject("Unable to create WebCrypto object");var n=Promise.resolve(),a=void 0;try{a=new w.default({schema:this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}var i=void 0;try{i=new p.default({schema:a.keyDerivationFunc.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}var o=(0,l.getAlgorithmByOID)(a.encryptionScheme.algorithmId);if("name"in o==!1)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '+a.encryptionScheme.algorithmId);var u=a.encryptionScheme.algorithmParams.valueBlock.valueHex,s=new Uint8Array(u),f=i.salt.valueBlock.valueHex,h=new Uint8Array(f),m=i.iterationCount,d="SHA-1";if("prf"in i){var v=(0,l.getAlgorithmByOID)(i.prf.algorithmId);if("name"in v==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");d=v.hash.name}return n=n.then(function(){return r.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),n=n.then(function(e){return r.deriveKey({name:"PBKDF2",hash:{name:d},salt:h,iterations:m},e,o,!1,["decrypt"])},function(e){return Promise.reject(e)}),n=n.then(function(e){var n=new ArrayBuffer(0);if(t.encryptedContentInfo.encryptedContent.idBlock.isConstructed===!1)n=t.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var a=!0,i=!1,u=void 0;try{for(var l,f=t.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;n=(0,c.utilConcatBuf)(n,h.valueBlock.valueHex)}}catch(e){i=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(i)throw u}}}return r.decrypt({name:o.name,iv:s},e,n)},function(e){return Promise.reject(e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"encryptedContentInfo":return new h.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"version":return 0===t;case"encryptedContentInfo":return h.default.compareWithDefault("contentType",t.contentType)&&h.default.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&h.default.compareWithDefault("encryptedContent",t.encryptedContent);case"unprotectedAttrs":return 0===t.length;default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),h.default.schema(t.encryptedContentInfo||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.unprotectedAttrs||"",value:d.default.schema()})]})]})}}]),e}();t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),this.contentType=(0,c.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.contentEncryptionAlgorithm=(0,c.getParametersValue)(t,"contentEncryptionAlgorithm",e.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in t&&(this.encryptedContent=t.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&this.encryptedContent.idBlock.isConstructed===!1)){for(var r=new s.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,a=this.encryptedContent.valueBlock.valueHex.byteLength;a>0;){for(var o=new Uint8Array(this.encryptedContent.valueBlock.valueHex,n,n+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-n:1024),u=new ArrayBuffer(o.length),l=new Uint8Array(u),f=0;f<l.length;f++)l[f]=o[f];r.valueBlock.value.push(new s.OctetString({valueHex:u})),a-=o.length,n+=o.length}this.encryptedContent=r}"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new f.default({schema:r.result.contentEncryptionAlgorithm}),"encryptedContent"in r.result&&(this.encryptedContent=r.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}},{key:"toSchema",value:function(){var e={isIndefiniteForm:!1},t=[];if(t.push(new s.ObjectIdentifier({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;var r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new s.Sequence({lenBlock:e,value:t})}},{key:"toJSON",value:function(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new f.default;case"encryptedContent":return new s.OctetString;default:throw new Error("Invalid member name for EncryptedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"contentType":return""===r;case"contentEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedContent":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for EncryptedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.contentType||""}),f.default.schema(t.contentEncryptionAlgorithm||{}),new s.Choice({value:[new s.Constructed({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({value:new s.OctetString})]}),new s.Primitive({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.salt=(0,c.getParametersValue)(t,"salt",e.defaultValues("salt")),this.iterationCount=(0,c.getParametersValue)(t,"iterationCount",e.defaultValues("iterationCount")),this.keyLength=(0,c.getParametersValue)(t,"keyLength",e.defaultValues("keyLength")),this.prf=(0,c.getParametersValue)(t,"prf",e.defaultValues("prf")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PBKDF2_params");this.salt=r.result.salt,this.iterationCount=r.result.iterationCount.valueBlock.valueDec,"keyLength"in r.result&&(this.keyLength=r.result.keyLength.valueBlock.valueDec),"prf"in r.result&&(this.prf=new f.default({schema:r.result.prf}))}},{key:"toSchema",value:function(){var t=[];return t.push(this.salt),t.push(new s.Integer({value:this.iterationCount})),e.defaultValues("keyLength")!==this.keyLength&&t.push(new s.Integer({value:this.keyLength})),e.defaultValues("prf").isEqual(this.prf)===!1&&t.push(this.prf.toSchema()),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return e.defaultValues("keyLength")!==this.keyLength&&(t.keyLength=this.keyLength),e.defaultValues("prf").isEqual(this.prf)===!1&&(t.prf=this.prf.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new f.default;default:throw new Error("Invalid member name for PBKDF2Params class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Choice({value:[new s.OctetString({name:t.saltPrimitive||""}),f.default.schema(t.saltConstructed||{})]}),new s.Integer({name:t.iterationCount||""}),new s.Integer({name:t.keyLength||"",optional:!0}),f.default.schema(t.prf||{names:{optional:!0}})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyDerivationFunc=(0,c.getParametersValue)(t,"keyDerivationFunc",e.defaultValues("keyDerivationFunc")),this.encryptionScheme=(0,c.getParametersValue)(t,"encryptionScheme",e.defaultValues("encryptionScheme")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PBES2_params");this.keyDerivationFunc=new f.default({schema:r.result.keyDerivationFunc}),this.encryptionScheme=new f.default({schema:r.result.encryptionScheme})}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}},{key:"toJSON",value:function(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyDerivationFunc":return new f.default;case"encryptionScheme":return new f.default;default:throw new Error("Invalid member name for PBES2Params class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.keyDerivationFunc||{}),f.default.schema(t.encryptionScheme||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(414),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.certId=(0,c.getParametersValue)(t,"certId",e.defaultValues("certId")),this.certValue=(0,c.getParametersValue)(t,"certValue",e.defaultValues("certValue")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{id:"certId",value:"certValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertBag");switch(this.certId=r.result.certId.valueBlock.toString(),this.certValue=r.result.certValue,this.certId){case"1.2.840.113549.1.9.22.1":var n=s.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new f.default({schema:n.result});break;case"1.2.840.113549.1.9.22.2":default:throw new Error('Incorrect "certId" value in CertBag: '+this.certId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.22.1",this.certValue=new s.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new s.Sequence({value:[new s.ObjectIdentifier({value:this.certId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}},{key:"toJSON",value:function(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certId":return"";case"certValue":return new s.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certId":return""===t;case"certValue":return t instanceof s.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.id||"id"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.value||"value"})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"tbsCertificate",value:[new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Integer({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new c.Integer({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),m.default.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),v.default.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new c.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[g.default.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),g.default.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),v.default.schema(t.subject||{names:{blockName:"tbsCertificate.subject"
}}),b.default.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new c.Primitive({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new c.Primitive({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[P.default.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(382),c=a(s),l=r(383),f=r(386),h=r(387),m=n(h),d=r(400),v=n(d),p=r(415),g=n(p),y=r(390),b=n(y),w=r(416),k=n(w),S=r(435),P=n(S),A=r(388),C=n(A),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.serialNumber=(0,l.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,l.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.notBefore=(0,l.getParametersValue)(t,"notBefore",e.defaultValues("notBefore")),this.notAfter=(0,l.getParametersValue)(t,"notAfter",e.defaultValues("notAfter")),this.subject=(0,l.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,l.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,l.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in t&&(this.subjectUniqueID=(0,l.getParametersValue)(t,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in t&&(this.extensions=(0,l.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CERT");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new m.default({schema:r.result["tbsCertificate.signature"]}),this.issuer=new v.default({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new g.default({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new g.default({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new v.default({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new b.default({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],function(e){return new k.default({schema:e})})),this.signatureAlgorithm=new m.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Integer({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new c.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"subjectUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[this.extensions.toSchema()]})),"extensions"in this&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new c.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})]})),new c.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={};if(t===!1){if(0===this.tbs.length)return e.schema().value[0];r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=(0,l.bufferToHexCodes)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=(0,l.bufferToHexCodes)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,f.getCrypto)();if("undefined"==typeof t)return Promise.reject("Unable to create WebCrypto object");if(null===e){e={};var r=(0,f.getHashAlgorithm)(this.signatureAlgorithm);if(""===r)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var n=(0,f.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmId);if(e.algorithm=(0,f.getAlgorithmParameters)(n.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=r),"ECDSA"===n.name){var a=!1;if("algorithmParams"in this.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in this.subjectPublicKeyInfo.algorithm.algorithmParams&&1===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(a=!0),a===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var i=(0,f.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in i==!1)return Promise.reject("Unsupported named curve algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());e.algorithm.algorithm.namedCurve=i.name}}var o=this.subjectPublicKeyInfo.toSchema(),u=o.toBER(!1),s=new Uint8Array(u);return t.importKey("spki",s,e.algorithm.algorithm,!0,e.algorithm.usages)}},{key:"getKeyHash",value:function(){var e=(0,f.getCrypto)();return"undefined"==typeof e?Promise.reject("Unable to create WebCrypto object"):e.digest({name:"sha-1"},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var a=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,f.getOIDByAlgorithm)(a.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);i.hashAlgorithm=new m.default({algorithmId:o,algorithmParams:new c.Null}),i.maskGenAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var u=new C.default(i);this.signature=new m.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Promise.resolve(),n={},a=this.signatureValue,i=this.tbs;if(null!==t?n=t.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),n instanceof b.default==!1)return Promise.reject("Please provide issuer certificate as a parameter");var o=(0,f.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");var u=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===u?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:n.algorithm.algorithmId;var r=(0,f.getAlgorithmByOID)(t);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+t);var a=(0,f.getAlgorithmParameters)(r.name,"importkey");if("hash"in a.algorithm&&(a.algorithm.hash.name=u),"ECDSA"===r.name){var i=!1;if("algorithmParams"in n.algorithm==!0&&"idBlock"in n.algorithm.algorithmParams&&1===n.algorithm.algorithmParams.idBlock.tagClass&&6===n.algorithm.algorithmParams.idBlock.tagNumber&&(i=!0),i===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var s=(0,f.getAlgorithmByOID)(n.algorithm.algorithmParams.valueBlock.toString());if("name"in s==!1)return Promise.reject("Unsupported named curve algorithm: "+n.algorithm.algorithmParams.valueBlock.toString());a.algorithm.namedCurve=s.name}var c=n.toSchema(),l=c.toBER(!1),h=new Uint8Array(l);return o.importKey("spki",h,a.algorithm,!0,a.usages)}),r=r.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=u);var n=a.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var s=c.fromBER(n);n=(0,f.createECDSASignatureFromCMS)(s.result)}if("RSA-PSS"===t.algorithm.name){var l=void 0;try{l=new C.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var m=(0,f.getAlgorithmByOID)(l.hashAlgorithm.algorithmId);if("name"in m==!1)return Promise.reject("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithmId);h=m.name}r.algorithm.hash.name=h}return o.verify(r.algorithm,t,new Uint8Array(n),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new c.Integer;case"signature":return new m.default;case"issuer":return new v.default;case"notBefore":return new g.default;case"notAfter":return new g.default;case"subject":return new v.default;case"subjectPublicKeyInfo":return new b.default;case"issuerUniqueID":return new ArrayBuffer(0);case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new m.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for Certificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"",value:[o(t.tbsCertificate),m.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,s.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,s.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TIME");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new u.UTCTime({valueDate:this.value})),1===this.type&&(e=new u.GeneralizedTime({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,s.getParametersValue)(e,"names",{});return new u.Choice({optional:t,value:[new u.UTCTime({name:r.utcTimeName||""}),new u.GeneralizedTime({name:r.generalTimeName||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(417),f=n(l),h=r(418),m=n(h),d=r(403),v=n(d),p=r(419),g=n(p),y=r(420),b=n(y),w=r(421),k=n(w),S=r(422),P=n(S),A=r(424),C=n(A),_=r(426),I=n(_),O=r(429),E=n(O),B=r(431),x=n(B),N=r(432),j=n(N),V=r(433),R=n(V),T=r(434),D=n(T),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.extnID=(0,c.getParametersValue)(t,"extnID",e.defaultValues("extnID")),this.critical=(0,c.getParametersValue)(t,"critical",e.defaultValues("critical")),"extnValue"in t?this.extnValue=new s.OctetString({valueHex:t.extnValue}):this.extnValue=e.defaultValues("extnValue"),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSION");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,r=s.fromBER(this.extnValue.valueBlock.valueHex),r.offset!==-1)switch(this.extnID){case"2.5.29.9":this.parsedValue=new f.default({schema:r.result});break;case"2.5.29.14":this.parsedValue=r.result;break;case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":this.parsedValue=new m.default({schema:r.result});break;case"2.5.29.17":case"2.5.29.18":this.parsedValue=new v.default({schema:r.result});break;case"2.5.29.19":this.parsedValue=new g.default({schema:r.result});break;case"2.5.29.20":case"2.5.29.27":this.parsedValue=r.result;break;case"2.5.29.21":this.parsedValue=r.result;break;case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":this.parsedValue=new b.default({schema:r.result});break;case"2.5.29.29":this.parsedValue=new k.default({schema:r.result});break;case"2.5.29.30":this.parsedValue=new P.default({schema:r.result});break;case"2.5.29.31":case"2.5.29.46":this.parsedValue=new C.default({schema:r.result});break;case"2.5.29.32":this.parsedValue=new I.default({schema:r.result});break;case"2.5.29.33":this.parsedValue=new E.default({schema:r.result});break;case"2.5.29.35":this.parsedValue=new x.default({schema:r.result});break;case"2.5.29.36":this.parsedValue=new j.default({schema:r.result});break;case"2.5.29.37":this.parsedValue=new R.default({schema:r.result});break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":this.parsedValue=new D.default({schema:r.result})}}},{key:"toSchema",value:function(){var t=[];return t.push(new s.ObjectIdentifier({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new s.Boolean({value:this.critical})),t.push(this.extnValue),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new s.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.extnID||""}),new s.Boolean({name:t.critical||"",optional:!0}),new s.OctetString({name:t.extnValue||""})]})}}]),e}();t.default=U},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(394),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.attributes||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"notBefore"in t&&(this.notBefore=(0,s.getParametersValue)(t,"notBefore",e.defaultValues("notBefore"))),"notAfter"in t&&(this.notAfter=(0,s.getParametersValue)(t,"notAfter",e.defaultValues("notAfter"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var n=new u.GeneralizedTime;n.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if("notAfter"in r.result){var a=new u.GeneralizedTime({valueHex:r.result.notAfter.valueBlock.valueHex});a.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=a.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new u.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new u.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHex})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":return new Date;case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Primitive({name:t.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Primitive({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.cA=(0,s.getParametersValue)(t,"cA",!1),"pathLenConstraint"in t&&(this.pathLenConstraint=(0,s.getParametersValue)(t,"pathLenConstraint",0)),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(r.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=r.result.pathLenConstraint:this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new u.Boolean({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof u.Integer?t.push(this.pathLenConstraint):t.push(new u.Integer({value:this.pathLenConstraint}))),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof u.Integer?t.pathLenConstraint=this.pathLenConstraint.toJSON():t.pathLenConstraint=this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Boolean({optional:!0,name:t.cA||""}),new u.Integer({optional:!0,name:t.pathLenConstraint||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=r(400),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,c.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=(0,c.getParametersValue)(t,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=(0,c.getParametersValue)(t,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in t&&(this.onlySomeReasons=(0,c.getParametersValue)(t,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=(0,c.getParametersValue)(t,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=(0,c.getParametersValue)(t,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new f.default({schema:e})});break;case 1===r.result.distributionPoint.idBlock.tagNumber:r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new m.default({schema:r.result.distributionPoint});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var n=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==n[0]}if("onlyContainsCACerts"in r.result){var a=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==a[0]}if("onlySomeReasons"in r.result){var i=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if("indirectCRL"in r.result){var o=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==o[0]}if("onlyContainsAttributeCerts"in r.result){var u=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==u[0]}}},{key:"toSchema",value:function(){var t=[];if("distributionPoint"in this){var r=void 0;this.distributionPoint instanceof Array?r=new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):(r=this.distributionPoint.toSchema(),r.idBlock.tagClass=3,r.idBlock.tagNumber=1),t.push(r)}if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var n=new ArrayBuffer(1),a=new Uint8Array(n);a[0]=this.onlySomeReasons,t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:n}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?t.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):t.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":return!1;
case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":return!1;case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Choice({value:[new s.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.distributionPointNames||"",value:f.default.schema()})]}),new s.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})]}),new s.Primitive({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.Primitive({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new s.Primitive({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new s.Primitive({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new s.Primitive({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.names=(0,c.getParametersValue)(t,"names",e.defaultValues("names")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.names,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.names,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({value:[new s.Repeated({name:t.blockName||"names",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(423),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"permittedSubtrees"in t&&(this.permittedSubtrees=(0,c.getParametersValue)(t,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in t&&(this.excludedSubtrees=(0,c.getParametersValue)(t,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,function(e){return new f.default({schema:e})})),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:Array.from(this.permittedSubtrees,function(e){return e.toSchema()})})]})),"excludedSubtrees"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Sequence({value:Array.from(this.excludedSubtrees,function(e){return e.toSchema()})})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,function(e){return e.toJSON()})),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":return[];case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.permittedSubtrees||"",value:f.default.schema()})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.excludedSubtrees||"",value:f.default.schema()})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.base=(0,c.getParametersValue)(t,"base",e.defaultValues("base")),this.minimum=(0,c.getParametersValue)(t,"minimum",e.defaultValues("minimum")),"maximum"in t&&(this.maximum=(0,c.getParametersValue)(t,"maximum",e.defaultValues("maximum"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ");this.base=new f.default({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.valueBlock.isHexOnly?this.minimum=r.result.minimum:this.minimum=r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(r.result.maximum.valueBlock.isHexOnly?this.maximum=r.result.maximum:this.maximum=r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t=0;t=this.minimum instanceof s.Integer?this.minimum:new s.Integer({value:this.minimum}),e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r=0;r=this.maximum instanceof s.Integer?this.maximum:new s.Integer({value:this.maximum}),e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new f.default;case"minimum":return 0;case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.base||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({name:t.minimum||""})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Integer({name:t.maximum||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(425),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.distributionPoints=(0,c.getParametersValue)(t,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.distributionPoints,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.distributionPoints||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=r(400),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,c.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in t&&(this.reasons=(0,c.getParametersValue)(t,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in t&&(this.cRLIssuer=(0,c.getParametersValue)(t,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new f.default({schema:e})})),1===r.result.distributionPoint.idBlock.tagNumber&&(r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new m.default({schema:r.result.distributionPoint}))),"reasons"in r.result&&(this.reasons=new s.BitString({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];if("distributionPoint"in this){var t=void 0;t=this.distributionPoint instanceof Array?new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new s.BitString;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Choice({value:[new s.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.distributionPointNames||"",value:f.default.schema()})]}),new s.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})]}),new s.Primitive({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.Constructed({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new s.Repeated({name:t.cRLIssuerNames||"",value:f.default.schema()})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(427),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.certificatePolicies=(0,c.getParametersValue)(t,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.certificatePolicies,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.certificatePolicies||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(428),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.policyIdentifier=(0,c.getParametersValue)(t,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in t&&(this.policyQualifiers=(0,c.getParametersValue)(t,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.ObjectIdentifier({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new s.Sequence({value:Array.from(this.policyQualifiers,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.policyIdentifier||""}),new s.Sequence({optional:!0,value:[new s.Repeated({name:t.policyQualifiers||"",value:f.default.schema()})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.policyQualifierId=(0,s.getParametersValue)(t,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=(0,s.getParametersValue)(t,"qualifier",e.defaultValues("qualifier")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new u.Any;default:throw new Error("Invalid member name for PolicyQualifierInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.policyQualifierId||""}),new u.Any({name:t.qualifier||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(430),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.mappings=(0,c.getParametersValue)(t,"mappings",e.defaultValues("mappings")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{mappings:"mappings"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.mappings,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.mappings||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.issuerDomainPolicy=(0,s.getParametersValue)(t,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=(0,s.getParametersValue)(t,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.issuerDomainPolicy}),new u.ObjectIdentifier({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":return"";case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.issuerDomainPolicy||""}),new u.ObjectIdentifier({name:t.subjectDomainPolicy||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"keyIdentifier"in t&&(this.keyIdentifier=(0,c.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in t&&(this.authorityCertIssuer=(0,c.getParametersValue)(t,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in t&&(this.authorityCertSerialNumber=(0,c.getParametersValue)(t,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(r.result.keyIdentifier.idBlock.tagClass=1,r.result.keyIdentifier.idBlock.tagNumber=4,this.keyIdentifier=r.result.keyIdentifier),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,function(e){return new f.default({schema:e})})),"authorityCertSerialNumber"in r.result&&(r.result.authorityCertSerialNumber.idBlock.tagClass=1,r.result.authorityCertSerialNumber.idBlock.tagNumber=2,this.authorityCertSerialNumber=r.result.authorityCertSerialNumber)}},{key:"toSchema",value:function(){var e=[];if("keyIdentifier"in this){var t=this.keyIdentifier;t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("authorityCertIssuer"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Sequence({value:Array.from(this.authorityCertIssuer,function(e){return e.toSchema()})})]})),"authorityCertSerialNumber"in this){var r=this.authorityCertSerialNumber;r.idBlock.tagClass=3,r.idBlock.tagNumber=2,e.push(r)}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,function(e){return e.toJSON()})),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new s.OctetString;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new s.Integer;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Primitive({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.authorityCertIssuer||"",value:f.default.schema()})]}),new s.Primitive({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"requireExplicitPolicy"in t&&(this.requireExplicitPolicy=(0,s.getParametersValue)(t,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in t&&(this.inhibitPolicyMapping=(0,s.getParametersValue)(t,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var n=r.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;var a=n.toBER(!1),i=u.fromBER(a);this.requireExplicitPolicy=i.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var o=r.result.inhibitPolicyMapping;o.idBlock.tagClass=1,o.idBlock.tagNumber=2;var s=o.toBER(!1),c=u.fromBER(s);this.inhibitPolicyMapping=c.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){
var t=new u.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new u.Integer({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":return 0;case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Primitive({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Primitive({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyPurposes=(0,s.getParametersValue)(t,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,function(e){return e.valueBlock.toString()})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.keyPurposes,function(e){return new u.ObjectIdentifier({value:e})})})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.keyPurposes||"",value:new u.ObjectIdentifier})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(398),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.accessDescriptions=(0,c.getParametersValue)(t,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.accessDescriptions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.accessDescriptions||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(416),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{extensions:"extensions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSIONS");this.extensions=Array.from(r.result.extensions,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({optional:t,name:r.blockName||"",value:[new s.Repeated({name:r.extensions||"",value:f.default.schema(r.extension||{})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(437),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.crlId=(0,c.getParametersValue)(t,"crlId",e.defaultValues("crlId")),this.crlValue=(0,c.getParametersValue)(t,"crlValue",e.defaultValues("crlValue")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{id:"crlId",value:"crlValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLBag");switch(this.crlId=r.result.crlId.valueBlock.toString(),this.crlValue=r.result.crlValue,this.crlId){case"1.2.840.113549.1.9.23.1":var n=s.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new f.default({schema:n.result});break;default:throw new Error('Incorrect "crlId" value in CertBag: '+this.crlId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.23.1",this.certValue=new s.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new s.Sequence({value:[new s.ObjectIdentifier({value:this.crlId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"crlId":return"";case"crlValue":return new s.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"crlId":return""===t;case"crlValue":return t instanceof s.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.id||"id"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.value||"value"})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"tbsCertList",value:[new c.Integer({optional:!0,name:t.tbsCertListVersion||"tbsCertList.version",value:2}),m.default.schema(t.signature||{names:{blockName:"tbsCertList.signature"}}),v.default.schema(t.issuer||{names:{blockName:"tbsCertList.issuer"}}),g.default.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),g.default.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new c.Sequence({optional:!0,value:[new c.Repeated({name:t.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new c.Sequence({value:[new c.Integer,g.default.schema(),k.default.schema({},!0)]})})]}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[k.default.schema(t.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(382),c=a(s),l=r(383),f=r(386),h=r(387),m=n(h),d=r(400),v=n(d),p=r(415),g=n(p),y=r(438),b=n(y),w=r(435),k=n(w),S=r(388),P=n(S),A=r(390),C=n(A),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,l.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.thisUpdate=(0,l.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,l.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"revokedCertificates"in t&&(this.revokedCertificates=(0,l.getParametersValue)(t,"revokedCertificates",e.defaultValues("revokedCertificates"))),"crlExtensions"in t&&(this.crlExtensions=(0,l.getParametersValue)(t,"crlExtensions",e.defaultValues("crlExtensions"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRL");this.tbs=r.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in r.result&&(this.version=r.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new m.default({schema:r.result["tbsCertList.signature"]}),this.issuer=new v.default({schema:r.result["tbsCertList.issuer"]}),this.thisUpdate=new g.default({schema:r.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in r.result&&(this.nextUpdate=new g.default({schema:r.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in r.result&&(this.revokedCertificates=Array.from(r.result["tbsCertList.revokedCertificates"],function(e){return new b.default({schema:e})})),"tbsCertList.extensions"in r.result&&(this.crlExtensions=new k.default({schema:r.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new m.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return this.version!==e.defaultValues("version")&&t.push(new c.Integer({value:this.version})),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&t.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&t.push(new c.Sequence({value:Array.from(this.revokedCertificates,function(e){return e.toSchema()})})),"crlExtensions"in this&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new c.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==e.defaultValues("version")&&(t.version=this.version),"nextUpdate"in this&&(t.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(t.revokedCertificates=Array.from(this.revokedCertificates,function(e){return e.toJSON()})),"crlExtensions"in this&&(t.crlExtensions=this.crlExtensions.toJSON()),t}},{key:"isCertificateRevoked",value:function(e){if(this.issuer.isEqual(e.issuer)===!1)return!1;if("revokedCertificates"in this==!1)return!1;var t=!0,r=!1,n=void 0;try{for(var a,i=this.revokedCertificates[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if(o.userCertificate.isEqual(e.serialNumber))return!0}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return!1}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");var n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var a=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,f.getOIDByAlgorithm)(a.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);i.hashAlgorithm=new m.default({algorithmId:o,algorithmParams:new c.Null}),i.maskGenAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var u=new P.default(i);this.signature=new m.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=this.signatureValue,a=this.tbs,i=-1;if("issuerCertificate"in t&&(i=t.issuerCertificate.subjectPublicKeyInfo,this.issuer.isEqual(t.issuerCertificate.subject)===!1))return Promise.resolve(!1);if("publicKeyInfo"in t&&(i=t.publicKeyInfo),i instanceof C.default==!1)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this){var o=!0,u=!1,s=void 0;try{for(var l,h=this.crlExtensions.extensions[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var m=l.value;if(m.critical&&"parsedValue"in m==!1)return Promise.resolve(!1)}}catch(e){u=!0,s=e}finally{try{!o&&h.return&&h.return()}finally{if(u)throw s}}}var d=(0,f.getCrypto)();if("undefined"==typeof d)return Promise.reject("Unable to create WebCrypto object");var v=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===v?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=(0,f.getAlgorithmByOID)(e.signature.algorithmId);if("name"in t==="")return Promise.reject("Unsupported public key algorithm: "+e.signature.algorithmId);var r=(0,f.getAlgorithmParameters)(t.name,"importkey");if("hash"in r.algorithm&&(r.algorithm.hash.name=v),"ECDSA"===t.name){var n=!1;if("algorithmParams"in i.algorithm==!0&&"idBlock"in i.algorithm.algorithmParams&&1===i.algorithm.algorithmParams.idBlock.tagClass&&6===i.algorithm.algorithmParams.idBlock.tagNumber&&(n=!0),n===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var a=(0,f.getAlgorithmByOID)(i.algorithm.algorithmParams.valueBlock.toString());if("name"in a==!1)return Promise.reject("Unsupported named curve algorithm: "+i.algorithm.algorithmParams.valueBlock.toString());r.algorithm.namedCurve=a.name}var o=i.toSchema(),u=o.toBER(!1),s=new Uint8Array(u);return d.importKey("spki",s,r.algorithm,!0,r.usages)}),r=r.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=v);var i=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var o=c.fromBER(i);i=(0,f.createECDSASignatureFromCMS)(o.result)}if("RSA-PSS"===t.algorithm.name){var u=void 0;try{u=new P.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in u?r.algorithm.saltLength=u.saltLength:r.algorithm.saltLength=20;var s="SHA-1";if("hashAlgorithm"in u){var l=(0,f.getAlgorithmByOID)(u.hashAlgorithm.algorithmId);if("name"in l==!1)return Promise.reject("Unrecognized hash algorithm: "+u.hashAlgorithm.algorithmId);s=l.name}r.algorithm.hash.name=s}return d.verify(r.algorithm,t,new Uint8Array(i),new Uint8Array(a))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new m.default;case"issuer":return new v.default;case"thisUpdate":return new g.default;case"nextUpdate":return new g.default;case"revokedCertificates":return[];case"crlExtensions":return new k.default;case"signatureAlgorithm":return new m.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for CertificateRevocationList class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"CertificateList",value:[o(e),m.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(415),f=n(l),h=r(435),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.userCertificate=(0,c.getParametersValue)(t,"userCertificate",e.defaultValues("userCertificate")),this.revocationDate=(0,c.getParametersValue)(t,"revocationDate",e.defaultValues("revocationDate")),"crlEntryExtensions"in t&&(this.crlEntryExtensions=(0,c.getParametersValue)(t,"crlEntryExtensions",e.defaultValues("crlEntryExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for REV_CERT");this.userCertificate=r.result.userCertificate,this.revocationDate=new f.default({schema:r.result.revocationDate}),"crlEntryExtensions"in r.result&&(this.crlEntryExtensions=new m.default({schema:r.result.crlEntryExtensions}))}},{key:"toSchema",value:function(){var e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"userCertificate":return new s.Integer;case"revocationDate":return new f.default;case"crlEntryExtensions":return new m.default;default:throw new Error("Invalid member name for RevokedCertificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.userCertificate||"userCertificate"}),f.default.schema({names:{utcTimeName:t.revocationDate||"revocationDate",generalTimeName:t.revocationDate||"revocationDate"}}),m.default.schema({names:{blockName:t.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.secretTypeId=(0,s.getParametersValue)(t,"secretTypeId",e.defaultValues("secretTypeId")),this.secretValue=(0,s.getParametersValue)(t,"secretValue",e.defaultValues("secretValue")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{id:"secretTypeId",value:"secretValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SecretBag");this.secretTypeId=r.result.secretTypeId.valueBlock.toString(),this.secretValue=r.result.secretValue}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.secretTypeId}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"secretTypeId":return"";case"secretValue":return new u.Any;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"secretTypeId":return""===t;case"secretValue":return t instanceof u.Any;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.id||"id"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.value||"value"})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(441),h=n(f),m=r(445),d=n(m),v=r(410),p=n(v),g=r(394),y=n(g),b=r(387),w=n(b),k=r(461),S=n(k),P=r(446),A=n(P),C=r(448),_=n(C),I=r(453),O=n(I),E=r(454),B=n(E),x=r(449),N=n(x),j=r(452),V=n(j),R=r(457),T=n(R),D=r(458),U=n(D),M=r(411),H=n(M),L=r(459),K=n(L),q=r(462),F=n(q),J=r(450),W=n(J),G=r(451),z=n(G),$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),"originatorInfo"in t&&(this.originatorInfo=(0,c.getParametersValue)(t,"originatorInfo",e.defaultValues("originatorInfo"))),this.recipientInfos=(0,c.getParametersValue)(t,"recipientInfos",e.defaultValues("recipientInfos")),this.encryptedContentInfo=(0,c.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,c.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",originatorInfo:"originatorInfo",recipientInfos:"recipientInfos",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_ENVELOPED_DATA");this.version=r.result.version.valueBlock.valueDec,"originatorInfo"in r.result&&(r.result.originatorInfo.idBlock.tagClass=1,r.result.originatorInfo.idBlock.tagNumber=16,this.originatorInfo=new h.default({schema:r.result.originatorInfo})),this.recipientInfos=Array.from(r.result.recipientInfos,function(e){return new d.default({schema:e})}),this.encryptedContentInfo=new p.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new y.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),"originatorInfo"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new s.Set({value:Array.from(this.recipientInfos,function(e){return e.toSchema()})})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version};return"originatorInfo"in this&&(e.originatorInfo=this.originatorInfo.toJSON()),e.recipientInfos=Array.from(this.recipientInfos,function(e){return e.toJSON()}),e.encryptedContentInfo=this.encryptedContentInfo.toJSON(),"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"addRecipientByCertificate",value:function(e,t,r){var n=t||{};if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)r=1;else{if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")===-1)throw new Error("Unknown type of certificate's public key: "+e.subjectPublicKeyInfo.algorithm.algorithmId);r=2}switch("oaepHashAlgorithm"in n==!1&&(n.oaepHashAlgorithm="SHA-512"),"kdfAlgorithm"in n==!1&&(n.kdfAlgorithm="SHA-512"),"kekEncryptionLength"in n==!1&&(n.kekEncryptionLength=256),r){case 1:var a=(0,l.getOIDByAlgorithm)({name:"RSA-OAEP"});if(""===a)throw new Error("Can not find OID for OAEP");var i=(0,l.getOIDByAlgorithm)({name:n.oaepHashAlgorithm});if(""===i)throw new Error("Unknown OAEP hash algorithm: "+n.oaepHashAlgorithm);var o=new w.default({algorithmId:i,algorithmParams:new s.Null}),u=new S.default({hashAlgorithm:o,maskGenAlgorithm:new w.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:o.toSchema()})}),c=new A.default({version:0,rid:new _.default({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new w.default({algorithmId:a,algorithmParams:u.toSchema()}),recipientCertificate:e});this.recipientInfos.push(new d.default({variant:1,value:c}));break;case 2:var f=new O.default({rid:new B.default({variant:1,value:new _.default({issuer:e.issuer,serialNumber:e.serialNumber})})}),h=(0,l.getOIDByAlgorithm)({name:"AES-KW",length:n.kekEncryptionLength});if(""===h)throw new Error("Unknown length for key encryption algorithm: "+n.kekEncryptionLength);var m=new w.default({algorithmId:h,algorithmParams:new s.Null}),v=(0,l.getOIDByAlgorithm)({name:"ECDH",kdf:n.kdfAlgorithm});if(""===v)throw new Error("Unknown KDF algorithm: "+n.kdfAlgorithm);var p=new ArrayBuffer(64),g=new Uint8Array(p);(0,l.getRandomValues)(g);var y=new N.default({version:3,ukm:new s.OctetString({valueHex:p}),keyEncryptionAlgorithm:new w.default({algorithmId:v,algorithmParams:m.toSchema()}),recipientEncryptedKeys:new V.default({encryptedKeys:[f]}),recipientCertificate:e});this.recipientInfos.push(new d.default({variant:2,value:y}));break;default:throw new Error('Unknown "variant" value: '+r)}return!0}},{key:"addRecipientByPreDefinedData",value:function(e,t,r){var n=t||{};if(e instanceof ArrayBuffer==!1)throw new Error('Please pass "preDefinedData" in ArrayBuffer type');
if(0===e.byteLength)throw new Error("Pre-defined data could have zero length");if("keyIdentifier"in n==!1){var a=new ArrayBuffer(16),i=new Uint8Array(a);(0,l.getRandomValues)(i),n.keyIdentifier=a}switch("hmacHashAlgorithm"in n==!1&&(n.hmacHashAlgorithm="SHA-512"),"iterationCount"in n==!1&&(n.iterationCount=2048),"keyEncryptionAlgorithm"in n==!1&&(n.keyEncryptionAlgorithm={name:"AES-KW",length:256}),"keyEncryptionAlgorithmParams"in n==!1&&(n.keyEncryptionAlgorithmParams=new s.Null),r){case 1:var o=(0,l.getOIDByAlgorithm)(n.keyEncryptionAlgorithm);if(""===o)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var u=new T.default({version:4,kekid:new U.default({keyIdentifier:new s.OctetString({valueHex:n.keyIdentifier})}),keyEncryptionAlgorithm:new w.default({algorithmId:o,algorithmParams:n.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new d.default({variant:3,value:u}));break;case 2:var c=(0,l.getOIDByAlgorithm)({name:"PBKDF2"});if(""===c)throw new Error("Can not find OID for PBKDF2");var f=new ArrayBuffer(64),h=new Uint8Array(f);(0,l.getRandomValues)(h);var m=(0,l.getOIDByAlgorithm)({name:"HMAC",hash:{name:n.hmacHashAlgorithm}});if(""===m)throw new Error('Incorrect value for "hmacHashAlgorithm": '+n.hmacHashAlgorithm);var v=new H.default({salt:new s.OctetString({valueHex:f}),iterationCount:n.iterationCount,prf:new w.default({algorithmId:m,algorithmParams:new s.Null})}),p=(0,l.getOIDByAlgorithm)(n.keyEncryptionAlgorithm);if(""===p)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var g=new K.default({version:0,keyDerivationAlgorithm:new w.default({algorithmId:c,algorithmParams:v.toSchema()}),keyEncryptionAlgorithm:new w.default({algorithmId:p,algorithmParams:n.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new d.default({variant:4,value:g}));break;default:throw new Error('Unknown value for "variant": '+r)}}},{key:"encrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,n=void 0,a=void 0,i=void 0,o=void 0;return t=t.then(function(){var t=y.recipientInfos[e].value.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof s.ObjectIdentifier==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);var r=t.valueBlock.toString();switch(r){case"1.2.840.10045.3.1.7":a="P-256",i=256;break;case"1.3.132.0.34":a="P-384",i=384;break;case"1.3.132.0.35":a="P-521",i=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return a},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return r=e.publicKey,n=e.privateKey,k.exportKey("spki",r)},function(e){return Promise.reject(e)}),t=t.then(function(t){return o=t,y.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:a},usages:[]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.deriveBits({name:"ECDH",public:e},n,i)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new w.default({schema:y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),n=(0,l.getAlgorithmByOID)(r.algorithmId);if("name"in n==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var a=n.length,i=new ArrayBuffer(4),o=new Uint8Array(i),u=3;u>=0;u--)o[u]=a,a>>=8;var c=new F.default({keyInfo:new w.default({algorithmId:r.algorithmId,algorithmParams:new s.Null}),entityUInfo:y.recipientInfos[e].value.ukm,suppPubInfo:new s.OctetString({valueHex:i})}),f=c.toSchema().toBER(!1),h=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in h==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):(0,l.kdf)(h.kdf,t,n.length,f)},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.importKey("raw",e,{name:"AES-KW"},!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.wrapKey("raw",m,e,{name:"AES-KW"})},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=s.fromBER(o),n=new W.default;n.variant=3,n.value=new z.default({schema:r.result}),"algorithmParams"in n.value.algorithm&&delete n.value.algorithm.algorithmParams,y.recipientInfos[e].value.originator=n,y.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve();return t=t.then(function(){var t=y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new S.default({schema:t}),n=(0,l.getAlgorithmByOID)(r.hashAlgorithm.algorithmId);return"name"in n==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):y.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:n.name}},usages:["encrypt","wrapKey"]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.encrypt(e.algorithm,e,v)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return r=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):k.importKey("raw",new Uint8Array(y.recipientInfos[e].value.preDefinedKEK),r,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.wrapKey("raw",m,e,r)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0,n=void 0;return t=t.then(function(){if("keyDerivationAlgorithm"in y.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in y.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new H.default({schema:y.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return Promise.resolve()},function(e){return Promise.reject(e)}),t=t.then(function(){var t=new Uint8Array(y.recipientInfos[e].value.password);return k.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if(n=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in n==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var a="SHA-1";if("prf"in r){var i=(0,l.getAlgorithmByOID)(r.prf.algorithmId);if("name"in i==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");a=i.hash.name}var o=new Uint8Array(r.salt.valueBlock.valueHex),u=r.iterationCount;return k.deriveKey({name:"PBKDF2",hash:{name:a},salt:o,iterations:u},t,n,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.wrapKey("raw",m,e,n)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}var o=this,u=Promise.resolve(),c=new ArrayBuffer(16),f=new Uint8Array(c);(0,l.getRandomValues)(f);var h=new Uint8Array(t),m=void 0,d=void 0,v=void 0,g=[],y=this,b=(0,l.getOIDByAlgorithm)(e);if(""===b)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var k=(0,l.getCrypto)();return"undefined"==typeof k?Promise.reject("Unable to create WebCrypto object"):(u=u.then(function(){return k.generateKey(e,!0,["encrypt"])}),u=u.then(function(t){return m=t,k.encrypt({name:e.name,iv:f},m,h)},function(e){return Promise.reject(e)}),u=u.then(function(e){return d=e,k.exportKey("raw",m)},function(e){return Promise.reject(e)}).then(function(e){return v=e,!0},function(e){return Promise.reject(e)}),u=u.then(function(){o.version=2,o.encryptedContentInfo=new p.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new w.default({algorithmId:b,algorithmParams:new s.OctetString({valueHex:c})}),encryptedContent:new s.OctetString({valueHex:d})})},function(e){return Promise.reject(e)}),u=u.then(function(){for(var e=0;e<o.recipientInfos.length;e++){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=n(e);break;case 2:t=r(e);break;case 3:t=a(e);break;case 4:t=i(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}g.push(t)}return Promise.all(g)},function(e){return Promise.reject(e)}))}},{key:"decrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,n=void 0,a=void 0,i=void 0;return t=t.then(function(){if("recipientCertificate"in f==!1)return Promise.reject('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo"');if("recipientPrivateKey"in f==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');var t=f.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof s.ObjectIdentifier==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);switch(a=t.valueBlock.toString()){case"1.2.840.10045.3.1.7":r="P-256",n=256;break;case"1.3.132.0.34":r="P-384",n=384;break;case"1.3.132.0.35":r="P-521",n=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return m.importKey("pkcs8",f.recipientPrivateKey,{name:"ECDH",namedCurve:r},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(t){i=t,"algorithmParams"in h.recipientInfos[e].value.originator.value.algorithm==!1&&(h.recipientInfos[e].value.originator.value.algorithm.algorithmParams=new s.ObjectIdentifier({value:a}));var n=h.recipientInfos[e].value.originator.value.toSchema().toBER(!1);return m.importKey("spki",n,{name:"ECDH",namedCurve:r},!0,[])},function(e){return Promise.reject(e)}),t=t.then(function(e){return m.deriveBits({name:"ECDH",public:e},i,n)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new w.default({schema:h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),n=(0,l.getAlgorithmByOID)(r.algorithmId);if("name"in n==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var a=n.length,i=new ArrayBuffer(4),o=new Uint8Array(i),u=3;u>=0;u--)o[u]=a,a>>=8;var c=new F.default({keyInfo:new w.default({algorithmId:r.algorithmId,algorithmParams:new s.Null}),entityUInfo:h.recipientInfos[e].value.ukm,suppPubInfo:new s.OctetString({valueHex:i})}),f=c.toSchema().toBER(!1),m=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in m==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):(0,l.kdf)(m.kdf,t,n.length,f)},function(e){return Promise.reject(e)}),t=t.then(function(e){return m.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHex,t,{name:"AES-KW"},r,!0,["decrypt"])},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve();return t=t.then(function(){if("recipientPrivateKey"in f==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');var t=h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new S.default({schema:t}),n=(0,l.getAlgorithmByOID)(r.hashAlgorithm.algorithmId);return"name"in n==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):m.importKey("pkcs8",f.recipientPrivateKey,{name:"RSA-OAEP",hash:{name:n.name}},!0,["decrypt"])},function(e){return Promise.reject(e)}),t=t.then(function(t){return m.decrypt(t.algorithm,t,h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex)},function(e){return Promise.reject(e)}),t=t.then(function(e){var t=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in t==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.importKey("raw",e,t,!0,["decrypt"])},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return"preDefinedData"in f==!1?Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"'):(r=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):m.importKey("raw",f.preDefinedData,r,!0,["unwrapKey"]))},function(e){return Promise.reject(e)}),t=t.then(function(t){var n=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,r,n,!0,["decrypt"])},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0,n=void 0;return t=t.then(function(){if("preDefinedData"in f==!1)return Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if("keyDerivationAlgorithm"in h.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in h.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new H.default({schema:h.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return m.importKey("raw",f.preDefinedData,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if(n=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in n==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var a="SHA-1";if("prf"in r){var i=(0,l.getAlgorithmByOID)(r.prf.algorithmId);if("name"in i==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");a=i.hash.name}var o=new Uint8Array(r.salt.valueBlock.valueHex),u=r.iterationCount;return m.deriveKey({name:"PBKDF2",hash:{name:a},salt:o,iterations:u},t,n,!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,n,r,!0,["decrypt"])},function(e){return Promise.reject(e)})}var o=this,u=Promise.resolve(),f=t||{},h=this;if(e+1>this.recipientInfos.length)return Promise.reject('Maximum value for "index" is: '+(this.recipientInfos.length-1));var m=(0,l.getCrypto)();return"undefined"==typeof m?Promise.reject("Unable to create WebCrypto object"):(u=u.then(function(){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=n(e);break;case 2:t=r(e);break;case 3:t=a(e);break;case 4:t=i(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}return t},function(e){return Promise.reject(e)}),u=u.then(function(e){var t=(0,l.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in t==!1)return Promise.reject('Incorrect "contentEncryptionAlgorithm": '+o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,n=new Uint8Array(r),a=new ArrayBuffer(0);if(o.encryptedContentInfo.encryptedContent.idBlock.isConstructed===!1)a=o.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var i=!0,u=!1,s=void 0;try{for(var f,h=o.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var d=f.value;a=(0,c.utilConcatBuf)(a,d.valueBlock.valueHex)}}catch(e){u=!0,s=e}finally{try{!i&&h.return&&h.return()}finally{if(u)throw s}}}return m.decrypt({name:t.name,iv:n},e,a)},function(e){return Promise.reject(e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originatorInfo":return new h.default;case"recipientInfos":return[];case"encryptedContentInfo":return new p.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EnvelopedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"originatorInfo":return 0===r.certs.certificates.length&&0===r.crls.crls.length;case"recipientInfos":case"unprotectedAttrs":return 0===r.length;case"encryptedContentInfo":return p.default.compareWithDefault("contentType",r.contentType)&&p.default.compareWithDefault("contentEncryptionAlgorithm",r.contentEncryptionAlgorithm)&&p.default.compareWithDefault("encryptedContent",r.encryptedContent);default:throw new Error("Invalid member name for EnvelopedData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Constructed({name:t.originatorInfo||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:h.default.schema().valueBlock.value}),new s.Set({value:[new s.Repeated({name:t.recipientInfos||"",value:d.default.schema()})]}),p.default.schema(t.encryptedContentInfo||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.unprotectedAttrs||"",value:y.default.schema()})]})]})}}]),e}();t.default=$},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(442),f=n(l),h=r(443),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.certs=(0,c.getParametersValue)(t,"certs",e.defaultValues("certs")),this.crls=(0,c.getParametersValue)(t,"crls",e.defaultValues("crls")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{certs:"certs",crls:"crls"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorInfo");r.result.certs.idBlock.tagClass=1,r.result.certs.idBlock.tagNumber=17,this.certs=new f.default({schema:r.result.certs}),r.result.crls.idBlock.tagClass=1,r.result.crls.idBlock.tagNumber=17,this.crls=new m.default({schema:r.result.crls})}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})]})}},{key:"toJSON",value:function(){return{certs:this.certs.toJSON(),crls:this.crls.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certs":return new f.default;case"crls":return new m.default;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certs":return 0===t.certificates.length;case"crls":return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({name:t.certs||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),new s.Constructed({name:t.crls||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(414),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.certificates=(0,c.getParametersValue)(t,"certificates",e.defaultValues("certificates")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_CERTIFICATE_SET");this.certificates=Array.from(r.result.certificates,function(e){return 1===e.idBlock.tagClass?new f.default({schema:e}):e})}},{key:"toSchema",value:function(){return new s.Set({value:Array.from(this.certificates,function(e){return e instanceof f.default?e.toSchema():e})})}},{key:"toJSON",value:function(){return{certificates:Array.from(this.certificates,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificates":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Set({name:t.blockName||"",value:[new s.Repeated({name:t.certificates||"",value:new s.Choice({value:[f.default.schema(),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new s.Any]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new s.Any]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new s.ObjectIdentifier,new s.Any]})]})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(382),c=a(s),l=r(383),f=r(437),h=n(f),m=r(444),d=n(m),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.crls=(0,l.getParametersValue)(t,"crls",e.defaultValues("crls")),this.otherRevocationInfos=(0,l.getParametersValue)(t,"otherRevocationInfos",e.defaultValues("otherRevocationInfos")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{crls:"crls"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CSM_REVOCATION_INFO_CHOICES");var n=!0,a=!1,i=void 0;try{for(var o,u=r.result.crls[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;1===s.idBlock.tagClass?this.crls.push(new h.default({schema:s})):this.otherRevocationInfos.push(new d.default({schema:s}))}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}}},{key:"toSchema",value:function(){var e=[];return e.push.apply(e,i(Array.from(this.crls,function(e){return e.toSchema()}))),e.push.apply(e,i(Array.from(this.otherRevocationInfos,function(e){var t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new c.Set({value:e})}},{key:"toJSON",value:function(){return{crls:Array.from(this.crls,function(e){return e.toJSON()}),otherRevocationInfos:Array.from(this.otherRevocationInfos,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"crls":return[];case"otherRevocationInfos":return[];default:throw new Error("Invalid member name for RevocationInfoChoices class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Set({name:t.blockName||"",value:[new c.Repeated({name:t.crls||"",value:new c.Choice({value:[h.default.schema(),new c.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new c.ObjectIdentifier,new c.Any]})]})})]})}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.otherRevInfoFormat=(0,s.getParametersValue)(t,"otherRevInfoFormat",e.defaultValues("otherRevInfoFormat")),this.otherRevInfo=(0,s.getParametersValue)(t,"otherRevInfo",e.defaultValues("otherRevInfo")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=r.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=r.result.otherRevInfo}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.otherRevInfoFormat}),this.otherRevInfo]})}},{key:"toJSON",value:function(){var e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof u.Any||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new u.Any;default:throw new Error("Invalid member name for OtherRevocationInfoFormat class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.otherRevInfoFormat||"otherRevInfoFormat"}),new u.Any({name:t.otherRevInfo||"otherRevInfo"})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(446),f=n(l),h=r(449),m=n(h),d=r(457),v=n(d),p=r(459),g=n(p),y=r(460),b=n(y),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_RECIPIENT_INFO");if(1===r.result.blockName.idBlock.tagClass)this.variant=1,this.value=new f.default({schema:r.result.blockName});else{var n=r.result.blockName.idBlock.tagNumber;switch(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,n){case 1:this.variant=2,this.value=new m.default({schema:r.result.blockName});break;case 2:this.variant=3,this.value=new v.default({schema:r.result.blockName});break;case 3:this.variant=4,this.value=new g.default({schema:r.result.blockName});break;case 4:this.variant=5,this.value=new b.default({schema:r.result.blockName});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}},{key:"toSchema",value:function(){var e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"variant":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for RecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2},value:v.default.schema().valueBlock.value}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:3},value:g.default.schema().valueBlock.value}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:4},value:b.default.schema().valueBlock.value})]})}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=r(414),m=n(h),d=r(447),v=n(d),p=r(448),g=n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.rid=(0,c.getParametersValue)(t,"rid",e.defaultValues("rid")),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.recipientCertificate=(0,c.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",rid:{names:{blockName:"rid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyTransRecipientInfo");this.version=r.result.version.valueBlock.valueDec,3===r.result.rid.idBlock.tagClass?this.rid=r.result.rid.valueBlock.value[0]:this.rid=new g.default({schema:r.result.rid}),this.keyEncryptionAlgorithm=new f.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return this.rid instanceof g.default?(this.version=0,e.push(new s.Integer({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new s.Integer({value:this.version})),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.rid]}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new s.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"rid":return{};case"keyEncryptionAlgorithm":return new f.default;case"encryptedKey":return new s.OctetString;case"recipientCertificate":return new m.default;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"rid":return 0===Object.keys(r).length;case"keyEncryptionAlgorithm":case"encryptedKey":return r.isEqual(e.defaultValues(t));case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),v.default.schema(t.rid||{}),f.default.schema(t.keyEncryptionAlgorithm||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(448),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):(this.variant=2,this.value=r.result.blockName.valueBlock.value[0])}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.value]});default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"values":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:[new s.OctetString]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(400),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.issuer=(0,c.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new f.default({schema:r.result.issuer}),this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}},{key:"toJSON",value:function(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuer":return new f.default;case"serialNumber":return new s.Integer;default:throw new Error("Invalid member name for IssuerAndSerialNumber class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.issuer||{}),new s.Integer({name:t.serialNumber||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(450),f=n(l),h=r(387),m=n(h),d=r(452),v=n(d),p=r(414),g=n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.originator=(0,c.getParametersValue)(t,"originator",e.defaultValues("originator")),"ukm"in t&&(this.ukm=(0,c.getParametersValue)(t,"ukm",e.defaultValues("ukm"))),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.recipientEncryptedKeys=(0,c.getParametersValue)(t,"recipientEncryptedKeys",e.defaultValues("recipientEncryptedKeys")),this.recipientCertificate=(0,c.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",originator:{names:{blockName:"originator"}},ukm:"ukm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},recipientEncryptedKeys:{names:{blockName:"recipientEncryptedKeys"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.originator=new f.default({schema:r.result.originator}),"ukm"in r.result&&(this.ukm=r.result.ukm),this.keyEncryptionAlgorithm=new m.default({schema:r.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new v.default({schema:r.result.recipientEncryptedKeys})}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),"ukm"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,originator:this.originator.toJSON()};return"ukm"in this&&(e.ukm=this.ukm.toJSON()),e.keyEncryptionAlgorithm=this.keyEncryptionAlgorithm.toJSON(),e.recipientEncryptedKeys=this.recipientEncryptedKeys.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originator":return new f.default;case"ukm":return new s.OctetString;case"keyEncryptionAlgorithm":return new m.default;case"recipientEncryptedKeys":return new v.default;case"recipientCertificate":return new g.default;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return 0===r;case"originator":return r.variant===-1&&"value"in r==!1;case"ukm":return r.isEqual(e.defaultValues("ukm"));case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"recipientEncryptedKeys":return 0===r.encryptedKeys.length;case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[f.default.schema(t.originator||{})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.OctetString({name:t.ukm||""})]}),m.default.schema(t.keyEncryptionAlgorithm||{}),v.default.schema(t.recipientEncryptedKeys||{})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(448),f=n(l),h=r(451),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorIdentifierOrKey");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):0===r.result.blockName.idBlock.tagNumber?(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=r.result.blockName):(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.variant=3,this.value=new m.default({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:var e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e;default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new s.Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||""}),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||"",value:m.default.schema().valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.algorithm=(0,c.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.publicKey=(0,c.getParametersValue)(t,"publicKey",e.defaultValues("publicKey")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorPublicKey");this.algorithm=new f.default({schema:r.result.algorithm}),this.publicKey=r.result.publicKey}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}},{key:"toJSON",value:function(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new f.default;case"publicKey":return new s.BitString;default:throw new Error("Invalid member name for OriginatorPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"algorithm":case"publicKey":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for OriginatorPublicKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.algorithm||{}),new s.BitString({name:t.publicKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(453),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.encryptedKeys=(0,c.getParametersValue)(t,"encryptedKeys",e.defaultValues("encryptedKeys")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{RecipientEncryptedKeys:"RecipientEncryptedKeys"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKeys");this.encryptedKeys=Array.from(r.result.RecipientEncryptedKeys,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.encryptedKeys,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{encryptedKeys:Array.from(this.encryptedKeys,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptedKeys":return[];default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"encryptedKeys":return 0===t.length;default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.RecipientEncryptedKeys||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(454),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.rid=(0,c.getParametersValue)(t,"rid",e.defaultValues("rid")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{rid:{names:{blockName:"rid"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKey");this.rid=new f.default({schema:r.result.rid}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"rid":return new f.default;case"encryptedKey":return new s.OctetString;default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"rid":return r.variant===-1&&"value"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.rid||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(448),f=n(l),h=r(455),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):(this.variant=2,r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.value=new m.default({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||""}}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:m.default.schema(t.rKeyId||{names:{blockName:t.blockName||""}}).valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(456),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.subjectKeyIdentifier=(0,c.getParametersValue)(t,"subjectKeyIdentifier",e.defaultValues("subjectKeyIdentifier")),"date"in t&&(this.date=(0,c.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,c.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{subjectKeyIdentifier:"subjectKeyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientKeyIdentifier");this.subjectKeyIdentifier=r.result.subjectKeyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new f.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.subjectKeyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"subjectKeyIdentifier":return new s.OctetString;case"date":return new s.GeneralizedTime;case"other":return new f.default;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"subjectKeyIdentifier":return r.isEqual(e.defaultValues("subjectKeyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return""===r.keyAttrId&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.OctetString({name:t.subjectKeyIdentifier||""}),new s.GeneralizedTime({optional:!0,name:t.date||""}),f.default.schema(t.other||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyAttrId=(0,s.getParametersValue)(t,"keyAttrId",e.defaultValues("keyAttrId")),"keyAttr"in t&&(this.keyAttr=(0,s.getParametersValue)(t,"keyAttr",e.defaultValues("keyAttr"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyAttrId:"keyAttrId",keyAttr:"keyAttr"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherKeyAttribute");this.keyAttrId=r.result.keyAttrId.valueBlock.toString(),"keyAttr"in r.result&&(this.keyAttr=r.result.keyAttr)}},{key:"toSchema",value:function(){var e=[];return e.push(new u.ObjectIdentifier({value:this.keyAttrId})),"keyAttr"in this&&e.push(this.keyAttr.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyAttrId:this.keyAttrId};return"keyAttr"in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyAttrId":return"";case"keyAttr":return{};default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"keyAttrId":return""===t;case"keyAttr":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({optional:t.optional||!0,name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.keyAttrId||""}),new u.Any({optional:!0,name:t.keyAttr||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(458),f=n(l),h=r(387),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.kekid=(0,c.getParametersValue)(t,"kekid",e.defaultValues("kekid")),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.preDefinedKEK=(0,c.getParametersValue)(t,"preDefinedKEK",e.defaultValues("preDefinedKEK")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",kekid:{names:{blockName:"kekid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KEKRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.kekid=new f.default({schema:r.result.kekid}),this.keyEncryptionAlgorithm=new m.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{version:this.version,kekid:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"kekid":return new f.default;
case"keyEncryptionAlgorithm":return new m.default;case"encryptedKey":return new s.OctetString;case"preDefinedKEK":return new ArrayBuffer(0);default:throw new Error("Invalid member name for KEKRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"KEKRecipientInfo":return r===e.defaultValues("version");case"kekid":return r.compareWithDefault("keyIdentifier",r.keyIdentifier)&&"date"in r==!1&&"other"in r==!1;case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"preDefinedKEK":return 0===r.byteLength;default:throw new Error("Invalid member name for KEKRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),f.default.schema(t.kekid||{}),m.default.schema(t.keyEncryptionAlgorithm||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(456),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyIdentifier=(0,c.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier")),"date"in t&&(this.date=(0,c.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,c.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KEKIdentifier");this.keyIdentifier=r.result.keyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new f.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyIdentifier:this.keyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new s.OctetString;case"date":return new s.GeneralizedTime;case"other":return new f.default;default:throw new Error("Invalid member name for KEKIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyIdentifier":return r.isEqual(e.defaultValues("keyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return r.compareWithDefault("keyAttrId",r.keyAttrId)&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for KEKIdentifier class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.OctetString({name:t.keyIdentifier||""}),new s.GeneralizedTime({optional:!0,name:t.date||""}),f.default.schema(t.other||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),"keyDerivationAlgorithm"in t&&(this.keyDerivationAlgorithm=(0,c.getParametersValue)(t,"keyDerivationAlgorithm",e.defaultValues("keyDerivationAlgorithm"))),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.password=(0,c.getParametersValue)(t,"password",e.defaultValues("password")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",keyDerivationAlgorithm:"keyDerivationAlgorithm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PasswordRecipientinfo");this.version=r.result.version.valueBlock.valueDec,"keyDerivationAlgorithm"in r.result&&(r.result.keyDerivationAlgorithm.idBlock.tagClass=1,r.result.keyDerivationAlgorithm.idBlock.tagNumber=16,this.keyDerivationAlgorithm=new f.default({schema:r.result.keyDerivationAlgorithm})),this.keyEncryptionAlgorithm=new f.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),"keyDerivationAlgorithm"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new s.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,keyDerivationAlgorithm:this.keyDerivationAlgorithm.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"keyDerivationAlgorithm":return new f.default;case"keyEncryptionAlgorithm":return new f.default;case"encryptedKey":return new s.OctetString;case"password":return new ArrayBuffer(0);default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===-1;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"password":return 0===r.byteLength;default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Constructed({name:t.keyDerivationAlgorithm||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),f.default.schema(t.keyEncryptionAlgorithm||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.oriType=(0,s.getParametersValue)(t,"oriType",e.defaultValues("oriType")),this.oriValue=(0,s.getParametersValue)(t,"oriValue",e.defaultValues("oriValue")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{oriType:"oriType",oriValue:"oriValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherRecipientInfo");this.oriType=r.result.oriType.valueBlock.toString(),this.oriValue=r.result.oriValue}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.oriType}),this.oriValue]})}},{key:"toJSON",value:function(){var t={oriType:this.oriType};return e.compareWithDefault("oriValue",this.oriValue)===!1&&(t.oriValue=this.oriValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"oriType":return"";case"oriValue":return{};default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"oriType":return""===t;case"oriValue":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.oriType||""}),new u.Any({name:t.oriValue||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,c.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.pSourceAlgorithm=(0,c.getParametersValue)(t,"pSourceAlgorithm",e.defaultValues("pSourceAlgorithm")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},pSourceAlgorithm:{names:{blockName:"pSourceAlgorithm"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAESOAEPParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new f.default({schema:r.result.maskGenAlgorithm})),"pSourceAlgorithm"in r.result&&(this.pSourceAlgorithm=new f.default({schema:r.result.pSourceAlgorithm}))}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||(t.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null});case"maskGenAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null}).toSchema()});case"pSourceAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new s.OctetString({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:throw new Error("Invalid member name for RSAESOAEPParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[f.default.schema(t.hashAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[f.default.schema(t.maskGenAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[f.default.schema(t.pSourceAlgorithm||{})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyInfo=(0,c.getParametersValue)(t,"keyInfo",e.defaultValues("keyInfo")),"entityUInfo"in t&&(this.entityUInfo=(0,c.getParametersValue)(t,"entityUInfo",e.defaultValues("entityUInfo"))),this.suppPubInfo=(0,c.getParametersValue)(t,"suppPubInfo",e.defaultValues("suppPubInfo")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyInfo:{names:{blockName:"keyInfo"}},entityUInfo:"entityUInfo",suppPubInfo:"suppPubInfo"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECC_CMS_SharedInfo");this.keyInfo=new f.default({schema:r.result.keyInfo}),"entityUInfo"in r.result&&(this.entityUInfo=r.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=r.result.suppPubInfo.valueBlock.value[0]}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyInfo.toSchema()),"entityUInfo"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyInfo:this.keyInfo.toJSON()};return"entityUInfo"in this&&(e.entityUInfo=this.entityUInfo.toJSON()),e.suppPubInfo=this.suppPubInfo.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyInfo":return new f.default;case"entityUInfo":return new s.OctetString;case"suppPubInfo":return new s.OctetString;default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyInfo":case"entityUInfo":case"suppPubInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.keyInfo||{}),new s.Constructed({name:t.entityUInfo||"",idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new s.OctetString]}),new s.Constructed({name:t.suppPubInfo||"",idBlock:{tagClass:3,tagNumber:2},value:[new s.OctetString]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(382),c=a(s),l=r(383),f=r(386),h=r(464),m=n(h),d=r(387),v=n(d),p=r(414),g=n(p),y=r(466),b=n(y),w=r(388),k=n(w),S=r(400),P=n(S),A=r(467),C=n(A),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbsResponseData=(0,l.getParametersValue)(t,"tbsResponseData",e.defaultValues("tbsResponseData")),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,l.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_BASIC_RESPONSE");this.tbsResponseData=new m.default({schema:r.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new v.default({schema:r.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=r.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in r.result&&(this.certs=Array.from(r.result["BasicOCSPResponse.certs"],function(e){return new g.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new c.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new c.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new c.Sequence({value:e})}},{key:"toJSON",value:function(){var e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}},{key:"getCertificateStatus",value:function(e,t){var r=this,n=Promise.resolve(),a={isForCertificate:!1,status:2},i={},o=[],u=[],s=!0,c=!1,l=void 0;try{for(var h,m=this.tbsResponseData.responses[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var d=h.value,v=(0,f.getAlgorithmByOID)(d.certID.hashAlgorithm.algorithmId);if("name"in v==!1)return Promise.reject("Wrong CertID hashing algorithm: "+d.certID.hashAlgorithm.algorithmId);if(v.name in i==!1){i[v.name]=1;var p=new b.default;o.push(p),u.push(p.createForCertificate(e,{hashAlgorithm:v.name,issuerCertificate:t}))}}}catch(e){c=!0,l=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw l}}return n=n.then(function(){return Promise.all(u)}),n=n.then(function(){var e=!0,t=!1,n=void 0;try{for(var i,u=r.tbsResponseData.responses[Symbol.iterator]();!(e=(i=u.next()).done);e=!0){var s=i.value,c=!0,l=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var d=h.value;if(s.certID.isEqual(d)){a.isForCertificate=!0;try{switch(s.certStatus.idBlock.isConstructed){case!0:1===s.certStatus.idBlock.tagNumber&&(a.status=1);break;case!1:switch(s.certStatus.idBlock.tagNumber){case 0:a.status=0;break;case 2:a.status=2}}}catch(e){}return a}}}catch(e){l=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(l)throw f}}}}catch(e){t=!0,n=e}finally{try{!e&&u.return&&u.return()}finally{if(t)throw n}}return a})}},{key:"sign",value:function(e,t){var r=this;if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof t)t="SHA-1";else{var n=(0,f.getOIDByAlgorithm)({name:t});if(""===n)return Promise.reject("Unsupported hash algorithm: "+t)}var a=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(a.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=(0,f.getOIDByAlgorithm)(a.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==t.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:t});if(""===o)return Promise.reject("Unsupported hash algorithm: "+t);i.hashAlgorithm=new v.default({algorithmId:o,algorithmParams:new c.Null}),i.maskGenAlgorithm=new v.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var u=new k.default(i);this.signatureAlgorithm=new v.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbsResponseData.tbs=this.tbsResponseData.toSchema(!0).toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(a.algorithm,e,new Uint8Array(this.tbsResponseData.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),r.signature=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){function e(e){if(e.issuer.isEqual(n.issuer)===!0&&e.serialNumber.isEqual(n.serialNumber)===!0)return null;var t=!1,r=!0,a=!1,i=void 0;try{for(var o,u=e.extensions[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;"2.5.29.19"===s.extnID&&"cA"in s.parsedValue&&s.parsedValue.cA===!0&&(t=!0)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("certs"in this==!1)return Promise.reject("No certificates attached to the BasicOCSPResponce");var n=null,a=new Uint8Array(this.tbsResponseData.tbs),i=-1,u=Promise.resolve(),s="",h=[];"trustedCerts"in r&&(h=r.trustedCerts);var m=(0,f.getCrypto)();if("undefined"==typeof m)return Promise.reject("Unable to create WebCrypto object");if(s=(0,f.getHashAlgorithm)(this.signatureAlgorithm),""===s)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var d=0,v={};if(this.tbsResponseData.responderID instanceof P.default)d=0,v=this.tbsResponseData.responderID;else{if(!(this.tbsResponseData.responderID instanceof c.OctetString))return Promise.reject("Wrong value for responderID");d=1,v=this.tbsResponseData.responderID}return u=0===d?u.then(function(){var e=!0,r=!1,n=void 0;try{for(var a,u=t.certs.entries()[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var s=o(a.value,2),c=s[0],l=s[1];if(l.subject.isEqual(v)){i=c;break}}}catch(e){r=!0,n=e}finally{try{!e&&u.return&&u.return()}finally{if(r)throw n}}}):u.then(function(){return Promise.all(Array.from(t.certs,function(e){return m.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,n=!1,a=void 0;try{for(var u,s=t.certs.entries()[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=o(u.value,2),f=c[0];c[1];if((0,l.isEqualBuffer)(e[f],v.valueBlock.valueHex)){i=f;break}}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}})}),u=u.then(function(){return i===-1?Promise.reject("Correct certificate was not found in OCSP response"):(n=t.certs[i],Promise.all(Array.from(t.certs,function(t){return e(t)})).then(function(e){var t=[];t.push(n);var r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;null!==s&&t.push(s)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}var c=new C.default({certs:t,trustedCerts:h});return c.verify().then(function(e){return e.result===!0?Promise.resolve():Promise.reject("Validation of signer's certificate failed")},function(e){return Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return Promise.reject("Error during checking certificates for CA flag: "+e)}))}),u=u.then(function(){var e=void 0;e="1.2.840.113549.1.1.10"===t.certs[i].signatureAlgorithm.algorithmId?t.certs[i].signatureAlgorithm.algorithmId:t.certs[i].subjectPublicKeyInfo.algorithm.algorithmId;var r=(0,f.getAlgorithmByOID)(e);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+e);var n=r.name,a=(0,f.getAlgorithmParameters)(n,"importkey");if("hash"in a.algorithm&&(a.algorithm.hash.name=s),"ECDSA"===n){if(t.certs[i].subjectPublicKeyInfo.algorithm.algorithmParams instanceof c.ObjectIdentifier==!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var o=(0,f.getAlgorithmByOID)(t.certs[i].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in o==!1)return Promise.reject("Unsupported named curve algorithm: "+t.certs[i].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());a.algorithm.namedCurve=o.name}var u=t.certs[i].subjectPublicKeyInfo.toSchema(),l=u.toBER(!1),h=new Uint8Array(l);return m.importKey("spki",h,a.algorithm,!0,a.usages)}),u=u.then(function(e){var r=(0,f.getAlgorithmParameters)(e.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=s);var n=t.signature.valueBlock.valueHex;if("ECDSA"===e.algorithm.name){var i=c.fromBER(n);n=(0,f.createECDSASignatureFromCMS)(i.result)}if("RSA-PSS"===e.algorithm.name){var o=void 0;try{o=new k.default({schema:t.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in o?r.algorithm.saltLength=o.saltLength:r.algorithm.saltLength=20;var u="SHA-1";if("hashAlgorithm"in o){var l=(0,f.getAlgorithmByOID)(o.hashAlgorithm.algorithmId);if("name"in l==!1)return Promise.reject("Unrecognized hash algorithm: "+o.hashAlgorithm.algorithmId);u=l.name}r.algorithm.hash.name=u}return m.verify(r.algorithm,e,new Uint8Array(n),a)})}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsResponseData":return new m.default;case"signatureAlgorithm":return new v.default;case"signature":return new c.BitString;case"certs":return[];default:throw new Error("Invalid member name for BasicOCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":var n=m.default.compareWithDefault("tbs",r.tbs)&&m.default.compareWithDefault("responderID",r.responderID)&&m.default.compareWithDefault("producedAt",r.producedAt)&&m.default.compareWithDefault("responses",r.responses);return"responseExtensions"in r&&(n=n&&m.default.compareWithDefault("responseExtensions",r.responseExtensions)),n;case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for BasicOCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"BasicOCSPResponse",value:[m.default.schema(t.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),v.default.schema(t.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new c.BitString({name:t.signature||"BasicOCSPResponse.signature"}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Sequence({value:[new c.Repeated({name:"BasicOCSPResponse.certs",value:g.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(400),f=n(l),h=r(465),m=n(h),d=r(416),v=n(d),p=r(435),g=n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.responderID=(0,c.getParametersValue)(t,"responderID",e.defaultValues("responderID")),this.producedAt=(0,c.getParametersValue)(t,"producedAt",e.defaultValues("producedAt")),this.responses=(0,c.getParametersValue)(t,"responses",e.defaultValues("responses")),"responseExtensions"in t&&(this.responseExtensions=(0,c.getParametersValue)(t,"responseExtensions",e.defaultValues("responseExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ocsp.ResponseData");this.tbs=r.result.ResponseData.valueBeforeDecode,"ResponseData.version"in r.result&&(this.version=r.result["ResponseData.version"].valueBlock.valueDec),1===r.result["ResponseData.responderID"].idBlock.tagNumber?this.responderID=new f.default({schema:r.result["ResponseData.responderID"].valueBlock.value[0]}):this.responderID=r.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=r.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(r.result["ResponseData.responses"],function(e){return new m.default({schema:e})}),"ResponseData.responseExtensions"in r.result&&(this.responseExtensions=Array.from(r.result["ResponseData.responseExtensions"].valueBlock.value,function(e){return new v.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=s.fromBER(this.tbs).result}else{var n=[];"version"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({value:this.version})]})),this.responderID instanceof f.default?n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]
})):n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),n.push(new s.GeneralizedTime({valueDate:this.producedAt})),n.push(new s.Sequence({value:Array.from(this.responses,function(e){return e.toSchema()})})),"responseExtensions"in this&&n.push(new s.Sequence({value:Array.from(this.responseExtensions,function(e){return e.toSchema()})})),r=new s.Sequence({value:n})}return r}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,function(e){return e.toJSON()})),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error("Invalid member name for ResponseData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"responderID":return 0===Object.keys(r).length;case"producedAt":return r===e.defaultValues(t);case"responses":case"responseExtensions":return 0===r.length;default:throw new Error("Invalid member name for ResponseData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"ResponseData",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({name:t.version||"ResponseData.version"})]}),new s.Choice({value:[new s.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[f.default.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new s.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new s.OctetString({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new s.GeneralizedTime({name:t.producedAt||"ResponseData.producedAt"}),new s.Sequence({value:[new s.Repeated({name:"ResponseData.responses",value:m.default.schema(t.response||{})})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[g.default.schema(t.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(466),f=n(l),h=r(416),m=n(h),d=r(435),v=n(d),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.certID=(0,c.getParametersValue)(t,"certID",e.defaultValues("certID")),this.certStatus=(0,c.getParametersValue)(t,"certStatus",e.defaultValues("certStatus")),this.thisUpdate=(0,c.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,c.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"singleExtensions"in t&&(this.singleExtensions=(0,c.getParametersValue)(t,"singleExtensions",e.defaultValues("singleExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new f.default({schema:r.result.certID}),this.certStatus=r.result.certStatus,this.thisUpdate=r.result.thisUpdate.toDate(),"nextUpdate"in r.result&&(this.nextUpdate=r.result.nextUpdate.toDate()),"singleExtensions"in r.result&&(this.singleExtensions=Array.from(r.result.singleExtensions.valueBlock.value,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new s.GeneralizedTime({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new s.GeneralizedTime({valueDate:this.nextUpdate})),"singleExtensions"in this&&e.push(new s.Sequence({value:Array.from(this.singleExtensions,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"certID":return new f.default;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error("Invalid member name for SingleResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"certID":return f.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&f.default.compareWithDefault("issuerNameHash",r.issuerNameHash)&&f.default.compareWithDefault("issuerKeyHash",r.issuerKeyHash)&&f.default.compareWithDefault("serialNumber",r.serialNumber);case"certStatus":return 0===Object.keys(r).length;case"thisUpdate":case"nextUpdate":return r===e.defaultValues(t);default:throw new Error("Invalid member name for SingleResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.certID||{}),new s.Choice({value:[new s.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new s.Constructed({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new s.GeneralizedTime,new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Enumerated]})]}),new s.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new s.GeneralizedTime({name:t.thisUpdate||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.GeneralizedTime({name:t.nextUpdate||""})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[v.default.schema(t.singleExtensions||{})]})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(387),h=n(f),m=r(414),d=(n(m),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.issuerNameHash=(0,c.getParametersValue)(t,"issuerNameHash",e.defaultValues("issuerNameHash")),this.issuerKeyHash=(0,c.getParametersValue)(t,"issuerKeyHash",e.defaultValues("issuerKeyHash")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new h.default({schema:r.result.hashAlgorithm}),this.issuerNameHash=r.result.issuerNameHash,this.issuerKeyHash=r.result.issuerKeyHash,this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}},{key:"isEqual",value:function(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&((0,c.isEqualBuffer)(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)!==!1&&((0,c.isEqualBuffer)(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)!==!1&&!!this.serialNumber.isEqual(e.serialNumber)))}},{key:"createForCertificate",value:function(e,t){var r=this,n=Promise.resolve(),a=void 0,i=(0,l.getCrypto)();if("undefined"==typeof i)return Promise.reject("Unable to create WebCrypto object");if("hashAlgorithm"in t==!1)return Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"');var o=(0,l.getOIDByAlgorithm)({name:t.hashAlgorithm});return""===o?Promise.reject('Incorrect "hashAlgorithm": '+this.hashAlgorithm):(this.hashAlgorithm=new h.default({algorithmId:o,algorithmParams:new s.Null}),"issuerCertificate"in t?(a=t.issuerCertificate,this.serialNumber=e.serialNumber,n=n.then(function(){return i.digest({name:t.hashAlgorithm},a.subject.toSchema().toBER(!1))},function(e){return Promise.reject(e)}),n=n.then(function(e){r.issuerNameHash=new s.OctetString({valueHex:e});var n=a.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex;return i.digest({name:t.hashAlgorithm},n)},function(e){return Promise.reject(e)}).then(function(e){r.issuerKeyHash=new s.OctetString({valueHex:e})},function(e){return Promise.reject(e)})):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new h.default;case"issuerNameHash":case"issuerKeyHash":return new s.OctetString;case"serialNumber":return new s.Integer;default:throw new Error("Invalid member name for CertID class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for CertID class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[h.default.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||""}}),new s.OctetString({name:t.issuerNameHash||""}),new s.OctetString({name:t.issuerKeyHash||""}),new s.Integer({name:t.serialNumber||""})]})}}]),e}());t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(383),s=r(386),c=r(437),l=(n(c),r(414)),f=(n(l),r(468)),h=n(f),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.trustedCerts=(0,u.getParametersValue)(t,"trustedCerts",e.defaultValues("trustedCerts")),this.certs=(0,u.getParametersValue)(t,"certs",e.defaultValues("certs")),this.crls=(0,u.getParametersValue)(t,"crls",e.defaultValues("crls")),this.ocsps=(0,u.getParametersValue)(t,"ocsps",e.defaultValues("ocsps")),this.checkDate=(0,u.getParametersValue)(t,"checkDate",e.defaultValues("checkDate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"sort",value:function(){function e(e,t){var r,n,a,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=[],!e.subject.isEqual(e.issuer)){o.next=12;break}return o.prev=2,o.next=5,e.verify();case 5:if(n=o.sent,n!==!0){o.next=8;break}return o.abrupt("return",[t]);case 8:o.next=12;break;case 10:o.prev=10,o.t0=o.catch(2);case 12:a=0;case 13:if(!(a<l.length)){o.next=26;break}return o.prev=14,o.next=17,e.verify(l[a]);case 17:i=o.sent,i===!0&&r.push(a),o.next=23;break;case 21:o.prev=21,o.t1=o.catch(14);case 23:a++,o.next=13;break;case 26:return o.abrupt("return",r.length?r:[-1]);case 27:case"end":return o.stop()}},c[0],this,[[2,10],[14,21]])}function t(r,n){var a,i,o,u,s,f,h,m,d,v;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=function(e){for(var t=!0,r=0;r<e.length;r++){for(var n=0;n<e.length;n++)if(n!==r&&e[r]===e[n]){t=!1;break}if(!t)break}return t},a=[],c.next=4,e(r,n);case 4:if(o=c.sent,1!==o.length||o[0]!==-1){c.next=7;break}throw new Error("Incorrect result");case 7:if(1!==o.length){c.next=17;break}if(o[0]!==n){c.next=11;break}return a.push(o),c.abrupt("return",a);case 11:return c.next=13,t(l[o[0]],o[0]);case 13:for(u=c.sent,s=0;s<u.length;s++)f=u[s].slice(),f.splice(0,0,o[0]),i(f)?a.push(f):a.push(u[s]);c.next=29;break;case 17:h=0;case 18:if(!(h<o.length)){c.next=29;break}if(o[h]!==n){c.next=22;break}return a.push([o[h]]),c.abrupt("continue",26);case 22:return c.next=24,t(l[o[h]],o[h]);case 24:for(m=c.sent,d=0;d<m.length;d++)v=m[d].slice(),v.splice(0,0,o[h]),i(v)?a.push(v):a.push(m[d]);case 26:h++,c.next=18;break;case 29:return c.abrupt("return",a);case 30:case"end":return c.stop()}},c[1],this)}function r(e){var t,r,n,i,o,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=[],r=[],n=[],t.push.apply(t,a(l.filter(function(t){return e.issuer.isEqual(t.subject)}))),0!==t.length){s.next=6;break}return s.abrupt("return",{status:1,statusMessage:"No certificate's issuers"});case 6:if(r.push.apply(r,a(f.crls.filter(function(t){return t.issuer.isEqual(e.issuer)}))),0!==r.length){s.next=9;break}return s.abrupt("return",{status:1,statusMessage:"No CRLs for specific certificate issuer"});case 9:i=0;case 10:if(!(i<r.length)){s.next=32;break}if(!(r[i].nextUpdate.value<f.checkDate)){s.next=13;break}return s.abrupt("continue",29);case 13:o=0;case 14:if(!(o<t.length)){s.next=29;break}return s.prev=15,s.next=18,r[i].verify({issuerCertificate:t[o]});case 18:if(u=s.sent,!u){s.next=22;break}return n.push({crl:r[i],certificate:t[o]}),s.abrupt("break",29);case 22:s.next=26;break;case 24:s.prev=24,s.t0=s.catch(15);case 26:o++,s.next=14;break;case 29:i++,s.next=10;break;case 32:if(!n.length){s.next=34;break}return s.abrupt("return",{status:0,statusMessage:"",result:n});case 34:return s.abrupt("return",{status:1,statusMessage:"No valid CRLs found"});case 35:case"end":return s.stop()}},c[2],this,[[15,24]])}function n(e,t){var r,n,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=(0,s.getAlgorithmByOID)(e.signatureAlgorithm.algorithmId),"name"in r!=!1){i.next=3;break}return i.abrupt("return",1);case 3:if("hash"in r!=!1){i.next=5;break}return i.abrupt("return",1);case 5:n=0;case 6:if(!(n<f.ocsps.length)){i.next=17;break}return i.next=9,f.ocsps[n].getCertificateStatus(e,t);case 9:if(a=i.sent,!a.isForCertificate){i.next=14;break}if(0!==a.status){i.next=13;break}return i.abrupt("return",0);case 13:return i.abrupt("return",1);case 14:n++,i.next=6;break;case 17:return i.abrupt("return",2);case 18:case"end":return i.stop()}},c[3],this)}function i(e){var t,r,n,a,i,o,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=!1,r=!1,n=!1,a=!1,!("extensions"in e)){s.next=20;break}i=0;case 6:if(!(i<e.extensions.length)){s.next=14;break}if(e.extensions[i].critical!==!0||"parsedValue"in e.extensions[i]!=!1){s.next=9;break}return s.abrupt("return",{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: "+e.extensions[i].extnID});case 9:"2.5.29.15"===e.extensions[i].extnID&&(n=!0,o=new Uint8Array(e.extensions[i].parsedValue.valueBlock.valueHex),4===(4&o[0])&&(r=!0),2===(2&o[0])&&(a=!0)),"2.5.29.19"===e.extensions[i].extnID&&"cA"in e.extensions[i].parsedValue&&e.extensions[i].parsedValue.cA===!0&&(t=!0);case 11:i++,s.next=6;break;case 14:if(r!==!0||t!==!1){s.next=16;break}return s.abrupt("return",{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'});case 16:if(n!==!0||t!==!0||r!==!1){s.next=18;break}return s.abrupt("return",{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'});case 18:if(t!==!0||n!==!0||!u||a!==!1){s.next=20;break}return s.abrupt("return",{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'});case 20:if(t!==!1){s.next=22;break}return s.abrupt("return",{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"});case 22:return s.abrupt("return",{result:!0,resultCode:0,resultMessage:""});case 23:case"end":return s.stop()}},c[4],this)}function o(e,t){var a,o,u,s,l,h,m,d,v,p;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=0;case 1:if(!(a<e.length)){c.next=7;break}if(!(e[a].notBefore.value>t||e[a].notAfter.value<t)){c.next=4;break}return c.abrupt("return",{result:!1,resultCode:8,resultMessage:"Certificate validity period is out of checking date"});case 4:a++,c.next=1;break;case 7:if(!(e.length<2)){c.next=9;break}return c.abrupt("return",{result:!1,resultCode:9,resultMessage:"Too short certificate path"});case 9:o=e.length-2;case 10:if(!(o>=0)){c.next=17;break}if(e[o].issuer.isEqual(e[o].subject)!==!1){c.next=14;break}if(e[o].issuer.isEqual(e[o+1].subject)!==!1){c.next=14;break}return c.abrupt("return",{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"});case 14:o--,c.next=10;break;case 17:if(0===f.crls.length&&0===f.ocsps.length){c.next=58;break}u=0;case 19:if(!(u<e.length-2)){c.next=58;break}if(s=void 0,l=void 0,0===f.ocsps.length){c.next=32;break}return c.next=25,n(e[u],e[u+1]);case 25:s=c.sent,c.t0=s,c.next=0===c.t0?29:1===c.t0?30:2===c.t0?31:32;break;case 29:return c.abrupt("continue",55);case 30:return c.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"});case 31:return c.abrupt("break",32);case 32:if(0===f.crls.length){c.next=53;break}return c.next=35,r(e[u]);case 35:if(l=c.sent,!l.status){c.next=38;break}throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: "+l.statusMessage};case 38:h=0;case 39:if(!(h<l.result.length)){c.next=51;break}if(m=l.result[h].crl.isCertificateRevoked(e[u]),!m){c.next=43;break}return c.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"});case 43:return c.next=45,i(l.result[h].certificate,!0);case 45:if(d=c.sent,d.result!==!1){c.next=48;break}return c.abrupt("return",{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"});case 48:h++,c.next=39;break;case 51:c.next=55;break;case 53:if(2!==s){c.next=55;break}return c.abrupt("return",{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"});case 55:u++,c.next=19;break;case 58:v=1;case 59:if(!(v<e.length)){c.next=68;break}return c.next=62,i(e[v]);case 62:if(p=c.sent,p.result!==!1){c.next=65;break}return c.abrupt("return",{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"});case 65:v++,c.next=59;break;case 68:return c.abrupt("return",{result:!0});case 69:case"end":return c.stop()}},c[5],this)}var c=[e,t,r,n,i,o].map(regeneratorRuntime.mark),l=[],f=this;return(0,h.default)(regeneratorRuntime.mark(function e(){var r,n,i,s,c,h,m,d,v,p,g,y,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.push.apply(l,a(f.trustedCerts)),l.push.apply(l,a(f.certs)),r=0;case 3:if(!(r<l.length)){e.next=18;break}n=0;case 5:if(!(n<l.length)){e.next=15;break}if(r!==n){e.next=8;break}return e.abrupt("continue",12);case 8:if(!(0,u.isEqualBuffer)(l[r].tbs,l[n].tbs)){e.next=12;break}return l.splice(n,1),r=0,e.abrupt("break",15);case 12:n++,e.next=5;break;case 15:r++,e.next=3;break;case 18:return i=void 0,s=[l[l.length-1]],e.next=22,t(l[l.length-1],l.length-1);case 22:if(i=e.sent,0!==i.length){e.next=25;break}return e.abrupt("return",{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"});case 25:c=0;case 26:if(!(c<i.length)){e.next=48;break}h=!1,m=0;case 29:if(!(m<i[c].length)){e.next=44;break}d=l[i[c][m]],v=0;case 32:if(!(v<f.trustedCerts.length)){e.next=39;break}if(!(0,u.isEqualBuffer)(d.tbs,f.trustedCerts[v].tbs)){e.next=36;break}return h=!0,e.abrupt("break",39);case 36:v++,e.next=32;break;case 39:if(!h){e.next=41;break}return e.abrupt("break",44);case 41:m++,e.next=29;break;case 44:h||(i.splice(c,1),c=0);case 45:c++,e.next=26;break;case 48:if(0!==i.length){e.next=50;break}throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};case 50:for(p=i[0].length,g=0,y=0;y<i.length;y++)i[y].length<p&&(p=i[y].length,g=y);for(b=0;b<i[g].length;b++)s.push(l[i[g][b]]);return e.next=56,o(s,f.checkDate);case 56:if(i=e.sent,i.result!==!1){e.next=59;break}throw i;case 59:return e.abrupt("return",s);case 60:case"end":return e.stop()}},e,this)}))}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===this.certs.length)return Promise.reject("Empty certificate array");var r=Promise.resolve(),n=[];n.push("2.5.29.32.0");var a=!1,i=!1,o=!1,u=[],c=[],l=[];"initialPolicySet"in t&&(n=t.initialPolicySet),"initialExplicitPolicy"in t&&(a=t.initialExplicitPolicy),"initialPolicyMappingInhibit"in t&&(i=t.initialPolicyMappingInhibit),"initialInhibitPolicy"in t&&(o=t.initialInhibitPolicy),"initialPermittedSubtreesSet"in t&&(u=t.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in t&&(c=t.initialExcludedSubtreesSet),"initialRequiredNameForms"in t&&(l=t.initialRequiredNameForms);var f=a,h=i,m=o,d=new Array(3);d[0]=!1,d[1]=!1,d[2]=!1;var v=0,p=0,g=0,y=u,b=c,w=l,k=1;return r=this.sort().then(function(t){e.certs=t}),r=r.then(function(){var t=[];t.push("2.5.29.32.0");for(var r=[],a=new Array(e.certs.length-1),i=0;i<e.certs.length-1;i++)a[i]=!0;r.push(a);for(var o=new Array(e.certs.length-1),u=new Array(e.certs.length-1),s=f?e.certs.length-1:-1,c=e.certs.length-2;c>=0;c--,k++)if("extensions"in e.certs[c]){for(var l=0;l<e.certs[c].extensions.length;l++){if("2.5.29.32"===e.certs[c].extensions[l].extnID){u[c]=e.certs[c].extensions[l].parsedValue;for(var y=0;y<t.length;y++)if("2.5.29.32.0"===t[y]){delete r[y][c];break}for(var b=0;b<e.certs[c].extensions[l].parsedValue.certificatePolicies.length;b++){for(var w=-1,S=0;S<t.length;S++)if(e.certs[c].extensions[l].parsedValue.certificatePolicies[b].policyIdentifier===t[S]){w=S;break}if(w===-1){t.push(e.certs[c].extensions[l].parsedValue.certificatePolicies[b].policyIdentifier);var P=new Array(e.certs.length-1);P[c]=!0,r.push(P)}else r[w][c]=!0}}if("2.5.29.33"===e.certs[c].extensions[l].extnID){if(h)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};o[c]=e.certs[c].extensions[l].parsedValue}"2.5.29.36"===e.certs[c].extensions[l].extnID&&f===!1&&(0===e.certs[c].extensions[l].parsedValue.requireExplicitPolicy?(f=!0,s=c):d[0]===!1?(d[0]=!0,v=e.certs[c].extensions[l].parsedValue.requireExplicitPolicy):v=v>e.certs[c].extensions[l].parsedValue.requireExplicitPolicy?e.certs[c].extensions[l].parsedValue.requireExplicitPolicy:v,0===e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping?h=!0:d[1]===!1?(d[1]=!0,p=e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1):p=p>e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1?e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1:p),"2.5.29.54"===e.certs[c].extensions[l].extnID&&m===!1&&(0===e.certs[c].extensions[l].parsedValue.valueBlock.valueDec?m=!0:d[2]===!1?(d[2]=!0,g=e.certs[c].extensions[l].parsedValue.valueBlock.valueDec):g=g>e.certs[c].extensions[l].parsedValue.valueBlock.valueDec?e.certs[c].extensions[l].parsedValue.valueBlock.valueDec:g)}if(m===!0){for(var A=-1,C=0;C<t.length;C++)if("2.5.29.32.0"===t[C]){A=C;break}A!==-1&&delete r[0][c]}f===!1&&d[0]===!0&&(v--,0===v&&(f=!0,s=c,d[0]=!1)),h===!1&&d[1]===!0&&(p--,0===p&&(h=!0,d[1]=!1)),m===!1&&d[2]===!0&&(g--,0===g&&(m=!0,d[2]=!1))}for(var _=0;_<e.certs.length-1;_++)if(_<e.certs.length-2&&"undefined"!=typeof o[_+1])for(var I=0;I<o[_+1].mappings.length;I++){if("2.5.29.32.0"===o[_+1].mappings[I].issuerDomainPolicy||"2.5.29.32.0"===o[_+1].mappings[I].subjectDomainPolicy)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};for(var O=-1,E=-1,B=0;B<t.length;B++)t[B]===o[_+1].mappings[I].issuerDomainPolicy&&(O=B),t[B]===o[_+1].mappings[I].subjectDomainPolicy&&(E=B);"undefined"!=typeof r[O][_]&&delete r[O][_];for(var x=0;x<u[_].certificatePolicies.length;x++)if(o[_+1].mappings[I].subjectDomainPolicy===u[_].certificatePolicies[x].policyIdentifier&&O!==-1&&E!==-1)for(var N=0;N<=_;N++)"undefined"!=typeof r[E][N]&&(r[O][N]=!0,delete r[E][N])}for(var j=0;j<t.length;j++)if("2.5.29.32.0"===t[j])for(var V=0;V<s;V++)delete r[j][V];for(var R=[],T=0;T<r.length;T++){for(var D=!0,U=0;U<e.certs.length-1;U++){var M=!1;if(U<s&&"2.5.29.32.0"===t[T]&&t.length>1){D=!1;break}if("undefined"==typeof r[T][U]){if(U>=s)for(var H=0;H<t.length;H++)if("2.5.29.32.0"===t[H]){r[H][U]===!0&&(M=!0);break}if(!M){D=!1;break}}}D===!0&&R.push(t[T])}var L=[];if(1===n.length&&"2.5.29.32.0"===n[0]&&f===!1)L=n;else if(1===R.length&&"2.5.29.32.0"===R[0])L=n;else for(var K=0;K<R.length;K++)for(var q=0;q<n.length;q++)if(n[q]===R[K]||"2.5.29.32.0"===n[q]){L.push(R[K]);break}return{result:L.length>0,resultCode:0,resultMessage:L.length>0?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:R,userConstrPolicies:L,explicitPolicyIndicator:f,policyMappings:o}}),r=r.then(function(t){function r(e,t){var r=(0,s.stringPrep)(e),n=(0,s.stringPrep)(t),a=r.split("."),i=n.split("."),o=a.length,u=i.length;if(0===o||0===u||o<u)return!1;for(var c=0;c<o;c++)if(0===a[c].length)return!1;for(var l=0;l<u;l++)if(0===i[l].length){if(0===l){if(1===u)return!1;continue}return!1}for(var f=0;f<u;f++)if(0!==i[u-1-f].length&&0!==a[o-1-f].localeCompare(i[u-1-f]))return!1;return!0}function n(e,t){var n=(0,s.stringPrep)(e),a=(0,s.stringPrep)(t),i=n.split("@"),o=a.split("@");if(0===i.length||0===o.length||i.length<o.length)return!1;if(1===o.length){var u=r(i[1],o[0]);if(u){var c=i[1].split("."),l=o[0].split(".");return 0===l[0].length||c.length===l.length}return!1}return 0===n.localeCompare(a)}function a(e,t){var n=(0,s.stringPrep)(e),a=(0,s.stringPrep)(t),i=n.split("/"),o=a.split("/");if(o.length>1)return!1;if(i.length>1)for(var u=0;u<i.length;u++)if(i[u].length>0&&":"!==i[u].charAt(i[u].length-1)){var c=i[u].split(":");n=c[0];break}var l=r(n,a);if(l){var f=n.split("."),h=a.split(".");return 0===h[0].length||f.length===h.length}return!1}function i(e,t){var r=new Uint8Array(e.valueBlock.valueHex),n=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===n.length){for(var a=0;a<4;a++)if((r[a]^n[a])&n[a+4])return!1;return!0}if(16===r.length&&32===n.length){for(var i=0;i<16;i++)if((r[i]^n[i])&n[i+16])return!1;return!0}return!1}function o(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;for(var r=!0,n=0,a=0;a<t.typesAndValues.length;a++){for(var i=!1,o=n;o<e.typesAndValues.length;o++)if(i=e.typesAndValues[o].isEqual(t.typesAndValues[a]),e.typesAndValues[o].type===t.typesAndValues[a].type&&(r=r&&i),i===!0){if(0===n||n===o){n=o+1;break}return!1}if(i===!1)return!1}return 0!==n&&r}if(t.result===!1)return t;k=1;for(var u=e.certs.length-2;u>=0;u--,k++){var c=[],l=[],f=[];if("extensions"in e.certs[u])for(var h=0;h<e.certs[u].extensions.length;h++)"2.5.29.30"===e.certs[u].extensions[h].extnID&&("permittedSubtrees"in e.certs[u].extensions[h].parsedValue&&(l=l.concat(e.certs[u].extensions[h].parsedValue.permittedSubtrees)),"excludedSubtrees"in e.certs[u].extensions[h].parsedValue&&(f=f.concat(e.certs[u].extensions[h].parsedValue.excludedSubtrees))),"2.5.29.17"===e.certs[u].extensions[h].extnID&&(c=c.concat(e.certs[u].extensions[h].parsedValue.altNames));for(var m=w.length<=0,d=0;d<w.length;d++)switch(w[d].base.type){case 4:if(w[d].base.value.typesAndValues.length!==e.certs[u].subject.typesAndValues.length)continue;m=!0;for(var v=0;v<e.certs[u].subject.typesAndValues.length;v++)if(e.certs[u].subject.typesAndValues[v].type!==w[d].base.value.typesAndValues[v].type){m=!1;break}if(m===!0)break}if(m===!1)return t.result=!1,t.resultCode=21,t.resultMessage="No neccessary name form found",Promise.reject(t);var p=[];p[0]=[],p[1]=[],p[2]=[],p[3]=[],p[4]=[];for(var g=0;g<y.length;g++)switch(y[g].base.type){case 1:p[0].push(y[g]);break;case 2:p[1].push(y[g]);break;case 4:p[2].push(y[g]);break;case 6:p[3].push(y[g]);break;case 7:p[4].push(y[g])}for(var S=0;S<5;S++){for(var P=!1,A=!1,C=p[S],_=0;_<C.length;_++){switch(S){case 0:if(c.length>0)for(var I=0;I<c.length;I++)1===c[I].type&&(A=!0,P=P||n(c[I].value,C[_].base.value));else for(var O=0;O<e.certs[u].subject.typesAndValues.length;O++)"1.2.840.113549.1.9.1"!==e.certs[u].subject.typesAndValues[O].type&&"0.9.2342.19200300.100.1.3"!==e.certs[u].subject.typesAndValues[O].type||(A=!0,P=P||n(e.certs[u].subject.typesAndValues[O].value.valueBlock.value,C[_].base.value));break;case 1:if(c.length>0)for(var E=0;E<c.length;E++)2===c[E].type&&(A=!0,P=P||r(c[E].value,C[_].base.value));break;case 2:A=!0,P=o(e.certs[u].subject,C[_].base.value);break;case 3:if(c.length>0)for(var B=0;B<c.length;B++)6===c[B].type&&(A=!0,P=P||a(c[B].value,C[_].base.value));break;case 4:if(c.length>0)for(var x=0;x<c.length;x++)7===c[x].type&&(A=!0,P=P||i(c[x].value,C[_].base.value))}if(P)break}if(P===!1&&C.length>0&&A)return t.result=!1,t.resultCode=41,t.resultMessage='Failed to meet "permitted sub-trees" name constraint',Promise.reject(t)}for(var N=!1,j=0;j<b.length;j++){switch(b[j].base.type){case 1:if(c.length>=0)for(var V=0;V<c.length;V++)1===c[V].type&&(N=N||n(c[V].value,b[j].base.value));else for(var R=0;R<e.subject.typesAndValues.length;R++)"1.2.840.113549.1.9.1"!==e.subject.typesAndValues[R].type&&"0.9.2342.19200300.100.1.3"!==e.subject.typesAndValues[R].type||(N=N||n(e.subject.typesAndValues[R].value.valueBlock.value,b[j].base.value));break;case 2:if(c.length>0)for(var T=0;T<c.length;T++)2===c[T].type&&(N=N||r(c[T].value,b[j].base.value));break;case 4:N=N||o(e.certs[u].subject,b[j].base.value);break;case 6:if(c.length>0)for(var D=0;D<c.length;D++)6===c[D].type&&(N=N||a(c[D].value,b[j].base.value));break;case 7:if(c.length>0)for(var U=0;U<c.length;U++)7===c[U].type&&(N=N||i(c[U].value,b[j].base.value));
}if(N)break}if(N===!0)return t.result=!1,t.resultCode=42,t.resultMessage='Failed to meet "excluded sub-trees" name constraint',Promise.reject(t);y=y.concat(l),b=b.concat(f)}return t}),r=r.then(function(e){return e},function(e){if(e instanceof Object){if("resultMessage"in e)return e;if("message"in e)return{result:!1,resultCode:-1,resultMessage:e.message}}return{result:!1,resultCode:-1,resultMessage:e}})}}],[{key:"defaultValues",value:function(e){switch(e){case"trustedCerts":return[];case"certs":return[];case"crls":return[];case"ocsps":return[];case"checkDate":return new Date;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: "+e)}}}]),e}();t.default=m},function(e,t){"use strict";function r(e){if(!n(e)){if(!a(e))throw new Error("Only generator instance of generator function is a valid input");e=e()}return new Promise(function(t,i){var o=function(t){var r=void 0;try{r=e.throw(t)}catch(e){return i(e)}return u(r)},u=function u(s){var c=void 0;try{c=e.next(s)}catch(e){return i(e)}switch(!0){case c.value instanceof Promise:return c.done?t(c.value):c.value.then(u,o);case a(c.value):case n(c.value):return c.done?r(c.value).then(function(e){t(e)},o):r(c.value).then(u,o);case"function"==typeof c.value:c.value=c.value();default:return c.done?t(c.value):u(c.value)}};u()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=function(e){return"undefined"!=typeof e&&("function"==typeof e.next&&"function"==typeof e.throw)},a=function(e){if("undefined"==typeof e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||n(e))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.CertificationRequestInfo||"CertificationRequestInfo",value:[new c.Integer({name:t.CertificationRequestInfoVersion||"CertificationRequestInfo.version"}),v.default.schema(t.subject||{names:{blockName:"CertificationRequestInfo.subject"}}),m.default.schema({names:{blockName:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Repeated({optional:!0,name:t.CertificationRequestInfoAttributes||"CertificationRequestInfo.attributes",value:b.default.schema(t.attributes||{})})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(382),c=a(s),l=r(383),f=r(386),h=r(390),m=n(h),d=r(400),v=n(d),p=r(387),g=n(p),y=r(394),b=n(y),w=r(388),k=n(w),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.subject=(0,l.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,l.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"attributes"in t&&(this.attributes=(0,l.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS10");this.tbs=r.result.CertificationRequestInfo.valueBeforeDecode,this.version=r.result["CertificationRequestInfo.version"].valueBlock.valueDec,this.subject=new v.default({schema:r.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new m.default({schema:r.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in r.result&&(this.attributes=Array.from(r.result["CertificationRequestInfo.attributes"],function(e){return new b.default({schema:e})})),this.signatureAlgorithm=new g.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var e=[new c.Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return"attributes"in this&&e.push(new c.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new c.Sequence({value:e})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var e={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");var n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: {$hashAlgorithm}");var a=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=(0,f.getOIDByAlgorithm)(a.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);i.hashAlgorithm=new g.default({algorithmId:o,algorithmParams:new c.Null}),i.maskGenAlgorithm=new g.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var u=new k.default(i);this.signatureAlgorithm=new g.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=Promise.resolve(),r=this.subjectPublicKeyInfo,n=this.signatureValue,a=this.tbs,i=(0,f.getCrypto)();if("undefined"==typeof i)return Promise.reject("Unable to create WebCrypto object");var o=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===o?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(t=t.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:e.subjectPublicKeyInfo.algorithm.algorithmId;var n=(0,f.getAlgorithmByOID)(t);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+t);var a=n.name,u=(0,f.getAlgorithmParameters)(a,"importkey");if("hash"in u.algorithm&&(u.algorithm.hash.name=o),"ECDSA"===n.name){var s=!1;if("algorithmParams"in r.algorithm==!0&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(s=!0),s===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var c=(0,f.getAlgorithmByOID)(r.algorithm.algorithmParams.valueBlock.toString());if("name"in c==!1)return Promise.reject("Unsupported named curve algorithm: "+r.algorithm.algorithmParams.valueBlock.toString());u.algorithm.namedCurve=c.name}var l=r.toSchema(),h=l.toBER(!1),m=new Uint8Array(h);return i.importKey("spki",m,u.algorithm,!0,u.usages)}),t=t.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=o);var u=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var s=c.fromBER(u);u=(0,f.createECDSASignatureFromCMS)(s.result)}if("RSA-PSS"===t.algorithm.name){var l=void 0;try{l=new k.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var m=(0,f.getAlgorithmByOID)(l.hashAlgorithm.algorithmId);if("name"in m==!1)return Promise.reject("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithmId);h=m.name}r.algorithm.hash.name=h}return i.verify(r.algorithm,t,new Uint8Array(u),new Uint8Array(a))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"subject":return new v.default;case"subjectPublicKeyInfo":return new m.default;case"attributes":return[];case"signatureAlgorithm":return new g.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for CertificationRequest class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({value:[o(t.certificationRequestInfo||{}),new c.Sequence({name:t.signatureAlgorithm||"signatureAlgorithm",value:[new c.ObjectIdentifier,new c.Any({optional:!0})]}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.digestAlgorithm=(0,c.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),this.digest=(0,c.getParametersValue)(t,"digest",e.defaultValues("digest")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{digestAlgorithm:{names:{blockName:"digestAlgorithm"}},digest:"digest"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DigestInfo");this.digestAlgorithm=new f.default({schema:r.result.digestAlgorithm}),this.digest=r.result.digest}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}},{key:"toJSON",value:function(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"digestAlgorithm":return new f.default;case"digest":return new s.OctetString;default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"digestAlgorithm":return f.default.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==!1;case"digest":return t.isEqual(this.constructor.defaultValues(e));default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.digestAlgorithm||{names:{blockName:"digestAlgorithm"}}),new s.OctetString({name:t.digest||"digest"})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,e),this.eContentType=(0,s.getParametersValue)(t,"eContentType",e.defaultValues("eContentType")),"eContent"in t&&(this.eContent=(0,s.getParametersValue)(t,"eContent",e.defaultValues("eContent")),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&this.eContent.idBlock.isConstructed===!1)){for(var r=new u.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,i=this.eContent.valueBlock.valueHex.byteLength;i>0;){for(var o=new Uint8Array(this.eContent.valueBlock.valueHex,n,n+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-n:65536),c=new ArrayBuffer(o.length),l=new Uint8Array(c),f=0;f<l.length;f++)l[f]=o[f];r.valueBlock.value.push(new u.OctetString({valueHex:c})),i-=o.length,n+=o.length}this.eContent=r}"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{eContentType:"eContentType",eContent:"eContent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=r.result.eContentType.valueBlock.toString(),"eContent"in r.result&&(this.eContent=r.result.eContent)}},{key:"toSchema",value:function(){var t=[];return t.push(new u.ObjectIdentifier({value:this.eContentType})),"eContent"in this&&e.compareWithDefault("eContent",this.eContent)===!1&&t.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={eContentType:this.eContentType};return"eContent"in this&&e.compareWithDefault("eContent",this.eContent)===!1&&(t.eContent=this.eContent.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"eContentType":return"";case"eContent":return new u.OctetString;default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"eContentType":return""===r;case"eContent":return r.isEqual(e.defaultValues("eContent"));default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.eContentType||""}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.eContent||""})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(393),s=n(u),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(s.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(470),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.mac=(0,c.getParametersValue)(t,"mac",e.defaultValues("mac")),this.macSalt=(0,c.getParametersValue)(t,"macSalt",e.defaultValues("macSalt")),"iterations"in t&&(this.iterations=(0,c.getParametersValue)(t,"iterations",e.defaultValues("iterations"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{mac:{names:{blockName:"mac"}},macSalt:"macSalt",iterations:"iterations"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for MacData");this.mac=new f.default({schema:r.result.mac}),this.macSalt=r.result.macSalt,"iterations"in r.result&&(this.iterations=r.result.iterations.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[this.mac.toSchema(),this.macSalt];return"iterations"in this&&e.push(new s.Integer({value:this.iterations})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return"iterations"in this&&(e.iterations=this.iterations.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"mac":return new f.default;case"macSalt":return new s.OctetString;case"iterations":return 1;default:throw new Error("Invalid member name for MacData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"mac":return f.default.compareWithDefault("digestAlgorithm",r.digestAlgorithm)&&f.default.compareWithDefault("digest",r.digest);case"macSalt":return r.isEqual(e.defaultValues(t));case"iterations":return r===e.defaultValues(t);default:throw new Error("Invalid member name for MacData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",optional:t.optional||!0,value:[f.default.schema(t.mac||{names:{blockName:"mac"}}),new s.OctetString({name:t.macSalt||"macSalt"}),new s.Integer({optional:!0,name:t.iterations||"iterations"})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.hashedMessage=(0,c.getParametersValue)(t,"hashedMessage",e.defaultValues("hashedMessage")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm}),this.hashedMessage=r.result.hashedMessage}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default;case"hashedMessage":return new s.OctetString;default:throw new Error("Invalid member name for MessageImprint class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"hashedMessage":return 0===r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for MessageImprint class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.hashAlgorithm||{}),new s.OctetString({name:t.hashedMessage||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(476),h=n(f),m=r(478),d=n(m),v=r(477),p=n(v),g=r(466),y=n(g),b=r(414),w=(n(b),r(387)),k=n(w),S=r(388),P=n(S),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbsRequest=(0,c.getParametersValue)(t,"tbsRequest",e.defaultValues("tbsRequest")),"optionalSignature"in t&&(this.optionalSignature=(0,c.getParametersValue)(t,"optionalSignature",e.defaultValues("optionalSignature"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_REQUEST");this.tbsRequest=new h.default({schema:r.result.tbsRequest}),"optionalSignature"in r.result&&(this.optionalSignature=new d.default({schema:r.result.optionalSignature}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(this.tbsRequest.toSchema(e)),"optionalSignature"in this&&t.push(this.optionalSignature.toSchema()),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var e={tbsRequest:this.tbsRequest.toJSON()};return"optionalSignature"in this&&(e.optionalSignature=this.optionalSignature.toJSON()),e}},{key:"createForCertificate",value:function(e,t){var r=this,n=Promise.resolve(),a=new y.default;return n=n.then(function(){return a.createForCertificate(e,t)}),n=n.then(function(){r.tbsRequest=new h.default({requestList:[new p.default({reqCert:a})]})},function(e){return Promise.reject(e)})}},{key:"sign",value:function(e,t){var r=this;if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof t)t="SHA-1";else{var n=(0,l.getOIDByAlgorithm)({name:t});if(""===n)return Promise.reject("Unsupported hash algorithm: "+t)}if("optionalSignature"in this==!1)return Promise.reject('Need to create "optionalSignature" field before signing');var a=(0,l.getAlgorithmParameters)(e.algorithm.name,"sign");switch(a.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.optionalSignature.signatureAlgorithm.algorithmId=(0,l.getOIDByAlgorithm)(a.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==t.toUpperCase()){var o=(0,l.getOIDByAlgorithm)({name:t});if(""===o)return Promise.reject("Unsupported hash algorithm: "+t);i.hashAlgorithm=new k.default({algorithmId:o,algorithmParams:new s.Null}),i.maskGenAlgorithm=new k.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var u=new P.default(i);this.optionalSignature.signatureAlgorithm=new k.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}var c=this.tbsRequest.toSchema(!0).toBER(!1),f=(0,l.getCrypto)();return"undefined"==typeof f?Promise.reject("Unable to create WebCrypto object"):f.sign(a.algorithm,e,new Uint8Array(c)).then(function(e){"ECDSA"===a.algorithm.name&&(e=(0,l.createCMSECDSASignature)(e)),r.optionalSignature.signature=new s.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsRequest":return new h.default;case"optionalSignature":return new d.default;default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"tbsRequest":return h.default.compareWithDefault("tbs",t.tbs)&&h.default.compareWithDefault("version",t.version)&&h.default.compareWithDefault("requestorName",t.requestorName)&&h.default.compareWithDefault("requestList",t.requestList)&&h.default.compareWithDefault("requestExtensions",t.requestExtensions);case"optionalSignature":return d.default.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&d.default.compareWithDefault("signature",t.signature)&&d.default.compareWithDefault("certs",t.certs);default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"OCSPRequest",value:[h.default.schema(t.tbsRequest||{names:{blockName:"tbsRequest"}}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[d.default.schema(t.optionalSignature||{names:{blockName:"optionalSignature"}})]})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(399),f=n(l),h=r(477),m=n(h),d=r(416),v=n(d),p=r(435),g=n(p),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),"version"in t&&(this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version"))),"requestorName"in t&&(this.requestorName=(0,c.getParametersValue)(t,"requestorName",e.defaultValues("requestorName"))),this.requestList=(0,c.getParametersValue)(t,"requestList",e.defaultValues("requestList")),"requestExtensions"in t&&(this.requestExtensions=(0,c.getParametersValue)(t,"requestExtensions",e.defaultValues("requestExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TBSRequest");this.tbs=r.result.TBSRequest.valueBeforeDecode,"TBSRequest.version"in r.result&&(this.version=r.result["TBSRequest.version"].valueBlock.valueDec),"TBSRequest.requestorName"in r.result&&(this.requestorName=new f.default({schema:r.result["TBSRequest.requestorName"]})),this.requestList=Array.from(r.result["TBSRequest.requests"],function(e){return new m.default({schema:e})}),"TBSRequest.requestExtensions"in r.result&&(this.requestExtensions=Array.from(r.result["TBSRequest.requestExtensions"].valueBlock.value,function(e){return new v.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.byteLength)return e.schema();r=s.fromBER(this.tbs).result}else{var n=[];"version"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({value:this.version})]})),"requestorName"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),n.push(new s.Sequence({value:Array.from(this.requestList,function(e){return e.toSchema()})})),"requestExtensions"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new s.Sequence({value:Array.from(this.requestExtensions,function(e){return e.toSchema()})})]})),r=new s.Sequence({value:n})}return r}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"requestorName"in this&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,function(e){return e.toJSON()}),"requestExtensions"in this&&(e.requestExtensions=Array.from(this.requestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"requestorName":return new f.default;case"requestList":case"requestExtensions":return[];default:throw new Error("Invalid member name for TBSRequest class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"version":return r===e.defaultValues(t);case"requestorName":return r.type===f.default.defaultValues("type")&&0===Object.keys(r.value).length;case"requestList":case"requestExtensions":return 0===r.length;default:throw new Error("Invalid member name for TBSRequest class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TBSRequest",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({name:t.TBSRequestVersion||"TBSRequest.version"})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[f.default.schema(t.requestorName||{names:{blockName:"TBSRequest.requestorName"}})]}),new s.Sequence({name:t.requestList||"TBSRequest.requestList",
value:[new s.Repeated({name:t.requests||"TBSRequest.requests",value:m.default.schema(t.requestNames||{})})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[g.default.schema(t.extensions||{names:{blockName:t.requestExtensions||"TBSRequest.requestExtensions"}})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(466),f=n(l),h=r(416),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.reqCert=(0,c.getParametersValue)(t,"reqCert",e.defaultValues("reqCert")),"singleRequestExtensions"in t&&(this.singleRequestExtensions=(0,c.getParametersValue)(t,"singleRequestExtensions",e.defaultValues("singleRequestExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{reqCert:{names:{blockName:"reqCert"}},singleRequestExtensions:{names:{blockName:"singleRequestExtensions"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for Request");this.reqCert=new f.default({schema:r.result.reqCert}),"singleRequestExtensions"in r.result&&(this.singleRequestExtensions=Array.from(r.result.singleRequestExtensions.valueBlock.value,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.reqCert.toSchema()),"singleRequestExtensions"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:Array.from(this.singleRequestExtensions,function(e){return e.toSchema()})})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={reqCert:this.reqCert.toJSON()};return"singleRequestExtensions"in this&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"reqCert":return new f.default;case"singleRequestExtensions":return[];default:throw new Error("Invalid member name for Request class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"reqCert":return r.isEqual(e.defaultValues(t));case"singleRequestExtensions":return 0===r.length;default:throw new Error("Invalid member name for Request class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.reqCert||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[m.default.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||""}})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=r(414),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,c.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signature:"signature",certs:"certs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ocsp.Signature");this.signatureAlgorithm=new f.default({schema:r.result.signatureAlgorithm}),this.signature=r.result.signature,"certs"in r.result&&(this.certs=Array.from(r.result.certs,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"signatureAlgorithm":return new f.default;case"signature":return new s.BitString;case"certs":return[];default:throw new Error("Invalid member name for Signature class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for Signature class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.signatureAlgorithm||{}),new s.BitString({name:t.signature||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:[new s.Repeated({name:t.certs||"",value:m.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(480),f=n(l),h=r(463),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.responseStatus=(0,c.getParametersValue)(t,"responseStatus",e.defaultValues("responseStatus")),"responseBytes"in t&&(this.responseBytes=(0,c.getParametersValue)(t,"responseBytes",e.defaultValues("responseBytes"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_RESPONSE");this.responseStatus=r.result.responseStatus,"responseBytes"in r.result&&(this.responseBytes=new f.default({schema:r.result.responseBytes}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.responseStatus),"responseBytes"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={responseStatus:this.responseStatus.toJSON()};return"responseBytes"in this&&(e.responseBytes=this.responseBytes.toJSON()),e}},{key:"getCertificateStatus",value:function(e,t){var r=void 0,n={isForCertificate:!1,status:2};if("responseBytes"in this==!1)return n;if("1.3.6.1.5.5.7.48.1.1"!==this.responseBytes.responseType)return n;try{var a=s.fromBER(this.responseBytes.response.valueBlock.valueHex);r=new m.default({schema:a.result})}catch(e){return n}return r.getCertificateStatus(e,t)}},{key:"sign",value:function(e,t){if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var r=s.fromBER(this.responseBytes.response.valueBlock.valueHex),n=new m.default({schema:r.result});return n.sign(e,t)}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}},{key:"verify",value:function(){if("responseBytes"in this==!1)return Promise.reject("Empty ResponseBytes field");if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var e=s.fromBER(this.responseBytes.response.valueBlock.valueHex),t=new m.default({schema:e.result});return t.verify()}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}}],[{key:"defaultValues",value:function(e){switch(e){case"responseStatus":return new s.Enumerated;case"responseBytes":return new f.default;default:throw new Error("Invalid member name for OCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseStatus":return r.isEqual(e.defaultValues(t));case"responseBytes":return f.default.compareWithDefault("responseType",r.responseType)&&f.default.compareWithDefault("response",r.response);default:throw new Error("Invalid member name for OCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"OCSPResponse",value:[new s.Enumerated({name:t.responseStatus||"responseStatus"}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[f.default.schema(t.responseBytes||{names:{blockName:"responseBytes"}})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.responseType=(0,s.getParametersValue)(t,"responseType",e.defaultValues("responseType")),this.response=(0,s.getParametersValue)(t,"response",e.defaultValues("response")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{responseType:"responseType",response:"response"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ResponseBytes");this.responseType=r.result.responseType.valueBlock.toString(),this.response=r.result.response}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.responseType}),this.response]})}},{key:"toJSON",value:function(){return{responseType:this.responseType,response:this.response.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"responseType":return"";case"response":return new u.OctetString;default:throw new Error("Invalid member name for ResponseBytes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseType":return""===r;case"response":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ResponseBytes class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.responseType||""}),new u.OctetString({name:t.response||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.otherCertFormat=(0,s.getParametersValue)(t,"otherCertFormat",e.defaultValues("otherCertFormat")),this.otherCert=(0,s.getParametersValue)(t,"otherCert",e.defaultValues("otherCert")),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=r.result.otherCertFormat.valueBlock.toString(),this.otherCert=r.result.otherCert}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.otherCertFormat}),this.otherCert]})}},{key:"toJSON",value:function(){var e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof u.Any||(e.otherCert=this.otherCert.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new u.Any;default:throw new Error("Invalid member name for OtherCertificateFormat class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.otherCertFormat||"otherCertFormat"}),new u.Any({name:t.otherCert||"otherCert"})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(405),h=n(f),m=r(473),d=n(m),v=r(470),p=n(v),g=r(387),y=n(g),b=r(483),w=n(b),k=r(471),S=n(k),P=r(394),A=n(P),C=r(484),_=n(C),I=r(448),O=n(I),E=r(485),B=n(E),x=r(404),N=n(x),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.authSafe=(0,c.getParametersValue)(t,"authSafe",e.defaultValues("authSafe")),"macData"in t&&(this.macData=(0,c.getParametersValue)(t,"macData",e.defaultValues("macData"))),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",authSafe:{names:{blockName:"authSafe"}},macData:{names:{blockName:"macData"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PFX");this.version=r.result.version.valueBlock.valueDec,this.authSafe=new h.default({schema:r.result.authSafe}),"macData"in r.result&&(this.macData=new d.default({schema:r.result.macData}))}},{key:"toSchema",value:function(){var e=[new s.Integer({value:this.version}),this.authSafe.toSchema()];return"macData"in this&&e.push(this.macData.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,authSafe:this.authSafe.toJSON()};return"macData"in this&&(e.macData=this.macData.toJSON()),e}},{key:"makeInternalValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("parsedValue"in this==!1)return Promise.reject('Please call "parseValues" function first in order to make "parsedValue" data');if("integrityMode"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "integrityMode" inside "parsedValue"');var r=Promise.resolve(),n=(0,l.getCrypto)();if("undefined"==typeof n)return Promise.reject("Unable to create WebCrypto object");if("authenticatedSafe"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "authenticatedSafe" in "parsedValue"');switch(this.parsedValue.integrityMode){case 0:if("iterations"in t==!1)return Promise.reject('Absent mandatory parameter "iterations"');if("pbkdf2HashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "pbkdf2HashAlgorithm"');if("hmacHashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("password"in t==!1)return Promise.reject('Absent mandatory parameter "password"');var a=new ArrayBuffer(64),i=new Uint8Array(a);(0,l.getRandomValues)(i);var o=void 0;switch(t.hmacHashAlgorithm.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "parameters.hmacHashAlgorithm" parameter: '+t.hmacHashAlgorithm)}var u={name:"HMAC",length:o,hash:{name:t.hmacHashAlgorithm}};r=r.then(function(){var e=new Uint8Array(t.password);return n.importKey("raw",e,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),r=r.then(function(e){return n.deriveKey({name:"PBKDF2",hash:{name:t.pbkdf2HashAlgorithm},salt:i,iterations:t.iterations},e,u,!1,["sign"])},function(e){return Promise.reject(e)}),r=r.then(function(t){e.authSafe=new h.default({contentType:"1.2.840.113549.1.7.1",content:new s.OctetString({valueHex:e.parsedValue.authenticatedSafe.toSchema().toBER(!1)})});var r=e.authSafe.content.toBER(!1),a=new Uint8Array(r);return n.sign(u,t,a)},function(e){return Promise.reject(e)}),r=r.then(function(r){e.macData=new d.default({mac:new p.default({digestAlgorithm:new y.default({algorithmId:(0,l.getOIDByAlgorithm)({name:t.hmacHashAlgorithm})}),digest:new s.OctetString({valueHex:r})}),macSalt:new s.OctetString({valueHex:a}),iterations:t.iterations})},function(e){return Promise.reject(e)});break;case 1:if("signingCertificate"in t==!1)return Promise.reject('Absent mandatory parameter "signingCertificate"');if("privateKey"in t==!1)return Promise.reject('Absent mandatory parameter "privateKey"');if("hashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');var c=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),f=new w.default({version:1,encapContentInfo:new S.default({eContentType:"1.2.840.113549.1.7.1",eContent:new s.OctetString({valueHex:c})}),certificates:[t.signingCertificate]});r=r.then(function(){return n.digest({name:t.hashAlgorithm},new Uint8Array(c))}),r=r.then(function(e){var r=[];r.push(new A.default({type:"1.2.840.113549.1.9.3",values:[new s.ObjectIdentifier({value:"1.2.840.113549.1.7.1"})]})),r.push(new A.default({type:"1.2.840.113549.1.9.5",values:[new s.UTCTime({valueDate:new Date})]})),r.push(new A.default({type:"1.2.840.113549.1.9.4",values:[new s.OctetString({valueHex:e})]})),f.signerInfos.push(new _.default({version:1,sid:new O.default({issuer:t.signingCertificate.issuer,serialNumber:t.signingCertificate.serialNumber}),signedAttrs:new B.default({type:0,attributes:r})}))},function(e){return Promise.reject("Error during making digest for message: "+e)}),r=r.then(function(){return f.sign(t.privateKey,0,t.hashAlgorithm)}),r=r.then(function(){e.authSafe=new h.default({contentType:"1.2.840.113549.1.7.2",content:f.toSchema(!0)})},function(e){return Promise.reject("Error during making signature: "+e)});break;default:return Promise.reject('Parameter "integrityMode" has unknown value: '+t.integrityMode)}return r}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');"checkIntegrity"in e==!1&&(e.checkIntegrity=!0);var r=Promise.resolve(),n=(0,l.getCrypto)();if("undefined"==typeof n)return Promise.reject("Unable to create WebCrypto object");switch(this.parsedValue={},this.authSafe.contentType){case"1.2.840.113549.1.7.1":if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if(this.parsedValue.integrityMode=0,this.authSafe.content instanceof s.OctetString==!1)return Promise.reject('Wrong type of "this.authSafe.content"');var a=s.fromBER(this.authSafe.content.valueBlock.valueHex);if(a.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');if(this.parsedValue.authenticatedSafe=new N.default({schema:a.result}),e.checkIntegrity){if("macData"in this==!1)return Promise.reject('Absent "macData" value, can not check PKCS# data integrity');var i=(0,l.getAlgorithmByOID)(this.macData.mac.digestAlgorithm.algorithmId);if("name"in i==!1)return Promise.reject("Unsupported digest algorithm: "+this.macData.mac.digestAlgorithm.algorithmId);var o=void 0;switch(i.name.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "hashAlgorithm": '+i.name)}var u={name:"HMAC",length:o,hash:{name:i.name}};r=r.then(function(){var t=new Uint8Array(e.password);return n.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),r=r.then(function(e){return n.deriveKey({name:"PBKDF2",hash:{name:i.name},salt:new Uint8Array(t.macData.macSalt.valueBlock.valueHex),iterations:t.macData.iterations},e,u,!1,["verify"])},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=t.authSafe.content.toBER(!1),a=new Uint8Array(r);return n.verify(u,e,new Uint8Array(t.macData.mac.digest.valueBlock.valueHex),a)},function(e){return Promise.reject(e)}),r=r.then(function(e){if(e===!1)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject(e)})}break;case"1.2.840.113549.1.7.2":this.parsedValue.integrityMode=1;var f=new w.default({schema:this.authSafe.content});if("eContent"in f.encapContentInfo==!1)return Promise.reject('Absent of attached data in "cmsSigned.encapContentInfo"');if(f.encapContentInfo.eContent instanceof s.OctetString==!1)return Promise.reject('Wrong type of "cmsSigned.encapContentInfo.eContent"');var h=new ArrayBuffer(0);if(f.encapContentInfo.eContent.idBlock.isConstructed===!1)h=f.encapContentInfo.eContent.valueBlock.valueHex;else for(var m=0;m<f.encapContentInfo.eContent.valueBlock.value.length;m++)h=(0,c.utilConcatBuf)(h,f.encapContentInfo.eContent.valueBlock.value[m].valueBlock.valueHex);var d=s.fromBER(h);if(d.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');this.parsedValue.authenticatedSafe=new N.default({schema:d.result}),r=r.then(function(){return f.verify({signer:0,checkChain:!1})}).then(function(e){if(e===!1)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject("Error during integrity verification: "+e)});break;default:return Promise.reject('Incorrect value for "this.authSafe.contentType": '+this.authSafe.contentType)}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 3;case"authSafe":return new h.default;case"macData":return new d.default;case"parsedValue":return{};default:throw new Error("Invalid member name for PFX class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"authSafe":return h.default.compareWithDefault("contentType",r.contentType)&&h.default.compareWithDefault("content",r.content);case"macData":return d.default.compareWithDefault("mac",r.mac)&&d.default.compareWithDefault("macSalt",r.macSalt)&&d.default.compareWithDefault("iterations",r.iterations);case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PFX class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||"version"}),h.default.schema(t.authSafe||{names:{blockName:"authSafe"}}),d.default.schema(t.macData||{names:{blockName:"macData",optional:!0}})]})}}]),e}();t.default=j},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(382),l=a(c),f=r(383),h=r(386),m=r(387),d=n(m),v=r(471),p=n(v),g=r(414),y=n(g),b=r(481),w=n(b),k=r(437),S=n(k),P=r(444),A=n(P),C=r(484),_=n(C),I=r(442),O=n(I),E=r(443),B=n(E),x=r(448),N=n(x),j=r(486),V=n(j),R=r(467),T=n(R),D=r(463),U=n(D),M=r(388),H=n(M),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.version=(0,f.getParametersValue)(t,"version",e.defaultValues("version")),this.digestAlgorithms=(0,f.getParametersValue)(t,"digestAlgorithms",e.defaultValues("digestAlgorithms")),this.encapContentInfo=(0,f.getParametersValue)(t,"encapContentInfo",e.defaultValues("encapContentInfo")),"certificates"in t&&(this.certificates=(0,f.getParametersValue)(t,"certificates",e.defaultValues("certificates"))),"crls"in t&&(this.crls=(0,f.getParametersValue)(t,"crls",e.defaultValues("crls"))),this.signerInfos=(0,f.getParametersValue)(t,"signerInfos",e.defaultValues("signerInfos")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_SIGNED_DATA");this.version=r.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in r.result&&(this.digestAlgorithms=Array.from(r.result["SignedData.digestAlgorithms"],function(e){return new d.default({schema:e})})),this.encapContentInfo=new p.default({schema:r.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in r.result&&(this.certificates=Array.from(r.result["SignedData.certificates"],function(e){return 1===e.idBlock.tagClass?new y.default({schema:e}):3===e.idBlock.tagClass&&3===e.idBlock.tagNumber?(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new w.default({schema:e})):new y.default})),"SignedData.crls"in r.result&&(this.crls=Array.from(r.result["SignedData.crls"],function(e){return 1===e.idBlock.tagClass?new S.default({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new A.default({schema:e}))})),"SignedData.signerInfos"in r.result&&(this.signerInfos=Array.from(r.result["SignedData.signerInfos"],function(e){return new _.default({schema:e})}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(new l.Integer({value:this.version})),t.push(new l.Set({value:Array.from(this.digestAlgorithms,function(t){return t.toSchema(e)})})),t.push(this.encapContentInfo.toSchema()),"certificates"in this&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.certificates,function(t){if(t instanceof w.default){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=3,r}return t.toSchema(e)})})),"crls"in this&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,function(t){if(t instanceof A.default){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return t.toSchema(e)})})),t.push(new l.Set({value:Array.from(this.signerInfos,function(t){return t.toSchema(e)})})),new l.Sequence({value:t})}},{key:"toJSON",value:function(){var e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,function(e){return e.toJSON()}),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,function(e){return e.toJSON()})),"crls"in this&&(e.crls=Array.from(this.crls,function(e){return e.toJSON()})),e.signerInfos=Array.from(this.signerInfos,function(e){return e.toJSON()}),e}},{key:"verify",value:function(){function e(e){if(e.issuer.isEqual(_.issuer)===!0&&e.serialNumber.isEqual(_.serialNumber)===!0)return null;var t=!1,r=!0,n=!1,a=void 0;try{for(var i,o=e.extensions[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;"2.5.29.19"===u.extnID&&"cA"in u.parsedValue&&u.parsedValue.cA===!0&&(t=!0)}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.signer,a=void 0===n?-1:n,o=r.data,s=void 0===o?new ArrayBuffer(0):o,c=r.trustedCerts,m=void 0===c?[]:c,d=r.checkDate,v=void 0===d?new Date:d,p=r.checkChain,g=void 0!==p&&p,b=(r.includeSignerCertificate,r.extendedMode),w=void 0!==b&&b,k=Promise.resolve(),P=new ArrayBuffer(0),A=void 0,C="",_={},I=(0,h.getCrypto)();return"undefined"==typeof I?Promise.reject("Unable to create WebCrypto object"):a===-1?w?Promise.reject({date:v,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to get signer index from input parameters"):"certificates"in this==!1?w?Promise.reject({date:v,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("No certificates attached to this signed data"):(k=this.signerInfos[a].sid instanceof N.default?k.then(function(){var e=!0,r=!1,n=void 0;try{for(var i,o=t.certificates[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=i.value;if(u instanceof y.default!=!1&&u.issuer.isEqual(t.signerInfos[a].sid.issuer)&&u.serialNumber.isEqual(t.signerInfos[a].sid.serialNumber))return _=u,Promise.resolve()}}catch(e){r=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}return w?Promise.reject({date:v,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null
}):Promise.reject("Unable to find signer certificate")}):k.then(function(){return Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof y.default}),function(e){return I.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,n=!1,i=void 0;try{for(var o,s=t.certificates.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=u(o.value,2),l=c[0],h=c[1];if(h instanceof y.default!=!1&&(0,f.isEqualBuffer)(e[l],t.signerInfos[a].sid.valueBlock.valueHex))return _=h,Promise.resolve()}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return w?Promise.reject({date:v,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")},function(){return w?Promise.reject({date:v,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")})}),k=k.then(function(){if("1.2.840.113549.1.9.16.1.4"===t.encapContentInfo.eContentType){if("eContent"in t.encapContentInfo==!1)return!1;var e=l.fromBER(t.encapContentInfo.eContent.valueBlock.valueHex),r=void 0;try{r=new V.default({schema:e.result})}catch(e){return!1}return 0===s.byteLength?w?Promise.reject({date:v,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:_,signerCertificateVerified:null}):Promise.reject("Missed detached data input array"):r.verify({data:s})}return!0}),g&&(k=k.then(function(r){return r!==!1&&Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof y.default}),function(t){return e(t)})).then(function(e){var r,n=new T.default({checkDate:v,certs:Array.from(e.filter(function(e){return null!==e})),trustedCerts:m});if(n.certs.push(_),"crls"in t){var a=!0,o=!1,u=void 0;try{for(var s,c=t.crls[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;l instanceof S.default?n.crls.push(l):"1.3.6.1.5.5.7.48.1.1"===l.otherRevInfoFormat&&n.ocsps.push(new U.default({schema:l.otherRevInfo}))}}catch(e){o=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw u}}}return"ocsps"in t&&(r=n.ocsps).push.apply(r,i(t.ocsps)),n.verify().then(function(e){return e.result===!0?Promise.resolve(!0):w?Promise.reject({date:v,code:5,message:"Validation of signer's certificate failed: "+e.resultMessage,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed")},function(e){return w?Promise.reject({date:v,code:5,message:"Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e),signatureVerified:null,signerCertificate:_,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return w?Promise.reject({date:v,code:6,message:"Error during checking certificates for CA flag: "+e,signatureVerified:null,signerCertificate:_,signerCertificateVerified:null}):Promise.reject("Error during checking certificates for CA flag: "+e)})})),k=k.then(function(e){if(e===!1)return!1;var r=(0,h.getAlgorithmByOID)(t.signerInfos[a].digestAlgorithm.algorithmId);return"name"in r==!1?w?Promise.reject({date:v,code:7,message:"Unsupported signature algorithm: "+t.signerInfos[a].digestAlgorithm.algorithmId,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Unsupported signature algorithm: "+t.signerInfos[a].digestAlgorithm.algorithmId):(C=r.name,!0)}),k=k.then(function(e){if(e===!1)return!1;if("eContent"in t.encapContentInfo)if(1===t.encapContentInfo.eContent.idBlock.tagClass&&4===t.encapContentInfo.eContent.idBlock.tagNumber)if(t.encapContentInfo.eContent.idBlock.isConstructed===!1)s=t.encapContentInfo.eContent.valueBlock.valueHex;else{var r=!0,n=!1,i=void 0;try{for(var o,u=t.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;s=(0,f.utilConcatBuf)(s,c.valueBlock.valueHex)}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}}else s=t.encapContentInfo.eContent.valueBlock.valueHex;else if(0===s.byteLength)return w?Promise.reject({date:v,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Missed detached data input array");if("signedAttrs"in t.signerInfos[a]){var l=!1,h=!1,m=!0,d=!1,p=void 0;try{for(var g,y=t.signerInfos[a].signedAttrs.attributes[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;if("1.2.840.113549.1.9.3"===b.type&&(l=!0),"1.2.840.113549.1.9.4"===b.type&&(h=!0,P=b.values[0].valueBlock.valueHex),l&&h)break}}catch(e){d=!0,p=e}finally{try{!m&&y.return&&y.return()}finally{if(d)throw p}}if(l===!1)return w?Promise.reject({date:v,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject('Attribute "content-type" is a mandatory attribute for "signed attributes"');if(h===!1)return w?Promise.reject({date:v,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject('Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0}),k=k.then(function(e){if(e===!1)return!1;var t=void 0;t="1.2.840.113549.1.1.10"===_.signatureAlgorithm.algorithmId?_.signatureAlgorithm.algorithmId:_.subjectPublicKeyInfo.algorithm.algorithmId;var r=(0,h.getAlgorithmByOID)(t);if("name"in r==!1)return w?Promise.reject({date:v,code:11,message:"Unsupported public key algorithm: "+t,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Unsupported public key algorithm: "+t);var n=(0,h.getAlgorithmParameters)(r.name,"importkey");if("hash"in n.algorithm&&(n.algorithm.hash.name=C),"ECDSA"===r.name){var a=!1;if("algorithmParams"in _.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in _.subjectPublicKeyInfo.algorithm.algorithmParams&&1===_.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===_.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(a=!0),a===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var i=(0,h.getAlgorithmByOID)(_.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in i==!1)return Promise.reject("Unsupported named curve algorithm: "+_.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());n.algorithm.namedCurve=i.name}var o=_.subjectPublicKeyInfo.toSchema(),u=o.toBER(!1),s=new Uint8Array(u);return I.importKey("spki",s,n.algorithm,!0,n.usages)}),k=k.then(function(e){return"boolean"!=typeof e&&(A=e,!("signedAttrs"in t.signerInfos[a])||I.digest(C,new Uint8Array(s)))}).then(function(e){return e!==!1&&(!("signedAttrs"in t.signerInfos[a])||!!(0,f.isEqualBuffer)(e,P)&&(s=t.signerInfos[a].signedAttrs.encodedValue,!0))}).then(function(e){if(e===!1)return!1;var r=(0,h.getAlgorithmParameters)(A.algorithm.name,"verify");if("hash"in r.algorithm&&(r.algorithm.hash.name=C),"RSA-PSS"===A.algorithm.name){var n=void 0;try{n=new H.default({schema:t.signerInfos[a].signatureAlgorithm.algorithmParams})}catch(e){return w?Promise.reject({date:v,code:12,message:e,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject(e)}"saltLength"in n?r.algorithm.saltLength=n.saltLength:r.algorithm.saltLength=20;var i="SHA-1";if("hashAlgorithm"in n){var o=(0,h.getAlgorithmByOID)(n.hashAlgorithm.algorithmId);if("name"in o==!1)return w?Promise.reject({date:v,code:13,message:"Unrecognized hash algorithm: "+n.hashAlgorithm.algorithmId,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject("Unrecognized hash algorithm: "+n.hashAlgorithm.algorithmId);i=o.name}r.algorithm.hash.name=i}var u=t.signerInfos[a].signature.valueBlock.valueHex;if("ECDSA"===A.algorithm.name){var c=l.fromBER(u);u=(0,h.createECDSASignatureFromCMS)(c.result)}return I.verify(r.algorithm,A,new Uint8Array(u),new Uint8Array(s))}),k=k.then(function(e){return w?{date:v,code:14,message:"",signatureVerified:e,signerCertificate:_,signerCertificateVerified:!0}:e},function(e){return w?"code"in e?Promise.reject(e):Promise.reject({date:v,code:15,message:"Error during verification: "+e.message,signatureVerified:null,signerCertificate:_,signerCertificateVerified:!0}):Promise.reject(e)}))}},{key:"sign",value:function(e,t,r,n){var a=this;n=n||new ArrayBuffer(0);var i="";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof r&&(r="SHA-1"),i=(0,h.getOIDByAlgorithm)({name:r}),""===i)return Promise.reject("Unsupported hash algorithm: "+r);0===this.digestAlgorithms.filter(function(e){return e.algorithmId===i}).length&&this.digestAlgorithms.push(new d.default({algorithmId:i,algorithmParams:new l.Null})),this.signerInfos[t].digestAlgorithm=new d.default({algorithmId:i,algorithmParams:new l.Null});var o=(0,h.getAlgorithmParameters)(e.algorithm.name,"sign");switch(o.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signerInfos[t].signatureAlgorithm.algorithmId=(0,h.getOIDByAlgorithm)(o.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":o.algorithm.saltLength=32;break;case"SHA-384":o.algorithm.saltLength=48;break;case"SHA-512":o.algorithm.saltLength=64}var u={};if("SHA-1"!==r.toUpperCase()){if(i=(0,h.getOIDByAlgorithm)({name:r}),""===i)return Promise.reject("Unsupported hash algorithm: "+r);u.hashAlgorithm=new d.default({algorithmId:i,algorithmParams:new l.Null}),u.maskGenAlgorithm=new d.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.hashAlgorithm.toSchema()})}20!==o.algorithm.saltLength&&(u.saltLength=o.algorithm.saltLength);var s=new H.default(u);this.signerInfos[t].signatureAlgorithm=new d.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}if("signedAttrs"in this.signerInfos[t])if(0!==this.signerInfos[t].signedAttrs.encodedValue.byteLength)n=this.signerInfos[t].signedAttrs.encodedValue;else{n=this.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1);var c=new Uint8Array(n);c[0]=49}else if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(this.encapContentInfo.eContent.idBlock.isConstructed===!1)n=this.encapContentInfo.eContent.valueBlock.valueHex;else{var m=!0,v=!1,p=void 0;try{for(var g,y=this.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;n=(0,f.utilConcatBuf)(n,b.valueBlock.valueHex)}}catch(e){v=!0,p=e}finally{try{!m&&y.return&&y.return()}finally{if(v)throw p}}}else n=this.encapContentInfo.eContent.valueBlock.valueHex;else if(0===n.byteLength)return Promise.reject("Missed detached data input array");var w=(0,h.getCrypto)();return"undefined"==typeof w?Promise.reject("Unable to create WebCrypto object"):w.sign(o.algorithm,e,new Uint8Array(n)).then(function(e){return"ECDSA"===o.algorithm.name&&(e=(0,h.createCMSECDSASignature)(e)),a.signerInfos[t].signature=new l.OctetString({valueHex:e}),e},function(e){return Promise.reject("Signing error: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new p.default;case"certificates":return[];case"crls":return[];case"signerInfos":return[];default:throw new Error("Invalid member name for SignedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"encapContentInfo":return new p.default;case"digestAlgorithms":case"certificates":case"crls":case"signerInfos":return 0===r.length;default:throw new Error("Invalid member name for SignedData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new l.Sequence({name:t.blockName||"SignedData",optional:t.optional,value:[new l.Integer({name:t.version||"SignedData.version"}),new l.Set({value:[new l.Repeated({name:t.digestAlgorithms||"SignedData.digestAlgorithms",value:d.default.schema()})]}),p.default.schema(t.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:O.default.schema(t.certificates||{names:{certificates:"SignedData.certificates"}}).valueBlock.value}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:B.default.schema(t.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new l.Set({value:[new l.Repeated({name:t.signerInfos||"SignedData.signerInfos",value:_.default.schema()})]})]})}}]),e}();t.default=L},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(387),f=n(l),h=r(485),m=n(h),d=r(448),v=n(d),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.sid=(0,c.getParametersValue)(t,"sid",e.defaultValues("sid")),this.digestAlgorithm=(0,c.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),"signedAttrs"in t&&(this.signedAttrs=(0,c.getParametersValue)(t,"signedAttrs",e.defaultValues("signedAttrs"))),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),"unsignedAttrs"in t&&(this.unsignedAttrs=(0,c.getParametersValue)(t,"unsignedAttrs",e.defaultValues("unsignedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_SIGNER_INFO");this.version=r.result["SignerInfo.version"].valueBlock.valueDec;var n=r.result["SignerInfo.sid"];1===n.idBlock.tagClass?this.sid=new v.default({schema:n}):this.sid=n,this.digestAlgorithm=new f.default({schema:r.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in r.result&&(this.signedAttrs=new m.default({type:0,schema:r.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new f.default({schema:r.result["SignerInfo.signatureAlgorithm"]}),this.signature=r.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in r.result&&(this.unsignedAttrs=new m.default({type:1,schema:r.result["SignerInfo.unsignedAttrs"]}))}},{key:"toSchema",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t=[];return t.push(new s.Integer({value:this.version})),this.sid instanceof v.default?t.push(this.sid.toSchema()):t.push(this.sid),t.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&e.compareWithDefault("signedAttrs",this.signedAttrs)===!1&&t.push(this.signedAttrs.toSchema()),t.push(this.signatureAlgorithm.toSchema()),t.push(this.signature),"unsignedAttrs"in this&&e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)===!1&&t.push(this.unsignedAttrs.toSchema()),new s.Sequence({value:t})}},{key:"toJSON",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t={version:this.version};return this.sid instanceof s.Any||(t.sid=this.sid.toJSON()),t.digestAlgorithm=this.digestAlgorithm.toJSON(),e.compareWithDefault("signedAttrs",this.signedAttrs)===!1&&(t.signedAttrs=this.signedAttrs.toJSON()),t.signatureAlgorithm=this.signatureAlgorithm.toJSON(),t.signature=this.signature.toJSON(),e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)===!1&&(t.unsignedAttrs=this.unsignedAttrs.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"sid":return new s.Any;case"digestAlgorithm":return new f.default;case"signedAttrs":return new m.default({type:0});case"signatureAlgorithm":return new f.default;case"signature":return new s.OctetString;case"unsignedAttrs":return new m.default({type:1});default:throw new Error("Invalid member name for SignerInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return e.defaultValues("version")===r;case"sid":return r instanceof s.Any;case"digestAlgorithm":return r instanceof f.default!=!1&&r.isEqual(e.defaultValues("digestAlgorithm"));case"signedAttrs":return m.default.compareWithDefault("type",r.type)&&m.default.compareWithDefault("attributes",r.attributes)&&m.default.compareWithDefault("encodedValue",r.encodedValue);case"signatureAlgorithm":return r instanceof f.default!=!1&&r.isEqual(e.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return m.default.compareWithDefault("type",r.type)&&m.default.compareWithDefault("attributes",r.attributes)&&m.default.compareWithDefault("encodedValue",r.encodedValue);default:throw new Error("Invalid member name for SignerInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:"SignerInfo",value:[new s.Integer({name:t.version||"SignerInfo.version"}),new s.Choice({value:[v.default.schema(t.sid||{names:{blockName:"SignerInfo.sid"}}),new s.Constructed({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new s.OctetString]})]}),f.default.schema(t.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),m.default.schema(t.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),f.default.schema(t.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new s.OctetString({name:t.signature||"SignerInfo.signature"}),m.default.schema(t.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(394),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,c.getParametersValue)(t,"type",e.defaultValues("type")),this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes")),this.encodedValue=(0,c.getParametersValue)(t,"encodedValue",e.defaultValues("encodedValue")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{tagNumber:this.type,attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SignedUnsignedAttributes");this.type=r.result.idBlock.tagNumber,this.encodedValue=r.result.valueBeforeDecode;var n=new Uint8Array(this.encodedValue);if(n[0]=49,"attributes"in r.result!=!1)this.attributes=Array.from(r.result.attributes,function(e){return new f.default({schema:e})});else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}},{key:"toSchema",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues("type");case"attributes":return 0===r.length;case"encodedValue":return 0===r.byteLength;default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Constructed({name:t.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber},value:[new s.Repeated({name:t.attributes||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(386),f=r(474),h=n(f),m=r(402),d=n(m),v=r(399),p=n(v),g=r(416),y=n(g),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.policy=(0,c.getParametersValue)(t,"policy",e.defaultValues("policy")),this.messageImprint=(0,c.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.genTime=(0,c.getParametersValue)(t,"genTime",e.defaultValues("genTime")),"accuracy"in t&&(this.accuracy=(0,c.getParametersValue)(t,"accuracy",e.defaultValues("accuracy"))),"ordering"in t&&(this.ordering=(0,c.getParametersValue)(t,"ordering",e.defaultValues("ordering"))),"nonce"in t&&(this.nonce=(0,c.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"tsa"in t&&(this.tsa=(0,c.getParametersValue)(t,"tsa",e.defaultValues("tsa"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TST_INFO");this.version=r.result["TSTInfo.version"].valueBlock.valueDec,this.policy=r.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new h.default({schema:r.result["TSTInfo.messageImprint"]}),this.serialNumber=r.result["TSTInfo.serialNumber"],this.genTime=r.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in r.result&&(this.accuracy=new d.default({schema:r.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in r.result&&(this.ordering=r.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in r.result&&(this.nonce=r.result["TSTInfo.nonce"]),"TSTInfo.tsa"in r.result&&(this.tsa=new p.default({schema:r.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in r.result&&(this.extensions=Array.from(r.result["TSTInfo.extensions"],function(e){return new y.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(new s.ObjectIdentifier({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new s.GeneralizedTime({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new s.Boolean({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),e}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=void 0,a=void 0,i=void 0,o=(0,l.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");if(!("data"in t))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');n=t.data,"notBefore"in t&&(a=t.notBefore),"notAfter"in t&&(i=t.notAfter);var u=(0,l.getAlgorithmByOID)(this.messageImprint.hashAlgorithm.algorithmId);return"name"in u==!1?Promise.reject("Unsupported signature algorithm: "+this.messageImprint.hashAlgorithm.algorithmId):r=r.then(function(){return o.digest(u.name,new Uint8Array(n))}).then(function(t){return(0,c.isEqualBuffer)(t,e.messageImprint.hashedMessage.valueBlock.valueHex)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new h.default;case"serialNumber":return new s.Integer;case"genTime":return new Date(0,0,0);case"accuracy":return new d.default;case"ordering":return!1;case"nonce":return new s.Integer;case"tsa":return new p.default;case"extensions":return[];default:throw new Error("Invalid member name for TSTInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"policy":case"genTime":case"ordering":return r===e.defaultValues(t);case"messageImprint":return h.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&h.default.compareWithDefault("hashedMessage",r.hashedMessage);case"serialNumber":case"nonce":return r.isEqual(e.defaultValues(t));case"accuracy":return d.default.compareWithDefault("seconds",r.seconds)&&d.default.compareWithDefault("millis",r.millis)&&d.default.compareWithDefault("micros",r.micros);case"tsa":return p.default.compareWithDefault("type",r.type)&&p.default.compareWithDefault("value",r.value);case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TSTInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TSTInfo",value:[new s.Integer({name:t.version||"TSTInfo.version"}),new s.ObjectIdentifier({name:t.policy||"TSTInfo.policy"}),h.default.schema(t.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new s.Integer({name:t.serialNumber||"TSTInfo.serialNumber"}),new s.GeneralizedTime({name:t.genTime||"TSTInfo.genTime"}),d.default.schema(t.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new s.Boolean({name:t.ordering||"TSTInfo.ordering",optional:!0}),new s.Integer({name:t.nonce||"TSTInfo.nonce",optional:!0}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[p.default.schema(t.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.extensions||"TSTInfo.extensions",value:y.default.schema(t.extension||{})})]})]})}}]),e}();t.default=b},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(382),u=n(o),s=r(383),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.status=(0,s.getParametersValue)(t,"status",e.defaultValues("status")),"statusStrings"in t&&(this.statusStrings=(0,s.getParametersValue)(t,"statusStrings",e.defaultValues("statusStrings"))),"failInfo"in t&&(this.failInfo=(0,s.getParametersValue)(t,"failInfo",e.defaultValues("failInfo"))),"schema"in t&&this.fromSchema(t.schema)}return i(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{status:"status",statusStrings:"statusStrings",failInfo:"failInfo"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKIStatusInfo");var n=r.result.status;if(n.valueBlock.isHexOnly===!0||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,"statusStrings"in r.result&&(this.statusStrings=r.result.statusStrings),"failInfo"in r.result&&(this.failInfo=r.result.failInfo)}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.status})),"statusStrings"in this&&e.push(new u.Sequence({optional:!0,value:this.statusStrings})),"failInfo"in this&&e.push(this.failInfo),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"statusStrings"in this&&(e.statusStrings=Array.from(this.statusStrings,function(e){return e.toJSON()})),"failInfo"in this&&(e.failInfo=this.failInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return 2;case"statusStrings":return[];case"failInfo":return new u.BitString;default:throw new Error("Invalid member name for PKIStatusInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"status":return r===e.defaultValues(t);case"statusStrings":return 0===r.length;case"failInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for PKIStatusInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.status||""}),new u.Sequence({optional:!0,value:[new u.Repeated({name:t.statusStrings||"",value:new u.Utf8String})]}),new u.BitString({name:t.failInfo||"",optional:!0})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){
if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(474),f=n(l),h=r(416),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.messageImprint=(0,c.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),"reqPolicy"in t&&(this.reqPolicy=(0,c.getParametersValue)(t,"reqPolicy",e.defaultValues("reqPolicy"))),"nonce"in t&&(this.nonce=(0,c.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"certReq"in t&&(this.certReq=(0,c.getParametersValue)(t,"certReq",e.defaultValues("certReq"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TSP_REQUEST");this.version=r.result["TimeStampReq.version"].valueBlock.valueDec,this.messageImprint=new f.default({schema:r.result["TimeStampReq.messageImprint"]}),"TimeStampReq.reqPolicy"in r.result&&(this.reqPolicy=r.result["TimeStampReq.reqPolicy"].valueBlock.toString()),"TimeStampReq.nonce"in r.result&&(this.nonce=r.result["TimeStampReq.nonce"]),"TimeStampReq.certReq"in r.result&&(this.certReq=r.result["TimeStampReq.certReq"].valueBlock.value),"TimeStampReq.extensions"in r.result&&(this.extensions=Array.from(r.result["TimeStampReq.extensions"],function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var t=[];return t.push(new s.Integer({value:this.version})),t.push(this.messageImprint.toSchema()),"reqPolicy"in this&&t.push(new s.ObjectIdentifier({value:this.reqPolicy})),"nonce"in this&&t.push(this.nonce),"certReq"in this&&e.compareWithDefault("certReq",this.certReq)===!1&&t.push(new s.Boolean({value:this.certReq})),"extensions"in this&&t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={version:this.version,messageImprint:this.messageImprint.toJSON()};return"reqPolicy"in this&&(t.reqPolicy=this.reqPolicy),"nonce"in this&&(t.nonce=this.nonce.toJSON()),"certReq"in this&&e.compareWithDefault("certReq",this.certReq)===!1&&(t.certReq=this.certReq),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"messageImprint":return new f.default;case"reqPolicy":return"";case"nonce":return new s.Integer;case"certReq":return!1;case"extensions":return[];default:throw new Error("Invalid member name for TimeStampReq class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"reqPolicy":case"certReq":return r===e.defaultValues(t);case"messageImprint":return f.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&f.default.compareWithDefault("hashedMessage",r.hashedMessage);case"nonce":return r.isEqual(e.defaultValues(t));case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TimeStampReq class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TimeStampReq",value:[new s.Integer({name:t.version||"TimeStampReq.version"}),f.default.schema(t.messageImprint||{names:{blockName:"TimeStampReq.messageImprint"}}),new s.ObjectIdentifier({name:t.reqPolicy||"TimeStampReq.reqPolicy",optional:!0}),new s.Integer({name:t.nonce||"TimeStampReq.nonce",optional:!0}),new s.Boolean({name:t.certReq||"TimeStampReq.certReq",optional:!0}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.extensions||"TimeStampReq.extensions",value:m.default.schema()})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(382),s=a(u),c=r(383),l=r(487),f=n(l),h=r(405),m=n(h),d=r(483),v=n(d),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.status=(0,c.getParametersValue)(t,"status",e.defaultValues("status")),"timeStampToken"in t&&(this.timeStampToken=(0,c.getParametersValue)(t,"timeStampToken",e.defaultValues("timeStampToken"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TSP_RESPONSE");this.status=new f.default({schema:r.result["TimeStampResp.status"]}),"TimeStampResp.timeStampToken"in r.result&&(this.timeStampToken=new m.default({schema:r.result["TimeStampResp.timeStampToken"]}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.status.toSchema()),"timeStampToken"in this&&e.push(this.timeStampToken.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"timeStampToken"in this&&(e.timeStampToken=this.timeStampToken.toJSON()),e}},{key:"sign",value:function(e,t){if("timeStampToken"in this==!1)return Promise.reject("timeStampToken is absent in TSP response");if("1.2.840.113549.1.7.2"!==this.timeStampToken.contentType)return Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType);var r=new m.default({schema:this.timeStampToken.content});return r.sign(e,0,t)}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{signer:0,trustedCerts:[],data:new ArrayBuffer(0)};if("timeStampToken"in this==!1)return Promise.reject("timeStampToken is absent in TSP response");if("1.2.840.113549.1.7.2"!==this.timeStampToken.contentType)return Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType);var t=new v.default({schema:this.timeStampToken.content});return t.verify(e)}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return new f.default;case"timeStampToken":return new m.default;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"status":return f.default.compareWithDefault("status",t.status)&&"statusStrings"in t==!1&&"failInfo"in t==!1;case"timeStampToken":return""===t.contentType&&t.content instanceof s.Any;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TimeStampResp",value:[f.default.schema(t.status||{names:{blockName:"TimeStampResp.status"}}),m.default.schema(t.timeStampToken||{names:{blockName:"TimeStampResp.timeStampToken",optional:!0}})]})}}]),e}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=function(){function e(){}return e.determineOptions=function(e,t){var r={parseCerts:!1};return e?"function"==typeof e?r.callback=e:(r.callback=t,n.has(e,"parseCerts")&&(r.parseCerts=e.parseCerts)):"function"==typeof t&&(r.callback=t),r},e.determineOptionsWithFilter=function(e){var t={parseCerts:!1,params:{}};return n.isArray(e)?e.length&&(t.params.filter=e.join(",")):n.isObject(e)&&(n.has(e,"filters")&&n.isArray(e.filters)&&e.filters.length&&(t.params.filter=e.filters.join(",")),n.has(e,"parseCerts")&&(t.parseCerts=e.parseCerts)),t},e}();t.RequestHandler=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(380),o=r(490),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.rnData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.RN_DATA),void 0,e)},t.prototype.address=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ADDRESS),void 0,e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.citizenCertificate=function(e,r){return this.getCertificate(t.CERT_CITIZEN,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,o.RequestHandler.determineOptions(e,r))},t.prototype.rrnCertificate=function(e,r){return this.getCertificate(t.CERT_RRN,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this,o={private_key_reference:t.VERIFY_PRIV_KEY_REF};return e.pin&&(o.pin=e.pin),i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(a.GenericCertCard.VERIFY_PIN),o,void 0,r)})},t}(a.GenericCertCard);u.RN_DATA="/rn",u.ADDRESS="/address",u.PHOTO="/picture",u.VERIFY_PRIV_KEY_REF="non-repudiation",t.EidBe=u},function(e,t,r){"use strict";function n(e,t){return{filter:e.filter,pin:t}}function a(e){return{pin:e}}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(379),u=r(380),s=r(381),c=r(340),l=r(490),f=function(e){function t(t,r,n,a,i){var o=e.call(this,t,r,n,a)||this;return o.baseUrl=t,o.containerUrl=r,o.connection=n,o.reader_id=a,o.pin=i,o}return i(t,e),t.prototype.allDataFilters=function(){return["authentication-certificate","biometric","non-repudiation-certificate","picture","root-certificates"]},t.prototype.allCertFilters=function(){return["authentication-certificate","non-repudiation-certificate","root-certificates"]},t.prototype.allData=function(e,t){var r=l.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(),n(r.params,this.pin)).then(function(e){return s.CertParser.process(e,r.parseCerts,t)},function(e){return c.ResponseHandler.error(e,t)})},t.prototype.allCerts=function(e,r){var a=l.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),n(a.params,this.pin)).then(function(e){return s.CertParser.process(e,a.parseCerts,r)},function(e){return c.ResponseHandler.error(e,r)})},t.prototype.biometric=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.BIOMETRIC),a(this.pin),e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),a(this.pin),e)},t.prototype.rootCertificate=function(e,r){return this.getCertificateArray(t.CERT_ROOT,l.RequestHandler.determineOptions(e,r),a(this.pin))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,l.RequestHandler.determineOptions(e,r),a(this.pin))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,l.RequestHandler.determineOptions(e,r),a(this.pin))},t.prototype.verifyPin=function(e,r){var n=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,a(n.pin),r)})},t.prototype.signData=function(e,r){var n=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,a(n.pin),r)})},t.prototype.authenticate=function(e,r){var n=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,a(n.pin),r)})},t.prototype.signatureImage=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGNATURE_IMAGE),a(this.pin),e)},t.prototype.getCertificate=function(e,r,n){var a=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,n.pin).then(function(){return a.connection.get(a.baseUrl,a.containerSuffix(t.ALL_CERTIFICATES+e),n).then(function(e){return s.CertParser.process(e,r.parseCerts,r.callback)},function(e){return c.ResponseHandler.error(e,r.callback)})})},t.prototype.getCertificateArray=function(e,r,n){var a=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,n.pin).then(function(){return a.connection.get(a.baseUrl,a.containerSuffix(t.ALL_CERTIFICATES+e),n).then(function(e){return s.CertParser.process(e,r.parseCerts,r.callback)},function(e){return c.ResponseHandler.error(e,r.callback)})})},t}(o.GenericSecuredCertCard);f.BIOMETRIC="/biometric",f.ADDRESS="/address",f.PHOTO="/picture",f.SIGNATURE_IMAGE="/signature-image",t.EidLux=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i="/card-issuing",o="/contracts",u="/picture",s="/status",c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.cardIssuing=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(i),void 0,e)},t.prototype.contracts=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(o),void 0,e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(u),void 0,e)},t.prototype.status=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(s),void 0,e)},t}(a.GenericSmartCard);t.Mobib=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(490),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.activated=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ACTIVATED),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,i.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,i.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,i.RequestHandler.determineOptions(e,r))},t}(a.GenericCertCard);o.ACTIVATED="/activated",t.LuxTrust=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(380),o=r(337),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.challenge=function(e,r){var n=this;return r&&"function"==typeof r?void i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.CHALLENGE),e,void 0,r)},function(e){return r(e,null)}):new o.Promise(function(r,a){i.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.CHALLENGE),e,void 0))},function(e){a(e)})})},t.prototype.readCounter=function(e,r){var n=this;return r&&"function"==typeof r?void i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.get(n.baseUrl,n.containerSuffix(t.READ_COUNTER),{pin:e.pin},r)},function(e){return r(e,null)}):new o.Promise(function(r,a){i.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.get(n.baseUrl,n.containerSuffix(t.READ_COUNTER),{pin:e.pin},void 0))},function(e){a(e)})})},t}(a.GenericPinCard);u.CHALLENGE="/challenge",u.READ_COUNTER="/counter",t.Ocra=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(380),o=r(490),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["applet-info","root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.issuerCertificate=function(e,r){return this.getCertificate(t.CERT_ISSUER,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,o.RequestHandler.determineOptions(e,r))},t.prototype.encryptionCertificate=function(e,r){return this.getCertificate(t.CERT_ENCRYPTION,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t.prototype.resetPin=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.RESET_PIN),e,void 0,r)},t}(a.GenericCertCard);u.DEFAULT_VERIFY_PIN="sign",u.RESET_PIN="/reset-pin",t.Aventra=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(380),o=r(490),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.issuerCertificate=function(e,r){return this.getCertificate(t.CERT_ISSUER,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,o.RequestHandler.determineOptions(e,r))},t.prototype.encryptionCertificate=function(e,r){return this.getCertificate(t.CERT_ENCRYPTION,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t}(a.GenericCertCard);t.Oberthur=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(380),o=r(337),u=r(490),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["applet-info","root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["authentication-certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.printedInformation=function(e,r){var n=this;return r&&"function"==typeof r?void i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.PRINTED_INFORMATION),e,void 0,r)},function(e){return r(e,null)}):new o.Promise(function(r,a){i.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.PRINTED_INFORMATION),e,void 0))},function(e){a(e)})})},t.prototype.facialImage=function(e,r){var n=this;return r&&"function"==typeof r?void i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.FACIAL_IMAGE),e,void 0,r)},function(e){return r(e,null)}):new o.Promise(function(r,a){i.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.FACIAL_IMAGE),e,void 0))},function(e){a(e)})})},t.prototype.authenticationCertificate=function(e,r,n){return this.getCertificate(t.CERT_AUTHENTICATION,e,u.RequestHandler.determineOptions(r,n))},t.prototype.signingCertificate=function(e,r,n){return this.getCertificate(t.CERT_SIGNING,e,u.RequestHandler.determineOptions(r,n))},t}(a.GenericSecuredCertCard);s.PRINTED_INFORMATION="/printed-information",s.FACIAL_IMAGE="/facial-image",t.PIV=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=r(381),i=r(340),o=r(335),u=r(490),s=function(){function e(t,r,n,a){this.baseUrl=t,this.containerUrl=r,this.connection=n,this.moduleConfig=a,o.os.family.indexOf("Win")>-1&&(this.os="win"),o.os.family.indexOf("OS X")>-1&&(this.os="mac"),this.os||(this.os="linux"),a&&a[this.os]?this.modulePath=a[this.os]:this.modulePath=e.DEFAULT_CONFIG[this.os]}return e.prototype.certificates=function(t,r,o){var s=this,c=n.extend({slot_id:t},{module:this.modulePath}),l=u.RequestHandler.determineOptions(r,o);return this.connection.post(this.baseUrl,this.containerSuffix(e.ALL_CERTIFICATES),c,void 0).then(function(e){return a.CertParser.process(e,l.parseCerts,l.callback)},function(r){if(s.moduleConfig){var o=n.extend({slot_id:t},{module:e.DEFAULT_CONFIG[s.os]});return s.connection.post(s.baseUrl,s.containerSuffix(e.ALL_CERTIFICATES),o,void 0).then(function(e){return a.CertParser.process(e,l.parseCerts,l.callback)},function(e){return i.ResponseHandler.error(e,l.callback)})}return i.ResponseHandler.error(r,l.callback)})},e.prototype.info=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.INFO),n,void 0).then(function(e){return i.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var a={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.INFO),a,void 0,t)}return i.ResponseHandler.error(n,t)})},e.prototype.signData=function(t,r){var n=this,a={module:this.modulePath,id:t.cert_id,slot_id:t.slot_id,pin:t.pin,data:t.data,digest:t.algorithm_reference};return this.connection.post(this.baseUrl,this.containerSuffix(e.SIGN),a,void 0).then(function(e){return i.ResponseHandler.response(e,r)},function(a){if(n.moduleConfig){var o={module:e.DEFAULT_CONFIG[n.os],id:t.cert_id,slot_id:t.slot_id,pin:t.pin,data:t.data,digest:t.algorithm_reference};return n.connection.post(n.baseUrl,n.containerSuffix(e.SIGN),o,void 0,r)}return i.ResponseHandler.error(a,r)})},e.prototype.slots=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.SLOTS),n,void 0).then(function(e){return i.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var a={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.SLOTS),a,void 0,t)}return i.ResponseHandler.error(n,t)})},e.prototype.slotsWithTokenPresent=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.SLOTS),n,{"token-present":"true"}).then(function(e){return i.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var a={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.SLOTS),a,{"token-present":"true"},t)}return i.ResponseHandler.error(n,t)})},e.prototype.tokens=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.TOKENS),n,void 0).then(function(e){return i.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var a={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.TOKENS),a,void 0,t)}return i.ResponseHandler.error(n,t)})},e.prototype.containerSuffix=function(e){return this.containerUrl+e},e}();s.ALL_CERTIFICATES="/certificates",s.INFO="/info",s.SIGN="/sign",s.SLOTS="/slots",s.TOKENS="/tokens",s.DEFAULT_CONFIG={linux:"/usr/local/lib/libeTPkcs11.so",mac:"/usr/local/lib/libeTPkcs11.dylib",win:"C:\\Windows\\System32\\eTPKCS11.dll"},t.SafeNet=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(490),o=r(381),u=r(340),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.info=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.INFO),void 0,e)},t.prototype.intermediateCertificate=function(e,r){var n=i.RequestHandler.determineOptions(e,r),a=this;return a.connection.get(a.baseUrl,a.containerSuffix(t.ALL_CERTIFICATES+t.CERT_INTERMEDIATE),void 0).then(function(e){return o.CertParser.process(e,n.parseCerts,n.callback)},function(e){return u.ResponseHandler.error(e,n.callback)})},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,i.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,i.RequestHandler.determineOptions(e,r))},t}(a.GenericCertCard);s.INFO="/info",s.CERT_INTERMEDIATE="/intermediate",t.DNIe=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=r(490),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.idData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ID_DATA),void 0,e)},t.prototype.idDataWithOutPhoto=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ID_DATA),{photo:"false"},e)},t.prototype.address=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ADDRESS),e,void 0,r)},t.prototype.photo=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,i.RequestHandler.determineOptions(e,r))},t.prototype.rootAuthenticationCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT_AUTH,i.RequestHandler.determineOptions(e,r))},t.prototype.rootNonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT_NON_REP,i.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,i.RequestHandler.determineOptions(e,r))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,i.RequestHandler.determineOptions(e,r))},t}(a.GenericCertCard);o.ADDRESS="/address",o.CERT_ROOT_AUTH="/root-authentication",o.CERT_ROOT_NON_REP="/root-non-repudiation",o.ID_DATA="/id",o.PHOTO="/photo",t.EidPt=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(330),i=r(379),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.optionalSessionIdParam=function(e){return e&&e.length?{"session-id":e}:void 0},t.prototype.atr=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.ATR),t.optionalSessionIdParam(e),r)},t.prototype.apdu=function(e,r,n){var i=this.containerSuffix(t.APDU);return a.isArray(e)&&(i=this.containerSuffix(t.APDUS)),this.connection.post(this.baseUrl,i,e,t.optionalSessionIdParam(r),n);
},t.prototype.ccid=function(e,r,n,a){return this.connection.post(this.baseUrl,this.containerSuffix(t.CCID),{feature:e,apdu:r},t.optionalSessionIdParam(n),a)},t.prototype.ccidFeatures=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.CCID_FEATURES),t.optionalSessionIdParam(e),r)},t.prototype.command=function(e,r,n){if(a.isArray(e)){var i=[];return a.forEach(e,function(e){i.push({tx:e})}),this.connection.post(this.baseUrl,this.containerSuffix(t.CMDS),i,t.optionalSessionIdParam(r),n)}return this.connection.post(this.baseUrl,this.containerSuffix(t.CMD),{tx:e},t.optionalSessionIdParam(r),n)},t.prototype.closeSession=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.CLOSE_SESSION),t.optionalSessionIdParam(e),r)},t.prototype.isPresent=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.IS_PRESENT),t.optionalSessionIdParam(e),r)},t.prototype.openSession=function(e,r){return e&&e>0?this.connection.post(this.baseUrl,this.containerSuffix(t.OPEN_SESSION),{timeout:e},void 0,r):this.connection.post(this.baseUrl,this.containerSuffix(t.OPEN_SESSION),{timeout:this.connection.cfg.defaultSessionTimeout},void 0,r)},t}(i.GenericReaderContainer);o.ATR="/atr",o.APDU="/apdu",o.APDUS="/apdus",o.CCID="/ccid",o.CCID_FEATURES="/ccid-features",o.CMD="/command",o.CMDS="/commands",o.CLOSE_SESSION="/close-session",o.IS_PRESENT="/is-present",o.OPEN_SESSION="/open-session",t.RemoteLoading=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(502),i=r(340),o=r(330),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.generateStxApdu=function(e,t){return t&&t.length?{cla:"F1",ins:"95",p1:"F7",p2:"E4",data:t+e}:{cla:"F1",ins:"95",p1:"F7",p2:"E4",data:"00"+e}},t.prototype.isBelfiusReader=function(e,r){var n=this;return e&&e.length?this.connection.get(this.baseUrl,"/card-readers/"+this.reader_id,void 0).then(function(a){return n.apdu(t.NONCE_APDU,e).then(function(e){return i.ResponseHandler.response({data:"9000"===e.data.sw,success:!0},r)})},function(e){return i.ResponseHandler.error(e,r)}):i.ResponseHandler.error({status:400,description:"Session ID is required!",code:"402"},r)},t.prototype.nonce=function(e,r){var n=this;return this.isBelfiusReader(e).then(function(a){return a.data?n.apdu(t.NONCE_APDU,e,r):i.ResponseHandler.error({status:400,description:"Reader is not compatible with this request.",code:"2"},r)})},t.prototype.stx=function(e,r,n){var a=this;return this.isBelfiusReader(r).then(function(u){if(u.data){if(e.length<=500)return a.apdu(t.generateStxApdu(e),r,n);for(var s=[],c=0;c<Math.ceil(e.length/500);c++)s.push(e.substr(500*c,500));return a.apdu(a.generateStxApdus(s),r).then(function(e){var t="";o.forEach(e.data,function(e){e.rx&&(t+=e.rx)});var r={data:{tx:e.data[e.data.length-1].tx,sw:e.data[e.data.length-1].sw},success:e.success};return"9000"===r.data.sw&&t.length>0&&(r.data.rx=t),i.ResponseHandler.response(r,n)})}return i.ResponseHandler.error({status:400,description:"Reader is not compatible with this request.",code:"2"},n)})},t.prototype.generateStxApdus=function(e){var r=[],n=e.length-1;return o.forEach(e,function(e,a){0===a?r.push(t.generateStxApdu(e,"01")):a===n?r.push(t.generateStxApdu(e,"02")):r.push(t.generateStxApdu(e,"03"))}),r},t}(a.RemoteLoading);u.NONCE_APDU={cla:"F1",ins:"95",p1:"F7",p2:"E4",data:"FE0000040001300000"},t.Belfius=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(379),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.downloadFile=function(e,r,n){return this.connection.putFile(this.baseUrl,this.containerSuffix(t.DOWNLOAD),{path:e,file:r,fileName:n},void 0)},t.prototype.listFiles=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.FOLDER),e,void 0,r)},t.prototype.setFolder=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.FOLDER),void 0,e)},t.prototype.uploadFile=function(e){return this.connection.requestFile(this.baseUrl,this.containerSuffix(t.UPLOAD),{path:e})},t}(a.GenericContainer);i.DOWNLOAD="/download",i.FOLDER="/folder",i.UPLOAD="/upload",t.FileExchange=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(337),a=r(491),i=r(340),o=r(330),u=r(506),s=r(496),c=function(){function e(){}return e.containerForReader=function(e,t,r){return this.checkPrerequisites(e,t,{}).then(function(e){return i.ResponseHandler.response({data:e.container,success:!0},r)}).catch(function(e){return i.ResponseHandler.error(e,r)})},e.dumpData=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(this.determineDataDumpMethod).then(e.doDataDump).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.authenticateCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanAuthenticate).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return i.ResponseHandler.response(e,t)}).catch(function(e){return i.ResponseHandler.error(e,t)})},e.signCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanSign).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return i.ResponseHandler.response(e,t)}).catch(function(e){return i.ResponseHandler.error(e,t)})},e.verifyPinCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanVerifyPin).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return i.ResponseHandler.response(e,t)}).catch(function(e){return i.ResponseHandler.error(e,t)})},e.authenticate=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(this.determineAlgorithm).then(e.doAuthenticate).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.sign=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(this.determineAlgorithm).then(e.doSign).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.verifyPin=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(e.doVerifyPin).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.checkCanAuthenticate=function(e){return new n.Promise(function(t){e.data=o.filter(e.data,function(e){return u.CardUtil.canAuthenticate(e.card)}),t(e)})},e.checkCanSign=function(e){return new n.Promise(function(t){e.data=o.filter(e.data,function(e){return u.CardUtil.canSign(e.card)}),t(e)})},e.checkCanVerifyPin=function(e){return new n.Promise(function(t){e.data=o.filter(e.data,function(e){return u.CardUtil.canVerifyPin(e.card)}),t(e)})},e.filterByAvailableContainers=function(e){return e.client.core().plugins().then(function(t){return new n.Promise(function(r){e.readers.data=o.filter(e.readers.data,function(e){return o.find(t.data,function(t){return t.id===u.CardUtil.determineContainer(e.card)})}),r(e.readers)})})},e.checkPrerequisites=function(e,t,r){return e.core().readersCardAvailable().then(function(e){return{readerId:t,readers:e}}).then(this.checkReaderPresent).then(this.determineContainerForCard).then(function(t){return{client:e,container:t}}).then(this.checkContainerAvailable).then(function(e){return{client:e.client,readerId:t,container:e.container,data:r}})},e.checkReaderPresent=function(e){return new n.Promise(function(t,r){var n=o.find(e.readers.data,function(t){return t.id===e.readerId});n?t(n):r(e.readerId&&e.readerId.length?"No card found for this ID":"Reader ID is required.")})},e.checkContainerAvailable=function(e){return new n.Promise(function(t,r){e&&e.container?e.client.core().plugins().then(function(n){o.find(n.data,function(t){return t.id===e.container})?t(e):r("Container for this card is not available")}):r("Unknown card type")})},e.determineAlgorithm=function(e){return new n.Promise(function(t,r){e.data.algorithm_reference&&e.data.algorithm_reference.length||(e.data.algorithm_reference=u.CardUtil.defaultAlgo(e.container)),e.data.algorithm_reference?t(e):r("No algorithm reference provided and cannot determine default algorithm")})},e.determineContainerForCard=function(e){return new n.Promise(function(t,r){e&&e.card?t(u.CardUtil.determineContainer(e.card)):r("No card present in reader")})},e.determineDataDumpMethod=function(e){return new n.Promise(function(t,r){e.dumpMethod=u.CardUtil.dumpMethod(e.container),e.dumpOptions=u.CardUtil.dumpOptions(e.container),e.dumpMethod?t(e):r("Cannot determine method to use for data dump")})},e.doDataDump=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).allData({filters:[],parseCerts:!0}):e.dumpOptions?e.client[e.container](e.readerId)[e.dumpMethod](e.dumpOptions,e.data):e.client[e.container](e.readerId)[e.dumpMethod](e.data)},e.doSign=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).signData(e.data):e.client[e.container](e.readerId).signData(e.data)},e.doAuthenticate=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).authenticate(e.data):e.client[e.container](e.readerId).authenticate(e.data)},e.doVerifyPin=function(e){if("luxeid"===e.container)return e.client.luxeid(e.readerId,e.data.pin).verifyPin(e.data);if("beid"===e.container){var t={pin:e.data.pin,private_key_reference:a.EidBe.VERIFY_PRIV_KEY_REF};return e.client.beid(e.readerId).verifyPin(t)}if("aventra"===e.container){var t={pin:e.data.pin,private_key_reference:s.Aventra.DEFAULT_VERIFY_PIN};return e.client.aventra(e.readerId).verifyPin(t)}return e.client[e.container](e.readerId).verifyPin(e.data)},e}();t.GenericService=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(330),a=function(){function e(){}return e.canAuthenticate=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"piv":case"pteid":return!0;case"ocra":case"emv":case"mobib":default:return!1}},e.canSign=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"piv":case"pteid":return!0;case"ocra":case"emv":case"mobib":default:return!1}},e.canVerifyPin=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"ocra":case"piv":case"pteid":case"emv":return!0;case"mobib":default:return!1}},e.determineContainer=function(e){function t(e,t){return!!n.find(e,function(e){return e.indexOf(t)>-1})}return n.isEmpty(e)||n.isEmpty(e.description)?void 0:t(e.description,"Belgium Electronic ID card")?"beid":t(e.description,"DNI electronico")?"dnie":t(e.description,"Grand Duchy of Luxembourg / Identity card with LuxTrust certificate (eID)")?"luxeid":t(e.description,"LuxTrust card")?"luxtrust":t(e.description,"Juridic Person's Token (PKI)")?"ocra":t(e.description,"MOBIB")?"mobib":t(e.description,"Mastercard")?"emv":t(e.description,"Oberthur")?"oberthur":t(e.description,"Aventra")?"aventra":t(e.description,"PIV")?"piv":t(e.description,"CIV")?"piv":t(e.description,"Portuguese")?"pteid":void 0},e.defaultAlgo=function(e){switch(e){case"aventra":case"beid":case"dnie":case"oberthur":case"piv":case"luxeid":case"luxtrust":case"pteid":return"sha256";default:return}},e.dumpMethod=function(e){switch(e){case"aventra":case"beid":case"dnie":case"emv":case"luxeid":case"luxtrust":case"mobib":case"oberthur":case"ocra":case"piv":case"pteid":return"allData";case"safenet":return"slots";default:return}},e.dumpOptions=function(e){switch(e){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"mobib":case"oberthur":case"ocra":case"piv":case"pteid":return{filters:[],parseCerts:!0};case"safenet":return;case"emv":return[];default:return}},e}();t.CardUtil=a}]);
//# sourceMappingURL=GCLLib.min.js.map