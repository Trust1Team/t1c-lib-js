var GCLLib=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(1),e.exports=r(327)},function(e,t,r){(function(e){"use strict";function t(e,t,r){e[t]||Object[n](e,t,{writable:!0,configurable:!0,value:r})}if(r(2),r(323),r(324),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var n="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,r){r(3),r(51),r(52),r(53),r(54),r(56),r(59),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(69),r(71),r(73),r(75),r(78),r(79),r(80),r(84),r(86),r(88),r(91),r(92),r(93),r(94),r(96),r(97),r(98),r(99),r(100),r(101),r(102),r(104),r(105),r(106),r(108),r(109),r(110),r(112),r(114),r(115),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(125),r(126),r(131),r(132),r(136),r(137),r(138),r(139),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(157),r(158),r(160),r(161),r(167),r(168),r(170),r(171),r(172),r(176),r(177),r(178),r(179),r(180),r(182),r(183),r(184),r(185),r(188),r(190),r(191),r(192),r(194),r(196),r(198),r(199),r(200),r(202),r(203),r(204),r(205),r(215),r(219),r(220),r(222),r(223),r(227),r(228),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(250),r(251),r(252),r(253),r(254),r(256),r(257),r(258),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(270),r(271),r(273),r(274),r(275),r(276),r(279),r(280),r(282),r(283),r(284),r(285),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),e.exports=r(9)},function(e,t,r){"use strict";var n=r(4),i=r(5),a=r(6),o=r(8),u=r(18),s=r(22).KEY,c=r(7),l=r(23),f=r(24),h=r(19),m=r(25),d=r(26),p=r(27),v=r(29),g=r(44),y=r(12),b=r(13),w=r(32),k=r(16),S=r(17),_=r(45),C=r(48),P=r(50),A=r(11),O=r(30),E=P.f,I=A.f,x=C.f,B=n.Symbol,N=n.JSON,j=N&&N.stringify,V="prototype",R=m("_hidden"),T=m("toPrimitive"),D={}.propertyIsEnumerable,U=l("symbol-registry"),M=l("symbols"),H=l("op-symbols"),L=Object[V],F="function"==typeof B,K=n.QObject,q=!K||!K[V]||!K[V].findChild,J=a&&c(function(){return 7!=_(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=E(L,t);n&&delete L[t],I(e,t,r),n&&e!==L&&I(L,t,n)}:I,W=function(e){var t=M[e]=_(B[V]);return t._k=e,t},G=F&&"symbol"==typeof B.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof B},z=function(e,t,r){return e===L&&z(H,t,r),y(e),t=k(t,!0),y(r),i(M,t)?(r.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),r=_(r,{enumerable:S(0,!1)})):(i(e,R)||I(e,R,S(1,{})),e[R][t]=!0),J(e,t,r)):I(e,t,r)},$=function(e,t){y(e);for(var r,n=v(t=w(t)),i=0,a=n.length;a>i;)z(e,r=n[i++],t[r]);return e},Q=function(e,t){return void 0===t?_(e):$(_(e),t)},X=function(e){var t=D.call(this,e=k(e,!0));return!(this===L&&i(M,e)&&!i(H,e))&&(!(t||!i(this,e)||!i(M,e)||i(this,R)&&this[R][e])||t)},Y=function(e,t){if(e=w(e),t=k(t,!0),e!==L||!i(M,t)||i(H,t)){var r=E(e,t);return!r||!i(M,t)||i(e,R)&&e[R][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=x(w(e)),n=[],a=0;r.length>a;)i(M,t=r[a++])||t==R||t==s||n.push(t);return n},ee=function(e){for(var t,r=e===L,n=x(r?H:w(e)),a=[],o=0;n.length>o;)!i(M,t=n[o++])||r&&!i(L,t)||a.push(M[t]);return a};F||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===L&&t.call(H,r),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),J(this,e,S(1,r))};return a&&q&&J(L,e,{configurable:!0,set:t}),W(e)},u(B[V],"toString",function(){return this._k}),P.f=Y,A.f=z,r(49).f=C.f=Z,r(43).f=X,r(42).f=ee,a&&!r(28)&&u(L,"propertyIsEnumerable",X,!0),d.f=function(e){return W(m(e))}),o(o.G+o.W+o.F*!F,{Symbol:B});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)m(te[re++]);for(var ne=O(m.store),ie=0;ne.length>ie;)p(ne[ie++]);o(o.S+o.F*!F,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=B(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),o(o.S+o.F*!F,"Object",{create:Q,defineProperty:z,defineProperties:$,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),N&&o(o.S+o.F*(!F||c(function(){var e=B();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(b(t)||void 0!==e)&&!G(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!G(t))return t}),n[1]=t,j.apply(N,n)}}),B[V][T]||r(10)(B[V],T,B[V].valueOf),f(B,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){e.exports=!r(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(4),i=r(9),a=r(10),o=r(18),u=r(20),s="prototype",c=function(e,t,r){var l,f,h,m,d=e&c.F,p=e&c.G,v=e&c.S,g=e&c.P,y=e&c.B,b=p?n:v?n[t]||(n[t]={}):(n[t]||{})[s],w=p?i:i[t]||(i[t]={}),k=w[s]||(w[s]={});p&&(r=t);for(l in r)f=!d&&b&&void 0!==b[l],h=(f?b:r)[l],m=y&&f?u(h,n):g&&"function"==typeof h?u(Function.call,h):h,b&&o(b,l,h,e&c.U),w[l]!=h&&a(w,l,m),g&&k[l]!=h&&(k[l]=h)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var r=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(11),i=r(17);e.exports=r(6)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(12),i=r(14),a=r(16),o=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(13);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(6)&&!r(7)(function(){return 7!=Object.defineProperty(r(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(13),i=r(4).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(4),i=r(10),a=r(5),o=r(19)("src"),u="toString",s=Function[u],c=(""+s).split(u);r(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,u){var s="function"==typeof r;s&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(s&&(a(r,o)||i(r,o,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:u?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,u,function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(21);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(19)("meta"),i=r(13),a=r(5),o=r(11).f,u=0,s=Object.isExtensible||function(){return!0},c=!r(7)(function(){return s(Object.preventExtensions({}))}),l=function(e){o(e,n,{value:{i:"O"+ ++u,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!s(e))return"F";if(!t)return"E";l(e)}return e[n].i},h=function(e,t){if(!a(e,n)){if(!s(e))return!0;if(!t)return!1;l(e)}return e[n].w},m=function(e){return c&&d.NEED&&s(e)&&!a(e,n)&&l(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:h,onFreeze:m}},function(e,t,r){var n=r(4),i="__core-js_shared__",a=n[i]||(n[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,r){var n=r(11).f,i=r(5),a=r(25)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(23)("wks"),i=r(19),a=r(4).Symbol,o="function"==typeof a,u=e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))};u.store=n},function(e,t,r){t.f=r(25)},function(e,t,r){var n=r(4),i=r(9),a=r(28),o=r(26),u=r(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:o.f(e)})}},function(e,t){e.exports=!1},function(e,t,r){var n=r(30),i=r(42),a=r(43);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,u=r(e),s=a.f,c=0;u.length>c;)s.call(e,o=u[c++])&&t.push(o);return t}},function(e,t,r){var n=r(31),i=r(41);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(5),i=r(32),a=r(36)(!1),o=r(40)("IE_PROTO");e.exports=function(e,t){var r,u=i(e),s=0,c=[];for(r in u)r!=o&&n(u,r)&&c.push(r);for(;t.length>s;)n(u,r=t[s++])&&(~a(c,r)||c.push(r));return c}},function(e,t,r){var n=r(33),i=r(35);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(32),i=r(37),a=r(39);e.exports=function(e){return function(t,r,o){var u,s=n(t),c=i(s.length),l=a(o,c);if(e&&r!=r){for(;c>l;)if(u=s[l++],u!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(38),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(38),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(23)("keys"),i=r(19);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(34);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(12),i=r(46),a=r(41),o=r(40)("IE_PROTO"),u=function(){},s="prototype",c=function(){var e,t=r(15)("iframe"),n=a.length,i="<",o=">";for(t.style.display="none",r(47).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+o+"document.F=Object"+i+"/script"+o),e.close(),c=e.F;n--;)delete c[s][a[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(u[s]=n(e),r=new u,u[s]=null,r[o]=e):r=c(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(11),i=r(12),a=r(30);e.exports=r(6)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),u=o.length,s=0;u>s;)n.f(e,r=o[s++],t[r]);return e}},function(e,t,r){var n=r(4).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(32),i=r(49).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?u(e):i(n(e))}},function(e,t,r){var n=r(31),i=r(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(43),i=r(17),a=r(32),o=r(16),u=r(5),s=r(14),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=a(e),t=o(t,!0),s)try{return c(e,t)}catch(e){}if(u(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(8);n(n.S,"Object",{create:r(45)})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(6),"Object",{defineProperty:r(11).f})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(6),"Object",{defineProperties:r(46)})},function(e,t,r){var n=r(32),i=r(50).f;r(55)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){var n=r(8),i=r(9),a=r(7);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){var n=r(57),i=r(58);r(55)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(35);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(5),i=r(57),a=r(40)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(57),i=r(30);r(55)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){r(55)("getOwnPropertyNames",function(){return r(48).f})},function(e,t,r){var n=r(13),i=r(22).onFreeze;r(55)("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(13),i=r(22).onFreeze;r(55)("seal",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(13),i=r(22).onFreeze;r(55)("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(13);r(55)("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(13);r(55)("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(13);r(55)("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},function(e,t,r){var n=r(8);n(n.S+n.F,"Object",{assign:r(68)})},function(e,t,r){"use strict";var n=r(30),i=r(42),a=r(43),o=r(57),u=r(33),s=Object.assign;e.exports=!s||r(7)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=s({},e)[r]||Object.keys(s({},t)).join("")!=n})?function(e,t){for(var r=o(e),s=arguments.length,c=1,l=i.f,f=a.f;s>c;)for(var h,m=u(arguments[c++]),d=l?n(m).concat(l(m)):n(m),p=d.length,v=0;p>v;)f.call(m,h=d[v++])&&(r[h]=m[h]);return r}:s},function(e,t,r){var n=r(8);n(n.S,"Object",{is:r(70)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,r){var n=r(8);n(n.S,"Object",{setPrototypeOf:r(72).set})},function(e,t,r){var n=r(13),i=r(12),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(20)(Function.call,r(50).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){"use strict";var n=r(74),i={};i[r(25)("toStringTag")]="z",i+""!="[object z]"&&r(18)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){var n=r(34),i=r(25)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(u=n(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,r){var n=r(8);n(n.P,"Function",{bind:r(76)})},function(e,t,r){"use strict";var n=r(21),i=r(13),a=r(77),o=[].slice,u={},s=function(e,t,r){if(!(t in u)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";u[t]=Function("F,a","return new F("+n.join(",")+")")}return u[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),u=function(){var n=r.concat(o.call(arguments));return this instanceof u?s(t,n.length,n):a(t,n,e)};return i(t.prototype)&&(u.prototype=t.prototype),u}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(11).f,i=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in i||r(6)&&n(i,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(13),i=r(58),a=r(25)("hasInstance"),o=Function.prototype;a in o||r(11).f(o,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(8),i=r(81);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(e,t,r){var n=r(4).parseInt,i=r(82).trim,a=r(83),o=/^[-+]?0[xX]/;e.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},function(e,t,r){var n=r(8),i=r(35),a=r(7),o=r(83),u="["+o+"]",s="​",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(e,t,r){var i={},u=a(function(){return!!o[e]()||s[e]()!=s}),c=i[e]=u?t(h):o[e];r&&(i[r]=c),n(n.P+n.F*u,"String",i)},h=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(8),i=r(85);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(e,t,r){var n=r(4).parseFloat,i=r(82).trim;e.exports=1/n(r(83)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){"use strict";var n=r(4),i=r(5),a=r(34),o=r(87),u=r(16),s=r(7),c=r(49).f,l=r(50).f,f=r(11).f,h=r(82).trim,m="Number",d=n[m],p=d,v=d.prototype,g=a(r(45)(v))==m,y="trim"in String.prototype,b=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():h(t,3);var r,n,i,a=t.charCodeAt(0);if(43===a||45===a){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,s=t.slice(2),c=0,l=s.length;c<l;c++)if(o=s.charCodeAt(c),o<48||o>i)return NaN;return parseInt(s,n)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof d&&(g?s(function(){v.valueOf.call(r)}):a(r)!=m)?o(new p(b(t)),r,d):b(t)};for(var w,k=r(6)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;k.length>S;S++)i(p,w=k[S])&&!i(d,w)&&f(d,w,l(p,w));d.prototype=v,v.constructor=d,r(18)(n,m,d)}},function(e,t,r){var n=r(13),i=r(72).set;e.exports=function(e,t,r){var a,o=t.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(e,a),e}},function(e,t,r){"use strict";var n=r(8),i=r(38),a=r(89),o=r(90),u=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",h=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*c[r],c[r]=n%1e7,n=s(n/1e7)},m=function(e){for(var t=6,r=0;--t>=0;)r+=c[t],c[t]=s(r/e),r=r%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var r=String(c[e]);t=""===t?r:t+o.call(f,7-r.length)+r}return t},p=function(e,t,r){return 0===t?r:t%2===1?p(e,t-1,r*e):p(e*e,t/2,r)},v=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};n(n.P+n.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(7)(function(){u.call({})})),"Number",{toFixed:function(e){var t,r,n,u,s=a(this,l),c=i(e),g="",y=f;if(c<0||c>20)throw RangeError(l);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(g="-",s=-s),s>1e-21)if(t=v(s*p(2,69,1))-69,r=t<0?s*p(2,-t,1):s/p(2,t,1),r*=4503599627370496,t=52-t,t>0){for(h(0,r),n=c;n>=7;)h(1e7,0),n-=7;for(h(p(10,n,1),0),n=t-1;n>=23;)m(1<<23),n-=23;m(1<<n),h(1,1),m(2),y=d()}else h(0,r),h(1<<-t,0),y=d()+o.call(f,c);return c>0?(u=y.length,y=g+(u<=c?"0."+o.call(f,c-u)+y:y.slice(0,u-c)+"."+y.slice(u-c))):y=g+y,y}})},function(e,t,r){var n=r(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){"use strict";var n=r(38),i=r(35);e.exports=function(e){var t=String(i(this)),r="",a=n(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},function(e,t,r){"use strict";var n=r(8),i=r(7),a=r(89),o=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==o.call(1,void 0)})||!i(function(){o.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?o.call(t):o.call(t,e)}})},function(e,t,r){var n=r(8);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(8),i=r(4).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(8);n(n.S,"Number",{isInteger:r(95)})},function(e,t,r){var n=r(13),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){var n=r(8);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(8),i=r(95),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},function(e,t,r){var n=r(8);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(8);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(8),i=r(85);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,r){var n=r(8),i=r(81);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,r){var n=r(8),i=r(103),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=r(8),a=Math.asinh;i(i.S+i.F*!(a&&1/a(0)>0),"Math",{asinh:n})},function(e,t,r){var n=r(8),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(8),i=r(107);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(8);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(8),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(8),i=r(111);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(8);n(n.S,"Math",{fround:r(113)})},function(e,t,r){var n=r(107),i=Math.pow,a=i(2,-52),o=i(2,-23),u=i(2,127)*(2-o),s=i(2,-126),c=function(e){return e+1/a-1/a};e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),l=n(e);return i<s?l*c(i/s/o)*s*o:(t=(1+o/a)*i,r=t-(t-i),r>u||r!=r?l*(1/0):l*r)}},function(e,t,r){var n=r(8),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,a=0,o=0,u=arguments.length,s=0;o<u;)r=i(arguments[o++]),s<r?(n=s/r,a=a*n*n+1,s=r):r>0?(n=r/s,a+=n*n):a+=r;return s===1/0?1/0:s*Math.sqrt(a)}})},function(e,t,r){var n=r(8),i=Math.imul;n(n.S+n.F*r(7)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var r=65535,n=+e,i=+t,a=r&n,o=r&i;return 0|a*o+((r&n>>>16)*o+a*(r&i>>>16)<<16>>>0)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(8);n(n.S,"Math",{log1p:r(103)})},function(e,t,r){var n=r(8);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(8);n(n.S,"Math",{sign:r(107)})},function(e,t,r){var n=r(8),i=r(111),a=Math.exp;n(n.S+n.F*r(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(8),i=r(111),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},function(e,t,r){var n=r(8);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(8),i=r(39),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(((t-=65536)>>10)+55296,t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(8),i=r(32),a=r(37);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=a(t.length),n=arguments.length,o=[],u=0;r>u;)o.push(String(t[u++])),u<n&&o.push(String(arguments[u]));return o.join("")}})},function(e,t,r){"use strict";r(82)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){"use strict";var n=r(127)(!0);r(128)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(38),i=r(35);e.exports=function(e){return function(t,r){var a,o,u=String(i(t)),s=n(r),c=u.length;return s<0||s>=c?e?"":void 0:(a=u.charCodeAt(s),a<55296||a>56319||s+1===c||(o=u.charCodeAt(s+1))<56320||o>57343?e?u.charAt(s):a:e?u.slice(s,s+2):(a-55296<<10)+(o-56320)+65536)}}},function(e,t,r){"use strict";var n=r(28),i=r(8),a=r(18),o=r(10),u=r(5),s=r(129),c=r(130),l=r(24),f=r(58),h=r(25)("iterator"),m=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",v="values",g=function(){return this};e.exports=function(e,t,r,y,b,w,k){c(r,t,y);var S,_,C,P=function(e){if(!m&&e in I)return I[e];switch(e){case p:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},A=t+" Iterator",O=b==v,E=!1,I=e.prototype,x=I[h]||I[d]||b&&I[b],B=!m&&x||P(b),N=b?O?P("entries"):B:void 0,j="Array"==t?I.entries||x:x;if(j&&(C=f(j.call(new e)),C!==Object.prototype&&C.next&&(l(C,A,!0),n||u(C,h)||o(C,h,g))),O&&x&&x.name!==v&&(E=!0,B=function(){return x.call(this)}),n&&!k||!m&&!E&&I[h]||o(I,h,B),s[t]=B,s[A]=g,b)if(S={values:O?B:P(v),keys:w?B:P(p),entries:N},k)for(_ in S)_ in I||a(I,_,S[_]);else i(i.P+i.F*(m||E),t,S);return S}},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(45),i=r(17),a=r(24),o={};r(10)(o,r(25)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){"use strict";var n=r(8),i=r(127)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(8),i=r(37),a=r(133),o="endsWith",u=""[o];n(n.P+n.F*r(135)(o),"String",{endsWith:function(e){var t=a(this,e,o),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),s=void 0===r?n:Math.min(i(r),n),c=String(e);return u?u.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,r){var n=r(134),i=r(35);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n=r(13),i=r(34),a=r(25)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){"use strict";var n=r(8),i=r(133),a="includes";n(n.P+n.F*r(135)(a),"String",{includes:function(e){return!!~i(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(8);n(n.P,"String",{repeat:r(90)})},function(e,t,r){"use strict";var n=r(8),i=r(37),a=r(133),o="startsWith",u=""[o];n(n.P+n.F*r(135)(o),"String",{startsWith:function(e){var t=a(this,e,o),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return u?u.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";r(140)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,r){var n=r(8),i=r(7),a=r(35),o=/"/g,u=function(e,t,r,n){var i=String(a(e)),u="<"+t;return""!==r&&(u+=" "+r+'="'+String(n).replace(o,"&quot;")+'"'),u+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(u),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},function(e,t,r){"use strict";r(140)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,r){"use strict";r(140)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,r){"use strict";r(140)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,r){"use strict";r(140)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,r){"use strict";r(140)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,r){"use strict";r(140)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,r){"use strict";r(140)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,r){"use strict";r(140)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,r){"use strict";r(140)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,r){"use strict";r(140)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,r){"use strict";r(140)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,r){"use strict";r(140)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,r){var n=r(8);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){"use strict";var n=r(8),i=r(57),a=r(16);n(n.P+n.F*r(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),r=a(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(8),i=r(156);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,r){"use strict";var n=r(7),i=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(e){return e>9?e:"0"+e};e.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!n(function(){a.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";
return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+o(e.getUTCMonth()+1)+"-"+o(e.getUTCDate())+"T"+o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds())+"."+(r>99?r:"0"+o(r))+"Z"}:a},function(e,t,r){var n=Date.prototype,i="Invalid Date",a="toString",o=n[a],u=n.getTime;new Date(NaN)+""!=i&&r(18)(n,a,function(){var e=u.call(this);return e===e?o.call(this):i})},function(e,t,r){var n=r(25)("toPrimitive"),i=Date.prototype;n in i||r(10)(i,n,r(159))},function(e,t,r){"use strict";var n=r(12),i=r(16),a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),e!=a)}},function(e,t,r){var n=r(8);n(n.S,"Array",{isArray:r(44)})},function(e,t,r){"use strict";var n=r(20),i=r(8),a=r(57),o=r(162),u=r(163),s=r(37),c=r(164),l=r(165);i(i.S+i.F*!r(166)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,h=a(e),m="function"==typeof this?this:Array,d=arguments.length,p=d>1?arguments[1]:void 0,v=void 0!==p,g=0,y=l(h);if(v&&(p=n(p,d>2?arguments[2]:void 0,2)),void 0==y||m==Array&&u(y))for(t=s(h.length),r=new m(t);t>g;g++)c(r,g,v?p(h[g],g):h[g]);else for(f=y.call(h),r=new m;!(i=f.next()).done;g++)c(r,g,v?o(f,p,[i.value,g],!0):i.value);return r.length=g,r}})},function(e,t,r){var n=r(12);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(129),i=r(25)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){"use strict";var n=r(11),i=r(17);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(74),i=r(25)("iterator"),a=r(129);e.exports=r(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(25)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(8),i=r(164);n(n.S+n.F*r(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){"use strict";var n=r(8),i=r(32),a=[].join;n(n.P+n.F*(r(33)!=Object||!r(169)(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){"use strict";var n=r(8),i=r(47),a=r(34),o=r(39),u=r(37),s=[].slice;n(n.P+n.F*r(7)(function(){i&&s.call(i)}),"Array",{slice:function(e,t){var r=u(this.length),n=a(this);if(t=void 0===t?r:t,"Array"==n)return s.call(this,e,t);for(var i=o(e,r),c=o(t,r),l=u(c-i),f=new Array(l),h=0;h<l;h++)f[h]="String"==n?this.charAt(i+h):this[i+h];return f}})},function(e,t,r){"use strict";var n=r(8),i=r(21),a=r(57),o=r(7),u=[].sort,s=[1,2,3];n(n.P+n.F*(o(function(){s.sort(void 0)})||!o(function(){s.sort(null)})||!r(169)(u)),"Array",{sort:function(e){return void 0===e?u.call(a(this)):u.call(a(this),i(e))}})},function(e,t,r){"use strict";var n=r(8),i=r(173)(0),a=r(169)([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(20),i=r(33),a=r(57),o=r(37),u=r(174);e.exports=function(e,t){var r=1==e,s=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,m=t||u;return function(t,u,d){for(var p,v,g=a(t),y=i(g),b=n(u,d,3),w=o(y.length),k=0,S=r?m(t,w):s?m(t,0):void 0;w>k;k++)if((h||k in y)&&(p=y[k],v=b(p,k,g),e))if(r)S[k]=v;else if(v)switch(e){case 3:return!0;case 5:return p;case 6:return k;case 2:S.push(p)}else if(l)return!1;return f?-1:c||l?l:S}}},function(e,t,r){var n=r(175);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(13),i=r(44),a=r(25)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,r){"use strict";var n=r(8),i=r(173)(1);n(n.P+n.F*!r(169)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(173)(2);n(n.P+n.F*!r(169)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(173)(3);n(n.P+n.F*!r(169)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(173)(4);n(n.P+n.F*!r(169)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(181);n(n.P+n.F*!r(169)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){var n=r(21),i=r(57),a=r(33),o=r(37);e.exports=function(e,t,r,u,s){n(t);var c=i(e),l=a(c),f=o(c.length),h=s?f-1:0,m=s?-1:1;if(r<2)for(;;){if(h in l){u=l[h],h+=m;break}if(h+=m,s?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:f>h;h+=m)h in l&&(u=t(u,l[h],h,c));return u}},function(e,t,r){"use strict";var n=r(8),i=r(181);n(n.P+n.F*!r(169)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){"use strict";var n=r(8),i=r(36)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!r(169)(a)),"Array",{indexOf:function(e){return o?a.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,r){"use strict";var n=r(8),i=r(32),a=r(38),o=r(37),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(s||!r(169)(u)),"Array",{lastIndexOf:function(e){if(s)return u.apply(this,arguments)||0;var t=i(this),r=o(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(8);n(n.P,"Array",{copyWithin:r(186)}),r(187)("copyWithin")},function(e,t,r){"use strict";var n=r(57),i=r(39),a=r(37);e.exports=[].copyWithin||function(e,t){var r=n(this),o=a(r.length),u=i(e,o),s=i(t,o),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?o:i(c,o))-s,o-u),f=1;for(s<u&&u<s+l&&(f=-1,s+=l-1,u+=l-1);l-- >0;)s in r?r[u]=r[s]:delete r[u],u+=f,s+=f;return r}},function(e,t,r){var n=r(25)("unscopables"),i=Array.prototype;void 0==i[n]&&r(10)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t,r){var n=r(8);n(n.P,"Array",{fill:r(189)}),r(187)("fill")},function(e,t,r){"use strict";var n=r(57),i=r(39),a=r(37);e.exports=function(e){for(var t=n(this),r=a(t.length),o=arguments.length,u=i(o>1?arguments[1]:void 0,r),s=o>2?arguments[2]:void 0,c=void 0===s?r:i(s,r);c>u;)t[u++]=e;return t}},function(e,t,r){"use strict";var n=r(8),i=r(173)(5),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(187)(a)},function(e,t,r){"use strict";var n=r(8),i=r(173)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(187)(a)},function(e,t,r){r(193)("Array")},function(e,t,r){"use strict";var n=r(4),i=r(11),a=r(6),o=r(25)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(187),i=r(195),a=r(129),o=r(32);e.exports=r(128)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(4),i=r(87),a=r(11).f,o=r(49).f,u=r(134),s=r(197),c=n.RegExp,l=c,f=c.prototype,h=/a/g,m=/a/g,d=new c(h)!==h;if(r(6)&&(!d||r(7)(function(){return m[r(25)("match")]=!1,c(h)!=h||c(m)==m||"/a/i"!=c(h,"i")}))){c=function(e,t){var r=this instanceof c,n=u(e),a=void 0===t;return!r&&n&&e.constructor===c&&a?e:i(d?new l(n&&!a?e.source:e,t):l((n=e instanceof c)?e.source:e,n&&a?s.call(e):t),r?this:f,c)};for(var p=(function(e){e in c||a(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),v=o(l),g=0;v.length>g;)p(v[g++]);f.constructor=c,c.prototype=f,r(18)(n,"RegExp",c)}r(193)("RegExp")},function(e,t,r){"use strict";var n=r(12);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";r(199);var n=r(12),i=r(197),a=r(6),o="toString",u=/./[o],s=function(e){r(18)(RegExp.prototype,o,e,!0)};r(7)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?i.call(e):void 0)}):u.name!=o&&s(function(){return u.call(this)})},function(e,t,r){r(6)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(197)})},function(e,t,r){r(201)("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){"use strict";var n=r(10),i=r(18),a=r(7),o=r(35),u=r(25);e.exports=function(e,t,r){var s=u(e),c=r(o,s,""[e]),l=c[0],f=c[1];a(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,l),n(RegExp.prototype,s,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,r){r(201)("replace",2,function(e,t,r){return[function(n,i){"use strict";var a=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(e,t,r){r(201)("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(201)("split",2,function(e,t,n){"use strict";var i=r(134),a=n,o=[].push,u="split",s="length",c="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[s]||2!="ab"[u](/(?:ab)*/)[s]||4!="."[u](/(.?)(.?)/)[s]||"."[u](/()()/)[s]>1||""[u](/.?/)[s]){var l=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(r,e,t);var n,u,f,h,m,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,p+"g");for(l||(n=new RegExp("^"+y.source+"$(?!\\s)",p));(u=y.exec(r))&&(f=u.index+u[0][s],!(f>v&&(d.push(r.slice(v,u.index)),!l&&u[s]>1&&u[0].replace(n,function(){for(m=1;m<arguments[s]-2;m++)void 0===arguments[m]&&(u[m]=void 0)}),u[s]>1&&u.index<r[s]&&o.apply(d,u.slice(1)),h=u[0][s],v=f,d[s]>=g)));)y[c]===u.index&&y[c]++;return v===r[s]?!h&&y.test("")||d.push(""):d.push(r.slice(v)),d[s]>g?d.slice(0,g):d}}else"0"[u](void 0,0)[s]&&(n=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(r,i){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(e,t,r){"use strict";var n,i,a,o,u=r(28),s=r(4),c=r(20),l=r(74),f=r(8),h=r(13),m=r(21),d=r(206),p=r(207),v=r(208),g=r(209).set,y=r(210)(),b=r(211),w=r(212),k=r(213),S="Promise",_=s.TypeError,C=s.process,P=s[S],A="process"==l(C),O=function(){},E=i=b.f,I=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[r(25)("species")]=function(e){e(O,O)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),x=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},B=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o=i?t.ok:t.fail,u=t.resolve,s=t.reject,c=t.domain;try{o?(i||(2==e._h&&V(e),e._h=1),o===!0?r=n:(c&&c.enter(),r=o(n),c&&c.exit()),r===t.promise?s(_("Promise-chain cycle")):(a=x(r))?a.call(r,u,s):u(r)):s(n)}catch(e){s(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){g.call(s,function(){var t,r,n,i=e._v,a=j(e);if(a&&(t=w(function(){A?C.emit("unhandledRejection",i,e):(r=s.onunhandledrejection)?r({promise:e,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=A||j(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},V=function(e){g.call(s,function(){var t;A?C.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),B(t,!0))},T=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw _("Promise can't be resolved itself");(t=x(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,c(T,n,1),c(R,n,1))}catch(e){R.call(n,e)}}):(r._v=e,r._s=1,B(r,!1))}catch(e){R.call({_w:r,_d:!1},e)}}};I||(P=function(e){d(this,P,S,"_h"),m(e),n.call(this);try{e(c(T,this,1),c(R,this,1))}catch(e){R.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(214)(P.prototype,{then:function(e,t){var r=E(v(this,P));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=A?C.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&B(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(T,e,1),this.reject=c(R,e,1)},b.f=E=function(e){return e===P||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:P}),r(24)(P,S),r(193)(S),o=r(9)[S],f(f.S+f.F*!I,S,{reject:function(e){var t=E(this),r=t.reject;return r(e),t.promise}}),f(f.S+f.F*(u||!I),S,{resolve:function(e){return k(u&&this===o?P:this,e)}}),f(f.S+f.F*!(I&&r(166)(function(e){P.all(e).catch(O)})),S,{all:function(e){var t=this,r=E(t),n=r.resolve,i=r.reject,a=w(function(){var r=[],a=0,o=1;p(e,!1,function(e){var u=a++,s=!1;r.push(void 0),o++,t.resolve(e).then(function(e){s||(s=!0,r[u]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=E(t),n=r.reject,i=w(function(){p(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(20),i=r(162),a=r(163),o=r(12),u=r(37),s=r(165),c={},l={},t=e.exports=function(e,t,r,f,h){var m,d,p,v,g=h?function(){return e}:s(e),y=n(r,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(m=u(e.length);m>b;b++)if(v=t?y(o(d=e[b])[0],d[1]):y(e[b]),v===c||v===l)return v}else for(p=g.call(e);!(d=p.next()).done;)if(v=i(p,y,d.value,t),v===c||v===l)return v};t.BREAK=c,t.RETURN=l},function(e,t,r){var n=r(12),i=r(21),a=r(25)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){var n,i,a,o=r(20),u=r(77),s=r(47),c=r(15),l=r(4),f=l.process,h=l.setImmediate,m=l.clearImmediate,d=l.MessageChannel,p=l.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},w=function(e){b.call(e.data)};h&&m||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){u("function"==typeof e?e:Function(e),t)},n(v),v},m=function(e){delete g[e]},"process"==r(34)(f)?n=function(e){f.nextTick(o(b,e,1))}:p&&p.now?n=function(e){p.now(o(b,e,1))}:d?(i=new d,a=i.port2,i.port1.onmessage=w,n=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",w,!1)):n=y in c("script")?function(e){s.appendChild(c("script"))[y]=function(){s.removeChild(this),b.call(e)}}:function(e){setTimeout(o(b,e,1),0)}),e.exports={set:h,clear:m}},function(e,t,r){var n=r(4),i=r(209).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,u=n.Promise,s="process"==r(34)(o);e.exports=function(){var e,t,r,c=function(){var n,i;for(s&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(s)r=function(){o.nextTick(c)};else if(!a||n.navigator&&n.navigator.standalone)if(u&&u.resolve){var l=u.resolve();r=function(){l.then(c)}}else r=function(){i.call(n,c)};else{var f=!0,h=document.createTextNode("");new a(c).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(21);e.exports.f=function(e){return new n(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(12),i=r(13),a=r(211);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e),o=r.resolve;return o(t),r.promise}},function(e,t,r){var n=r(18);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){"use strict";var n=r(216),i=r(217),a="Map";e.exports=r(218)(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,a),e);return t&&t.v},set:function(e,t){return n.def(i(this,a),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(11).f,i=r(45),a=r(214),o=r(20),u=r(206),s=r(207),c=r(128),l=r(195),f=r(193),h=r(6),m=r(22).fastKey,d=r(217),p=h?"_s":"size",v=function(e,t){var r,n=m(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){u(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=n&&s(n,r,e[c],e)});return a(l.prototype,{clear:function(){for(var e=d(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var r=d(this,t),n=v(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[p]--}return!!n},forEach:function(e){d(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(d(this,t),e)}}),h&&n(l.prototype,"size",{get:function(){return d(this,t)[p]}}),l},def:function(e,t,r){var n,i,a=v(e,t);return a?a.v=r:(e._l=a={i:i=m(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[p]++,"F"!==i&&(e._i[i]=a)),e},getEntry:v,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=d(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var n=r(13);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";var n=r(4),i=r(8),a=r(18),o=r(214),u=r(22),s=r(207),c=r(206),l=r(13),f=r(7),h=r(166),m=r(24),d=r(87);e.exports=function(e,t,r,p,v,g){var y=n[e],b=y,w=v?"set":"add",k=b&&b.prototype,S={},_=function(e){var t=k[e];a(k,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(g||k.forEach&&!f(function(){(new b).entries().next()}))){var C=new b,P=C[w](g?{}:-0,1)!=C,A=f(function(){C.has(1)}),O=h(function(e){new b(e)}),E=!g&&f(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});O||(b=t(function(t,r){c(t,b,e);var n=d(new y,t,b);return void 0!=r&&s(r,v,n[w],n),n}),b.prototype=k,k.constructor=b),(A||E)&&(_("delete"),_("has"),v&&_("get")),(E||P)&&_(w),g&&k.clear&&delete k.clear}else b=p.getConstructor(t,e,v,w),o(b.prototype,r),u.NEED=!0;return m(b,e),S[e]=b,i(i.G+i.W+i.F*(b!=y),S),g||p.setStrong(b,e,v),b}},function(e,t,r){"use strict";var n=r(216),i=r(217),a="Set";e.exports=r(218)(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,a),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n,i=r(173)(0),a=r(18),o=r(22),u=r(68),s=r(221),c=r(13),l=r(7),f=r(217),h="WeakMap",m=o.getWeak,d=Object.isExtensible,p=s.ufstore,v={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=m(e);return t===!0?p(f(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(f(this,h),e,t)}},b=e.exports=r(218)(h,g,y,s,!0,!0);l(function(){return 7!=(new b).set((Object.freeze||Object)(v),7).get(v)})&&(n=s.getConstructor(g,h),u(n.prototype,y),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=b.prototype,r=t[e];a(t,e,function(t,i){if(c(t)&&!d(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){"use strict";var n=r(214),i=r(22).getWeak,a=r(12),o=r(13),u=r(206),s=r(207),c=r(173),l=r(5),f=r(217),h=c(5),m=c(6),d=0,p=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return h(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=m(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var c=e(function(e,n){u(e,c,t,"_i"),e._t=t,e._i=d++,e._l=void 0,void 0!=n&&s(n,r,e[a],e)});return n(c.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return r===!0?p(f(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return r===!0?p(f(this,t)).has(e):r&&l(r,this._i)}}),c},def:function(e,t,r){var n=i(a(t),!0);return n===!0?p(e).set(t,r):n[e._i]=r,e},ufstore:p}},function(e,t,r){"use strict";var n=r(221),i=r(217),a="WeakSet";r(218)(a,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,a),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(8),i=r(224),a=r(225),o=r(12),u=r(39),s=r(37),c=r(13),l=r(4).ArrayBuffer,f=r(208),h=a.ArrayBuffer,m=a.DataView,d=i.ABV&&l.isView,p=h.prototype.slice,v=i.VIEW,g="ArrayBuffer";n(n.G+n.W+n.F*(l!==h),{ArrayBuffer:h}),n(n.S+n.F*!i.CONSTR,g,{isView:function(e){return d&&d(e)||c(e)&&v in e}}),n(n.P+n.U+n.F*r(7)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(o(this),e);for(var r=o(this).byteLength,n=u(e,r),i=u(void 0===t?r:t,r),a=new(f(this,h))(s(i-n)),c=new m(this),l=new m(a),d=0;n<i;)l.setUint8(d++,c.getUint8(n++));return a}}),r(193)(g)},function(e,t,r){for(var n,i=r(4),a=r(10),o=r(19),u=o("typed_array"),s=o("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h=9,m="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<h;)(n=i[m[f++]])?(a(n.prototype,u,!0),a(n.prototype,s,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:u,VIEW:s}},function(e,t,r){"use strict";function n(e,t,r){var n,i,a,o=new Array(r),u=8*r-t-1,s=(1<<u)-1,c=s>>1,l=23===t?L(2,-24)-L(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for(e=H(e),e!=e||e===U?(i=e!=e?1:0,n=s):(n=F(K(e)/q),e*(a=L(2,-n))<1&&(n--,a*=2),e+=n+c>=1?l/a:l*L(2,1-c),e*a>=2&&(n++,a/=2),n+c>=s?(i=0,n=s):n+c>=1?(i=(e*a-1)*L(2,t),n+=c):(i=e*L(2,c-1)*L(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,u+=t;u>0;o[f++]=255&n,n/=256,u-=8);return o[--f]|=128*h,o}function i(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,u=i-7,s=r-1,c=e[s--],l=127&c;for(c>>=7;u>0;l=256*l+e[s],s--,u-=8);for(n=l&(1<<-u)-1,l>>=-u,u+=t;u>0;n=256*n+e[s],s--,u-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:c?-U:U;n+=L(2,t),l-=o}return(c?-1:1)*n*L(2,l-t)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function o(e){return[255&e]}function u(e){return[255&e,e>>8&255]}function s(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return n(e,52,8)}function l(e){return n(e,23,4)}function f(e,t,r){A(e[B],t,{get:function(){return this[r]}})}function h(e,t,r,n){var i=+r,a=C(i);if(a+t>e[$])throw D(j);var o=e[z]._b,u=a+e[Q],s=o.slice(u,u+t);return n?s:s.reverse()}function m(e,t,r,n,i,a){var o=+r,u=C(o);if(u+t>e[$])throw D(j);for(var s=e[z]._b,c=u+e[Q],l=n(+i),f=0;f<t;f++)s[c+f]=l[a?f:t-f-1]}var d=r(4),p=r(6),v=r(28),g=r(224),y=r(10),b=r(214),w=r(7),k=r(206),S=r(38),_=r(37),C=r(226),P=r(49).f,A=r(11).f,O=r(189),E=r(24),I="ArrayBuffer",x="DataView",B="prototype",N="Wrong length!",j="Wrong index!",V=d[I],R=d[x],T=d.Math,D=d.RangeError,U=d.Infinity,M=V,H=T.abs,L=T.pow,F=T.floor,K=T.log,q=T.LN2,J="buffer",W="byteLength",G="byteOffset",z=p?"_b":J,$=p?"_l":W,Q=p?"_o":G;if(g.ABV){if(!w(function(){V(1)})||!w(function(){new V(-1)})||w(function(){return new V,new V(1.5),new V(NaN),V.name!=I})){V=function(e){return k(this,V),new M(C(e))};for(var X,Y=V[B]=M[B],Z=P(M),ee=0;Z.length>ee;)(X=Z[ee++])in V||y(V,X,M[X]);v||(Y.constructor=V)}var te=new R(new V(2)),re=R[B].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||b(R[B],{setInt8:function(e,t){re.call(this,e,t<<24>>24)},setUint8:function(e,t){re.call(this,e,t<<24>>24)}},!0)}else V=function(e){k(this,V,I);var t=C(e);this._b=O.call(new Array(t),0),this[$]=t},R=function(e,t,r){k(this,R,x),k(e,V,x);var n=e[$],i=S(t);if(i<0||i>n)throw D("Wrong offset!");if(r=void 0===r?n-i:_(r),i+r>n)throw D(N);this[z]=e,this[Q]=i,this[$]=r},p&&(f(V,W,"_l"),f(R,J,"_b"),f(R,W,"_l"),f(R,G,"_o")),b(R[B],{getInt8:function(e){return h(this,1,e)[0]<<24>>24},getUint8:function(e){return h(this,1,e)[0]},getInt16:function(e){var t=h(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=h(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(h(this,4,e,arguments[1]))},getUint32:function(e){return a(h(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(h(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(h(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){m(this,1,e,o,t)},setUint8:function(e,t){m(this,1,e,o,t)},setInt16:function(e,t){m(this,2,e,u,t,arguments[2])},setUint16:function(e,t){m(this,2,e,u,t,arguments[2])},setInt32:function(e,t){m(this,4,e,s,t,arguments[2])},setUint32:function(e,t){m(this,4,e,s,t,arguments[2])},setFloat32:function(e,t){m(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){m(this,8,e,c,t,arguments[2])}});E(V,I),E(R,x),y(R[B],g.VIEW,!0),t[I]=V,t[x]=R},function(e,t,r){var n=r(38),i=r(37);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){var n=r(8);n(n.G+n.W+n.F*!r(224).ABV,{DataView:r(225).DataView})},function(e,t,r){r(229)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){"use strict";if(r(6)){var n=r(28),i=r(4),a=r(7),o=r(8),u=r(224),s=r(225),c=r(20),l=r(206),f=r(17),h=r(10),m=r(214),d=r(38),p=r(37),v=r(226),g=r(39),y=r(16),b=r(5),w=r(74),k=r(13),S=r(57),_=r(163),C=r(45),P=r(58),A=r(49).f,O=r(165),E=r(19),I=r(25),x=r(173),B=r(36),N=r(208),j=r(194),V=r(129),R=r(166),T=r(193),D=r(189),U=r(186),M=r(11),H=r(50),L=M.f,F=H.f,K=i.RangeError,q=i.TypeError,J=i.Uint8Array,W="ArrayBuffer",G="Shared"+W,z="BYTES_PER_ELEMENT",$="prototype",Q=Array[$],X=s.ArrayBuffer,Y=s.DataView,Z=x(0),ee=x(2),te=x(3),re=x(4),ne=x(5),ie=x(6),ae=B(!0),oe=B(!1),ue=j.values,se=j.keys,ce=j.entries,le=Q.lastIndexOf,fe=Q.reduce,he=Q.reduceRight,me=Q.join,de=Q.sort,pe=Q.slice,ve=Q.toString,ge=Q.toLocaleString,ye=I("iterator"),be=I("toStringTag"),we=E("typed_constructor"),ke=E("def_constructor"),Se=u.CONSTR,_e=u.TYPED,Ce=u.VIEW,Pe="Wrong length!",Ae=x(1,function(e,t){return Be(N(e,e[ke]),t)}),Oe=a(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Ee=!!J&&!!J[$].set&&a(function(){new J(1).set({})}),Ie=function(e,t){var r=d(e);if(r<0||r%t)throw K("Wrong offset!");return r},xe=function(e){if(k(e)&&_e in e)return e;throw q(e+" is not a typed array!")},Be=function(e,t){if(!(k(e)&&we in e))throw q("It is not a typed array constructor!");return new e(t)},Ne=function(e,t){return je(N(e,e[ke]),t)},je=function(e,t){for(var r=0,n=t.length,i=Be(e,n);n>r;)i[r]=t[r++];return i},Ve=function(e,t,r){L(e,t,{get:function(){return this._d[r]}})},Re=function(e){var t,r,n,i,a,o,u=S(e),s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,h=O(u);if(void 0!=h&&!_(h)){for(o=h.call(u),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);u=n}for(f&&s>2&&(l=c(l,arguments[2],2)),t=0,r=p(u.length),i=Be(this,r);r>t;t++)i[t]=f?l(u[t],t):u[t];return i},Te=function(){for(var e=0,t=arguments.length,r=Be(this,t);t>e;)r[e]=arguments[e++];return r},De=!!J&&a(function(){ge.call(new J(1))}),Ue=function(){return ge.apply(De?pe.call(xe(this)):xe(this),arguments)},Me={copyWithin:function(e,t){return U.call(xe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(xe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return D.apply(xe(this),arguments)},filter:function(e){return Ne(this,ee(xe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ne(xe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ie(xe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(xe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return oe(xe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(xe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return me.apply(xe(this),arguments)},lastIndexOf:function(e){return le.apply(xe(this),arguments)},map:function(e){return Ae(xe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(xe(this),arguments)},reduceRight:function(e){return he.apply(xe(this),arguments)},reverse:function(){for(var e,t=this,r=xe(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return te(xe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(xe(this),e)},subarray:function(e,t){var r=xe(this),n=r.length,i=g(e,n);return new(N(r,r[ke]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,p((void 0===t?n:g(t,n))-i))}},He=function(e,t){return Ne(this,pe.call(xe(this),e,t))},Le=function(e){xe(this);var t=Ie(arguments[1],1),r=this.length,n=S(e),i=p(n.length),a=0;if(i+t>r)throw K(Pe);for(;a<i;)this[t+a]=n[a++]},Fe={entries:function(){return ce.call(xe(this))},keys:function(){return se.call(xe(this))},values:function(){return ue.call(xe(this))}},Ke=function(e,t){return k(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},qe=function(e,t){return Ke(e,t=y(t,!0))?f(2,e[t]):F(e,t)},Je=function(e,t,r){return!(Ke(e,t=y(t,!0))&&k(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?L(e,t,r):(e[t]=r.value,e)};Se||(H.f=qe,M.f=Je),o(o.S+o.F*!Se,"Object",{getOwnPropertyDescriptor:qe,defineProperty:Je}),a(function(){ve.call({})})&&(ve=ge=function(){return me.call(this)});var We=m({},Me);m(We,Fe),h(We,ye,Fe.values),m(We,{slice:He,set:Le,constructor:function(){},toString:ve,toLocaleString:Ue}),Ve(We,"buffer","b"),Ve(We,"byteOffset","o"),Ve(We,"byteLength","l"),Ve(We,"length","e"),L(We,be,{get:function(){return this[_e]}}),e.exports=function(e,t,r,s){s=!!s;var c=e+(s?"Clamped":"")+"Array",f="get"+e,m="set"+e,d=i[c],g=d||{},y=d&&P(d),b=!d||!u.ABV,S={},_=d&&d[$],O=function(e,r){var n=e._d;return n.v[f](r*t+n.o,Oe)},E=function(e,r,n){var i=e._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[m](r*t+i.o,n,Oe)},I=function(e,t){L(e,t,{get:function(){return O(this,t)},set:function(e){return E(this,t,e)},enumerable:!0
})};b?(d=r(function(e,r,n,i){l(e,d,c,"_d");var a,o,u,s,f=0,m=0;if(k(r)){if(!(r instanceof X||(s=w(r))==W||s==G))return _e in r?je(d,r):Re.call(d,r);a=r,m=Ie(n,t);var g=r.byteLength;if(void 0===i){if(g%t)throw K(Pe);if(o=g-m,o<0)throw K(Pe)}else if(o=p(i)*t,o+m>g)throw K(Pe);u=o/t}else u=v(r),o=u*t,a=new X(o);for(h(e,"_d",{b:a,o:m,l:o,e:u,v:new Y(a)});f<u;)I(e,f++)}),_=d[$]=C(We),h(_,"constructor",d)):a(function(){d(1)})&&a(function(){new d(-1)})&&R(function(e){new d,new d(null),new d(1.5),new d(e)},!0)||(d=r(function(e,r,n,i){l(e,d,c);var a;return k(r)?r instanceof X||(a=w(r))==W||a==G?void 0!==i?new g(r,Ie(n,t),i):void 0!==n?new g(r,Ie(n,t)):new g(r):_e in r?je(d,r):Re.call(d,r):new g(v(r))}),Z(y!==Function.prototype?A(g).concat(A(y)):A(g),function(e){e in d||h(d,e,g[e])}),d[$]=_,n||(_.constructor=d));var x=_[ye],B=!!x&&("values"==x.name||void 0==x.name),N=Fe.values;h(d,we,!0),h(_,_e,c),h(_,Ce,!0),h(_,ke,d),(s?new d(1)[be]==c:be in _)||L(_,be,{get:function(){return c}}),S[c]=d,o(o.G+o.W+o.F*(d!=g),S),o(o.S,c,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*a(function(){g.of.call(d,1)}),c,{from:Re,of:Te}),z in _||h(_,z,t),o(o.P,c,Me),T(c),o(o.P+o.F*Ee,c,{set:Le}),o(o.P+o.F*!B,c,Fe),n||_.toString==ve||(_.toString=ve),o(o.P+o.F*a(function(){new d(1).slice()}),c,{slice:He}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!a(function(){_.toLocaleString.call([1,2])})),c,{toLocaleString:Ue}),V[c]=B?x:N,n||B||h(_,ye,N)}}else e.exports=function(){}},function(e,t,r){r(229)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(229)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){r(229)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(229)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(229)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(229)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(229)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(229)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){var n=r(8),i=r(21),a=r(12),o=(r(4).Reflect||{}).apply,u=Function.apply;n(n.S+n.F*!r(7)(function(){o(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),s=a(r);return o?o(n,t,s):u.call(n,t,s)}})},function(e,t,r){var n=r(8),i=r(45),a=r(21),o=r(12),u=r(13),s=r(7),c=r(76),l=(r(4).Reflect||{}).construct,f=s(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),h=!s(function(){l(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(e,t){a(e),o(t);var r=arguments.length<3?e:a(arguments[2]);if(h&&!f)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var s=r.prototype,m=i(u(s)?s:Object.prototype),d=Function.apply.call(e,m,t);return u(d)?d:m}})},function(e,t,r){var n=r(11),i=r(8),a=r(12),o=r(16);i(i.S+i.F*r(7)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){a(e),t=o(t,!0),a(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(8),i=r(50).f,a=r(12);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){"use strict";var n=r(8),i=r(12),a=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(130)(a,"Object",function(){var e,t=this,r=t._k;do if(t._i>=r.length)return{value:void 0,done:!0};while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,r){function n(e,t){var r,u,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(r=i.f(e,t))?o(r,"value")?r.value:void 0!==r.get?r.get.call(l):void 0:s(u=a(e))?n(u,t,l):void 0}var i=r(50),a=r(58),o=r(5),u=r(8),s=r(13),c=r(12);u(u.S,"Reflect",{get:n})},function(e,t,r){var n=r(50),i=r(8),a=r(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},function(e,t,r){var n=r(8),i=r(58),a=r(12);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},function(e,t,r){var n=r(8);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(8),i=r(12),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,r){var n=r(8);n(n.S,"Reflect",{ownKeys:r(249)})},function(e,t,r){var n=r(49),i=r(42),a=r(12),o=r(4).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(8),i=r(12),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,r){function n(e,t,r){var s,h,m=arguments.length<4?e:arguments[3],d=a.f(l(e),t);if(!d){if(f(h=o(e)))return n(h,t,r,m);d=c(0)}return u(d,"value")?!(d.writable===!1||!f(m))&&(s=a.f(m,t)||c(0),s.value=r,i.f(m,t,s),!0):void 0!==d.set&&(d.set.call(m,r),!0)}var i=r(11),a=r(50),o=r(58),u=r(5),s=r(8),c=r(17),l=r(12),f=r(13);s(s.S,"Reflect",{set:n})},function(e,t,r){var n=r(8),i=r(72);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){"use strict";var n=r(8),i=r(36)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(187)("includes")},function(e,t,r){"use strict";var n=r(8),i=r(255),a=r(57),o=r(37),u=r(21),s=r(174);n(n.P,"Array",{flatMap:function(e){var t,r,n=a(this);return u(e),t=o(n.length),r=s(n,0),i(r,n,n,t,0,1,e,arguments[1]),r}}),r(187)("flatMap")},function(e,t,r){"use strict";function n(e,t,r,c,l,f,h,m){for(var d,p,v=l,g=0,y=!!h&&u(h,m,3);g<c;){if(g in r){if(d=y?y(r[g],g,t):r[g],p=!1,a(d)&&(p=d[s],p=void 0!==p?!!p:i(d)),p&&f>0)v=n(e,t,d,o(d.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();e[v]=d}v++}g++}return v}var i=r(44),a=r(13),o=r(37),u=r(20),s=r(25)("isConcatSpreadable");e.exports=n},function(e,t,r){"use strict";var n=r(8),i=r(255),a=r(57),o=r(37),u=r(38),s=r(174);n(n.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),r=o(t.length),n=s(t,0);return i(n,t,t,r,0,void 0===e?1:u(e)),n}}),r(187)("flatten")},function(e,t,r){"use strict";var n=r(8),i=r(127)(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(8),i=r(259),a=r(260);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){var n=r(37),i=r(90),a=r(35);e.exports=function(e,t,r,o){var u=String(a(e)),s=u.length,c=void 0===r?" ":String(r),l=n(t);if(l<=s||""==c)return u;var f=l-s,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),o?h+u:u+h}},function(e,t,r){var n=r(4),i=n.navigator;e.exports=i&&i.userAgent||""},function(e,t,r){"use strict";var n=r(8),i=r(259),a=r(260);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";r(82)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,r){"use strict";r(82)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,r){"use strict";var n=r(8),i=r(35),a=r(37),o=r(134),u=r(197),s=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};r(130)(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!o(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in s?String(e.flags):u.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=a(e.lastIndex),new c(n,t)}})},function(e,t,r){r(27)("asyncIterator")},function(e,t,r){r(27)("observable")},function(e,t,r){var n=r(8),i=r(249),a=r(32),o=r(50),u=r(164);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),s=o.f,c=i(n),l={},f=0;c.length>f;)r=s(n,t=c[f++]),void 0!==r&&u(l,t,r);return l}})},function(e,t,r){var n=r(8),i=r(269)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){var n=r(30),i=r(32),a=r(43).f;e.exports=function(e){return function(t){for(var r,o=i(t),u=n(o),s=u.length,c=0,l=[];s>c;)a.call(o,r=u[c++])&&l.push(e?[r,o[r]]:o[r]);return l}}},function(e,t,r){var n=r(8),i=r(269)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(8),i=r(57),a=r(21),o=r(11);r(6)&&n(n.P+r(272),"Object",{__defineGetter__:function(e,t){o.f(i(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";e.exports=r(28)||!r(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(4)[e]})},function(e,t,r){"use strict";var n=r(8),i=r(57),a=r(21),o=r(11);r(6)&&n(n.P+r(272),"Object",{__defineSetter__:function(e,t){o.f(i(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,r){"use strict";var n=r(8),i=r(57),a=r(16),o=r(58),u=r(50).f;r(6)&&n(n.P+r(272),"Object",{__lookupGetter__:function(e){var t,r=i(this),n=a(e,!0);do if(t=u(r,n))return t.get;while(r=o(r))}})},function(e,t,r){"use strict";var n=r(8),i=r(57),a=r(16),o=r(58),u=r(50).f;r(6)&&n(n.P+r(272),"Object",{__lookupSetter__:function(e){var t,r=i(this),n=a(e,!0);do if(t=u(r,n))return t.set;while(r=o(r))}})},function(e,t,r){var n=r(8);n(n.P+n.R,"Map",{toJSON:r(277)("Map")})},function(e,t,r){var n=r(74),i=r(278);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){var n=r(207);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(8);n(n.P+n.R,"Set",{toJSON:r(277)("Set")})},function(e,t,r){r(281)("Map")},function(e,t,r){"use strict";var n=r(8);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(281)("Set")},function(e,t,r){r(281)("WeakMap")},function(e,t,r){r(281)("WeakSet")},function(e,t,r){r(286)("Map")},function(e,t,r){"use strict";var n=r(8),i=r(21),a=r(20),o=r(207);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,u,s=arguments[1];return i(this),t=void 0!==s,t&&i(s),void 0==e?new this:(r=[],t?(n=0,u=a(s,arguments[2],2),o(e,!1,function(e){r.push(u(e,n++))})):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){r(286)("Set")},function(e,t,r){r(286)("WeakMap")},function(e,t,r){r(286)("WeakSet")},function(e,t,r){var n=r(8);n(n.G,{global:r(4)})},function(e,t,r){var n=r(8);n(n.S,"System",{global:r(4)})},function(e,t,r){var n=r(8),i=r(34);n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}})},function(e,t,r){var n=r(8);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,r){var n=r(8),i=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*i}})},function(e,t,r){var n=r(8),i=r(297),a=r(113);n(n.S,"Math",{fscale:function(e,t,r,n,o){return a(i(e,t,r,n,o))}})},function(e,t){e.exports=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-(1/0)?e:(e-t)*(i-n)/(r-t)+n}},function(e,t,r){var n=r(8);n(n.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,a=t>>>0,o=r>>>0;return a+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,r){var n=r(8);n(n.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,a=t>>>0,o=r>>>0;return a-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,r){var n=r(8);n(n.S,"Math",{imulh:function(e,t){var r=65535,n=+e,i=+t,a=n&r,o=i&r,u=n>>16,s=i>>16,c=(u*o>>>0)+(a*o>>>16);return u*s+(c>>16)+((a*s>>>0)+(c&r)>>16)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,r){var n=r(8),i=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*i}})},function(e,t,r){var n=r(8);n(n.S,"Math",{scale:r(297)})},function(e,t,r){var n=r(8);n(n.S,"Math",{umulh:function(e,t){var r=65535,n=+e,i=+t,a=n&r,o=i&r,u=n>>>16,s=i>>>16,c=(u*o>>>0)+(a*o>>>16);return u*s+(c>>>16)+((a*s>>>0)+(c&r)>>>16)}})},function(e,t,r){var n=r(8);n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,r){"use strict";var n=r(8),i=r(9),a=r(4),o=r(208),u=r(213);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then(function(){return r})}:e,r?function(r){return u(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(8),i=r(211),a=r(212);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){var n=r(309),i=r(12),a=n.key,o=n.set;n.exp({defineMetadata:function(e,t,r,n){o(e,t,i(r),a(n))}})},function(e,t,r){var n=r(215),i=r(8),a=r(23)("metadata"),o=a.store||(a.store=new(r(220))),u=function(e,t,r){var i=o.get(e);if(!i){if(!r)return;o.set(e,i=new n)}var a=i.get(t);if(!a){if(!r)return;i.set(t,a=new n)}return a},s=function(e,t,r){var n=u(t,r,!1);return void 0!==n&&n.has(e)},c=function(e,t,r){var n=u(t,r,!1);return void 0===n?void 0:n.get(e)},l=function(e,t,r,n){u(r,n,!0).set(e,t)},f=function(e,t){var r=u(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},m=function(e){i(i.S,"Reflect",e)};e.exports={store:o,map:u,has:s,get:c,set:l,keys:f,key:h,exp:m}},function(e,t,r){var n=r(309),i=r(12),a=n.key,o=n.map,u=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:a(arguments[2]),n=o(i(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var s=u.get(t);return s.delete(r),!!s.size||u.delete(t)}})},function(e,t,r){var n=r(309),i=r(12),a=r(58),o=n.has,u=n.get,s=n.key,c=function(e,t,r){var n=o(e,t,r);if(n)return u(e,t,r);var i=a(t);return null!==i?c(e,i,r):void 0};n.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,r){var n=r(219),i=r(278),a=r(309),o=r(12),u=r(58),s=a.keys,c=a.key,l=function(e,t){var r=s(e,t),a=u(e);if(null===a)return r;var o=l(a,t);return o.length?r.length?i(new n(r.concat(o))):o:r};a.exp({getMetadataKeys:function(e){return l(o(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,r){var n=r(309),i=r(12),a=n.get,o=n.key;n.exp({getOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(309),i=r(12),a=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(e){return a(i(e),arguments.length<2?void 0:o(arguments[1]))}})},function(e,t,r){var n=r(309),i=r(12),a=r(58),o=n.has,u=n.key,s=function(e,t,r){var n=o(e,t,r);if(n)return!0;var i=a(t);return null!==i&&s(e,i,r)};n.exp({hasMetadata:function(e,t){return s(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,r){var n=r(309),i=r(12),a=n.has,o=n.key;n.exp({hasOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,r){var n=r(309),i=r(12),a=r(21),o=n.key,u=n.set;n.exp({metadata:function(e,t){return function(r,n){u(e,t,(void 0!==n?i:a)(r),o(n))}}})},function(e,t,r){var n=r(8),i=r(210)(),a=r(4).process,o="process"==r(34)(a);n(n.G,{asap:function(e){var t=o&&a.domain;i(t?t.bind(e):e)}})},function(e,t,r){"use strict";var n=r(8),i=r(4),a=r(9),o=r(210)(),u=r(25)("observable"),s=r(21),c=r(12),l=r(206),f=r(214),h=r(10),m=r(207),d=m.RETURN,p=function(e){return null==e?void 0:s(e)},v=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,v(e))},b=function(e,t){c(e),this._c=void 0,this._o=e,e=new w(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:s(r),this._c=r)}catch(t){return void e.error(t)}g(this)&&v(this)};b.prototype=f({},{unsubscribe:function(){y(this)}});var w=function(e){this._s=e};w.prototype=f({},{next:function(e){var t=this._s;if(!g(t)){var r=t._o;try{var n=p(r.next);if(n)return n.call(r,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var r=t._o;t._o=void 0;try{var n=p(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!g(t)){var r=t._o;t._o=void 0;try{var n=p(r.complete);e=n?n.call(r,e):void 0}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var k=function(e){l(this,k,"Observable","_f")._f=s(e)};f(k.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||i.Promise)(function(r,n){s(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),f(k,{from:function(e){var t="function"==typeof this?this:k,r=p(c(e)[u]);if(r){var n=c(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return o(function(){if(!r){try{if(m(e,!1,function(e){if(t.next(e),r)return d})===d)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:k)(function(e){var t=!1;return o(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),h(k.prototype,u,function(){return this}),n(n.G,{Observable:k}),r(193)("Observable")},function(e,t,r){var n=r(4),i=r(8),a=r(260),o=[].slice,u=/MSIE .\./.test(a),s=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*u,{setTimeout:s(n.setTimeout),setInterval:s(n.setInterval)})},function(e,t,r){var n=r(8),i=r(209);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){for(var n=r(194),i=r(30),a=r(18),o=r(4),u=r(10),s=r(129),c=r(25),l=c("iterator"),f=c("toStringTag"),h=s.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(m),p=0;p<d.length;p++){var v,g=d[p],y=m[g],b=o[g],w=b&&b.prototype;if(w&&(w[l]||u(w,l,h),w[f]||u(w,f,g),s[g]=h,y))for(v in n)w[v]||a(w,v,n[v],!0)}},function(e,t){(function(t){!function(t){"use strict";function r(e,t,r,n){var a=t&&t.prototype instanceof i?t:i,o=Object.create(a.prototype),u=new m(n||[]);return o._invoke=c(e,r,u),o}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function o(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function r(t,i,a,o){var u=n(e[t],e,i);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(c).then(function(e){s.value=e,a(s)},o)}o(u.arg)}function i(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return a=a?a.then(n,n):n()}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var a;this._invoke=i}function c(e,t,r){var i=P;return function(a,o){if(i===O)throw new Error("Generator is already running");if(i===E){if("throw"===a)throw o;return p()}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=l(u,r);if(s){if(s===I)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===P)throw i=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=O;var c=n(e,t,r);if("normal"===c.type){if(i=r.done?E:A,c.arg===I)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=E,r.method="throw",r.arg=c.arg)}}}function l(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,l(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,I;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,I):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function d(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=v,t.done=!0,t};return n.next=n}}return{next:p}}function p(){return{value:v,done:!0}}var v,g=Object.prototype,y=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",k=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",_="object"==typeof e,C=t.regeneratorRuntime;if(C)return void(_&&(e.exports=C));C=t.regeneratorRuntime=_?e.exports:{},C.wrap=r;var P="suspendedStart",A="suspendedYield",O="executing",E="completed",I={},x={};x[w]=function(){return this};var B=Object.getPrototypeOf,N=B&&B(B(d([])));N&&N!==g&&y.call(N,w)&&(x=N);var j=o.prototype=i.prototype=Object.create(x);a.prototype=j.constructor=o,o.constructor=a,o[S]=a.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(j),e},C.awrap=function(e){return{__await:e}},u(s.prototype),s.prototype[k]=function(){return this},C.AsyncIterator=s,C.async=function(e,t,n,i){var a=new s(r(e,t,n,i));return C.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},u(j),j[S]="Generator",j[w]=function(){return this},j.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},C.values=d,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=v),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),u=y.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=v),I}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},function(e,t,r){r(325),e.exports=r(9).RegExp.escape},function(e,t,r){var n=r(8),i=r(326)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=r(329),a=r(331);t.GCLConfig=a.GCLConfig;var o=r(332),u=r(374),s=r(408),c=r(409),l=r(410),f=r(537),h=r(335),m=r(401),d=r(336),p=function(){function e(t,r){var n=this;this.core=function(){return n.coreService},this.config=function(){return n.cfg},this.agent=function(){return n.agentClient},this.ds=function(){return n.dsClient},this.ocv=function(){return n.ocvClient},this.beid=function(e){return n.pluginFactory.createEidBE(e)},this.dnie=function(e){return n.pluginFactory.createDNIe(e)},this.luxeid=function(e,t){return n.pluginFactory.createEidLUX(e,t)},this.luxtrust=function(e,t){return n.pluginFactory.createLuxTrust(e)},this.emv=function(e){return n.pluginFactory.createEmv(e)},this.mobib=function(e){return n.pluginFactory.createMobib(e)},this.ocra=function(e){return n.pluginFactory.createOcra(e)},this.aventra=function(e){return n.pluginFactory.createAventraNO(e)},this.oberthur=function(e){return n.pluginFactory.createOberthurNO(e)},this.piv=function(e){return n.pluginFactory.createPIV(e)},this.pteid=function(e){return n.pluginFactory.createEidPT(e)},this.safenet=function(e,t){return n.pluginFactory.createSafeNet(t)},this.readerapi=function(e){return n.pluginFactory.createRemoteLoading(e)},this.belfius=function(e){return n.pluginFactory.createBelfius(e)};this.cfg=e.resolveConfig(t),this.connection=new u.LocalConnection(this.cfg),this.authConnection=new u.LocalAuthConnection(this.cfg),this.remoteConnection=new u.RemoteConnection(this.cfg),this.localTestConnection=new u.LocalTestConnection(this.cfg),this.pluginFactory=new l.PluginFactory(this.cfg.gclUrl,this.connection),this.coreService=new o.CoreService(this.cfg.gclUrl,this.authConnection),this.agentClient=new m.AgentClient(this.cfg.gclUrl,this.connection),this.cfg.localTestMode?this.dsClient=new s.DSClient(this.cfg.dsUrl,this.localTestConnection,this.cfg):this.dsClient=new s.DSClient(this.cfg.dsUrl,this.remoteConnection,this.cfg),this.ocvClient=new c.OCVClient(this.cfg.ocvUrl,this.remoteConnection),this.cfg.implicitDownload&&this.implicitDownload(),r||this.initLibrary()}return e.initialize=function(t,r){return new d(function(n,i){var a=new e(t,!0);a.GCLInstalled=!0,a.initLibrary().then(function(){r&&"function"==typeof r&&r(null,a),n(a)},function(e){r&&"function"==typeof r&&r(e,null),i(e)})})},e.checkTokenCompatible=function(e){var t=n.split(e,"-")[0];return i.satisfies(t,">=1.4.0")},e.resolveConfig=function(e){var t=new a.GCLConfig(e.dsUrlBase,e.apiKey);return t.allowAutoUpdate=e.allowAutoUpdate,t.client_id=e.client_id,t.client_secret=e.client_secret,t.jwt=e.jwt,t.gclUrl=e.gclUrl,t.ocvUrl=e.ocvUrl,t.implicitDownload=e.implicitDownload,t.localTestMode=e.localTestMode,t.forceHardwarePinpad=e.forceHardwarePinpad,t.defaultSessionTimeout=e.defaultSessionTimeout,t.defaultConsentDuration=e.defaultConsentDuration,t.defaultConsentTimeout=e.defaultConsentTimeout,t.citrix=e.citrix,t.agentPort=e.agentPort,t.syncManaged=e.syncManaged,t},e.prototype.containerFor=function(e,t){return f.GenericService.containerForReader(this,e,t)},e.prototype.download=function(e){var t=this;return this.core().infoBrowser().then(function(r){return t.ds().downloadLink(r.data,e)},function(t){return h.ResponseHandler.error(t,e)})},e.prototype.dumpData=function(e,t,r){return f.GenericService.dumpData(this,e,t,r)},e.prototype.readersCanAuthenticate=function(e){return f.GenericService.authenticateCapable(this,e)},e.prototype.authenticate=function(e,t,r){return f.GenericService.authenticate(this,e,t,r)},e.prototype.readersCanSign=function(e){return f.GenericService.signCapable(this,e)},e.prototype.sign=function(e,t,r){return f.GenericService.sign(this,e,t,r)},e.prototype.readersCanVerifyPin=function(e){return f.GenericService.verifyPinCapable(this,e)},e.prototype.verifyPin=function(e,t,r){return f.GenericService.verifyPin(this,e,t,r)},e.prototype.initOCVContext=function(e){return this.ocvClient.getInfo(e)},e.prototype.initLibrary=function(){var t=this,r=this,i=this.cfg;return new d(function(a,o){r.core().info().then(function(u){i.citrix=u.data.citrix,i.tokenCompatible=e.checkTokenCompatible(u.data.version);var s=u.data.activated,c=u.data.managed,l=u.data.version,f=u.data.uid,h=r.core().infoBrowserSync(),m=n.merge({managed:c,core_version:l,activated:s},h.data);c?i.apiKey&&i.dsUrlBase&&i.syncManaged?r.syncDevice(r,i,m,f).then(function(){a()},function(){a()}):a():t.core().getPubKey().then(function(){a()},function(e){e&&!e.success&&201===e.code&&r.dsClient.getPubKey().then(function(e){return r.core().setPubKey(e.pubkey).then(function(){return s?r.syncDevice(r,i,m,f).then(function(){a()}):r.registerDevice(r,i,m,f).then(function(){return r.core().activate().then(function(){m.activated=!0,r.syncDevice(r,i,m,f).then(function(){a()})})})})}).catch(function(e){o(e)})})},function(){r.GCLInstalled=!1,a()})})},e.prototype.registerDevice=function(e,t,r,n){return e.dsClient.register(r,n).then(function(r){return t.jwt=r.token,e.authConnection=new u.LocalAuthConnection(e.cfg),e.coreService=new o.CoreService(e.cfg.gclUrl,e.authConnection),r})},e.prototype.syncDevice=function(e,t,r,n){return e.dsClient.sync(r,n).then(function(e){return t.jwt=e.token,e})},e.prototype.implicitDownload=function(){var e=this;this.core().info(function(t){if(t){var r=e.core().infoBrowserSync();e.ds().downloadLink(r.data,function(e,t){window.open(t.url)})}})},e}();t.GCLClient=p},function(e,t){(function(){function r(e,t){return e.set(t[0],t[1]),e}function n(e,t){return e.add(t),e}function i(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function a(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}function o(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function u(e,t){for(var r=null==e?0:e.length;r--&&t(e[r],r,e)!==!1;);return e}function s(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function c(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function l(e,t){var r=null==e?0:e.length;return!!r&&k(e,t,0)>-1}function f(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function h(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function m(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];
return e}function d(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function p(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function v(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function g(e){return e.split("")}function y(e){return e.match(Ht)||[]}function b(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function w(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function k(e,t,r){return t===t?z(e,t,r):w(e,_,r)}function S(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function _(e){return e!==e}function C(e,t){var r=null==e?0:e.length;return r?I(e,t)/r:Ve}function P(e){return function(t){return null==t?te:t[e]}}function A(e){return function(t){return null==e?te:e[t]}}function O(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r}function E(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function I(e,t){for(var r,n=-1,i=e.length;++n<i;){var a=t(e[n]);a!==te&&(r=r===te?a:r+a)}return r}function x(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function B(e,t){return h(t,function(t){return[t,e[t]]})}function N(e){return function(t){return e(t)}}function j(e,t){return h(t,function(t){return e[t]})}function V(e,t){return e.has(t)}function R(e,t){for(var r=-1,n=e.length;++r<n&&k(t,e[r],0)>-1;);return r}function T(e,t){for(var r=e.length;r--&&k(t,e[r],0)>-1;);return r}function D(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}function U(e){return"\\"+Yr[e]}function M(e,t){return null==e?te:e[t]}function H(e){return Kr.test(e)}function L(e){return qr.test(e)}function F(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function K(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function q(e,t){return function(r){return e(t(r))}}function J(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==se||(e[r]=se,a[i++]=r)}return a}function W(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function G(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function z(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function $(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}function Q(e){return H(e)?Y(e):vn(e)}function X(e){return H(e)?Z(e):g(e)}function Y(e){for(var t=Lr.lastIndex=0;Lr.test(e);)++t;return t}function Z(e){return e.match(Lr)||[]}function ee(e){return e.match(Fr)||[]}var te,re="4.17.4",ne=200,ie="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",oe="__lodash_hash_undefined__",ue=500,se="__lodash_placeholder__",ce=1,le=2,fe=4,he=1,me=2,de=1,pe=2,ve=4,ge=8,ye=16,be=32,we=64,ke=128,Se=256,_e=512,Ce=30,Pe="...",Ae=800,Oe=16,Ee=1,Ie=2,xe=3,Be=1/0,Ne=9007199254740991,je=1.7976931348623157e308,Ve=NaN,Re=4294967295,Te=Re-1,De=Re>>>1,Ue=[["ary",ke],["bind",de],["bindKey",pe],["curry",ge],["curryRight",ye],["flip",_e],["partial",be],["partialRight",we],["rearg",Se]],Me="[object Arguments]",He="[object Array]",Le="[object AsyncFunction]",Fe="[object Boolean]",Ke="[object Date]",qe="[object DOMException]",Je="[object Error]",We="[object Function]",Ge="[object GeneratorFunction]",ze="[object Map]",$e="[object Number]",Qe="[object Null]",Xe="[object Object]",Ye="[object Promise]",Ze="[object Proxy]",et="[object RegExp]",tt="[object Set]",rt="[object String]",nt="[object Symbol]",it="[object Undefined]",at="[object WeakMap]",ot="[object WeakSet]",ut="[object ArrayBuffer]",st="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",ht="[object Int16Array]",mt="[object Int32Array]",dt="[object Uint8Array]",pt="[object Uint8ClampedArray]",vt="[object Uint16Array]",gt="[object Uint32Array]",yt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kt=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,_t=RegExp(kt.source),Ct=RegExp(St.source),Pt=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g,Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/,xt=/^\./,Bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Nt.source),Vt=/^\s+|\s+$/g,Rt=/^\s+/,Tt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,Ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Lt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,Jt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,zt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",Zt="\\u0300-\\u036f",er="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",rr=Zt+er+tr,nr="\\u2700-\\u27bf",ir="a-z\\xdf-\\xf6\\xf8-\\xff",ar="\\xac\\xb1\\xd7\\xf7",or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ur="\\u2000-\\u206f",sr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",lr="\\ufe0e\\ufe0f",fr=ar+or+ur+sr,hr="['’]",mr="["+Yt+"]",dr="["+fr+"]",pr="["+rr+"]",vr="\\d+",gr="["+nr+"]",yr="["+ir+"]",br="[^"+Yt+fr+vr+nr+ir+cr+"]",wr="\\ud83c[\\udffb-\\udfff]",kr="(?:"+pr+"|"+wr+")",Sr="[^"+Yt+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",Cr="[\\ud800-\\udbff][\\udc00-\\udfff]",Pr="["+cr+"]",Ar="\\u200d",Or="(?:"+yr+"|"+br+")",Er="(?:"+Pr+"|"+br+")",Ir="(?:"+hr+"(?:d|ll|m|re|s|t|ve))?",xr="(?:"+hr+"(?:D|LL|M|RE|S|T|VE))?",Br=kr+"?",Nr="["+lr+"]?",jr="(?:"+Ar+"(?:"+[Sr,_r,Cr].join("|")+")"+Nr+Br+")*",Vr="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Rr="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Tr=Nr+Br+jr,Dr="(?:"+[gr,_r,Cr].join("|")+")"+Tr,Ur="(?:"+[Sr+pr+"?",pr,_r,Cr,mr].join("|")+")",Mr=RegExp(hr,"g"),Hr=RegExp(pr,"g"),Lr=RegExp(wr+"(?="+wr+")|"+Ur+Tr,"g"),Fr=RegExp([Pr+"?"+yr+"+"+Ir+"(?="+[dr,Pr,"$"].join("|")+")",Er+"+"+xr+"(?="+[dr,Pr+Or,"$"].join("|")+")",Pr+"?"+Or+"+"+Ir,Pr+"+"+xr,Rr,Vr,vr,Dr].join("|"),"g"),Kr=RegExp("["+Ar+Yt+rr+lr+"]"),qr=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wr=-1,Gr={};Gr[ct]=Gr[lt]=Gr[ft]=Gr[ht]=Gr[mt]=Gr[dt]=Gr[pt]=Gr[vt]=Gr[gt]=!0,Gr[Me]=Gr[He]=Gr[ut]=Gr[Fe]=Gr[st]=Gr[Ke]=Gr[Je]=Gr[We]=Gr[ze]=Gr[$e]=Gr[Xe]=Gr[et]=Gr[tt]=Gr[rt]=Gr[at]=!1;var zr={};zr[Me]=zr[He]=zr[ut]=zr[st]=zr[Fe]=zr[Ke]=zr[ct]=zr[lt]=zr[ft]=zr[ht]=zr[mt]=zr[ze]=zr[$e]=zr[Xe]=zr[et]=zr[tt]=zr[rt]=zr[nt]=zr[dt]=zr[pt]=zr[vt]=zr[gt]=!0,zr[Je]=zr[We]=zr[at]=!1;var $r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zr=parseFloat,en=parseInt,tn="object"==typeof global&&global&&global.Object===Object&&global,rn="object"==typeof self&&self&&self.Object===Object&&self,nn=tn||rn||Function("return this")(),an="object"==typeof t&&t&&!t.nodeType&&t,on=an&&"object"==typeof e&&e&&!e.nodeType&&e,un=on&&on.exports===an,sn=un&&tn.process,cn=function(){try{return sn&&sn.binding&&sn.binding("util")}catch(e){}}(),ln=cn&&cn.isArrayBuffer,fn=cn&&cn.isDate,hn=cn&&cn.isMap,mn=cn&&cn.isRegExp,dn=cn&&cn.isSet,pn=cn&&cn.isTypedArray,vn=P("length"),gn=A($r),yn=A(Qr),bn=A(Xr),wn=function e(t){function g(e){if(cs(e)&&!kh(e)&&!(e instanceof Y)){if(e instanceof z)return e;if(wl.call(e,"__wrapped__"))return ao(e)}return new z(e)}function A(){}function z(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=te}function Y(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function Z(){var e=new Y(this.__wrapped__);return e.__actions__=Hi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Hi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Hi(this.__views__),e}function Ht(){if(this.__filtered__){var e=new Y(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yt(){var e=this.__wrapped__.value(),t=this.__dir__,r=kh(e),n=t<0,i=r?e.length:0,a=Ia(0,i,this.__views__),o=a.start,u=a.end,s=u-o,c=n?u:o-1,l=this.__iteratees__,f=l.length,h=0,m=Ql(s,this.__takeCount__);if(!r||!n&&i==s&&m==s)return ki(e,this.__actions__);var d=[];e:for(;s--&&h<m;){c+=t;for(var p=-1,v=e[c];++p<f;){var g=l[p],y=g.iteratee,b=g.type,w=y(v);if(b==Ie)v=w;else if(!w){if(b==Ee)continue e;break e}}d[h++]=v}return d}function Zt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function er(){this.__data__=uf?uf(null):{},this.size=0}function tr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function rr(e){var t=this.__data__;if(uf){var r=t[e];return r===oe?te:r}return wl.call(t,e)?t[e]:te}function nr(e){var t=this.__data__;return uf?t[e]!==te:wl.call(t,e)}function ir(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=uf&&t===te?oe:t,this}function ar(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function or(){this.__data__=[],this.size=0}function ur(e){var t=this.__data__,r=Nr(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Vl.call(t,r,1),--this.size,!0}function sr(e){var t=this.__data__,r=Nr(t,e);return r<0?te:t[r][1]}function cr(e){return Nr(this.__data__,e)>-1}function lr(e,t){var r=this.__data__,n=Nr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function fr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function hr(){this.size=0,this.__data__={hash:new Zt,map:new(rf||ar),string:new Zt}}function mr(e){var t=Pa(this,e).delete(e);return this.size-=t?1:0,t}function dr(e){return Pa(this,e).get(e)}function pr(e){return Pa(this,e).has(e)}function vr(e,t){var r=Pa(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function gr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new fr;++t<r;)this.add(e[t])}function yr(e){return this.__data__.set(e,oe),this}function br(e){return this.__data__.has(e)}function wr(e){var t=this.__data__=new ar(e);this.size=t.size}function kr(){this.__data__=new ar,this.size=0}function Sr(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function _r(e){return this.__data__.get(e)}function Cr(e){return this.__data__.has(e)}function Pr(e,t){var r=this.__data__;if(r instanceof ar){var n=r.__data__;if(!rf||n.length<ne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fr(n)}return r.set(e,t),this.size=r.size,this}function Ar(e,t){var r=kh(e),n=!r&&wh(e),i=!r&&!n&&_h(e),a=!r&&!n&&!i&&Eh(e),o=r||n||i||a,u=o?x(e.length,ml):[],s=u.length;for(var c in e)!t&&!wl.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Da(c,s))||u.push(c);return u}function Or(e){var t=e.length;return t?e[ri(0,t-1)]:te}function Er(e,t){return to(Hi(e),Ur(t,0,e.length))}function Ir(e){return to(Hi(e))}function xr(e,t,r){(r===te||$u(e[t],r))&&(r!==te||t in e)||Tr(e,t,r)}function Br(e,t,r){var n=e[t];wl.call(e,t)&&$u(n,r)&&(r!==te||t in e)||Tr(e,t,r)}function Nr(e,t){for(var r=e.length;r--;)if($u(e[r][0],t))return r;return-1}function jr(e,t,r,n){return bf(e,function(e,i,a){t(n,e,r(e),a)}),n}function Vr(e,t){return e&&Li(t,qs(t),e)}function Rr(e,t){return e&&Li(t,Js(t),e)}function Tr(e,t,r){"__proto__"==t&&Ul?Ul(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Dr(e,t){for(var r=-1,n=t.length,i=ol(n),a=null==e;++r<n;)i[r]=a?te:Ls(e,t[r]);return i}function Ur(e,t,r){return e===e&&(r!==te&&(e=e<=r?e:r),t!==te&&(e=e>=t?e:t)),e}function Lr(e,t,r,n,i,a){var u,s=t&ce,c=t&le,l=t&fe;if(r&&(u=i?r(e,n,i,a):r(e)),u!==te)return u;if(!ss(e))return e;var f=kh(e);if(f){if(u=Na(e),!s)return Hi(e,u)}else{var h=Bf(e),m=h==We||h==Ge;if(_h(e))return Ei(e,s);if(h==Xe||h==Me||m&&!i){if(u=c||m?{}:ja(e),!s)return c?Ki(e,Rr(u,e)):Fi(e,Vr(u,e))}else{if(!zr[h])return i?e:{};u=Va(e,h,Lr,s)}}a||(a=new wr);var d=a.get(e);if(d)return d;a.set(e,u);var p=l?c?ka:wa:c?Js:qs,v=f?te:p(e);return o(v||e,function(n,i){v&&(i=n,n=e[i]),Br(u,i,Lr(n,t,r,i,e,a))}),u}function Fr(e){var t=qs(e);return function(r){return Kr(r,e,t)}}function Kr(e,t,r){var n=r.length;if(null==e)return!n;for(e=fl(e);n--;){var i=r[n],a=t[i],o=e[i];if(o===te&&!(i in e)||!a(o))return!1}return!0}function qr(e,t,r){if("function"!=typeof e)throw new dl(ae);return Vf(function(){e.apply(te,r)},t)}function $r(e,t,r,n){var i=-1,a=l,o=!0,u=e.length,s=[],c=t.length;if(!u)return s;r&&(t=h(t,N(r))),n?(a=f,o=!1):t.length>=ne&&(a=V,o=!1,t=new gr(t));e:for(;++i<u;){var m=e[i],d=null==r?m:r(m);if(m=n||0!==m?m:0,o&&d===d){for(var p=c;p--;)if(t[p]===d)continue e;s.push(m)}else a(t,d,n)||s.push(m)}return s}function Qr(e,t){var r=!0;return bf(e,function(e,n,i){return r=!!t(e,n,i)}),r}function Xr(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(u===te?o===o&&!ws(o):r(o,u)))var u=o,s=a}return s}function Yr(e,t,r,n){var i=e.length;for(r=As(r),r<0&&(r=-r>i?0:i+r),n=n===te||n>i?i:As(n),n<0&&(n+=i),n=r>n?0:Os(n);r<n;)e[r++]=t;return e}function tn(e,t){var r=[];return bf(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function rn(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=Ta),i||(i=[]);++a<o;){var u=e[a];t>0&&r(u)?t>1?rn(u,t-1,r,n,i):m(i,u):n||(i[i.length]=u)}return i}function an(e,t){return e&&kf(e,t,qs)}function on(e,t){return e&&Sf(e,t,qs)}function sn(e,t){return c(t,function(t){return as(e[t])})}function cn(e,t){t=Ai(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[ro(t[r++])];return r&&r==n?e:te}function vn(e,t,r){var n=t(e);return kh(e)?n:m(n,r(e))}function wn(e){return null==e?e===te?it:Qe:Dl&&Dl in fl(e)?Ea(e):$a(e)}function Sn(e,t){return e>t}function _n(e,t){return null!=e&&wl.call(e,t)}function Cn(e,t){return null!=e&&t in fl(e)}function Pn(e,t,r){return e>=Ql(t,r)&&e<$l(t,r)}function An(e,t,r){for(var n=r?f:l,i=e[0].length,a=e.length,o=a,u=ol(a),s=1/0,c=[];o--;){var m=e[o];o&&t&&(m=h(m,N(t))),s=Ql(m.length,s),u[o]=!r&&(t||i>=120&&m.length>=120)?new gr(o&&m):te}m=e[0];var d=-1,p=u[0];e:for(;++d<i&&c.length<s;){var v=m[d],g=t?t(v):v;if(v=r||0!==v?v:0,!(p?V(p,g):n(c,g,r))){for(o=a;--o;){var y=u[o];if(!(y?V(y,g):n(e[o],g,r)))continue e}p&&p.push(g),c.push(v)}}return c}function On(e,t,r,n){return an(e,function(e,i,a){t(n,r(e),i,a)}),n}function En(e,t,r){t=Ai(t,e),e=Xa(e,t);var n=null==e?e:e[ro(Po(t))];return null==n?te:i(n,e,r)}function In(e){return cs(e)&&wn(e)==Me}function xn(e){return cs(e)&&wn(e)==ut}function Bn(e){return cs(e)&&wn(e)==Ke}function Nn(e,t,r,n,i){return e===t||(null==e||null==t||!cs(e)&&!cs(t)?e!==e&&t!==t:jn(e,t,r,n,Nn,i))}function jn(e,t,r,n,i,a){var o=kh(e),u=kh(t),s=o?He:Bf(e),c=u?He:Bf(t);s=s==Me?Xe:s,c=c==Me?Xe:c;var l=s==Xe,f=c==Xe,h=s==c;if(h&&_h(e)){if(!_h(t))return!1;o=!0,l=!1}if(h&&!l)return a||(a=new wr),o||Eh(e)?va(e,t,r,n,i,a):ga(e,t,s,r,n,i,a);if(!(r&he)){var m=l&&wl.call(e,"__wrapped__"),d=f&&wl.call(t,"__wrapped__");if(m||d){var p=m?e.value():e,v=d?t.value():t;return a||(a=new wr),i(p,v,r,n,a)}}return!!h&&(a||(a=new wr),ya(e,t,r,n,i,a))}function Vn(e){return cs(e)&&Bf(e)==ze}function Rn(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=fl(e);i--;){var u=r[i];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){u=r[i];var s=u[0],c=e[s],l=u[1];if(o&&u[2]){if(c===te&&!(s in e))return!1}else{var f=new wr;if(n)var h=n(c,l,s,e,t,f);if(!(h===te?Nn(l,c,he|me,n,f):h))return!1}}return!0}function Tn(e){if(!ss(e)||Fa(e))return!1;var t=as(e)?Al:Wt;return t.test(no(e))}function Dn(e){return cs(e)&&wn(e)==et}function Un(e){return cs(e)&&Bf(e)==tt}function Mn(e){return cs(e)&&us(e.length)&&!!Gr[wn(e)]}function Hn(e){return"function"==typeof e?e:null==e?Vc:"object"==typeof e?kh(e)?Wn(e[0],e[1]):Jn(e):Fc(e)}function Ln(e){if(!Ka(e))return zl(e);var t=[];for(var r in fl(e))wl.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Fn(e){if(!ss(e))return za(e);var t=Ka(e),r=[];for(var n in e)("constructor"!=n||!t&&wl.call(e,n))&&r.push(n);return r}function Kn(e,t){return e<t}function qn(e,t){var r=-1,n=Qu(e)?ol(e.length):[];return bf(e,function(e,i,a){n[++r]=t(e,i,a)}),n}function Jn(e){var t=Aa(e);return 1==t.length&&t[0][2]?Ja(t[0][0],t[0][1]):function(r){return r===e||Rn(r,e,t)}}function Wn(e,t){return Ma(e)&&qa(t)?Ja(ro(e),t):function(r){var n=Ls(r,e);return n===te&&n===t?Ks(r,e):Nn(t,n,he|me)}}function Gn(e,t,r,n,i){e!==t&&kf(t,function(a,o){if(ss(a))i||(i=new wr),zn(e,t,o,r,Gn,n,i);else{var u=n?n(e[o],a,o+"",e,t,i):te;u===te&&(u=a),xr(e,o,u)}},Js)}function zn(e,t,r,n,i,a,o){var u=e[r],s=t[r],c=o.get(s);if(c)return void xr(e,r,c);var l=a?a(u,s,r+"",e,t,o):te,f=l===te;if(f){var h=kh(s),m=!h&&_h(s),d=!h&&!m&&Eh(s);l=s,h||m||d?kh(u)?l=u:Xu(u)?l=Hi(u):m?(f=!1,l=Ei(s,!0)):d?(f=!1,l=Ri(s,!0)):l=[]:gs(s)||wh(s)?(l=u,wh(u)?l=Is(u):(!ss(u)||n&&as(u))&&(l=ja(s))):f=!1}f&&(o.set(s,l),i(l,s,n,a,o),o.delete(s)),xr(e,r,l)}function $n(e,t){var r=e.length;if(r)return t+=t<0?r:0,Da(t,r)?e[t]:te}function Qn(e,t,r){var n=-1;t=h(t.length?t:[Vc],N(Ca()));var i=qn(e,function(e,r,i){var a=h(t,function(t){return t(e)});return{criteria:a,index:++n,value:e}});return E(i,function(e,t){return Di(e,t,r)})}function Xn(e,t){return Yn(e,t,function(t,r){return Ks(e,r)})}function Yn(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],u=cn(e,o);r(u,o)&&si(a,Ai(o,e),u)}return a}function Zn(e){return function(t){return cn(t,e)}}function ei(e,t,r,n){var i=n?S:k,a=-1,o=t.length,u=e;for(e===t&&(t=Hi(t)),r&&(u=h(e,N(r)));++a<o;)for(var s=0,c=t[a],l=r?r(c):c;(s=i(u,l,s,n))>-1;)u!==e&&Vl.call(u,s,1),Vl.call(e,s,1);return e}function ti(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;Da(i)?Vl.call(e,i,1):yi(e,i)}}return e}function ri(e,t){return e+Kl(Zl()*(t-e+1))}function ni(e,t,r,n){for(var i=-1,a=$l(Fl((t-e)/(r||1)),0),o=ol(a);a--;)o[n?a:++i]=e,e+=r;return o}function ii(e,t){var r="";if(!e||t<1||t>Ne)return r;do t%2&&(r+=e),t=Kl(t/2),t&&(e+=e);while(t);return r}function ai(e,t){return Rf(Qa(e,t,Vc),e+"")}function oi(e){return Or(nc(e))}function ui(e,t){var r=nc(e);return to(r,Ur(t,0,r.length))}function si(e,t,r,n){if(!ss(e))return e;t=Ai(t,e);for(var i=-1,a=t.length,o=a-1,u=e;null!=u&&++i<a;){var s=ro(t[i]),c=r;if(i!=o){var l=u[s];c=n?n(l,s,u):te,c===te&&(c=ss(l)?l:Da(t[i+1])?[]:{})}Br(u,s,c),u=u[s]}return e}function ci(e){return to(nc(e))}function li(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=ol(i);++n<i;)a[n]=e[n+t];return a}function fi(e,t){var r;return bf(e,function(e,n,i){return r=t(e,n,i),!r}),!!r}function hi(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t===t&&i<=De){for(;n<i;){var a=n+i>>>1,o=e[a];null!==o&&!ws(o)&&(r?o<=t:o<t)?n=a+1:i=a}return i}return mi(e,t,Vc,r)}function mi(e,t,r,n){t=r(t);for(var i=0,a=null==e?0:e.length,o=t!==t,u=null===t,s=ws(t),c=t===te;i<a;){var l=Kl((i+a)/2),f=r(e[l]),h=f!==te,m=null===f,d=f===f,p=ws(f);if(o)var v=n||d;else v=c?d&&(n||h):u?d&&h&&(n||!m):s?d&&h&&!m&&(n||!p):!m&&!p&&(n?f<=t:f<t);v?i=l+1:a=l}return Ql(a,Te)}function di(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r],u=t?t(o):o;if(!r||!$u(u,s)){var s=u;a[i++]=0===o?0:o}}return a}function pi(e){return"number"==typeof e?e:ws(e)?Ve:+e}function vi(e){if("string"==typeof e)return e;if(kh(e))return h(e,vi)+"";if(ws(e))return gf?gf.call(e):"";var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function gi(e,t,r){var n=-1,i=l,a=e.length,o=!0,u=[],s=u;if(r)o=!1,i=f;else if(a>=ne){var c=t?null:Of(e);if(c)return W(c);o=!1,i=V,s=new gr}else s=t?[]:u;e:for(;++n<a;){var h=e[n],m=t?t(h):h;if(h=r||0!==h?h:0,o&&m===m){for(var d=s.length;d--;)if(s[d]===m)continue e;t&&s.push(m),u.push(h)}else i(s,m,r)||(s!==u&&s.push(m),u.push(h))}return u}function yi(e,t){return t=Ai(t,e),e=Xa(e,t),null==e||delete e[ro(Po(t))]}function bi(e,t,r,n){return si(e,t,r(cn(e,t)),n)}function wi(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?li(e,n?0:a,n?a+1:i):li(e,n?a+1:0,n?i:a)}function ki(e,t){var r=e;return r instanceof Y&&(r=r.value()),d(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},r)}function Si(e,t,r){var n=e.length;if(n<2)return n?gi(e[0]):[];for(var i=-1,a=ol(n);++i<n;)for(var o=e[i],u=-1;++u<n;)u!=i&&(a[i]=$r(a[i]||o,e[u],t,r));return gi(rn(a,1),t,r)}function _i(e,t,r){for(var n=-1,i=e.length,a=t.length,o={};++n<i;){var u=n<a?t[n]:te;r(o,e[n],u)}return o}function Ci(e){return Xu(e)?e:[]}function Pi(e){return"function"==typeof e?e:Vc}function Ai(e,t){return kh(e)?e:Ma(e,t)?[e]:Tf(Bs(e))}function Oi(e,t,r){var n=e.length;return r=r===te?n:r,!t&&r>=n?e:li(e,t,r)}function Ei(e,t){if(t)return e.slice();var r=e.length,n=xl?xl(r):new e.constructor(r);return e.copy(n),n}function Ii(e){var t=new e.constructor(e.byteLength);return new Il(t).set(new Il(e)),t}function xi(e,t){var r=t?Ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Bi(e,t,n){var i=t?n(K(e),ce):K(e);return d(i,r,new e.constructor)}function Ni(e){var t=new e.constructor(e.source,Kt.exec(e));return t.lastIndex=e.lastIndex,t}function ji(e,t,r){var i=t?r(W(e),ce):W(e);return d(i,n,new e.constructor)}function Vi(e){return vf?fl(vf.call(e)):{}}function Ri(e,t){var r=t?Ii(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var r=e!==te,n=null===e,i=e===e,a=ws(e),o=t!==te,u=null===t,s=t===t,c=ws(t);if(!u&&!c&&!a&&e>t||a&&o&&s&&!u&&!c||n&&o&&s||!r&&s||!i)return 1;if(!n&&!a&&!c&&e<t||c&&r&&i&&!n&&!a||u&&r&&i||!o&&i||!s)return-1}return 0}function Di(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,u=r.length;++n<o;){var s=Ti(i[n],a[n]);if(s){if(n>=u)return s;var c=r[n];return s*("desc"==c?-1:1)}}return e.index-t.index}function Ui(e,t,r,n){for(var i=-1,a=e.length,o=r.length,u=-1,s=t.length,c=$l(a-o,0),l=ol(s+c),f=!n;++u<s;)l[u]=t[u];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;c--;)l[u++]=e[i++];return l}function Mi(e,t,r,n){for(var i=-1,a=e.length,o=-1,u=r.length,s=-1,c=t.length,l=$l(a-u,0),f=ol(l+c),h=!n;++i<l;)f[i]=e[i];for(var m=i;++s<c;)f[m+s]=t[s];for(;++o<u;)(h||i<a)&&(f[m+r[o]]=e[i++]);return f}function Hi(e,t){var r=-1,n=e.length;for(t||(t=ol(n));++r<n;)t[r]=e[r];return t}function Li(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var u=t[a],s=n?n(r[u],e[u],u,r,e):te;s===te&&(s=e[u]),i?Tr(r,u,s):Br(r,u,s)}return r}function Fi(e,t){return Li(e,If(e),t)}function Ki(e,t){return Li(e,xf(e),t)}function qi(e,t){return function(r,n){var i=kh(r)?a:jr,o=t?t():{};return i(r,e,Ca(n,2),o)}}function Ji(e){return ai(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:te,o=i>2?r[2]:te;for(a=e.length>3&&"function"==typeof a?(i--,a):te,o&&Ua(r[0],r[1],o)&&(a=i<3?te:a,i=1),t=fl(t);++n<i;){var u=r[n];u&&e(t,u,n,a)}return t})}function Wi(e,t){return function(r,n){if(null==r)return r;if(!Qu(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=fl(r);(t?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}function Gi(e){return function(t,r,n){for(var i=-1,a=fl(t),o=n(t),u=o.length;u--;){var s=o[e?u:++i];if(r(a[s],s,a)===!1)break}return t}}function zi(e,t,r){function n(){var t=this&&this!==nn&&this instanceof n?a:e;return t.apply(i?r:this,arguments)}var i=t&de,a=Xi(e);return n}function $i(e){return function(t){t=Bs(t);var r=H(t)?X(t):te,n=r?r[0]:t.charAt(0),i=r?Oi(r,1).join(""):t.slice(1);return n[e]()+i}}function Qi(e){return function(t){return d(Ic(cc(t).replace(Mr,"")),e,"")}}function Xi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=yf(e.prototype),n=e.apply(r,t);return ss(n)?n:r}}function Yi(e,t,r){function n(){for(var o=arguments.length,u=ol(o),s=o,c=_a(n);s--;)u[s]=arguments[s];var l=o<3&&u[0]!==c&&u[o-1]!==c?[]:J(u,c);if(o-=l.length,o<r)return ca(e,t,ta,n.placeholder,te,u,l,te,te,r-o);var f=this&&this!==nn&&this instanceof n?a:e;return i(f,this,u)}var a=Xi(e);return n}function Zi(e){return function(t,r,n){var i=fl(t);if(!Qu(t)){var a=Ca(r,3);t=qs(t),r=function(e){return a(i[e],e,i)}}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:te}}function ea(e){return ba(function(t){var r=t.length,n=r,i=z.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new dl(ae);if(i&&!o&&"wrapper"==Sa(a))var o=new z([],!0)}for(n=o?n:r;++n<r;){a=t[n];var u=Sa(a),s="wrapper"==u?Ef(a):te;o=s&&La(s[0])&&s[1]==(ke|ge|be|Se)&&!s[4].length&&1==s[9]?o[Sa(s[0])].apply(o,s[3]):1==a.length&&La(a)?o[u]():o.thru(a)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&kh(n))return o.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}})}function ta(e,t,r,n,i,a,o,u,s,c){function l(){for(var g=arguments.length,y=ol(g),b=g;b--;)y[b]=arguments[b];if(d)var w=_a(l),k=D(y,w);if(n&&(y=Ui(y,n,i,d)),a&&(y=Mi(y,a,o,d)),g-=k,d&&g<c){var S=J(y,w);return ca(e,t,ta,l.placeholder,r,y,S,u,s,c-g)}var _=h?r:this,C=m?_[e]:e;return g=y.length,u?y=Ya(y,u):p&&g>1&&y.reverse(),f&&s<g&&(y.length=s),this&&this!==nn&&this instanceof l&&(C=v||Xi(C)),C.apply(_,y)}var f=t&ke,h=t&de,m=t&pe,d=t&(ge|ye),p=t&_e,v=m?te:Xi(e);return l}function ra(e,t){return function(r,n){return On(r,e,t(n),{})}}function na(e,t){return function(r,n){var i;if(r===te&&n===te)return t;if(r!==te&&(i=r),n!==te){if(i===te)return n;"string"==typeof r||"string"==typeof n?(r=vi(r),n=vi(n)):(r=pi(r),n=pi(n)),i=e(r,n)}return i}}function ia(e){return ba(function(t){return t=h(t,N(Ca())),ai(function(r){var n=this;return e(t,function(e){return i(e,n,r)})})})}function aa(e,t){t=t===te?" ":vi(t);var r=t.length;if(r<2)return r?ii(t,e):t;var n=ii(t,Fl(e/Q(t)));return H(t)?Oi(X(n),0,e).join(""):n.slice(0,e)}function oa(e,t,r,n){function a(){for(var t=-1,s=arguments.length,c=-1,l=n.length,f=ol(l+s),h=this&&this!==nn&&this instanceof a?u:e;++c<l;)f[c]=n[c];for(;s--;)f[c++]=arguments[++t];return i(h,o?r:this,f)}var o=t&de,u=Xi(e);return a}function ua(e){return function(t,r,n){return n&&"number"!=typeof n&&Ua(t,r,n)&&(r=n=te),t=Ps(t),r===te?(r=t,t=0):r=Ps(r),n=n===te?t<r?1:-1:Ps(n),ni(t,r,n,e)}}function sa(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Es(t),r=Es(r)),e(t,r)}}function ca(e,t,r,n,i,a,o,u,s,c){var l=t&ge,f=l?o:te,h=l?te:o,m=l?a:te,d=l?te:a;t|=l?be:we,t&=~(l?we:be),t&ve||(t&=~(de|pe));var p=[e,t,i,m,f,d,h,u,s,c],v=r.apply(te,p);return La(e)&&jf(v,p),v.placeholder=n,Za(v,e,t)}function la(e){var t=ll[e];return function(e,r){if(e=Es(e),r=null==r?0:Ql(As(r),292)){var n=(Bs(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+r));return n=(Bs(i)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(e)}}function fa(e){return function(t){var r=Bf(t);return r==ze?K(t):r==tt?G(t):B(t,e(t))}}function ha(e,t,r,n,i,a,o,u){var s=t&pe;if(!s&&"function"!=typeof e)throw new dl(ae);var c=n?n.length:0;if(c||(t&=~(be|we),n=i=te),o=o===te?o:$l(As(o),0),u=u===te?u:As(u),c-=i?i.length:0,t&we){var l=n,f=i;n=i=te}var h=s?te:Ef(e),m=[e,t,r,n,i,l,f,a,o,u];if(h&&Ga(m,h),e=m[0],t=m[1],r=m[2],n=m[3],i=m[4],u=m[9]=m[9]===te?s?0:e.length:$l(m[9]-c,0),!u&&t&(ge|ye)&&(t&=~(ge|ye)),t&&t!=de)d=t==ge||t==ye?Yi(e,t,u):t!=be&&t!=(de|be)||i.length?ta.apply(te,m):oa(e,t,r,n);else var d=zi(e,t,r);var p=h?_f:jf;return Za(p(d,m),e,t)}function ma(e,t,r,n){return e===te||$u(e,gl[r])&&!wl.call(n,r)?t:e}function da(e,t,r,n,i,a){return ss(e)&&ss(t)&&(a.set(t,e),Gn(e,t,te,da,a),a.delete(t)),e}function pa(e){return gs(e)?te:e}function va(e,t,r,n,i,a){var o=r&he,u=e.length,s=t.length;if(u!=s&&!(o&&s>u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var l=-1,f=!0,h=r&me?new gr:te;for(a.set(e,t),a.set(t,e);++l<u;){var m=e[l],d=t[l];if(n)var p=o?n(d,m,l,t,e,a):n(m,d,l,e,t,a);if(p!==te){if(p)continue;f=!1;break}if(h){if(!v(t,function(e,t){if(!V(h,t)&&(m===e||i(m,e,r,n,a)))return h.push(t)})){f=!1;break}}else if(m!==d&&!i(m,d,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ga(e,t,r,n,i,a,o){switch(r){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ut:return!(e.byteLength!=t.byteLength||!a(new Il(e),new Il(t)));case Fe:case Ke:case $e:return $u(+e,+t);case Je:return e.name==t.name&&e.message==t.message;case et:case rt:return e==t+"";case ze:var u=K;case tt:var s=n&he;if(u||(u=W),e.size!=t.size&&!s)return!1;var c=o.get(e);if(c)return c==t;n|=me,o.set(e,t);var l=va(u(e),u(t),n,i,a,o);return o.delete(e),l;case nt:if(vf)return vf.call(e)==vf.call(t)}return!1}function ya(e,t,r,n,i,a){var o=r&he,u=wa(e),s=u.length,c=wa(t),l=c.length;if(s!=l&&!o)return!1;for(var f=s;f--;){var h=u[f];if(!(o?h in t:wl.call(t,h)))return!1}var m=a.get(e);if(m&&a.get(t))return m==t;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++f<s;){h=u[f];var v=e[h],g=t[h];if(n)var y=o?n(g,v,h,t,e,a):n(v,g,h,e,t,a);if(!(y===te?v===g||i(v,g,r,n,a):y)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return a.delete(e),a.delete(t),d}function ba(e){return Rf(Qa(e,te,go),e+"")}function wa(e){return vn(e,qs,If)}function ka(e){return vn(e,Js,xf)}function Sa(e){for(var t=e.name+"",r=cf[t],n=wl.call(cf,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function _a(e){var t=wl.call(g,"placeholder")?g:e;return t.placeholder}function Ca(){var e=g.iteratee||Rc;return e=e===Rc?Hn:e,arguments.length?e(arguments[0],arguments[1]):e}function Pa(e,t){var r=e.__data__;return Ha(t)?r["string"==typeof t?"string":"hash"]:r.map}function Aa(e){for(var t=qs(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,qa(i)]}return t}function Oa(e,t){var r=M(e,t);return Tn(r)?r:te}function Ea(e){var t=wl.call(e,Dl),r=e[Dl];try{e[Dl]=te;var n=!0}catch(e){}var i=_l.call(e);return n&&(t?e[Dl]=r:delete e[Dl]),i}function Ia(e,t,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;
switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Ql(t,e+o);break;case"takeRight":e=$l(e,t-o)}}return{start:e,end:t}}function xa(e){var t=e.match(Ut);return t?t[1].split(Mt):[]}function Ba(e,t,r){t=Ai(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var o=ro(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:(i=null==e?0:e.length,!!i&&us(i)&&Da(o,i)&&(kh(e)||wh(e)))}function Na(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&wl.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function ja(e){return"function"!=typeof e.constructor||Ka(e)?{}:yf(Bl(e))}function Va(e,t,r,n){var i=e.constructor;switch(t){case ut:return Ii(e);case Fe:case Ke:return new i(+e);case st:return xi(e,n);case ct:case lt:case ft:case ht:case mt:case dt:case pt:case vt:case gt:return Ri(e,n);case ze:return Bi(e,n,r);case $e:case rt:return new i(e);case et:return Ni(e);case tt:return ji(e,n,r);case nt:return Vi(e)}}function Ra(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function Ta(e){return kh(e)||wh(e)||!!(Rl&&e&&e[Rl])}function Da(e,t){return t=null==t?Ne:t,!!t&&("number"==typeof e||zt.test(e))&&e>-1&&e%1==0&&e<t}function Ua(e,t,r){if(!ss(r))return!1;var n=typeof t;return!!("number"==n?Qu(r)&&Da(t,r.length):"string"==n&&t in r)&&$u(r[t],e)}function Ma(e,t){if(kh(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ws(e))||(It.test(e)||!Et.test(e)||null!=t&&e in fl(t))}function Ha(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function La(e){var t=Sa(e),r=g[t];if("function"!=typeof r||!(t in Y.prototype))return!1;if(e===r)return!0;var n=Ef(r);return!!n&&e===n[0]}function Fa(e){return!!Sl&&Sl in e}function Ka(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||gl;return e===r}function qa(e){return e===e&&!ss(e)}function Ja(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==te||e in fl(r)))}}function Wa(e){var t=Ru(e,function(e){return r.size===ue&&r.clear(),e}),r=t.cache;return t}function Ga(e,t){var r=e[1],n=t[1],i=r|n,a=i<(de|pe|ke),o=n==ke&&r==ge||n==ke&&r==Se&&e[7].length<=t[8]||n==(ke|Se)&&t[7].length<=t[8]&&r==ge;if(!a&&!o)return e;n&de&&(e[2]=t[2],i|=r&de?0:ve);var u=t[3];if(u){var s=e[3];e[3]=s?Ui(s,u,t[4]):u,e[4]=s?J(e[3],se):t[4]}return u=t[5],u&&(s=e[5],e[5]=s?Mi(s,u,t[6]):u,e[6]=s?J(e[5],se):t[6]),u=t[7],u&&(e[7]=u),n&ke&&(e[8]=null==e[8]?t[8]:Ql(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function za(e){var t=[];if(null!=e)for(var r in fl(e))t.push(r);return t}function $a(e){return _l.call(e)}function Qa(e,t,r){return t=$l(t===te?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=$l(n.length-t,0),u=ol(o);++a<o;)u[a]=n[t+a];a=-1;for(var s=ol(t+1);++a<t;)s[a]=n[a];return s[t]=r(u),i(e,this,s)}}function Xa(e,t){return t.length<2?e:cn(e,li(t,0,-1))}function Ya(e,t){for(var r=e.length,n=Ql(t.length,r),i=Hi(e);n--;){var a=t[n];e[n]=Da(a,r)?i[a]:te}return e}function Za(e,t,r){var n=t+"";return Rf(e,Ra(n,io(xa(n),r)))}function eo(e){var t=0,r=0;return function(){var n=Xl(),i=Oe-(n-r);if(r=n,i>0){if(++t>=Ae)return arguments[0]}else t=0;return e.apply(te,arguments)}}function to(e,t){var r=-1,n=e.length,i=n-1;for(t=t===te?n:t;++r<t;){var a=ri(r,i),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e}function ro(e){if("string"==typeof e||ws(e))return e;var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function no(e){if(null!=e){try{return bl.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function io(e,t){return o(Ue,function(r){var n="_."+r[0];t&r[1]&&!l(e,n)&&e.push(n)}),e.sort()}function ao(e){if(e instanceof Y)return e.clone();var t=new z(e.__wrapped__,e.__chain__);return t.__actions__=Hi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function oo(e,t,r){t=(r?Ua(e,t,r):t===te)?1:$l(As(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,a=0,o=ol(Fl(n/t));i<n;)o[a++]=li(e,i,i+=t);return o}function uo(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i}function so(){var e=arguments.length;if(!e)return[];for(var t=ol(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return m(kh(r)?Hi(r):[r],rn(t,1))}function co(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:As(t),li(e,t<0?0:t,n)):[]}function lo(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:As(t),t=n-t,li(e,0,t<0?0:t)):[]}function fo(e,t){return e&&e.length?wi(e,Ca(t,3),!0,!0):[]}function ho(e,t){return e&&e.length?wi(e,Ca(t,3),!0):[]}function mo(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&Ua(e,t,r)&&(r=0,n=i),Yr(e,t,r,n)):[]}function po(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:As(r);return i<0&&(i=$l(n+i,0)),w(e,Ca(t,3),i)}function vo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return r!==te&&(i=As(r),i=r<0?$l(n+i,0):Ql(i,n-1)),w(e,Ca(t,3),i,!0)}function go(e){var t=null==e?0:e.length;return t?rn(e,1):[]}function yo(e){var t=null==e?0:e.length;return t?rn(e,Be):[]}function bo(e,t){var r=null==e?0:e.length;return r?(t=t===te?1:As(t),rn(e,t)):[]}function wo(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n}function ko(e){return e&&e.length?e[0]:te}function So(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:As(r);return i<0&&(i=$l(n+i,0)),k(e,t,i)}function _o(e){var t=null==e?0:e.length;return t?li(e,0,-1):[]}function Co(e,t){return null==e?"":Gl.call(e,t)}function Po(e){var t=null==e?0:e.length;return t?e[t-1]:te}function Ao(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return r!==te&&(i=As(r),i=i<0?$l(n+i,0):Ql(i,n-1)),t===t?$(e,t,i):w(e,_,i,!0)}function Oo(e,t){return e&&e.length?$n(e,As(t)):te}function Eo(e,t){return e&&e.length&&t&&t.length?ei(e,t):e}function Io(e,t,r){return e&&e.length&&t&&t.length?ei(e,t,Ca(r,2)):e}function xo(e,t,r){return e&&e.length&&t&&t.length?ei(e,t,te,r):e}function Bo(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=Ca(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return ti(e,i),r}function No(e){return null==e?e:ef.call(e)}function jo(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Ua(e,t,r)?(t=0,r=n):(t=null==t?0:As(t),r=r===te?n:As(r)),li(e,t,r)):[]}function Vo(e,t){return hi(e,t)}function Ro(e,t,r){return mi(e,t,Ca(r,2))}function To(e,t){var r=null==e?0:e.length;if(r){var n=hi(e,t);if(n<r&&$u(e[n],t))return n}return-1}function Do(e,t){return hi(e,t,!0)}function Uo(e,t,r){return mi(e,t,Ca(r,2),!0)}function Mo(e,t){var r=null==e?0:e.length;if(r){var n=hi(e,t,!0)-1;if($u(e[n],t))return n}return-1}function Ho(e){return e&&e.length?di(e):[]}function Lo(e,t){return e&&e.length?di(e,Ca(t,2)):[]}function Fo(e){var t=null==e?0:e.length;return t?li(e,1,t):[]}function Ko(e,t,r){return e&&e.length?(t=r||t===te?1:As(t),li(e,0,t<0?0:t)):[]}function qo(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===te?1:As(t),t=n-t,li(e,t<0?0:t,n)):[]}function Jo(e,t){return e&&e.length?wi(e,Ca(t,3),!1,!0):[]}function Wo(e,t){return e&&e.length?wi(e,Ca(t,3)):[]}function Go(e){return e&&e.length?gi(e):[]}function zo(e,t){return e&&e.length?gi(e,Ca(t,2)):[]}function $o(e,t){return t="function"==typeof t?t:te,e&&e.length?gi(e,te,t):[]}function Qo(e){if(!e||!e.length)return[];var t=0;return e=c(e,function(e){if(Xu(e))return t=$l(e.length,t),!0}),x(t,function(t){return h(e,P(t))})}function Xo(e,t){if(!e||!e.length)return[];var r=Qo(e);return null==t?r:h(r,function(e){return i(t,te,e)})}function Yo(e,t){return _i(e||[],t||[],Br)}function Zo(e,t){return _i(e||[],t||[],si)}function eu(e){var t=g(e);return t.__chain__=!0,t}function tu(e,t){return t(e),e}function ru(e,t){return t(e)}function nu(){return eu(this)}function iu(){return new z(this.value(),this.__chain__)}function au(){this.__values__===te&&(this.__values__=Cs(this.value()));var e=this.__index__>=this.__values__.length,t=e?te:this.__values__[this.__index__++];return{done:e,value:t}}function ou(){return this}function uu(e){for(var t,r=this;r instanceof A;){var n=ao(r);n.__index__=0,n.__values__=te,t?i.__wrapped__=n:t=n;var i=n;r=r.__wrapped__}return i.__wrapped__=e,t}function su(){var e=this.__wrapped__;if(e instanceof Y){var t=e;return this.__actions__.length&&(t=new Y(this)),t=t.reverse(),t.__actions__.push({func:ru,args:[No],thisArg:te}),new z(t,this.__chain__)}return this.thru(No)}function cu(){return ki(this.__wrapped__,this.__actions__)}function lu(e,t,r){var n=kh(e)?s:Qr;return r&&Ua(e,t,r)&&(t=te),n(e,Ca(t,3))}function fu(e,t){var r=kh(e)?c:tn;return r(e,Ca(t,3))}function hu(e,t){return rn(yu(e,t),1)}function mu(e,t){return rn(yu(e,t),Be)}function du(e,t,r){return r=r===te?1:As(r),rn(yu(e,t),r)}function pu(e,t){var r=kh(e)?o:bf;return r(e,Ca(t,3))}function vu(e,t){var r=kh(e)?u:wf;return r(e,Ca(t,3))}function gu(e,t,r,n){e=Qu(e)?e:nc(e),r=r&&!n?As(r):0;var i=e.length;return r<0&&(r=$l(i+r,0)),bs(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&k(e,t,r)>-1}function yu(e,t){var r=kh(e)?h:qn;return r(e,Ca(t,3))}function bu(e,t,r,n){return null==e?[]:(kh(t)||(t=null==t?[]:[t]),r=n?te:r,kh(r)||(r=null==r?[]:[r]),Qn(e,t,r))}function wu(e,t,r){var n=kh(e)?d:O,i=arguments.length<3;return n(e,Ca(t,4),r,i,bf)}function ku(e,t,r){var n=kh(e)?p:O,i=arguments.length<3;return n(e,Ca(t,4),r,i,wf)}function Su(e,t){var r=kh(e)?c:tn;return r(e,Tu(Ca(t,3)))}function _u(e){var t=kh(e)?Or:oi;return t(e)}function Cu(e,t,r){t=(r?Ua(e,t,r):t===te)?1:As(t);var n=kh(e)?Er:ui;return n(e,t)}function Pu(e){var t=kh(e)?Ir:ci;return t(e)}function Au(e){if(null==e)return 0;if(Qu(e))return bs(e)?Q(e):e.length;var t=Bf(e);return t==ze||t==tt?e.size:Ln(e).length}function Ou(e,t,r){var n=kh(e)?v:fi;return r&&Ua(e,t,r)&&(t=te),n(e,Ca(t,3))}function Eu(e,t){if("function"!=typeof t)throw new dl(ae);return e=As(e),function(){if(--e<1)return t.apply(this,arguments)}}function Iu(e,t,r){return t=r?te:t,t=e&&null==t?e.length:t,ha(e,ke,te,te,te,te,t)}function xu(e,t){var r;if("function"!=typeof t)throw new dl(ae);return e=As(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=te),r}}function Bu(e,t,r){t=r?te:t;var n=ha(e,ge,te,te,te,te,te,t);return n.placeholder=Bu.placeholder,n}function Nu(e,t,r){t=r?te:t;var n=ha(e,ye,te,te,te,te,te,t);return n.placeholder=Nu.placeholder,n}function ju(e,t,r){function n(t){var r=h,n=m;return h=m=te,y=t,p=e.apply(n,r)}function i(e){return y=e,v=Vf(u,t),b?n(e):p}function a(e){var r=e-g,n=e-y,i=t-r;return w?Ql(i,d-n):i}function o(e){var r=e-g,n=e-y;return g===te||r>=t||r<0||w&&n>=d}function u(){var e=ch();return o(e)?s(e):void(v=Vf(u,a(e)))}function s(e){return v=te,k&&h?n(e):(h=m=te,p)}function c(){v!==te&&Af(v),y=0,h=g=m=v=te}function l(){return v===te?p:s(ch())}function f(){var e=ch(),r=o(e);if(h=arguments,m=this,g=e,r){if(v===te)return i(g);if(w)return v=Vf(u,t),n(g)}return v===te&&(v=Vf(u,t)),p}var h,m,d,p,v,g,y=0,b=!1,w=!1,k=!0;if("function"!=typeof e)throw new dl(ae);return t=Es(t)||0,ss(r)&&(b=!!r.leading,w="maxWait"in r,d=w?$l(Es(r.maxWait)||0,t):d,k="trailing"in r?!!r.trailing:k),f.cancel=c,f.flush=l,f}function Vu(e){return ha(e,_e)}function Ru(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new dl(ae);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Ru.Cache||fr),r}function Tu(e){if("function"!=typeof e)throw new dl(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Du(e){return xu(2,e)}function Uu(e,t){if("function"!=typeof e)throw new dl(ae);return t=t===te?t:As(t),ai(e,t)}function Mu(e,t){if("function"!=typeof e)throw new dl(ae);return t=null==t?0:$l(As(t),0),ai(function(r){var n=r[t],a=Oi(r,0,t);return n&&m(a,n),i(e,this,a)})}function Hu(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new dl(ae);return ss(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ju(e,t,{leading:n,maxWait:t,trailing:i})}function Lu(e){return Iu(e,1)}function Fu(e,t){return ph(Pi(t),e)}function Ku(){if(!arguments.length)return[];var e=arguments[0];return kh(e)?e:[e]}function qu(e){return Lr(e,fe)}function Ju(e,t){return t="function"==typeof t?t:te,Lr(e,fe,t)}function Wu(e){return Lr(e,ce|fe)}function Gu(e,t){return t="function"==typeof t?t:te,Lr(e,ce|fe,t)}function zu(e,t){return null==t||Kr(e,t,qs(t))}function $u(e,t){return e===t||e!==e&&t!==t}function Qu(e){return null!=e&&us(e.length)&&!as(e)}function Xu(e){return cs(e)&&Qu(e)}function Yu(e){return e===!0||e===!1||cs(e)&&wn(e)==Fe}function Zu(e){return cs(e)&&1===e.nodeType&&!gs(e)}function es(e){if(null==e)return!0;if(Qu(e)&&(kh(e)||"string"==typeof e||"function"==typeof e.splice||_h(e)||Eh(e)||wh(e)))return!e.length;var t=Bf(e);if(t==ze||t==tt)return!e.size;if(Ka(e))return!Ln(e).length;for(var r in e)if(wl.call(e,r))return!1;return!0}function ts(e,t){return Nn(e,t)}function rs(e,t,r){r="function"==typeof r?r:te;var n=r?r(e,t):te;return n===te?Nn(e,t,te,r):!!n}function ns(e){if(!cs(e))return!1;var t=wn(e);return t==Je||t==qe||"string"==typeof e.message&&"string"==typeof e.name&&!gs(e)}function is(e){return"number"==typeof e&&Wl(e)}function as(e){if(!ss(e))return!1;var t=wn(e);return t==We||t==Ge||t==Le||t==Ze}function os(e){return"number"==typeof e&&e==As(e)}function us(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ne}function ss(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function cs(e){return null!=e&&"object"==typeof e}function ls(e,t){return e===t||Rn(e,t,Aa(t))}function fs(e,t,r){return r="function"==typeof r?r:te,Rn(e,t,Aa(t),r)}function hs(e){return vs(e)&&e!=+e}function ms(e){if(Nf(e))throw new sl(ie);return Tn(e)}function ds(e){return null===e}function ps(e){return null==e}function vs(e){return"number"==typeof e||cs(e)&&wn(e)==$e}function gs(e){if(!cs(e)||wn(e)!=Xe)return!1;var t=Bl(e);if(null===t)return!0;var r=wl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&bl.call(r)==Cl}function ys(e){return os(e)&&e>=-Ne&&e<=Ne}function bs(e){return"string"==typeof e||!kh(e)&&cs(e)&&wn(e)==rt}function ws(e){return"symbol"==typeof e||cs(e)&&wn(e)==nt}function ks(e){return e===te}function Ss(e){return cs(e)&&Bf(e)==at}function _s(e){return cs(e)&&wn(e)==ot}function Cs(e){if(!e)return[];if(Qu(e))return bs(e)?X(e):Hi(e);if(Tl&&e[Tl])return F(e[Tl]());var t=Bf(e),r=t==ze?K:t==tt?W:nc;return r(e)}function Ps(e){if(!e)return 0===e?e:0;if(e=Es(e),e===Be||e===-Be){var t=e<0?-1:1;return t*je}return e===e?e:0}function As(e){var t=Ps(e),r=t%1;return t===t?r?t-r:t:0}function Os(e){return e?Ur(As(e),0,Re):0}function Es(e){if("number"==typeof e)return e;if(ws(e))return Ve;if(ss(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ss(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Vt,"");var r=Jt.test(e);return r||Gt.test(e)?en(e.slice(2),r?2:8):qt.test(e)?Ve:+e}function Is(e){return Li(e,Js(e))}function xs(e){return e?Ur(As(e),-Ne,Ne):0===e?e:0}function Bs(e){return null==e?"":vi(e)}function Ns(e,t){var r=yf(e);return null==t?r:Vr(r,t)}function js(e,t){return b(e,Ca(t,3),an)}function Vs(e,t){return b(e,Ca(t,3),on)}function Rs(e,t){return null==e?e:kf(e,Ca(t,3),Js)}function Ts(e,t){return null==e?e:Sf(e,Ca(t,3),Js)}function Ds(e,t){return e&&an(e,Ca(t,3))}function Us(e,t){return e&&on(e,Ca(t,3))}function Ms(e){return null==e?[]:sn(e,qs(e))}function Hs(e){return null==e?[]:sn(e,Js(e))}function Ls(e,t,r){var n=null==e?te:cn(e,t);return n===te?r:n}function Fs(e,t){return null!=e&&Ba(e,t,_n)}function Ks(e,t){return null!=e&&Ba(e,t,Cn)}function qs(e){return Qu(e)?Ar(e):Ln(e)}function Js(e){return Qu(e)?Ar(e,!0):Fn(e)}function Ws(e,t){var r={};return t=Ca(t,3),an(e,function(e,n,i){Tr(r,t(e,n,i),e)}),r}function Gs(e,t){var r={};return t=Ca(t,3),an(e,function(e,n,i){Tr(r,n,t(e,n,i))}),r}function zs(e,t){return $s(e,Tu(Ca(t)))}function $s(e,t){if(null==e)return{};var r=h(ka(e),function(e){return[e]});return t=Ca(t),Yn(e,r,function(e,r){return t(e,r[0])})}function Qs(e,t,r){t=Ai(t,e);var n=-1,i=t.length;for(i||(i=1,e=te);++n<i;){var a=null==e?te:e[ro(t[n])];a===te&&(n=i,a=r),e=as(a)?a.call(e):a}return e}function Xs(e,t,r){return null==e?e:si(e,t,r)}function Ys(e,t,r,n){return n="function"==typeof n?n:te,null==e?e:si(e,t,r,n)}function Zs(e,t,r){var n=kh(e),i=n||_h(e)||Eh(e);if(t=Ca(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:ss(e)&&as(a)?yf(Bl(e)):{}}return(i?o:an)(e,function(e,n,i){return t(r,e,n,i)}),r}function ec(e,t){return null==e||yi(e,t)}function tc(e,t,r){return null==e?e:bi(e,t,Pi(r))}function rc(e,t,r,n){return n="function"==typeof n?n:te,null==e?e:bi(e,t,Pi(r),n)}function nc(e){return null==e?[]:j(e,qs(e))}function ic(e){return null==e?[]:j(e,Js(e))}function ac(e,t,r){return r===te&&(r=t,t=te),r!==te&&(r=Es(r),r=r===r?r:0),t!==te&&(t=Es(t),t=t===t?t:0),Ur(Es(e),t,r)}function oc(e,t,r){return t=Ps(t),r===te?(r=t,t=0):r=Ps(r),e=Es(e),Pn(e,t,r)}function uc(e,t,r){if(r&&"boolean"!=typeof r&&Ua(e,t,r)&&(t=r=te),r===te&&("boolean"==typeof t?(r=t,t=te):"boolean"==typeof e&&(r=e,e=te)),e===te&&t===te?(e=0,t=1):(e=Ps(e),t===te?(t=e,e=0):t=Ps(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var i=Zl();return Ql(e+i*(t-e+Zr("1e-"+((i+"").length-1))),t)}return ri(e,t)}function sc(e){return em(Bs(e).toLowerCase())}function cc(e){return e=Bs(e),e&&e.replace($t,gn).replace(Hr,"")}function lc(e,t,r){e=Bs(e),t=vi(t);var n=e.length;r=r===te?n:Ur(As(r),0,n);var i=r;return r-=t.length,r>=0&&e.slice(r,i)==t}function fc(e){return e=Bs(e),e&&Ct.test(e)?e.replace(St,yn):e}function hc(e){return e=Bs(e),e&&jt.test(e)?e.replace(Nt,"\\$&"):e}function mc(e,t,r){e=Bs(e),t=As(t);var n=t?Q(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return aa(Kl(i),r)+e+aa(Fl(i),r)}function dc(e,t,r){e=Bs(e),t=As(t);var n=t?Q(e):0;return t&&n<t?e+aa(t-n,r):e}function pc(e,t,r){e=Bs(e),t=As(t);var n=t?Q(e):0;return t&&n<t?aa(t-n,r)+e:e}function vc(e,t,r){return r||null==t?t=0:t&&(t=+t),Yl(Bs(e).replace(Rt,""),t||0)}function gc(e,t,r){return t=(r?Ua(e,t,r):t===te)?1:As(t),ii(Bs(e),t)}function yc(){var e=arguments,t=Bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function bc(e,t,r){return r&&"number"!=typeof r&&Ua(e,t,r)&&(t=r=te),(r=r===te?Re:r>>>0)?(e=Bs(e),e&&("string"==typeof t||null!=t&&!Ah(t))&&(t=vi(t),!t&&H(e))?Oi(X(e),0,r):e.split(t,r)):[]}function wc(e,t,r){return e=Bs(e),r=null==r?0:Ur(As(r),0,e.length),t=vi(t),e.slice(r,r+t.length)==t}function kc(e,t,r){var n=g.templateSettings;r&&Ua(e,t,r)&&(t=te),e=Bs(e),t=jh({},t,n,ma);var i,a,o=jh({},t.imports,n.imports,ma),u=qs(o),s=j(o,u),c=0,l=t.interpolate||Qt,f="__p += '",h=hl((t.escape||Qt).source+"|"+l.source+"|"+(l===Ot?Ft:Qt).source+"|"+(t.evaluate||Qt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Wr+"]")+"\n";e.replace(h,function(t,r,n,o,u,s){return n||(n=o),f+=e.slice(c,s).replace(Xt,U),r&&(i=!0,f+="' +\n__e("+r+") +\n'"),u&&(a=!0,f+="';\n"+u+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=s+t.length,t}),f+="';\n";var d=t.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(yt,""):f).replace(bt,"$1").replace(wt,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var p=tm(function(){return cl(u,m+"return "+f).apply(te,s)});if(p.source=f,ns(p))throw p;return p}function Sc(e){return Bs(e).toLowerCase()}function _c(e){return Bs(e).toUpperCase()}function Cc(e,t,r){if(e=Bs(e),e&&(r||t===te))return e.replace(Vt,"");if(!e||!(t=vi(t)))return e;var n=X(e),i=X(t),a=R(n,i),o=T(n,i)+1;return Oi(n,a,o).join("")}function Pc(e,t,r){if(e=Bs(e),e&&(r||t===te))return e.replace(Tt,"");if(!e||!(t=vi(t)))return e;var n=X(e),i=T(n,X(t))+1;return Oi(n,0,i).join("")}function Ac(e,t,r){if(e=Bs(e),e&&(r||t===te))return e.replace(Rt,"");if(!e||!(t=vi(t)))return e;var n=X(e),i=R(n,X(t));return Oi(n,i).join("")}function Oc(e,t){var r=Ce,n=Pe;if(ss(t)){var i="separator"in t?t.separator:i;r="length"in t?As(t.length):r,n="omission"in t?vi(t.omission):n}e=Bs(e);var a=e.length;if(H(e)){var o=X(e);a=o.length}if(r>=a)return e;var u=r-Q(n);if(u<1)return n;var s=o?Oi(o,0,u).join(""):e.slice(0,u);if(i===te)return s+n;if(o&&(u+=s.length-u),Ah(i)){if(e.slice(u).search(i)){var c,l=s;for(i.global||(i=hl(i.source,Bs(Kt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;s=s.slice(0,f===te?u:f)}}else if(e.indexOf(vi(i),u)!=u){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+n}function Ec(e){return e=Bs(e),e&&_t.test(e)?e.replace(kt,bn):e}function Ic(e,t,r){return e=Bs(e),t=r?te:t,t===te?L(e)?ee(e):y(e):e.match(t)||[]}function xc(e){var t=null==e?0:e.length,r=Ca();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new dl(ae);return[r(e[0]),e[1]]}):[],ai(function(r){for(var n=-1;++n<t;){var a=e[n];if(i(a[0],this,r))return i(a[1],this,r)}})}function Bc(e){return Fr(Lr(e,ce))}function Nc(e){return function(){return e}}function jc(e,t){return null==e||e!==e?t:e}function Vc(e){return e}function Rc(e){return Hn("function"==typeof e?e:Lr(e,ce))}function Tc(e){return Jn(Lr(e,ce))}function Dc(e,t){return Wn(e,Lr(t,ce))}function Uc(e,t,r){var n=qs(t),i=sn(t,n);null!=r||ss(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=sn(t,qs(t)));var a=!(ss(r)&&"chain"in r&&!r.chain),u=as(e);return o(i,function(r){var n=t[r];e[r]=n,u&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__),i=r.__actions__=Hi(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,m([this.value()],arguments))})}),e}function Mc(){return nn._===this&&(nn._=Pl),this}function Hc(){}function Lc(e){return e=As(e),ai(function(t){return $n(t,e)})}function Fc(e){return Ma(e)?P(ro(e)):Zn(e)}function Kc(e){return function(t){return null==e?te:cn(e,t)}}function qc(){return[]}function Jc(){return!1}function Wc(){return{}}function Gc(){return""}function zc(){return!0}function $c(e,t){if(e=As(e),e<1||e>Ne)return[];var r=Re,n=Ql(e,Re);t=Ca(t),e-=Re;for(var i=x(n,t);++r<e;)t(r);return i}function Qc(e){return kh(e)?h(e,ro):ws(e)?[e]:Hi(Tf(Bs(e)))}function Xc(e){var t=++kl;return Bs(e)+t}function Yc(e){return e&&e.length?Xr(e,Vc,Sn):te}function Zc(e,t){return e&&e.length?Xr(e,Ca(t,2),Sn):te}function el(e){return C(e,Vc)}function tl(e,t){return C(e,Ca(t,2))}function rl(e){return e&&e.length?Xr(e,Vc,Kn):te}function nl(e,t){return e&&e.length?Xr(e,Ca(t,2),Kn):te}function il(e){return e&&e.length?I(e,Vc):0}function al(e,t){return e&&e.length?I(e,Ca(t,2)):0}t=null==t?nn:kn.defaults(nn.Object(),t,kn.pick(nn,Jr));var ol=t.Array,ul=t.Date,sl=t.Error,cl=t.Function,ll=t.Math,fl=t.Object,hl=t.RegExp,ml=t.String,dl=t.TypeError,pl=ol.prototype,vl=cl.prototype,gl=fl.prototype,yl=t["__core-js_shared__"],bl=vl.toString,wl=gl.hasOwnProperty,kl=0,Sl=function(){var e=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_l=gl.toString,Cl=bl.call(fl),Pl=nn._,Al=hl("^"+bl.call(wl).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ol=un?t.Buffer:te,El=t.Symbol,Il=t.Uint8Array,xl=Ol?Ol.allocUnsafe:te,Bl=q(fl.getPrototypeOf,fl),Nl=fl.create,jl=gl.propertyIsEnumerable,Vl=pl.splice,Rl=El?El.isConcatSpreadable:te,Tl=El?El.iterator:te,Dl=El?El.toStringTag:te,Ul=function(){try{var e=Oa(fl,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ml=t.clearTimeout!==nn.clearTimeout&&t.clearTimeout,Hl=ul&&ul.now!==nn.Date.now&&ul.now,Ll=t.setTimeout!==nn.setTimeout&&t.setTimeout,Fl=ll.ceil,Kl=ll.floor,ql=fl.getOwnPropertySymbols,Jl=Ol?Ol.isBuffer:te,Wl=t.isFinite,Gl=pl.join,zl=q(fl.keys,fl),$l=ll.max,Ql=ll.min,Xl=ul.now,Yl=t.parseInt,Zl=ll.random,ef=pl.reverse,tf=Oa(t,"DataView"),rf=Oa(t,"Map"),nf=Oa(t,"Promise"),af=Oa(t,"Set"),of=Oa(t,"WeakMap"),uf=Oa(fl,"create"),sf=of&&new of,cf={},lf=no(tf),ff=no(rf),hf=no(nf),mf=no(af),df=no(of),pf=El?El.prototype:te,vf=pf?pf.valueOf:te,gf=pf?pf.toString:te,yf=function(){function e(){}return function(t){if(!ss(t))return{};if(Nl)return Nl(t);e.prototype=t;var r=new e;return e.prototype=te,r}}();g.templateSettings={escape:Pt,evaluate:At,interpolate:Ot,variable:"",imports:{_:g}},g.prototype=A.prototype,g.prototype.constructor=g,z.prototype=yf(A.prototype),z.prototype.constructor=z,Y.prototype=yf(A.prototype),Y.prototype.constructor=Y,Zt.prototype.clear=er,Zt.prototype.delete=tr,Zt.prototype.get=rr,Zt.prototype.has=nr,Zt.prototype.set=ir,ar.prototype.clear=or,ar.prototype.delete=ur,ar.prototype.get=sr,ar.prototype.has=cr,ar.prototype.set=lr,fr.prototype.clear=hr,fr.prototype.delete=mr,fr.prototype.get=dr,fr.prototype.has=pr,fr.prototype.set=vr,gr.prototype.add=gr.prototype.push=yr,gr.prototype.has=br,wr.prototype.clear=kr,wr.prototype.delete=Sr,wr.prototype.get=_r,wr.prototype.has=Cr,wr.prototype.set=Pr;var bf=Wi(an),wf=Wi(on,!0),kf=Gi(),Sf=Gi(!0),_f=sf?function(e,t){return sf.set(e,t),e}:Vc,Cf=Ul?function(e,t){return Ul(e,"toString",{configurable:!0,enumerable:!1,value:Nc(t),writable:!0})}:Vc,Pf=ai,Af=Ml||function(e){return nn.clearTimeout(e)},Of=af&&1/W(new af([,-0]))[1]==Be?function(e){return new af(e)}:Hc,Ef=sf?function(e){return sf.get(e)}:Hc,If=ql?function(e){return null==e?[]:(e=fl(e),c(ql(e),function(t){return jl.call(e,t)}))}:qc,xf=ql?function(e){for(var t=[];e;)m(t,If(e)),e=Bl(e);return t}:qc,Bf=wn;(tf&&Bf(new tf(new ArrayBuffer(1)))!=st||rf&&Bf(new rf)!=ze||nf&&Bf(nf.resolve())!=Ye||af&&Bf(new af)!=tt||of&&Bf(new of)!=at)&&(Bf=function(e){var t=wn(e),r=t==Xe?e.constructor:te,n=r?no(r):"";if(n)switch(n){case lf:return st;case ff:return ze;case hf:return Ye;case mf:return tt;case df:return at}return t});var Nf=yl?as:Jc,jf=eo(_f),Vf=Ll||function(e,t){return nn.setTimeout(e,t)},Rf=eo(Cf),Tf=Wa(function(e){var t=[];return xt.test(e)&&t.push(""),e.replace(Bt,function(e,r,n,i){t.push(n?i.replace(Lt,"$1"):r||e)}),t}),Df=ai(function(e,t){return Xu(e)?$r(e,rn(t,1,Xu,!0)):[]}),Uf=ai(function(e,t){var r=Po(t);return Xu(r)&&(r=te),Xu(e)?$r(e,rn(t,1,Xu,!0),Ca(r,2)):[]}),Mf=ai(function(e,t){var r=Po(t);return Xu(r)&&(r=te),Xu(e)?$r(e,rn(t,1,Xu,!0),te,r):[]}),Hf=ai(function(e){var t=h(e,Ci);return t.length&&t[0]===e[0]?An(t):[]}),Lf=ai(function(e){var t=Po(e),r=h(e,Ci);return t===Po(r)?t=te:r.pop(),r.length&&r[0]===e[0]?An(r,Ca(t,2)):[]}),Ff=ai(function(e){var t=Po(e),r=h(e,Ci);return t="function"==typeof t?t:te,t&&r.pop(),r.length&&r[0]===e[0]?An(r,te,t):[]}),Kf=ai(Eo),qf=ba(function(e,t){var r=null==e?0:e.length,n=Dr(e,t);return ti(e,h(t,function(e){return Da(e,r)?+e:e}).sort(Ti)),n}),Jf=ai(function(e){return gi(rn(e,1,Xu,!0))}),Wf=ai(function(e){var t=Po(e);return Xu(t)&&(t=te),gi(rn(e,1,Xu,!0),Ca(t,2))}),Gf=ai(function(e){var t=Po(e);return t="function"==typeof t?t:te,gi(rn(e,1,Xu,!0),te,t)}),zf=ai(function(e,t){return Xu(e)?$r(e,t):[]}),$f=ai(function(e){return Si(c(e,Xu))}),Qf=ai(function(e){var t=Po(e);return Xu(t)&&(t=te),Si(c(e,Xu),Ca(t,2))}),Xf=ai(function(e){var t=Po(e);return t="function"==typeof t?t:te,Si(c(e,Xu),te,t)}),Yf=ai(Qo),Zf=ai(function(e){var t=e.length,r=t>1?e[t-1]:te;return r="function"==typeof r?(e.pop(),r):te,Xo(e,r)}),eh=ba(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,i=function(t){return Dr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Y&&Da(r)?(n=n.slice(r,+r+(t?1:0)),n.__actions__.push({func:ru,args:[i],thisArg:te}),new z(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(te),e})):this.thru(i)}),th=qi(function(e,t,r){wl.call(e,r)?++e[r]:Tr(e,r,1)}),rh=Zi(po),nh=Zi(vo),ih=qi(function(e,t,r){wl.call(e,r)?e[r].push(t):Tr(e,r,[t])}),ah=ai(function(e,t,r){var n=-1,a="function"==typeof t,o=Qu(e)?ol(e.length):[];return bf(e,function(e){o[++n]=a?i(t,e,r):En(e,t,r)}),o}),oh=qi(function(e,t,r){Tr(e,r,t)}),uh=qi(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),sh=ai(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Ua(e,t[0],t[1])?t=[]:r>2&&Ua(t[0],t[1],t[2])&&(t=[t[0]]),Qn(e,rn(t,1),[])}),ch=Hl||function(){return nn.Date.now()},lh=ai(function(e,t,r){var n=de;if(r.length){var i=J(r,_a(lh));n|=be}return ha(e,n,t,r,i)}),fh=ai(function(e,t,r){var n=de|pe;if(r.length){var i=J(r,_a(fh));n|=be}return ha(t,n,e,r,i)}),hh=ai(function(e,t){return qr(e,1,t)}),mh=ai(function(e,t,r){return qr(e,Es(t)||0,r)});Ru.Cache=fr;var dh=Pf(function(e,t){t=1==t.length&&kh(t[0])?h(t[0],N(Ca())):h(rn(t,1),N(Ca()));var r=t.length;return ai(function(n){for(var a=-1,o=Ql(n.length,r);++a<o;)n[a]=t[a].call(this,n[a]);return i(e,this,n)})}),ph=ai(function(e,t){var r=J(t,_a(ph));return ha(e,be,te,t,r)}),vh=ai(function(e,t){var r=J(t,_a(vh));return ha(e,we,te,t,r)}),gh=ba(function(e,t){return ha(e,Se,te,te,te,t)}),yh=sa(Sn),bh=sa(function(e,t){return e>=t}),wh=In(function(){return arguments}())?In:function(e){return cs(e)&&wl.call(e,"callee")&&!jl.call(e,"callee")},kh=ol.isArray,Sh=ln?N(ln):xn,_h=Jl||Jc,Ch=fn?N(fn):Bn,Ph=hn?N(hn):Vn,Ah=mn?N(mn):Dn,Oh=dn?N(dn):Un,Eh=pn?N(pn):Mn,Ih=sa(Kn),xh=sa(function(e,t){return e<=t}),Bh=Ji(function(e,t){if(Ka(t)||Qu(t))return void Li(t,qs(t),e);for(var r in t)wl.call(t,r)&&Br(e,r,t[r])}),Nh=Ji(function(e,t){Li(t,Js(t),e)}),jh=Ji(function(e,t,r,n){Li(t,Js(t),e,n)}),Vh=Ji(function(e,t,r,n){Li(t,qs(t),e,n)}),Rh=ba(Dr),Th=ai(function(e){return e.push(te,ma),i(jh,te,e)}),Dh=ai(function(e){return e.push(te,da),i(Fh,te,e)}),Uh=ra(function(e,t,r){e[t]=r},Nc(Vc)),Mh=ra(function(e,t,r){wl.call(e,t)?e[t].push(r):e[t]=[r]},Ca),Hh=ai(En),Lh=Ji(function(e,t,r){Gn(e,t,r)}),Fh=Ji(function(e,t,r,n){Gn(e,t,r,n)}),Kh=ba(function(e,t){var r={};if(null==e)return r;var n=!1;t=h(t,function(t){return t=Ai(t,e),n||(n=t.length>1),t}),Li(e,ka(e),r),n&&(r=Lr(r,ce|le|fe,pa));for(var i=t.length;i--;)yi(r,t[i]);return r}),qh=ba(function(e,t){return null==e?{}:Xn(e,t)}),Jh=fa(qs),Wh=fa(Js),Gh=Qi(function(e,t,r){return t=t.toLowerCase(),e+(r?sc(t):t)}),zh=Qi(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),$h=Qi(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Qh=$i("toLowerCase"),Xh=Qi(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Yh=Qi(function(e,t,r){return e+(r?" ":"")+em(t)}),Zh=Qi(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),em=$i("toUpperCase"),tm=ai(function(e,t){try{return i(e,te,t)}catch(e){return ns(e)?e:new sl(e)}}),rm=ba(function(e,t){return o(t,function(t){t=ro(t),Tr(e,t,lh(e[t],e))}),e}),nm=ea(),im=ea(!0),am=ai(function(e,t){return function(r){return En(r,e,t)}}),om=ai(function(e,t){return function(r){return En(e,r,t)}}),um=ia(h),sm=ia(s),cm=ia(v),lm=ua(),fm=ua(!0),hm=na(function(e,t){return e+t},0),mm=la("ceil"),dm=na(function(e,t){return e/t},1),pm=la("floor"),vm=na(function(e,t){return e*t},1),gm=la("round"),ym=na(function(e,t){return e-t},0);return g.after=Eu,g.ary=Iu,g.assign=Bh,g.assignIn=Nh,g.assignInWith=jh,g.assignWith=Vh,g.at=Rh,g.before=xu,g.bind=lh,g.bindAll=rm,g.bindKey=fh,g.castArray=Ku,g.chain=eu,g.chunk=oo,g.compact=uo,g.concat=so,g.cond=xc,g.conforms=Bc,g.constant=Nc,g.countBy=th,g.create=Ns,g.curry=Bu,g.curryRight=Nu,g.debounce=ju,g.defaults=Th,g.defaultsDeep=Dh,g.defer=hh,g.delay=mh,g.difference=Df,g.differenceBy=Uf,g.differenceWith=Mf,g.drop=co,g.dropRight=lo,g.dropRightWhile=fo,g.dropWhile=ho,g.fill=mo,g.filter=fu,g.flatMap=hu,g.flatMapDeep=mu,g.flatMapDepth=du,g.flatten=go,g.flattenDeep=yo,g.flattenDepth=bo,g.flip=Vu,g.flow=nm,g.flowRight=im,g.fromPairs=wo,g.functions=Ms,g.functionsIn=Hs,g.groupBy=ih,g.initial=_o,g.intersection=Hf,g.intersectionBy=Lf,g.intersectionWith=Ff,g.invert=Uh,g.invertBy=Mh,g.invokeMap=ah,g.iteratee=Rc,g.keyBy=oh,g.keys=qs,g.keysIn=Js,g.map=yu,g.mapKeys=Ws,g.mapValues=Gs,g.matches=Tc,g.matchesProperty=Dc,g.memoize=Ru,g.merge=Lh,g.mergeWith=Fh,g.method=am,g.methodOf=om,g.mixin=Uc,g.negate=Tu,g.nthArg=Lc,g.omit=Kh,g.omitBy=zs,g.once=Du,g.orderBy=bu,g.over=um,g.overArgs=dh,g.overEvery=sm,g.overSome=cm,g.partial=ph,g.partialRight=vh,g.partition=uh,g.pick=qh,
g.pickBy=$s,g.property=Fc,g.propertyOf=Kc,g.pull=Kf,g.pullAll=Eo,g.pullAllBy=Io,g.pullAllWith=xo,g.pullAt=qf,g.range=lm,g.rangeRight=fm,g.rearg=gh,g.reject=Su,g.remove=Bo,g.rest=Uu,g.reverse=No,g.sampleSize=Cu,g.set=Xs,g.setWith=Ys,g.shuffle=Pu,g.slice=jo,g.sortBy=sh,g.sortedUniq=Ho,g.sortedUniqBy=Lo,g.split=bc,g.spread=Mu,g.tail=Fo,g.take=Ko,g.takeRight=qo,g.takeRightWhile=Jo,g.takeWhile=Wo,g.tap=tu,g.throttle=Hu,g.thru=ru,g.toArray=Cs,g.toPairs=Jh,g.toPairsIn=Wh,g.toPath=Qc,g.toPlainObject=Is,g.transform=Zs,g.unary=Lu,g.union=Jf,g.unionBy=Wf,g.unionWith=Gf,g.uniq=Go,g.uniqBy=zo,g.uniqWith=$o,g.unset=ec,g.unzip=Qo,g.unzipWith=Xo,g.update=tc,g.updateWith=rc,g.values=nc,g.valuesIn=ic,g.without=zf,g.words=Ic,g.wrap=Fu,g.xor=$f,g.xorBy=Qf,g.xorWith=Xf,g.zip=Yf,g.zipObject=Yo,g.zipObjectDeep=Zo,g.zipWith=Zf,g.entries=Jh,g.entriesIn=Wh,g.extend=Nh,g.extendWith=jh,Uc(g,g),g.add=hm,g.attempt=tm,g.camelCase=Gh,g.capitalize=sc,g.ceil=mm,g.clamp=ac,g.clone=qu,g.cloneDeep=Wu,g.cloneDeepWith=Gu,g.cloneWith=Ju,g.conformsTo=zu,g.deburr=cc,g.defaultTo=jc,g.divide=dm,g.endsWith=lc,g.eq=$u,g.escape=fc,g.escapeRegExp=hc,g.every=lu,g.find=rh,g.findIndex=po,g.findKey=js,g.findLast=nh,g.findLastIndex=vo,g.findLastKey=Vs,g.floor=pm,g.forEach=pu,g.forEachRight=vu,g.forIn=Rs,g.forInRight=Ts,g.forOwn=Ds,g.forOwnRight=Us,g.get=Ls,g.gt=yh,g.gte=bh,g.has=Fs,g.hasIn=Ks,g.head=ko,g.identity=Vc,g.includes=gu,g.indexOf=So,g.inRange=oc,g.invoke=Hh,g.isArguments=wh,g.isArray=kh,g.isArrayBuffer=Sh,g.isArrayLike=Qu,g.isArrayLikeObject=Xu,g.isBoolean=Yu,g.isBuffer=_h,g.isDate=Ch,g.isElement=Zu,g.isEmpty=es,g.isEqual=ts,g.isEqualWith=rs,g.isError=ns,g.isFinite=is,g.isFunction=as,g.isInteger=os,g.isLength=us,g.isMap=Ph,g.isMatch=ls,g.isMatchWith=fs,g.isNaN=hs,g.isNative=ms,g.isNil=ps,g.isNull=ds,g.isNumber=vs,g.isObject=ss,g.isObjectLike=cs,g.isPlainObject=gs,g.isRegExp=Ah,g.isSafeInteger=ys,g.isSet=Oh,g.isString=bs,g.isSymbol=ws,g.isTypedArray=Eh,g.isUndefined=ks,g.isWeakMap=Ss,g.isWeakSet=_s,g.join=Co,g.kebabCase=zh,g.last=Po,g.lastIndexOf=Ao,g.lowerCase=$h,g.lowerFirst=Qh,g.lt=Ih,g.lte=xh,g.max=Yc,g.maxBy=Zc,g.mean=el,g.meanBy=tl,g.min=rl,g.minBy=nl,g.stubArray=qc,g.stubFalse=Jc,g.stubObject=Wc,g.stubString=Gc,g.stubTrue=zc,g.multiply=vm,g.nth=Oo,g.noConflict=Mc,g.noop=Hc,g.now=ch,g.pad=mc,g.padEnd=dc,g.padStart=pc,g.parseInt=vc,g.random=uc,g.reduce=wu,g.reduceRight=ku,g.repeat=gc,g.replace=yc,g.result=Qs,g.round=gm,g.runInContext=e,g.sample=_u,g.size=Au,g.snakeCase=Xh,g.some=Ou,g.sortedIndex=Vo,g.sortedIndexBy=Ro,g.sortedIndexOf=To,g.sortedLastIndex=Do,g.sortedLastIndexBy=Uo,g.sortedLastIndexOf=Mo,g.startCase=Yh,g.startsWith=wc,g.subtract=ym,g.sum=il,g.sumBy=al,g.template=kc,g.times=$c,g.toFinite=Ps,g.toInteger=As,g.toLength=Os,g.toLower=Sc,g.toNumber=Es,g.toSafeInteger=xs,g.toString=Bs,g.toUpper=_c,g.trim=Cc,g.trimEnd=Pc,g.trimStart=Ac,g.truncate=Oc,g.unescape=Ec,g.uniqueId=Xc,g.upperCase=Zh,g.upperFirst=em,g.each=pu,g.eachRight=vu,g.first=ko,Uc(g,function(){var e={};return an(g,function(t,r){wl.call(g.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),g.VERSION=re,o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){g[e].placeholder=g}),o(["drop","take"],function(e,t){Y.prototype[e]=function(r){r=r===te?1:$l(As(r),0);var n=this.__filtered__&&!t?new Y(this):this.clone();return n.__filtered__?n.__takeCount__=Ql(r,n.__takeCount__):n.__views__.push({size:Ql(r,Re),type:e+(n.__dir__<0?"Right":"")}),n},Y.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==Ee||r==xe;Y.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ca(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),o(["head","last"],function(e,t){var r="take"+(t?"Right":"");Y.prototype[e]=function(){return this[r](1).value()[0]}}),o(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Y.prototype[e]=function(){return this.__filtered__?new Y(this):this[r](1)}}),Y.prototype.compact=function(){return this.filter(Vc)},Y.prototype.find=function(e){return this.filter(e).head()},Y.prototype.findLast=function(e){return this.reverse().find(e)},Y.prototype.invokeMap=ai(function(e,t){return"function"==typeof e?new Y(this):this.map(function(r){return En(r,e,t)})}),Y.prototype.reject=function(e){return this.filter(Tu(Ca(e)))},Y.prototype.slice=function(e,t){e=As(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Y(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==te&&(t=As(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},Y.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Y.prototype.toArray=function(){return this.take(Re)},an(Y.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=g[n?"take"+("last"==t?"Right":""):t],a=n||/^find/.test(t);i&&(g.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,u=t instanceof Y,s=o[0],c=u||kh(t),l=function(e){var t=i.apply(g,m([e],o));return n&&f?t[0]:t};c&&r&&"function"==typeof s&&1!=s.length&&(u=c=!1);var f=this.__chain__,h=!!this.__actions__.length,d=a&&!f,p=u&&!h;if(!a&&c){t=p?t:new Y(this);var v=e.apply(t,o);return v.__actions__.push({func:ru,args:[l],thisArg:te}),new z(v,f)}return d&&p?e.apply(this,o):(v=this.thru(l),d?n?v.value()[0]:v.value():v)})}),o(["pop","push","shift","sort","splice","unshift"],function(e){var t=pl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);g.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(kh(i)?i:[],e)}return this[r](function(r){return t.apply(kh(r)?r:[],e)})}}),an(Y.prototype,function(e,t){var r=g[t];if(r){var n=r.name+"",i=cf[n]||(cf[n]=[]);i.push({name:t,func:r})}}),cf[ta(te,pe).name]=[{name:"wrapper",func:te}],Y.prototype.clone=Z,Y.prototype.reverse=Ht,Y.prototype.value=Yt,g.prototype.at=eh,g.prototype.chain=nu,g.prototype.commit=iu,g.prototype.next=au,g.prototype.plant=uu,g.prototype.reverse=su,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=cu,g.prototype.first=g.prototype.head,Tl&&(g.prototype[Tl]=ou),g},kn=wn();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nn._=kn,define(function(){return kn})):on?((on.exports=kn)._=kn,an._=kn):nn._=kn}).call(this)},function(e,t,r){(function(r){function n(e,t){if(e instanceof o)return e;if("string"!=typeof e)return null;if(e.length>X)return null;var r=t?ee[ge]:ee[de];if(!r.test(e))return null;try{return new o(e,t)}catch(e){return null}}function i(e,t){var r=n(e,t);return r?r.version:null}function a(e,t){var r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}function o(e,t){if(e instanceof o){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>X)throw new TypeError("version is longer than "+X+" characters");if(!(this instanceof o))return new o(e,t);Q("SemVer",e,t),this.loose=t;var r=e.trim().match(t?ee[ge]:ee[de]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Y||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Y||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Y||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<Y)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}function u(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new o(e,r).inc(t,n).version}catch(e){return null}}function s(e,t){if(k(e,t))return null;var r=n(e),i=n(t);if(r.prerelease.length||i.prerelease.length){for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==i[a])return"pre"+a;return"prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==i[a])return a}function c(e,t){var r=qe.test(e),n=qe.test(t);return r&&n&&(e=+e,t=+t),r&&!n?-1:n&&!r?1:e<t?-1:e>t?1:0}function l(e,t){return c(t,e)}function f(e,t){return new o(e,t).major}function h(e,t){return new o(e,t).minor}function m(e,t){return new o(e,t).patch}function d(e,t,r){return new o(e,r).compare(new o(t,r))}function p(e,t){return d(e,t,!0)}function v(e,t,r){return d(t,e,r)}function g(e,r){return e.sort(function(e,n){return t.compare(e,n,r)})}function y(e,r){return e.sort(function(e,n){return t.rcompare(e,n,r)})}function b(e,t,r){return d(e,t,r)>0}function w(e,t,r){return d(e,t,r)<0}function k(e,t,r){return 0===d(e,t,r)}function S(e,t,r){return 0!==d(e,t,r)}function _(e,t,r){return d(e,t,r)>=0}function C(e,t,r){return d(e,t,r)<=0}function P(e,t,r,n){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e===r;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),i=e!==r;break;case"":case"=":case"==":i=k(e,r,n);break;case"!=":i=S(e,r,n);break;case">":i=b(e,r,n);break;case">=":i=_(e,r,n);break;case"<":i=w(e,r,n);break;case"<=":i=C(e,r,n);break;default:throw new TypeError("Invalid operator: "+t)}return i}function A(e,t){if(e instanceof A){if(e.loose===t)return e;e=e.value}return this instanceof A?(Q("comparator",e,t),this.loose=t,this.parse(e),this.semver===Je?this.value="":this.value=this.operator+this.semver.version,void Q("comp",this)):new A(e,t)}function O(e,t){if(e instanceof O)return e.loose===t?e:new O(e.raw,t);if(e instanceof A)return new O(e.value,t);if(!(this instanceof O))return new O(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function E(e,t){return new O(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function I(e,t){return Q("comp",e),e=j(e,t),Q("caret",e),e=B(e,t),Q("tildes",e),e=R(e,t),Q("xrange",e),e=D(e,t),Q("stars",e),e}function x(e){return!e||"x"===e.toLowerCase()||"*"===e}function B(e,t){return e.trim().split(/\s+/).map(function(e){return N(e,t)}).join(" ")}function N(e,t){var r=t?ee[xe]:ee[Ie];return e.replace(r,function(t,r,n,i,a){Q("tilde",e,t,r,n,i,a);var o;return x(r)?o="":x(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":x(i)?o=">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":a?(Q("replaceTilde pr",a),"-"!==a.charAt(0)&&(a="-"+a),o=">="+r+"."+n+"."+i+a+" <"+r+"."+(+n+1)+".0"):o=">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0",Q("tilde return",o),o})}function j(e,t){return e.trim().split(/\s+/).map(function(e){return V(e,t)}).join(" ")}function V(e,t){Q("caret",e,t);var r=t?ee[Re]:ee[Ve];return e.replace(r,function(t,r,n,i,a){Q("caret",e,t,r,n,i,a);var o;return x(r)?o="":x(n)?o=">="+r+".0.0 <"+(+r+1)+".0.0":x(i)?o="0"===r?">="+r+"."+n+".0 <"+r+"."+(+n+1)+".0":">="+r+"."+n+".0 <"+(+r+1)+".0.0":a?(Q("replaceCaret pr",a),"-"!==a.charAt(0)&&(a="-"+a),o="0"===r?"0"===n?">="+r+"."+n+"."+i+a+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+a+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+a+" <"+(+r+1)+".0.0"):(Q("no pr"),o="0"===r?"0"===n?">="+r+"."+n+"."+i+" <"+r+"."+n+"."+(+i+1):">="+r+"."+n+"."+i+" <"+r+"."+(+n+1)+".0":">="+r+"."+n+"."+i+" <"+(+r+1)+".0.0"),Q("caret return",o),o})}function R(e,t){return Q("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return T(e,t)}).join(" ")}function T(e,t){e=e.trim();var r=t?ee[Ce]:ee[_e];return e.replace(r,function(t,r,n,i,a,o){Q("xRange",e,t,r,n,i,a,o);var u=x(n),s=u||x(i),c=s||x(a),l=c;return"="===r&&l&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(s&&(i=0),c&&(a=0),">"===r?(r=">=",s?(n=+n+1,i=0,a=0):c&&(i=+i+1,a=0)):"<="===r&&(r="<",s?n=+n+1:i=+i+1),t=r+n+"."+i+"."+a):s?t=">="+n+".0.0 <"+(+n+1)+".0.0":c&&(t=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0"),Q("xRange return",t),t})}function D(e,t){return Q("replaceStars",e,t),e.trim().replace(ee[Fe],"")}function U(e,t,r,n,i,a,o,u,s,c,l,f,h){return t=x(r)?"":x(n)?">="+r+".0.0":x(i)?">="+r+"."+n+".0":">="+t,u=x(s)?"":x(c)?"<"+(+s+1)+".0.0":x(l)?"<"+s+"."+(+c+1)+".0":f?"<="+s+"."+c+"."+l+"-"+f:"<="+u,(t+" "+u).trim()}function M(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(var r=0;r<e.length;r++)if(Q(e[r].semver),e[r].semver!==Je&&e[r].semver.prerelease.length>0){var n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}function H(e,t,r){try{t=new O(t,r)}catch(e){return!1}return t.test(e)}function L(e,t,r){var n=null,i=null;try{var a=new O(t,r)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(n&&i.compare(e)!==-1||(n=e,i=new o(n,r)))}),n}function F(e,t,r){var n=null,i=null;try{var a=new O(t,r)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(n&&1!==i.compare(e)||(n=e,i=new o(n,r)))}),n}function K(e,t){try{return new O(e,t).range||"*"}catch(e){return null}}function q(e,t,r){return W(e,t,"<",r)}function J(e,t,r){return W(e,t,">",r)}function W(e,t,r,n){e=new o(e,n),t=new O(t,n);var i,a,u,s,c;switch(r){case">":i=b,a=C,u=w,s=">",c=">=";break;case"<":i=w,a=_,u=b,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(H(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var f=t.set[l],h=null,m=null;if(f.forEach(function(e){e.semver===Je&&(e=new A(">=0.0.0")),h=h||e,m=m||e,i(e.semver,h.semver,n)?h=e:u(e.semver,m.semver,n)&&(m=e)}),h.operator===s||h.operator===c)return!1;if((!m.operator||m.operator===s)&&a(e,m.semver))return!1;if(m.operator===c&&u(e,m.semver))return!1}return!0}function G(e,t){var r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}function z(e,t,r){return e=new O(e,r),t=new O(t,r),e.intersects(t)}function $(e){if(e instanceof o)return e;if("string"!=typeof e)return null;var t=e.match(ee[Pe]);return null==t?null:n((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}t=e.exports=o;var Q;Q="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER")}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var X=256,Y=Number.MAX_SAFE_INTEGER||9007199254740991,Z=16,ee=t.re=[],te=t.src=[],re=0,ne=re++;te[ne]="0|[1-9]\\d*";var ie=re++;te[ie]="[0-9]+";var ae=re++;te[ae]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var oe=re++;te[oe]="("+te[ne]+")\\.("+te[ne]+")\\.("+te[ne]+")";var ue=re++;te[ue]="("+te[ie]+")\\.("+te[ie]+")\\.("+te[ie]+")";var se=re++;te[se]="(?:"+te[ne]+"|"+te[ae]+")";var ce=re++;te[ce]="(?:"+te[ie]+"|"+te[ae]+")";var le=re++;te[le]="(?:-("+te[se]+"(?:\\."+te[se]+")*))";var fe=re++;te[fe]="(?:-?("+te[ce]+"(?:\\."+te[ce]+")*))";var he=re++;te[he]="[0-9A-Za-z-]+";var me=re++;te[me]="(?:\\+("+te[he]+"(?:\\."+te[he]+")*))";var de=re++,pe="v?"+te[oe]+te[le]+"?"+te[me]+"?";te[de]="^"+pe+"$";var ve="[v=\\s]*"+te[ue]+te[fe]+"?"+te[me]+"?",ge=re++;te[ge]="^"+ve+"$";var ye=re++;te[ye]="((?:<|>)?=?)";var be=re++;te[be]=te[ie]+"|x|X|\\*";var we=re++;te[we]=te[ne]+"|x|X|\\*";var ke=re++;te[ke]="[v=\\s]*("+te[we]+")(?:\\.("+te[we]+")(?:\\.("+te[we]+")(?:"+te[le]+")?"+te[me]+"?)?)?";var Se=re++;te[Se]="[v=\\s]*("+te[be]+")(?:\\.("+te[be]+")(?:\\.("+te[be]+")(?:"+te[fe]+")?"+te[me]+"?)?)?";var _e=re++;te[_e]="^"+te[ye]+"\\s*"+te[ke]+"$";var Ce=re++;te[Ce]="^"+te[ye]+"\\s*"+te[Se]+"$";var Pe=re++;te[Pe]="(?:^|[^\\d])(\\d{1,"+Z+"})(?:\\.(\\d{1,"+Z+"}))?(?:\\.(\\d{1,"+Z+"}))?(?:$|[^\\d])";var Ae=re++;te[Ae]="(?:~>?)";var Oe=re++;te[Oe]="(\\s*)"+te[Ae]+"\\s+",ee[Oe]=new RegExp(te[Oe],"g");var Ee="$1~",Ie=re++;te[Ie]="^"+te[Ae]+te[ke]+"$";var xe=re++;te[xe]="^"+te[Ae]+te[Se]+"$";var Be=re++;te[Be]="(?:\\^)";var Ne=re++;te[Ne]="(\\s*)"+te[Be]+"\\s+",ee[Ne]=new RegExp(te[Ne],"g");var je="$1^",Ve=re++;te[Ve]="^"+te[Be]+te[ke]+"$";var Re=re++;te[Re]="^"+te[Be]+te[Se]+"$";var Te=re++;te[Te]="^"+te[ye]+"\\s*("+ve+")$|^$";var De=re++;te[De]="^"+te[ye]+"\\s*("+pe+")$|^$";var Ue=re++;te[Ue]="(\\s*)"+te[ye]+"\\s*("+ve+"|"+te[ke]+")",ee[Ue]=new RegExp(te[Ue],"g");var Me="$1$2$3",He=re++;te[He]="^\\s*("+te[ke]+")\\s+-\\s+("+te[ke]+")\\s*$";var Le=re++;te[Le]="^\\s*("+te[Se]+")\\s+-\\s+("+te[Se]+")\\s*$";var Fe=re++;te[Fe]="(<|>)?=?\\s*\\*";for(var Ke=0;Ke<re;Ke++)Q(Ke,te[Ke]),ee[Ke]||(ee[Ke]=new RegExp(te[Ke]));t.parse=n,t.valid=i,t.clean=a,t.SemVer=o,o.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},o.prototype.toString=function(){return this.version},o.prototype.compare=function(e){return Q("SemVer.compare",this.version,this.loose,e),e instanceof o||(e=new o(e,this.loose)),this.compareMain(e)||this.comparePre(e)},o.prototype.compareMain=function(e){return e instanceof o||(e=new o(e,this.loose)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)},o.prototype.comparePre=function(e){if(e instanceof o||(e=new o(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(Q("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return c(r,n)}while(++t)},o.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=u,t.diff=s,t.compareIdentifiers=c;var qe=/^[0-9]+$/;t.rcompareIdentifiers=l,t.major=f,t.minor=h,t.patch=m,t.compare=d,t.compareLoose=p,t.rcompare=v,t.sort=g,t.rsort=y,t.gt=b,t.lt=w,t.eq=k,t.neq=S,t.gte=_,t.lte=C,t.cmp=P,t.Comparator=A;var Je={};A.prototype.parse=function(e){var t=this.loose?ee[Te]:ee[De],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new o(r[2],this.loose):this.semver=Je},A.prototype.toString=function(){return this.value},A.prototype.test=function(e){return Q("Comparator.test",e,this.loose),this.semver===Je||("string"==typeof e&&(e=new o(e,this.loose)),P(e,this.operator,this.semver,this.loose))},A.prototype.intersects=function(e,t){if(!(e instanceof A))throw new TypeError("a Comparator is required");var r;if(""===this.operator)return r=new O(e.value,t),H(this.value,r,t);if(""===e.operator)return r=new O(this.value,t),H(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),u=P(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=P(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||a&&o||u||s},t.Range=O,O.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},O.prototype.toString=function(){return this.range},O.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),Q("range",e,t);var r=t?ee[Le]:ee[He];e=e.replace(r,U),Q("hyphen replace",e),e=e.replace(ee[Ue],Me),Q("comparator trim",e,ee[Ue]),e=e.replace(ee[Oe],Ee),e=e.replace(ee[Ne],je),e=e.split(/\s+/).join(" ");var n=t?ee[Te]:ee[De],i=e.split(" ").map(function(e){return I(e,t)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(e){return!!e.match(n)})),i=i.map(function(e){return new A(e,t)})},O.prototype.intersects=function(e,t){if(!(e instanceof O))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(r){return e.set.some(function(e){return e.every(function(e){return r.intersects(e,t)})})})})},t.toComparators=E,O.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new o(e,this.loose));for(var t=0;t<this.set.length;t++)if(M(this.set[t],e))return!0;return!1},t.satisfies=H,t.maxSatisfying=L,t.minSatisfying=F,t.validRange=K,t.ltr=q,t.gtr=J,t.outside=W,t.prerelease=G,t.intersects=z,t.coerce=$}).call(t,r(330))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){p&&m&&(p=!1,m.length?d=m.concat(d):v=-1,d.length&&u())}function u(){if(!p){var e=i(o);p=!0;for(var t=d.length;t;){for(m=d,d=[];++v<t;)m&&m[v].run();v=-1,t=d.length}m=null,p=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var m,d=[],p=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new s(e,t)),1!==d.length||p||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i="https://localhost:10443/v1",a="/trust1team/gclds/v1",o="/trust1team/ocv-api/v1",u="/gcl-ds-web/v1",s="/trust1team/gclds-file/v1",c=!0,l=!1,f=!1,h=function(){function e(e,t){this._gclUrl=i,this._dsUrl=e+a,this._ocvUrl=e+o,this._dsFileDownloadUrl=e+s,this._dsUrlBase=e,this._apiKey=t,this._jwt="none",this._citrix=!1,this._agentPort=-1,this._allowAutoUpdate=c,this._implicitDownload=l,this._localTestMode=f,this._forceHardwarePinpad=!1,this._defaultSessionTimeout=5,this._defaultConsentDuration=1,this._defaultConsentTimeout=10,this._syncManaged=!0}return Object.defineProperty(e.prototype,"ocvUrl",{get:function(){return this._ocvUrl},set:function(e){this._ocvUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gclUrl",{get:function(){return this._gclUrl},set:function(e){this._gclUrl=e||i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsUrl",{get:function(){return this._dsUrl},set:function(e){n.endsWith(e,a)?(this._dsUrlBase=n.replace(e,a,""),this._dsUrl=e,this._dsFileDownloadUrl=this._dsUrlBase+s,this._ocvUrl=this._dsUrlBase+o):(this._dsUrl=e+a,this._dsFileDownloadUrl=e+s,this._dsUrlBase=e,this._ocvUrl=e+o)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){return this._apiKey},set:function(e){this._apiKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowAutoUpdate",{get:function(){return this._allowAutoUpdate},set:function(e){this._allowAutoUpdate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_id",{get:function(){return this._client_id},set:function(e){this._client_id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client_secret",{get:function(){return this._client_secret},set:function(e){this._client_secret=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jwt",{get:function(){return this._jwt},set:function(e){this._jwt=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citrix",{get:function(){return this._citrix},set:function(e){this._citrix=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"agentPort",{get:function(){return this._agentPort},set:function(e){this._agentPort=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implicitDownload",{get:function(){return this._implicitDownload},set:function(e){this._implicitDownload=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsFileDownloadUrl",{get:function(){return this._dsFileDownloadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsUrlBase",{get:function(){return this._dsUrlBase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localTestMode",{get:function(){return this._localTestMode},set:function(e){this._localTestMode=e,this._localTestMode&&(this._dsUrl=this._dsUrlBase+u)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceHardwarePinpad",{get:function(){return this._forceHardwarePinpad},set:function(e){this._forceHardwarePinpad=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultSessionTimeout",{get:function(){return this._defaultSessionTimeout},set:function(e){this._defaultSessionTimeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tokenCompatible",{get:function(){return this._tokenCompatible},set:function(e){this._tokenCompatible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultConsentDuration",{get:function(){return this._defaultConsentDuration},set:function(e){this._defaultConsentDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultConsentTimeout",{get:function(){return this._defaultConsentTimeout},set:function(e){this._defaultConsentTimeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"syncManaged",{get:function(){return this._syncManaged},set:function(e){this._syncManaged=e},enumerable:!0,configurable:!0}),e}();t.GCLConfig=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=r(333),a=r(335),o=r(336),u="/consent",s="/",c="/plugins",l="/card-readers",f="/admin/activate",h="/admin/certificate",m=function(){function e(e,t){this.url=e,this.connection=t}return e.cardInsertedFilter=function(e){return{"card-inserted":e}},e.platformInfo=function(){return{data:{manufacturer:i.manufacturer||"",browser:{name:i.name,version:i.version},os:{name:i.os.family,version:i.os.version,architecture:i.os.architecture},ua:i.ua},success:!0}},e.prototype.activate=function(e){return this.connection.post(this.url,f,{},void 0,e)},e.prototype.getConsent=function(e,t,r,n,i,o,s,c){if(!e||!e.length)return a.ResponseHandler.error({status:400,description:"Title is required!",code:"801"},c);if(!t||!t.length)return a.ResponseHandler.error({status:400,description:"Code word is required!",code:"801"},c);var l=this.connection.cfg.defaultConsentDuration;r&&(l=r);var f=this.connection.cfg.defaultConsentTimeout;return s&&(f=s),this.connection.post(this.url,u,{title:e,text:t,days:l,alert_level:n,alert_position:i,type:o,timeout:f},void 0,c)},e.prototype.getPubKey=function(e){return this.connection.get(this.url,h,void 0,e)},e.prototype.info=function(e){return this.connection.getSkipCitrix(this.url,s,void 0,e)},e.prototype.infoBrowser=function(t){return t?void t(null,e.platformInfo()):o.resolve(e.platformInfo())},e.prototype.plugins=function(e){return this.connection.getSkipCitrix(this.url,c,void 0,e)},e.prototype.pollCardInserted=function(e,t,r,i,a){function u(e,o){n.delay(function(){--s,c.readers(function(c,l){if(c&&(r&&r(),u(e,o)),0===s){if(a)return a();o&&o({success:!1,message:"Timed out"})}else if(0===l.data.length)r&&r(),u(e,o);else{var f=n.find(l.data,function(e){return n.has(e,"card")});null!=f?(t(null,f),e(f)):(i&&i(),u(e,o))}})},1e3)}var s=e||30,c=this;return t&&"function"==typeof t||(t=function(){}),new o(function(e,t){u(e,t)})},e.prototype.pollReadersWithCards=function(e,t,r,i,a){function u(e,o){n.delay(function(){--s,c.readers(function(c,l){if(c&&(r&&r(),u(e,o)),0===s){if(a)return a();o&&o({success:!1,message:"Timed out"})}else if(n.isEmpty(l)||n.isEmpty(l.data))r&&r(),u(e,o);else{var f=n.filter(l.data,function(e){return n.has(e,"card")});if(f.length){var h={data:f,success:!0};t(null,h),e(h)}else i&&i(),u(e,o)}})},1e3)}var s=e||30,c=this;return t&&"function"==typeof t||(t=function(){}),new o(function(e,t){u(e,t)})},e.prototype.pollReaders=function(e,t,r,i){function a(e,o){n.delay(function(){--u,s.readers(function(s,c){if(s&&(r&&r(),a(e,o)),0===u){if(i)return i();o&&o({success:!1,message:"Timed out"})}else n.isEmpty(c)||n.isEmpty(c.data)?(r&&r(),a(e,o)):(t(null,c),e(c))})},1e3)}var u=e||30,s=this;return t&&"function"==typeof t||(t=function(){}),new o(function(e,t){a(e,t)})},e.prototype.reader=function(e,t){return this.connection.get(this.url,l+"/"+e,void 0,t)},e.prototype.readers=function(e){return this.connection.get(this.url,l,void 0,e)},e.prototype.readersCardAvailable=function(t){return this.connection.get(this.url,l,e.cardInsertedFilter(!0),t)},e.prototype.readersCardsUnavailable=function(t){return this.connection.get(this.url,l,e.cardInsertedFilter(!1),t)},e.prototype.setPubKey=function(e,t){return this.connection.put(this.url,h,{certificate:e},void 0,t)},e.prototype.infoBrowserSync=function(){return e.platformInfo()},e.prototype.getUrl=function(){return this.url},e.prototype.version=function(){return o.resolve("v1.5.2")},e}();t.CoreService=m},function(e,t,r){var n;(function(e,i){(function(){"use strict";function a(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t,r){var n={6.4:"10",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),e=s(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").split(" on ")[0])}function u(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=S)for(;++r<n;)t(e[r],r,e);else c(e,t)}function s(e){return e=d(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:a(e)}function c(e,t){for(var r in e)A.call(e,r)&&t(e[r],r,e)}function l(e){return null==e?a(e):O.call(e).slice(8,-1)}function f(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}function h(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var r=null;return u(e,function(n,i){r=t(r,n,i,e)}),r}function d(e){return String(e).replace(/^ +| +$/g,"")}function p(e){function t(t){return m(t,function(t,r){return t||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(e)&&(r.label||r)})}function r(t){return m(t,function(t,r,n){return t||(r[$]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec($)]||RegExp("\\b"+h(n)+"(?:\\b|\\w*\\d)","i").exec(e))&&n;
})}function n(t){return m(t,function(t,r){return t||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(e)&&(r.label||r)})}function i(t){return m(t,function(t,r){var n=r.pattern||h(r);return!t&&(t=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=o(t,n,r.label||r)),t})}function a(t){return m(t,function(t,r){var n=r.pattern||h(r);return!t&&(t=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),r=r.label||r,t=s(t[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function u(t){return m(t,function(t,r){return t||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function v(){return this.description||""}var b=g,w=e&&"object"==typeof e&&"String"!=l(e);w&&(b=e,e=null);var k=b.navigator||{},S=k.userAgent||"";e||(e=S);var P,A,E=w||C==y,I=w?!!k.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(O.toString()),x="Object",B=w?x:"ScriptBridgingProxyObject",N=w?x:"Environment",j=w&&b.java?"JavaPackage":l(b.java),V=w?x:"RuntimeObject",R=/\bJava/.test(j)&&b.java,T=R&&l(b.environment)==N,D=R?"a":"α",U=R?"b":"β",M=b.document||{},H=b.operamini||b.opera,L=_.test(L=w&&H?H["[[Class]]"]:l(H))?L:H=null,F=e,K=[],q=null,J=e==S,W=J&&H&&"function"==typeof H.version&&H.version(),G=t(["Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),z=n(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),$=a([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Q=r({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),X=i(["Windows Phone ","Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(G&&(G=[G]),Q&&!$&&($=a([Q])),(P=/\bGoogle TV\b/.exec($))&&($=P[0]),/\bSimulator\b/i.test(e)&&($=($?$+" ":"")+"Simulator"),"Opera Mini"==z&&/\bOPiOS\b/.test(e)&&K.push("running in Turbo/Uncompressed mode"),/^iP/.test($)?(z||(z="Safari"),X="iOS"+((P=/ OS ([\d_]+)/i.exec(e))?" "+P[1].replace(/_/g,"."):"")):"Konqueror"!=z||/buntu/i.test(X)?Q&&"Google"!=Q&&(/Chrome/.test(z)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test($))?(z="Android Browser",X=/\bAndroid\b/.test(X)?X:"Android"):z&&!(P=!/\bMinefield\b|\(Android;/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(z))||(z&&!$&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(P+"/")+8))&&(z=null),(P=$||Q||X)&&($||Q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(X))&&(z=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(X)?X:P)+" Browser")):X="Kubuntu",(P=/\((Mobile|Tablet).*?Firefox\b/i.exec(e))&&P[1]&&(X="Firefox OS",$||($=P[1])),W||(W=u(["(?:Cloud9|CriOS|CrMo|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",h(z),"(?:Firefox|Minefield|NetFront)"])),"iCab"==G&&parseFloat(W)>3?G=["WebKit"]:"Trident"!=G&&(P=/\bOpera\b/.test(z)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&"WebKit"||!G&&/\bMSIE\b/i.test(e)&&("Mac OS"==X?"Tasman":"Trident"))?G=[P]:/\bPlayStation\b(?! Vita\b)/i.test(z)&&"WebKit"==G&&(G=["NetFront"]),"IE"==z&&(P=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(z+=" Mobile",X="Windows Phone "+(/\+$/.test(P)?P:P+".x"),K.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(z="IE Mobile",X="Windows Phone 8+",K.unshift("desktop mode"),W||(W=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=z&&"Trident"==G&&(P=/\brv:([\d.]+)/.exec(e))?(/\bWPDesktop\b/i.test(e)||(z&&K.push("identifying as "+z+(W?" "+W:"")),z="IE"),W=P[1]):"Chrome"!=z&&"IE"==z||!(P=/\bEdge\/([\d.]+)/.exec(e))||(z="Microsoft Edge",W=P[1],G=["Trident"]),J){if(f(b,"global"))if(R&&(P=R.lang.System,F=P.getProperty("os.arch"),X=X||P.getProperty("os.name")+" "+P.getProperty("os.version")),E&&f(b,"system")&&(P=[b.system])[0]){X||(X=P[0].os||null);try{P[1]=b.require("ringo/engine").version,W=P[1].join("."),z="RingoJS"}catch(e){P[0].global.system==b.system&&(z="Narwhal")}}else"object"==typeof b.process&&(P=b.process)?(z="Node.js",F=P.arch,X=P.platform,W=/[\d.]+/.exec(P.version)[0]):T&&(z="Rhino");else l(P=b.runtime)==B?(z="Adobe AIR",X=P.flash.system.Capabilities.os):l(P=b.phantom)==V?(z="PhantomJS",W=(P=P.version||null)&&P.major+"."+P.minor+"."+P.patch):"number"==typeof M.documentMode&&(P=/\bTrident\/(\d+)/i.exec(e))&&(W=[W,M.documentMode],(P=+P[1]+4)!=W[1]&&(K.push("IE "+W[1]+" mode"),G&&(G[1]=""),W[1]=P),W="IE"==z?String(W[1].toFixed(1)):W[0]);X=X&&s(X)}W&&(P=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(W)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(J&&k.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(q=/b/i.test(P)?"beta":"alpha",W=W.replace(RegExp(P+"\\+?$"),"")+("beta"==q?U:D)+(/\d+\+?/.exec(P)||"")),"Fennec"==z||"Firefox"==z&&/\b(?:Android|Firefox OS)\b/.test(X)?z="Firefox Mobile":"Maxthon"==z&&W?W=W.replace(/\.[\d.]+/,".x"):"Silk"==z?(/\bMobi/i.test(e)||(X="Android",K.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&K.unshift("accelerated")):/\bXbox\b/i.test($)?(X=null,"Xbox 360"==$&&/\bIEMobile\b/.test(e)&&K.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(z)&&(!z||$||/Browser|Mobi/.test(z))||"Windows CE"!=X&&!/Mobi/i.test(e)?"IE"==z&&J&&null===b.external?K.unshift("platform preview"):(/\bBlackBerry\b/.test($)||/\bBB10\b/.test(e))&&(P=(RegExp($.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||W)?(P=[P,/BB10/.test(e)],X=(P[1]?($=null,Q="BlackBerry"):"Device Software")+" "+P[0],W=null):this!=c&&"Wii"!=$&&(J&&H||/Opera/.test(z)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==z&&/\bOS X (?:\d+\.){2,}/.test(X)||"IE"==z&&(X&&!/^Win/.test(X)&&W>5.5||/\bWindows XP\b/.test(X)&&W>8||8==W&&!/\bTrident\b/.test(e)))&&!_.test(P=p.call(c,e.replace(_,"")+";"))&&P.name&&(P="ing as "+P.name+((P=P.version)?" "+P:""),_.test(z)?(/\bIE\b/.test(P)&&"Mac OS"==X&&(X=null),P="identify"+P):(P="mask"+P,z=L?s(L.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(P)&&(X=null),J||(W=null)),G=["Presto"],K.push(P)):z+=" Mobile",(P=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(P=[parseFloat(P.replace(/\.(\d)$/,".0$1")),P],"Safari"==z&&"+"==P[1].slice(-1)?(z="WebKit Nightly",q="alpha",W=P[1].slice(0,-1)):W!=P[1]&&W!=(P[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(W=null),P[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==P[0]&&537.36==P[2]&&parseFloat(P[1])>=28&&"IE"!=z&&"Microsoft Edge"!=z&&(G=["Blink"]),J&&(I||P[1])?(G&&(G[1]="like Chrome"),P=P[1]||(P=P[0],P<530?1:P<532?2:P<532.05?3:P<533?4:P<534.03?5:P<534.07?6:P<534.1?7:P<534.13?8:P<534.16?9:P<534.24?10:P<534.3?11:P<535.01?12:P<535.02?"13+":P<535.07?15:P<535.11?16:P<535.19?17:P<536.05?18:P<536.1?19:P<537.01?20:P<537.11?"21+":P<537.13?23:P<537.18?24:P<537.24?25:P<537.36?26:"Blink"!=G?"27":"28")):(G&&(G[1]="like Safari"),P=P[0],P=P<400?1:P<500?2:P<526?3:P<533?4:P<534?"4+":P<535?5:P<537?6:P<538?7:P<601?8:"8"),G&&(G[1]+=" "+(P+="number"==typeof P?".x":/[.+]/.test(P)?"":"+")),"Safari"==z&&(!W||parseInt(W)>45)&&(W=P)),"Opera"==z&&(P=/\bzbov|zvav$/.exec(X))?(z+=" ",K.unshift("desktop mode"),"zvav"==P?(z+="Mini",W=null):z+="Mobile",X=X.replace(RegExp(" *"+P+"$"),"")):"Safari"==z&&/\bChrome\b/.exec(G&&G[1])&&(K.unshift("desktop mode"),z="Chrome Mobile",W=null,/\bOS X\b/.test(X)?(Q="Apple",X="iOS 4.3+"):X=null),W&&0==W.indexOf(P=/[\d.]+$/.exec(X))&&e.indexOf("/"+P+"-")>-1&&(X=d(X.replace(P,""))),G&&!/\b(?:Avant|Nook)\b/.test(z)&&(/Browser|Lunascape|Maxthon/.test(z)||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(z)&&G[1])&&(P=G[G.length-1])&&K.push(P),K.length&&(K=["("+K.join("; ")+")"]),Q&&$&&$.indexOf(Q)<0&&K.push("on "+Q),$&&K.push((/^on /.test(K[K.length-1])?"":"on ")+$),X&&(P=/ ([\d.+]+)$/.exec(X),A=P&&"/"==X.charAt(X.length-P[0].length-1),X={architecture:32,family:P&&!A?X.replace(P[0],""):X,version:P?P[1]:null,toString:function(){var e=this.version;return this.family+(e&&!A?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(P=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(F))&&!/\bi686\b/i.test(F)&&(X&&(X.architecture=64,X.family=X.family.replace(RegExp(" *"+P),"")),z&&(/\bWOW64\b/i.test(e)||J&&/\w(?:86|32)$/.test(k.cpuClass||k.platform)&&!/\bWin64; x64\b/i.test(e))&&K.unshift("32-bit")),e||(e=null);var Y={};return Y.description=e,Y.layout=G&&G[0],Y.manufacturer=Q,Y.name=z,Y.prerelease=q,Y.product=$,Y.ua=e,Y.version=z&&W,Y.os=X||{architecture:null,family:null,version:null,toString:function(){return"null"}},Y.parse=p,Y.toString=v,Y.version&&K.unshift(W),Y.name&&K.unshift(z),X&&z&&(X!=String(X).split(" ")[0]||X!=z.split(" ")[0]&&!$)&&K.push($?"("+X+")":"on "+X),K.length&&(Y.description=K.join(" ")),Y}var v={function:!0,object:!0},g=v[typeof window]&&window||this,y=g,b=v[typeof t]&&t,w=v[typeof e]&&e&&!e.nodeType&&e,k=b&&w&&"object"==typeof i&&i;!k||k.global!==k&&k.window!==k&&k.self!==k||(g=k);var S=Math.pow(2,53)-1,_=/\bOpera/,C=this,P=Object.prototype,A=P.hasOwnProperty,O=P.toString;n=function(){return p()}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}).call(this)}).call(t,r(334)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(336),i=function(){function e(){}return e.error=function(e,t){return t&&"function"==typeof t&&t(e,null),n.reject(e)},e.response=function(e,t){return t&&"function"==typeof t&&t(null,e),n.resolve(e)},e}();t.ResponseHandler=i},function(e,t,r){"use strict";function n(){try{Promise===a&&(Promise=i)}catch(e){}return a}var i;"undefined"!=typeof Promise&&(i=Promise);var a=r(337)();a.noConflict=n,e.exports=a},function(e,t,r){(function(t){"use strict";e.exports=function(){function n(){}function i(e,t){if(null==e||e.constructor!==a)throw new b("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new b("expecting a function but got "+d.classString(t))}function a(e){e!==k&&i(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(e){this.promise._resolveCallback(e)}function u(e){this.promise._rejectCallback(e,!1)}function s(e){var t=new a(k);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var c,l=function(){return new b("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new a.PromiseInspection(this._target())},h=function(e){return a.reject(new b(e))},m={},d=r(338);c=d.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(a,"_getDomain",c);var p=r(339),v=r(340),g=new v;p.defineProperty(a,"_async",{value:g});var y=r(345),b=a.TypeError=y.TypeError;a.RangeError=y.RangeError;var w=a.CancellationError=y.CancellationError;a.TimeoutError=y.TimeoutError,a.OperationalError=y.OperationalError,a.RejectionError=y.OperationalError,a.AggregateError=y.AggregateError;var k=function(){},S={},_={},C=r(346)(a,k),P=r(347)(a,k,C,h,n),A=r(348)(a),O=A.create,E=r(349)(a,A),I=(E.CapturedTrace,r(350)(a,C,_)),x=r(351)(_),B=r(352),N=d.errorObj,j=d.tryCatch;return a.prototype.toString=function(){return"[object Promise]"},a.prototype.caught=a.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var a=arguments[r];if(!d.isObject(a))return h("Catch statement predicate: expecting an object but got "+d.classString(a));n[i++]=a}return n.length=i,e=arguments[r],this.then(void 0,x(n,e,this))}return this.then(void 0,e)},a.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},a.prototype.then=function(e,t){if(E.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(r+=", "+d.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},a.prototype.done=function(e,t){var r=this._then(e,t,void 0,void 0,void 0);r._setIsFinal()},a.prototype.spread=function(e){return"function"!=typeof e?h("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,S,void 0)},a.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},a.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new P(this).promise()},a.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},a.getNewLibraryCopy=e.exports,a.is=function(e){return e instanceof a},a.fromNode=a.fromCallback=function(e){var t=new a(k);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=j(e)(B(t,r));return n===N&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},a.all=function(e){return new P(e).promise()},a.cast=function(e){var t=C(e);return t instanceof a||(t=new a(k),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},a.resolve=a.fulfilled=a.cast,a.reject=a.rejected=function(e){var t=new a(k);return t._captureStackTrace(),t._rejectCallback(e,!0),t},a.setScheduler=function(e){if("function"!=typeof e)throw new b("expecting a function but got "+d.classString(e));return g.setScheduler(e)},a.prototype._then=function(e,t,r,n,i){var o=void 0!==i,u=o?i:new a(k),s=this._target(),l=s._bitField;o||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===n&&0!==(2097152&this._bitField)&&(n=0!==(50397184&l)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,u));var f=c();if(0!==(50397184&l)){var h,m,p=s._settlePromiseCtx;0!==(33554432&l)?(m=s._rejectionHandler0,h=e):0!==(16777216&l)?(m=s._fulfillmentHandler0,h=t,s._unsetRejectionIsUnhandled()):(p=s._settlePromiseLateCancellationObserver,m=new w("late cancellation observer"),s._attachExtraTrace(m),h=t),g.invoke(p,s,{handler:null===f?h:"function"==typeof h&&d.domainBind(f,h),promise:u,receiver:n,value:m})}else s._addCallbacks(e,t,u,n,f);return u},a.prototype._length=function(){return 65535&this._bitField},a.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},a.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},a.prototype._setLength=function(e){this._bitField=this._bitField&-65536|65535&e},a.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},a.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},a.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},a.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},a.prototype._isFinal=function(){return(4194304&this._bitField)>0},a.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},a.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},a.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},a.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},a.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==m)return void 0===t&&this._isBound()?this._boundValue():t},a.prototype._promiseAt=function(e){return this[4*e-4+2]},a.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},a.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},a.prototype._boundValue=function(){},a.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),r=e._rejectionHandler0,n=e._promise0,i=e._receiverAt(0);void 0===i&&(i=m),this._addCallbacks(t,r,n,i,null)},a.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),i=e._promiseAt(t),a=e._receiverAt(t);void 0===a&&(a=m),this._addCallbacks(r,n,i,a,null)},a.prototype._addCallbacks=function(e,t,r,n,i){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:d.domainBind(i,t));else{var o=4*a-4;this[o+2]=r,this[o+3]=n,"function"==typeof e&&(this[o+0]=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this[o+1]=null===i?t:d.domainBind(i,t))}return this._setLength(a+1),a},a.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},a.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var r=C(e,this);if(!(r instanceof a))return this._fulfill(e);t&&this._propagateFrom(r,2);var n=r._target();if(n===this)return void this._reject(l());var i=n._bitField;if(0===(50397184&i)){var o=this._length();o>0&&n._migrateCallback0(this);for(var u=1;u<o;++u)n._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!==(33554432&i))this._fulfill(n._value());else if(0!==(16777216&i))this._reject(n._reason());else{var s=new w("late cancellation observer");n._attachExtraTrace(s),this._reject(s)}}},a.prototype._rejectCallback=function(e,t,r){var n=d.ensureErrorObject(e),i=n===e;if(!i&&!r&&E.warnings()){var a="a promise was rejected with a non-error: "+d.classString(e);this._warn(a,!0)}this._attachExtraTrace(n,!!t&&i),this._reject(e)},a.prototype._resolveFromExecutor=function(e){if(e!==k){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},a.prototype._settlePromiseFromHandler=function(e,t,r,n){var i=n._bitField;if(0===(65536&i)){n._pushContext();var a;t===S?r&&"number"==typeof r.length?a=j(e).apply(this._boundValue(),r):(a=N,a.e=new b("cannot .spread() a non-array: "+d.classString(r))):a=j(e).call(t,r);var o=n._popContext();i=n._bitField,0===(65536&i)&&(a===_?n._reject(r):a===N?n._rejectCallback(a.e,!1):(E.checkForgottenReturns(a,o,"",n,this),n._resolveCallback(a)))}},a.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},a.prototype._followee=function(){return this._rejectionHandler0},a.prototype._setFollowee=function(e){this._rejectionHandler0=e},a.prototype._settlePromise=function(e,t,r,i){var o=e instanceof a,u=this._bitField,s=0!==(134217728&u);0!==(65536&u)?(o&&e._invokeInternalOnCancel(),r instanceof I&&r.isFinallyHandler()?(r.cancelPromise=e,j(t).call(r,i)===N&&e._reject(N.e)):t===f?e._fulfill(f.call(r)):r instanceof n?r._promiseCancelled(e):o||e instanceof P?e._cancel():r.cancel()):"function"==typeof t?o?(s&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,i,e)):t.call(r,i,e):r instanceof n?r._isResolved()||(0!==(33554432&u)?r._promiseFulfilled(i,e):r._promiseRejected(i,e)):o&&(s&&e._setAsyncGuaranteed(),0!==(33554432&u)?e._fulfill(i):e._reject(i))},a.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,i=e.value;"function"==typeof t?r instanceof a?this._settlePromiseFromHandler(t,n,i,r):t.call(n,i,r):r instanceof a&&r._reject(i)},a.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},a.prototype._settlePromise0=function(e,t,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},a.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},a.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=l();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():g.settlePromises(this))}},a.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?g.fatalError(e,d.isNode):void((65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},a.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),a=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,a,t)}},a.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),a=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,a,t)}},a.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},a.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},a.defer=a.pending=function(){E.deprecated("Promise.defer","new Promise");var e=new a(k);return{promise:e,resolve:o,reject:u}},d.notEnumerableProp(a,"_makeSelfResolutionError",l),r(353)(a,k,C,h,E),r(354)(a,k,C,E),r(355)(a,P,h,E),r(356)(a),r(357)(a),r(358)(a,P,C,k,g,c),a.Promise=a,a.version="3.5.1",r(359)(a,P,h,C,k,E),r(360)(a),r(361)(a,h,C,O,k,E),r(362)(a,k,E),r(363)(a,h,k,C,n,E),r(364)(a),r(365)(a,k),r(366)(a,P,C,h),r(367)(a,k,C,h),r(368)(a,P,h,C,k,E),r(369)(a,P,E),r(370)(a,P,h),r(371)(a,k),r(372)(a,k),r(373)(a),d.toFastProperties(a),d.toFastProperties(a.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new a(k)),E.setBounds(v.firstLineError,d.lastLineError),a}}).call(t,r(330))},function(e,t,r){(function(t,n){"use strict";function i(){try{var e=x;return x=null,e.apply(this,arguments)}catch(e){return I.e=e,I}}function a(e){return x=e,i}function o(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return o(e)?new Error(g(e)):e}function c(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=e[r];return i[r]=t,i}function l(e,t,r){if(!O.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function f(e,t,r){if(o(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return O.defineProperty(e,t,n),e}function h(e){throw e}function m(e){try{if("function"==typeof e){var t=O.names(e.prototype),r=O.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=V.test(e+"")&&O.names(e).length>0;if(r||n||i)return!0}return!1}catch(e){return!1}}function d(e){function t(){}t.prototype=e;for(var r=8;r--;)new t;return e}function p(e){return R.test(e)}function v(e,t,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=t+i+r;return n}function g(e){try{return e+""}catch(e){return"[no string representation]"}}function y(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function b(e){try{f(e,"isOperational",!0)}catch(e){}}function w(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function k(e){return y(e)&&O.propertyIsWritable(e,"stack")}function S(e){return{}.toString.call(e)}function _(e,t,r){for(var n=O.names(e),i=0;i<n.length;++i){var a=n[i];if(r(a))try{O.defineProperty(t,a,O.getDescriptor(e,a))}catch(e){}}}function C(e){return H?n.env[e]:void 0}function P(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function A(e,t){return e.bind(t)}var O=r(339),E="undefined"==typeof navigator,I={e:{}},x,B="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:void 0!==this?this:null,N=function(e,t){function r(){this.constructor=e,this.constructor$=t;for(var r in t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}var n={}.hasOwnProperty;return r.prototype=t.prototype,e.prototype=new r,e.prototype},j=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(O.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var a;try{a=r(e)}catch(e){return n}for(var o=0;o<a.length;++o){var u=a[o];if(!i[u]){i[u]=!0;var s=Object.getOwnPropertyDescriptor(e,u);null!=s&&null==s.get&&null==s.set&&n.push(u)}}e=O.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var a in r)if(n.call(r,a))i.push(a);else{for(var o=0;o<e.length;++o)if(n.call(e[o],a))continue e;i.push(a)}return i}}(),V=/this\s*\.\s*\S+\s*=/,R=/^[a-z$_][a-z$_0-9]*$/i,T=function(){return"stack"in new Error?function(e){return k(e)?e:new Error(g(e))}:function(e){if(k(e))return e;try{throw new Error(g(e))}catch(e){return e}}}(),D=function(e){return O.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};D=function(e){return O.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?U(e):null}}var M="undefined"!=typeof n&&"[object process]"===S(n).toLowerCase(),H="undefined"!=typeof n&&"undefined"!=typeof n.env,L={isClass:m,isIdentifier:p,inheritedDataKeys:j,getDataPropertyOrDefault:l,thrower:h,isArray:O.isArray,asArray:D,notEnumerableProp:f,isPrimitive:o,isObject:u,isError:y,canEvaluate:E,errorObj:I,tryCatch:a,inherits:N,withAppended:c,maybeWrapAsError:s,toFastProperties:d,filledRange:v,toString:g,canAttachTrace:k,ensureErrorObject:T,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:S,copyDescriptors:_,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:M,hasEnvVariables:H,env:C,global:B,getNativePromise:P,domainBind:A};L.isRecentNode=L.isNode&&function(){var e=n.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),L.isNode&&L.toFastProperties(n);try{throw new Error}catch(e){L.lastLineError=e}e.exports=L}).call(t,function(){return this}(),r(330))},function(e,t){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var n={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,o=function(e){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},u=function(e,t){return{value:e[t]}},s=function(e,t,r){return e[t]=r.value,e},c=function(e){return e},l=function(e){try{return Object(e).constructor.prototype}catch(e){return a}},f=function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}};e.exports={isArray:f,keys:o,names:o,defineProperty:s,getDescriptor:u,freeze:c,getPrototypeOf:l,isES5:r,propertyIsWritable:function(){return!0}}}},function(e,t,r){(function(t){"use strict";function n(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=s}function i(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function a(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function o(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(e){u=e}var s=r(341),c=r(344),l=r(338);n.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},n.prototype.hasCustomScheduler=function(){return this._customScheduler},n.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},n.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},n.prototype.fatalError=function(e,r){r?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},n.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(n.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?i.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},n.prototype.invoke=function(e,t,r){this._trampolineEnabled?a.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},n.prototype.settlePromises=function(e){this._trampolineEnabled?o.call(this,e):this._schedule(function(){e._settlePromises()})}):(n.prototype.invokeLater=i,n.prototype.invoke=a,n.prototype.settlePromises=o),n.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var r=e.shift(),n=e.shift();t.call(r,n)}else t._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=n,e.exports.firstLineError=u}).call(t,r(330))},function(e,t,r){(function(t,n,i){"use strict";var a,o=r(338),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var c=t.setImmediate,l=n.nextTick;a=o.isRecentNode?function(e){c.call(t,e)}:function(e){l.call(n,e)}}else if("function"==typeof s&&"function"==typeof s.resolve){var f=s.resolve();
a=function(e){f.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),r=!1});i.observe(n,t);var a=function(){r||(r=!0,n.classList.toggle("foo"))};return function(r){var n=new MutationObserver(function(){n.disconnect(),r()});n.observe(e,t),a()}}();e.exports=a}).call(t,function(){return this}(),r(330),r(342).setImmediate)},function(e,t,r){(function(e){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(343),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return p[d]=n,m(d),d++}function i(e){delete p[e]}function a(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function o(e){if(v)setTimeout(o,0,e);else{var t=p[e];if(t){v=!0;try{a(t)}finally{i(e),v=!1}}}}function u(){m=function(e){t.nextTick(function(){o(e)})}}function s(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}function c(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&o(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),m=function(r){e.postMessage(t+r,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},m=function(t){e.port2.postMessage(t)}}function f(){var e=g.documentElement;m=function(t){var r=g.createElement("script");r.onreadystatechange=function(){o(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}function h(){m=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var m,d=1,p={},v=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?u():s()?c():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?f():h(),y.setImmediate=n,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),r(330))},function(e,t){"use strict";function r(e,t,r,n,i){for(var a=0;a<i;++a)r[a+n]=e[a+t],e[a+t]=void 0}function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var r=this._front+t&this._capacity-1;this[r]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var a=this._capacity-1;this[i+0&a]=e,this[i+1&a]=t,this[i+2&a]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,i=this._length,a=n+i&t-1;r(this,0,this,t,a)},e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(n){return this instanceof r?(f(this,"message","string"==typeof n?n:t),f(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return l(r,Error),r}function i(e){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var a,o,u=r(339),s=u.freeze,c=r(338),l=c.inherits,f=c.notEnumerableProp,h=n("Warning","warning"),m=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),p=n("AggregateError","aggregate error");try{a=TypeError,o=RangeError}catch(e){a=n("TypeError","type error"),o=n("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<v.length;++g)"function"==typeof Array.prototype[v[g]]&&(p.prototype[v[g]]=Array.prototype[v[g]]);u.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var y=0;p.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),a=0;a<i.length;++a)i[a]=e+i[a];n=i.join("\n"),t+=n+"\n"}return y--,t},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:m,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:p}),u.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:a,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},function(e,t,r){"use strict";e.exports=function(e,t){function n(r,n){if(l(r)){if(r instanceof e)return r;var i=a(r);if(i===c){n&&n._pushContext();var s=e.reject(i.e);return n&&n._popContext(),s}if("function"==typeof i){if(o(r)){var s=new e(t);return r._then(s._fulfill,s._reject,void 0,s,null),s}return u(r,i,n)}}return r}function i(e){return e.then}function a(e){try{return i(e)}catch(e){return c.e=e,c}}function o(e){try{return f.call(e,"_promise0")}catch(e){return!1}}function u(r,n,i){function a(e){u&&(u._resolveCallback(e),u=null)}function o(e){u&&(u._rejectCallback(e,f,!0),u=null)}var u=new e(t),l=u;i&&i._pushContext(),u._captureStackTrace(),i&&i._popContext();var f=!0,h=s.tryCatch(n).call(r,a,o);return f=!1,u&&h===c&&(u._rejectCallback(h.e,!0,!0),u=null),l}var s=r(338),c=s.errorObj,l=s.isObject,f={}.hasOwnProperty;return n}},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a){function o(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function u(r){var n=this._promise=new e(t);r instanceof e&&n._propagateFrom(r,3),n._setOnCancel(this),this._values=r,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=r(338);s.isArray;return s.inherits(u,a),u.prototype.length=function(){return this._length},u.prototype.promise=function(){return this._promise},u.prototype._init=function t(r,a){var u=n(this._values,this._promise);if(u instanceof e){u=u._target();var c=u._bitField;if(this._values=u,0===(50397184&c))return this._promise._setAsyncGuaranteed(),u._then(t,this._reject,void 0,this,a);if(0===(33554432&c))return 0!==(16777216&c)?this._reject(u._reason()):this._cancel();u=u._value()}if(u=s.asArray(u),null===u){var l=i("expecting an array or an iterable object but got "+s.classString(u)).reason();return void this._promise._rejectCallback(l,!1)}return 0===u.length?void(a===-5?this._resolveEmptyArray():this._resolve(o(a))):void this._iterate(u)},u.prototype._iterate=function(t){var r=this.getActualLength(t.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,a=!1,o=null,u=0;u<r;++u){var s=n(t[u],i);s instanceof e?(s=s._target(),o=s._bitField):o=null,a?null!==o&&s.suppressUnhandledRejections():null!==o?0===(50397184&o)?(s._proxy(this,u),this._values[u]=s):a=0!==(33554432&o)?this._promiseFulfilled(s._value(),u):0!==(16777216&o)?this._promiseRejected(s._reason(),u):this._promiseCancelled(u):a=this._promiseFulfilled(s,u)}a||i._setAsyncGuaranteed()},u.prototype._isResolved=function(){return null===this._values},u.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},u.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},u.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},u.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;return r>=this._length&&(this._resolve(this._values),!0)},u.prototype._promiseCancelled=function(){return this._cancel(),!0},u.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},u.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var r=0;r<t.length;++r)t[r]instanceof e&&t[r].cancel()}},u.prototype.shouldCopyValues=function(){return!0},u.prototype.getActualLength=function(e){return e},u}},function(e,t){"use strict";e.exports=function(e){function t(){this._trace=new t.CapturedTrace(n())}function r(){if(i)return new t}function n(){var e=a.length-1;if(e>=0)return a[e]}var i=!1,a=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,a.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=a.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=r,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var r=e.prototype._pushContext,a=e.prototype._popContext,o=e._peekContext,u=e.prototype._peekContext,s=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=a,e._peekContext=o,e.prototype._peekContext=u,e.prototype._promiseCreated=s,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=n,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},function(e,t,r){(function(t){"use strict";e.exports=function(e,n){function i(e,t){return{promise:t}}function a(){return!1}function o(e,t,r){var n=this;try{e(t,r,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+M.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function u(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?M.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function s(){return this._onCancelField}function c(e){this._onCancelField=e}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(e,t){if(0!==(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function m(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new N(this._peekContext())}function p(e,t){if(H(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=C(e);M.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),M.notEnumerableProp(e,"__stackCleaned__",!0)}}}function v(e,t,r,n,i){if(void 0===e&&null!==t&&Q){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&n._bitField))return;r&&(r+=" ");var a="",o="";if(t._trace){for(var u=t._trace.stack.split("\n"),s=S(u),c=s.length-1;c>=0;--c){var l=s[c];if(!F.test(l)){var f=l.match(K);f&&(a="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(s.length>0)for(var h=s[0],c=0;c<u.length;++c)if(u[c]===h){c>0&&(o="\n"+u[c-1]);break}}var m="a promise was created in a "+r+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+o;n._warn(m,!0,t)}}function g(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),y(r)}function y(t,r,n){if(oe.warnings){var i,a=new U(t);if(r)n._attachExtraTrace(a);else if(oe.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(a);else{var o=C(a);a.stack=o.message+"\n"+o.stack.join("\n")}te("warning",a)||P(a,"",!0)}}function b(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}function w(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function k(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,a=t[i],o=-1,u=n.length-1;u>=0;--u)if(n[u]===a){o=u;break}for(var u=o;u>=0;--u){var s=n[u];if(t[i]!==s)break;t.pop(),i--}t=n}}function S(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i="    (No stack trace)"===n||q.test(n),a=i&&ne(n);i&&!a&&(W&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function _(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||q.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}function C(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?_(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:S(t)}}function P(e,t,r){if("undefined"!=typeof console){var n;if(M.isObject(e)){var i=e.stack;n=t+J(i,e)}else n=t+String(e);"function"==typeof R?R(n,r):"function"==typeof console.log||"object"==typeof console.log}}function A(e,t,r,n){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){D.throwLater(e)}"unhandledRejection"===e?te(e,r,n)||i||P(r,"Unhandled rejection "):te(e,n)}function O(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():M.toString(e);var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t))try{var n=JSON.stringify(e);t=n}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+E(t)+">, no stack trace)"}function E(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function I(){return"function"==typeof ae}function x(e){var t=e.match(ie);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function B(e,t){if(I()){for(var r,n,i=e.stack.split("\n"),a=t.stack.split("\n"),o=-1,u=-1,s=0;s<i.length;++s){var c=x(i[s]);if(c){r=c.fileName,o=c.line;break}}for(var s=0;s<a.length;++s){var c=x(a[s]);if(c){n=c.fileName,u=c.line;break}}o<0||u<0||!r||!n||r!==n||o>=u||(ne=function(e){if(L.test(e))return!0;var t=x(e);return!!(t&&t.fileName===r&&o<=t.line&&t.line<=u)})}}function N(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ae(this,N),t>32&&this.uncycle()}var j,V,R,T=e._getDomain,D=e._async,U=r(345).Warning,M=r(338),H=M.canAttachTrace,L=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,F=/\((?:timers\.js):\d+:\d+\)/,K=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,q=null,J=null,W=!1,G=!(0==M.env("BLUEBIRD_DEBUG")||!M.env("BLUEBIRD_DEBUG")&&"development"!==M.env("NODE_ENV")),z=!(0==M.env("BLUEBIRD_WARNINGS")||!G&&!M.env("BLUEBIRD_WARNINGS")),$=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!G&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),Q=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(z||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},e.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},e.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",j,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",V,e,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(e,t,r){return y(e,t,r||this)},e.onPossiblyUnhandledRejection=function(e){var t=T();V="function"==typeof e?null===t?e:M.domainBind(t,e):void 0},e.onUnhandledRejectionHandled=function(e){var t=T();j="function"==typeof e?null===t?e:M.domainBind(t,e):void 0};var X=function(){};e.longStackTraces=function(){if(D.haveItemsQueued()&&!oe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!oe.longStackTraces&&I()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace;oe.longStackTraces=!0,X=function(){if(D.haveItemsQueued()&&!oe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),D.enableTrampoline(),oe.longStackTraces=!1},e.prototype._captureStackTrace=d,e.prototype._attachExtraTrace=p,n.activateLongStackTraces(),D.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return oe.longStackTraces&&I()};var Y=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return M.global.dispatchEvent(e),function(e,t){var r=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!M.global.dispatchEvent(r)}}if("function"==typeof Event){var e=new Event("CustomEvent");return M.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,!M.global.dispatchEvent(r)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!M.global.dispatchEvent(r)}}catch(e){}return function(){return!1}}(),Z=function(){return M.isNode?function(){return t.emit.apply(t,arguments)}:M.global?function(e){var t="on"+e.toLowerCase(),r=M.global[t];return!!r&&(r.apply(M.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),ee={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:i},te=function(e){var t=!1;try{t=Z.apply(null,arguments)}catch(e){D.throwLater(e),t=!0}var r=!1;try{r=Y(e,ee[e].apply(null,arguments))}catch(e){D.throwLater(e),r=!0}return r||t};e.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&X()),"warnings"in t){var r=t.warnings;oe.warnings=!!r,Q=oe.warnings,M.isObject(r)&&"wForgottenReturn"in r&&(Q=!!r.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!oe.cancellation){if(D.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=l,e.prototype._propagateFrom=f,e.prototype._onCancel=s,e.prototype._setOnCancel=c,e.prototype._attachCancellationCallback=u,e.prototype._execute=o,re=f,oe.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!oe.monitoring?(oe.monitoring=!0,e.prototype._fireEvent=te):!t.monitoring&&oe.monitoring&&(oe.monitoring=!1,e.prototype._fireEvent=a)),e},e.prototype._fireEvent=a,e.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(e){},e.prototype._attachCancellationCallback=function(e){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(e,t){};var re=h,ne=function(){return!1},ie=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;M.inherits(N,Error),n.CapturedTrace=N,N.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;e=this._length=n;for(var n=e-1;n>=0;--n){var a=t[n].stack;void 0===r[a]&&(r[a]=n)}for(var n=0;n<e;++n){var o=t[n].stack,u=r[o];if(void 0!==u&&u!==n){u>0&&(t[u-1]._parent=void 0,t[u-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var s=n>0?t[n-1]:this;u<e-1?(s._parent=t[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,l=n-2;l>=0;--l)t[l]._length=c,c++;return}}}},N.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=C(e),r=t.message,n=[t.stack],i=this;void 0!==i;)n.push(S(i.stack.split("\n"))),i=i._parent;k(n),w(n),M.notEnumerableProp(e,"stack",b(r,n)),M.notEnumerableProp(e,"__stackCleaned__",!0)}};var ae=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():O(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,q=e,J=t;var r=Error.captureStackTrace;return ne=function(e){return L.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return q=/@/,J=t,W=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(e){i="stack"in e}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(J=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?O(t):t.toString()},null):(q=e,J=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(R=function(e){},M.isNode&&t.stderr.isTTY?R=function(e,t){}:M.isNode||"string"!=typeof(new Error).stack||(R=function(e,t){}));var oe={warnings:z,longStackTraces:!1,cancellation:!1,monitoring:!1};return $&&e.longStackTraces(),{longStackTraces:function(){return oe.longStackTraces},warnings:function(){return oe.warnings},cancellation:function(){return oe.cancellation},monitoring:function(){return oe.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return m},checkForgottenReturns:v,setBounds:B,warn:y,deprecated:g,CapturedTrace:N,fireDomEvent:Y,fireGlobalEvent:Z}}}).call(t,r(330))},function(e,t,r){"use strict";e.exports=function(e,t,n){function i(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function a(e){this.finallyHandler=e}function o(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function u(){return c.call(this,this.promise._target()._settledValue())}function s(e){if(!o(this,e))return h.e=e,h}function c(r){var i=this.promise,c=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?c.call(i._boundValue()):c.call(i._boundValue(),r);if(l===n)return l;if(void 0!==l){i._setReturnedNonUndefined();var m=t(l,i);if(m instanceof e){if(null!=this.cancelPromise){if(m._isCancelled()){var d=new f("late cancellation observer");return i._attachExtraTrace(d),h.e=d,h}m.isPending()&&m._attachCancellationCallback(new a(this))}return m._then(u,s,void 0,this,void 0)}}}return i.isRejected()?(o(this),h.e=r,h):(o(this),r)}var l=r(338),f=e.CancellationError,h=l.errorObj,m=r(351)(n);return i.prototype.isFinallyHandler=function(){return 0===this.type},a.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new i(this,t,e),void 0)},e.prototype.lastly=e.prototype.finally=function(e){return this._passThrough(e,0,c,c)},e.prototype.tap=function(e){return this._passThrough(e,1,c)},e.prototype.tapCatch=function(t){var r=arguments.length;if(1===r)return this._passThrough(t,1,void 0,c);var n,i=new Array(r-1),a=0;for(n=0;n<r-1;++n){var o=arguments[n];if(!l.isObject(o))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(o)));i[a++]=o}i.length=a;var u=arguments[n];return this._passThrough(m(i,u,this),1,void 0,c)},i}},function(e,t,r){"use strict";e.exports=function(e){function t(t,r,u){return function(s){var c=u._boundValue();e:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(s instanceof f)return a(r).call(c,s)}else if("function"==typeof f){var h=a(f).call(c,s);if(h===o)return h;if(h)return a(r).call(c,s)}else if(n.isObject(s)){for(var m=i(f),d=0;d<m.length;++d){var p=m[d];if(f[p]!=s[p])continue e}return a(r).call(c,s)}}return e}}var n=r(338),i=r(339).keys,a=n.tryCatch,o=n.errorObj;return t}},function(e,t,r){"use strict";function n(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(n(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var r=l.keys(e),i=0;i<r.length;++i){var a=r[i];f.test(a)||(t[a]=e[a])}return t}return o.markAsOriginatingFromRejection(e),e}function a(e,t){return function(r,n){if(null!==e){if(r){var a=i(u(r));e._attachExtraTrace(a),e._reject(a)}else if(t){for(var o=arguments.length,s=new Array(Math.max(o-1,0)),c=1;c<o;++c)s[c-1]=arguments[c];e._fulfill(s)}else e._fulfill(n);e=null}}}var o=r(338),u=o.maybeWrapAsError,s=r(345),c=s.OperationalError,l=r(339),f=/^(?:name|message|stack|cause)$/;e.exports=a},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a){var o=r(338),u=o.tryCatch;e.method=function(r){if("function"!=typeof r)throw new e.TypeError("expecting a function but got "+o.classString(r));return function(){var n=new e(t);n._captureStackTrace(),n._pushContext();var i=u(r).apply(this,arguments),o=n._popContext();return a.checkForgottenReturns(i,o,"Promise.method",n),n._resolveFromSyncValue(i),n}},e.attempt=e.try=function(r){if("function"!=typeof r)return i("expecting a function but got "+o.classString(r));var n=new e(t);n._captureStackTrace(),n._pushContext();var s;if(arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];s=o.isArray(c)?u(r).apply(l,c):u(r).call(l,c)}else s=u(r)();var f=n._popContext();return a.checkForgottenReturns(s,f,"Promise.try",n),n._resolveFromSyncValue(s),n},e.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},function(e,t){"use strict";e.exports=function(e,t,r,n){var i=!1,a=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(a,a,null,this,e)},u=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},s=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(a){i||(i=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var c=r(a),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(t,o,void 0,l,h),c._then(u,s,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i){var a=r(338),o=a.tryCatch,u=a.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){if(a.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=o(e).call(this._boundValue());n===u&&(this._attachExtraTrace(n.e),s.throwLater(n.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},function(e,t){"use strict";e.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),
this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var i=function(){return n};return this.caught(r,i)}}},function(e,t){"use strict";e.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},a=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return a.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return u.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a,o){var u,s=r(338),c=s.canEvaluate,l=s.tryCatch,f=s.errorObj;if(c){for(var h=function(e){return new Function("value","holder","                             \n\t            'use strict';                                                    \n\t            holder.pIndex = value;                                           \n\t            holder.checkFulfillment(this);                                   \n\t            ".replace(/Index/g,e))},m=function(e){return new Function("promise","holder","                           \n\t            'use strict';                                                    \n\t            holder.pIndex = promise;                                         \n\t            ".replace(/Index/g,e))},d=function(t){for(var r=new Array(t),n=0;n<r.length;++n)r[n]="this.p"+(n+1);var i=r.join(" = ")+" = null;",o="var promise;\n"+r.map(function(e){return"                                                         \n\t                promise = "+e+";                                      \n\t                if (promise instanceof Promise) {                            \n\t                    promise.cancel();                                        \n\t                }                                                            \n\t            "}).join("\n"),u=r.join(", "),s="Holder$"+t,c="return function(tryCatch, errorObj, Promise, async) {    \n\t            'use strict';                                                    \n\t            function [TheName](fn) {                                         \n\t                [TheProperties]                                              \n\t                this.fn = fn;                                                \n\t                this.asyncNeeded = true;                                     \n\t                this.now = 0;                                                \n\t            }                                                                \n\t                                                                             \n\t            [TheName].prototype._callFunction = function(promise) {          \n\t                promise._pushContext();                                      \n\t                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n\t                promise._popContext();                                       \n\t                if (ret === errorObj) {                                      \n\t                    promise._rejectCallback(ret.e, false);                   \n\t                } else {                                                     \n\t                    promise._resolveCallback(ret);                           \n\t                }                                                            \n\t            };                                                               \n\t                                                                             \n\t            [TheName].prototype.checkFulfillment = function(promise) {       \n\t                var now = ++this.now;                                        \n\t                if (now === [TheTotal]) {                                    \n\t                    if (this.asyncNeeded) {                                  \n\t                        async.invoke(this._callFunction, this, promise);     \n\t                    } else {                                                 \n\t                        this._callFunction(promise);                         \n\t                    }                                                        \n\t                                                                             \n\t                }                                                            \n\t            };                                                               \n\t                                                                             \n\t            [TheName].prototype._resultCancelled = function() {              \n\t                [CancellationCode]                                           \n\t            };                                                               \n\t                                                                             \n\t            return [TheName];                                                \n\t        }(tryCatch, errorObj, Promise, async);                               \n\t        ";return c=c.replace(/\[TheName\]/g,s).replace(/\[TheTotal\]/g,t).replace(/\[ThePassedArguments\]/g,u).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,o),new Function("tryCatch","errorObj","Promise","async",c)(l,f,e,a)},p=[],v=[],g=[],y=0;y<8;++y)p.push(d(y+1)),v.push(h(y+1)),g.push(m(y+1));u=function(e){this._reject(e)}}e.join=function(){var r,a=arguments.length-1;if(a>0&&"function"==typeof arguments[a]&&(r=arguments[a],a<=8&&c)){var l=new e(i);l._captureStackTrace();for(var f=p[a-1],h=new f(r),m=v,d=0;d<a;++d){var y=n(arguments[d],l);if(y instanceof e){y=y._target();var b=y._bitField;0===(50397184&b)?(y._then(m[d],u,void 0,l,h),g[d](y,h),h.asyncNeeded=!1):0!==(33554432&b)?m[d].call(l,y._value(),h):0!==(16777216&b)?l._reject(y._reason()):l._cancel()}else m[d].call(l,y,h)}if(!l._isFateSealed()){if(h.asyncNeeded){var w=o();null!==w&&(h.fn=s.domainBind(w,h.fn))}l._setAsyncGuaranteed(),l._setOnCancel(h)}return l}for(var k=arguments.length,S=new Array(k),_=0;_<k;++_)S[_]=arguments[_];r&&S.pop();var l=new t(S).promise();return void 0!==r?l.spread(r):l}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a,o){function u(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var i=c();this._callback=null===i?t:l.domainBind(i,t),this._preservedValues=n===a?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],m.invoke(this._asyncInit,this,void 0)}function s(t,r,i,a){if("function"!=typeof r)return n("expecting a function but got "+l.classString(r));var o=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));o=i.concurrency}return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new u(t,r,o,a).promise()}var c=e._getDomain,l=r(338),f=l.tryCatch,h=l.errorObj,m=e._async;l.inherits(u,t),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,r){var n=this._values,a=this.length(),u=this._preservedValues,s=this._limit;if(r<0){if(r=r*-1-1,n[r]=t,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(s>=1&&this._inFlight>=s)return n[r]=t,this._queue.push(r),!1;null!==u&&(u[r]=t);var c=this._promise,l=this._callback,m=c._boundValue();c._pushContext();var d=f(l).call(m,t,r,a),p=c._popContext();if(o.checkForgottenReturns(d,p,null!==u?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var v=i(d,this._promise);if(v instanceof e){v=v._target();var g=v._bitField;if(0===(50397184&g))return s>=1&&this._inFlight++,n[r]=v,v._proxy(this,(r+1)*-1),!1;if(0===(33554432&g))return 0!==(16777216&g)?(this._reject(v._reason()),!0):(this._cancel(),!0);d=v._value()}n[r]=d}var y=++this._totalResolved;return y>=a&&(null!==u?this._filter(n,u):this._resolve(n),!0)},u.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},u.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,a=0;a<r;++a)e[a]&&(n[i++]=t[a]);n.length=i,this._resolve(n)},u.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(e,t){return s(this,e,t,null)},e.map=function(e,t,r,n){return s(e,t,r,n)}}},function(e,t,r){"use strict";var n=Object.create;if(n){var i=n(null),a=n(null);i[" size"]=a[" size"]=0}e.exports=function(e){function t(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+l.classString(t)+" has no method '"+l.toString(r)+"'";throw new e.TypeError(i)}return n}function n(e){var r=this.pop(),n=t(e,r);return n.apply(e,this)}function o(e){return e[this]}function u(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var s,c,l=r(338),f=l.canEvaluate,h=l.isIdentifier,m=function(e){return new Function("ensureMethod","                                    \n\t        return function(obj) {                                               \n\t            'use strict'                                                     \n\t            var len = this.length;                                           \n\t            ensureMethod(obj, 'methodName');                                 \n\t            switch(len) {                                                    \n\t                case 1: return obj.methodName(this[0]);                      \n\t                case 2: return obj.methodName(this[0], this[1]);             \n\t                case 3: return obj.methodName(this[0], this[1], this[2]);    \n\t                case 0: return obj.methodName();                             \n\t                default:                                                     \n\t                    return obj.methodName.apply(obj, this);                  \n\t            }                                                                \n\t        };                                                                   \n\t        ".replace(/methodName/g,e))(t)},d=function(e){return new Function("obj","                                             \n\t        'use strict';                                                        \n\t        return obj.propertyName;                                             \n\t        ".replace("propertyName",e))},p=function(e,t,r){var n=r[e];if("function"!=typeof n){if(!h(e))return null;if(n=t(e),r[e]=n,r[" size"]++,r[" size"]>512){for(var i=Object.keys(r),a=0;a<256;++a)delete r[i[a]];r[" size"]=i.length-256}}return n};s=function(e){return p(e,m,i)},c=function(e){return p(e,d,a)},e.prototype.call=function(e){for(var t=arguments.length,r=new Array(Math.max(t-1,0)),i=1;i<t;++i)r[i-1]=arguments[i];if(f){var a=s(e);if(null!==a)return this._then(a,void 0,void 0,r,void 0)}return r.push(e),this._then(n,void 0,void 0,r,void 0)},e.prototype.get=function(e){var t,r="number"==typeof e;if(r)t=u;else if(f){var n=c(e);t=null!==n?n:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a,o){function u(e){setTimeout(function(){throw e},0)}function s(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function c(t,r){function i(){if(o>=c)return l._fulfill();var a=s(t[o++]);if(a instanceof e&&a._isDisposable()){try{a=n(a._getDisposer().tryDispose(r),t.promise)}catch(e){return u(e)}if(a instanceof e)return a._then(i,u,null,null,null)}i()}var o=0,c=t.length,l=new e(a);return i(),l}function l(e,t,r){this._data=e,this._promise=t,this._context=r}function f(e,t,r){this.constructor$(e,t,r)}function h(e){return l.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function m(e){this.length=e,this.promise=null,this[e-1]=null}var d=r(338),p=r(345).TypeError,v=r(338).inherits,g=d.errorObj,y=d.tryCatch,b={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():b},l.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==b?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},l.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},v(f,l),f.prototype.doDispose=function(e,t){var r=this.data();return r.call(e,e,t)},m.prototype._resultCancelled=function(){for(var t=this.length,r=0;r<t;++r){var n=this[r];n instanceof e&&n.cancel()}},e.using=function(){var r=arguments.length;if(r<2)return t("you must pass at least 2 arguments to Promise.using");var i=arguments[r-1];if("function"!=typeof i)return t("expecting a function but got "+d.classString(i));var a,u=!0;2===r&&Array.isArray(arguments[0])?(a=arguments[0],r=a.length,u=!1):(a=arguments,r--);for(var s=new m(r),f=0;f<r;++f){var p=a[f];if(l.isDisposer(p)){var v=p;p=p.promise(),p._setDisposable(v)}else{var b=n(p);b instanceof e&&(p=b._then(h,null,null,{resources:s,index:f},void 0))}s[f]=p}for(var w=new Array(s.length),f=0;f<w.length;++f)w[f]=e.resolve(s[f]).reflect();var k=e.all(w).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return g.e=r.error(),g;if(!r.isFulfilled())return void k.cancel();e[t]=r.value()}S._pushContext(),i=y(i);var n=u?i.apply(void 0,e):i(e),a=S._popContext();return o.checkForgottenReturns(n,a,"Promise.using",S),n}),S=k.lastly(function(){var t=new e.PromiseInspection(k);return c(s,t)});return s.promise=S,S._setOnCancel(s),S},e.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(e){if("function"==typeof e)return new f(e,this,i());throw new p}}},function(e,t,r){"use strict";e.exports=function(e,t,n){function i(e){this.handle=e}function a(e){return clearTimeout(this.handle),e}function o(e){throw clearTimeout(this.handle),e}var u=r(338),s=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(e){return l(+this).thenReturn(e)},l=e.delay=function(r,a){var o,u;return void 0!==a?(o=e.resolve(a)._then(c,null,null,r,void 0),n.cancellation()&&a instanceof e&&o._setOnCancel(a)):(o=new e(t),u=setTimeout(function(){o._fulfill()},+r),n.cancellation()&&o._setOnCancel(new i(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};e.prototype.delay=function(e){return l(e,this)};var f=function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new s("operation timed out"):new s(t),u.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()};e.prototype.timeout=function(e,t){e=+e;var r,u,s=new i(setTimeout(function(){r.isPending()&&f(r,t,u)},e));return n.cancellation()?(u=this.then(),r=u._then(a,o,void 0,s,void 0),r._setOnCancel(s)):r=this._then(a,o,void 0,s,void 0),r}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a,o){function u(t,r,n){for(var a=0;a<r.length;++a){n._pushContext();var o=m(r[a])(t);if(n._popContext(),o===h){n._pushContext();var u=e.reject(h.e);return n._popContext(),u}var s=i(o,n);if(s instanceof e)return s}return null}function s(t,r,i,a){if(o.cancellation()){var u=new e(n),s=this._finallyPromise=new e(n);this._promise=u.lastly(function(){return s}),u._captureStackTrace(),u._setOnCancel(this)}else{var c=this._promise=new e(n);c._captureStackTrace()}this._stack=a,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var c=r(345),l=c.TypeError,f=r(338),h=f.errorObj,m=f.tryCatch,d=[];f.inherits(s,a),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,r="undefined"!=typeof this._generator.return;if(r)this._promise._pushContext(),t=m(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=m(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},s.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=m(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=m(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(t){var r=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(t.e,!1);var n=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var a=i(n,this._promise);if(!(a instanceof e)&&(a=u(a,this._yieldHandlers,this._promise),null===a))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));a=a._target();var o=a._bitField;0===(50397184&o)?(this._yieldedPromise=a,a._proxy(this,null)):0!==(33554432&o)?e._async.invoke(this._promiseFulfilled,this,a._value()):0!==(16777216&o)?e._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()},e.coroutine=function(e,t){if("function"!=typeof e)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=s,i=(new Error).stack;return function(){var t=e.apply(this,arguments),a=new n(void 0,void 0,r,i),o=a.promise();return a._generator=t,a._promiseFulfilled(void 0),o}},e.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+f.classString(e));d.push(e)},e.spawn=function(r){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof r)return t("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new s(r,this),i=n.promise();return n._run(e.spawn),i}}},function(e,t,r){"use strict";e.exports=function(e){function t(e,t){var r=this;if(!a.isArray(e))return n.call(r,e,t);var i=u(t).apply(r._boundValue(),[null].concat(e));i===s&&o.throwLater(i.e)}function n(e,t){var r=this,n=r._boundValue(),i=void 0===e?u(t).call(n,null):u(t).call(n,null,e);i===s&&o.throwLater(i.e)}function i(e,t){var r=this;if(!e){var n=new Error(e+"");n.cause=e,e=n}var i=u(t).call(r._boundValue(),e);i===s&&o.throwLater(i.e)}var a=r(338),o=e._async,u=a.tryCatch,s=a.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(e,r){if("function"==typeof e){var a=n;void 0!==r&&Object(r).spread&&(a=t),this._then(a,i,void 0,this,e)}return this}}},function(e,t,r){"use strict";e.exports=function(e,t){function n(e){return!S.test(e)}function i(e){try{return e.__isPromisified__===!0}catch(e){return!1}}function a(e,t,r){var n=m.getDataPropertyOrDefault(e,t+r,w);return!!n&&i(n)}function o(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var a=i.replace(r,""),o=0;o<e.length;o+=2)if(e[o]===a)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function u(e,t,r,n){for(var u=m.inheritedDataKeys(e),s=[],c=0;c<u.length;++c){var l=u[c],f=e[l],h=n===_||_(l,f,e);"function"!=typeof f||i(f)||a(e,l,t)||!n(l,f,e,h)||s.push(l,f)}return o(s,t,r),s}function s(r,n,i,a,o,u){function s(){var i=n;n===h&&(i=this);var a=new e(t);a._captureStackTrace();var o="string"==typeof l&&this!==c?this[l]:r,s=d(a,u);try{o.apply(i,p(arguments,s))}catch(e){a._rejectCallback(v(e),!0,!0)}return a._isFateSealed()||a._setAsyncGuaranteed(),a}var c=function(){return this}(),l=r;return"string"==typeof l&&(r=a),m.notEnumerableProp(s,"__isPromisified__",!0),s}function c(e,t,r,n,i){for(var a=new RegExp(C(t)+"$"),o=u(e,t,a,r),s=0,c=o.length;s<c;s+=2){var l=o[s],f=o[s+1],d=l+t;if(n===I)e[d]=I(l,h,l,f,t,i);else{var p=n(f,function(){return I(l,h,l,f,t,i)});m.notEnumerableProp(p,"__isPromisified__",!0),e[d]=p}}return m.toFastProperties(e),e}function l(e,t,r){return I(e,t,void 0,e,null,r)}var f,h={},m=r(338),d=r(352),p=m.withAppended,v=m.maybeWrapAsError,g=m.canEvaluate,y=r(345).TypeError,b="Async",w={__isPromisified__:!0},k=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],S=new RegExp("^(?:"+k.join("|")+")$"),_=function(e){return m.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},C=function(e){return e.replace(/([$])/,"\\$")},P=function(e){for(var t=[e],r=Math.max(0,e-1-3),n=e-1;n>=r;--n)t.push(n);for(var n=e+1;n<=3;++n)t.push(n);return t},A=function(e){return m.filledRange(e,"_arg","")},O=function(e){return m.filledRange(Math.max(e,3),"_arg","")},E=function(e){return"number"==typeof e.length?Math.max(Math.min(e.length,1024),0):0};f=function(r,n,i,a,o,u){function s(e){var t,r=A(e).join(", "),i=e>0?", ":"";return t=g?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===n?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n",t.replace("{{args}}",r).replace(", ",i)}function c(){for(var e="",t=0;t<f.length;++t)e+="case "+f[t]+":"+s(f[t]);return e+="                                                             \n\t        default:                                                             \n\t            var args = new Array(len + 1);                                   \n\t            var i = 0;                                                       \n\t            for (var i = 0; i < len; ++i) {                                  \n\t               args[i] = arguments[i];                                       \n\t            }                                                                \n\t            args[i] = nodeback;                                              \n\t            [CodeForCall]                                                    \n\t            break;                                                           \n\t        ".replace("[CodeForCall]",g?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}var l=Math.max(0,E(a)-1),f=P(l),g="string"==typeof r||n===h,y="string"==typeof r?"this != null ? this['"+r+"'] : fn":"fn",b="'use strict';                                                \n\t        var ret = function (Parameters) {                                    \n\t            'use strict';                                                    \n\t            var len = arguments.length;                                      \n\t            var promise = new Promise(INTERNAL);                             \n\t            promise._captureStackTrace();                                    \n\t            var nodeback = nodebackForPromise(promise, "+u+");   \n\t            var ret;                                                         \n\t            var callback = tryCatch([GetFunctionCode]);                      \n\t            switch(len) {                                                    \n\t                [CodeForSwitchCase]                                          \n\t            }                                                                \n\t            if (ret === errorObj) {                                          \n\t                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n\t            }                                                                \n\t            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n\t            return promise;                                                  \n\t        };                                                                   \n\t        notEnumerableProp(ret, '__isPromisified__', true);                   \n\t        return ret;                                                          \n\t    ".replace("[CodeForSwitchCase]",c()).replace("[GetFunctionCode]",y);return b=b.replace("Parameters",O(l)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",b)(e,a,n,p,v,d,m.tryCatch,m.errorObj,m.notEnumerableProp,t)};var I=g?f:s;e.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+m.classString(e));if(i(e))return e;t=Object(t);var r=void 0===t.context?h:t.context,a=!!t.multiArgs,o=l(e,r,a);return m.copyDescriptors(e,o,n),o},e.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var r=!!t.multiArgs,n=t.suffix;"string"!=typeof n&&(n=b);var i=t.filter;"function"!=typeof i&&(i=_);var a=t.promisifier;if("function"!=typeof a&&(a=I),!m.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var o=m.inheritedDataKeys(e),u=0;u<o.length;++u){var s=e[o[u]];"constructor"!==o[u]&&m.isClass(s)&&(c(s.prototype,n,i,a,r),c(s,n,i,a,r))}return c(e,n,i,a,r)}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i){function a(e){var t,r=!1;if(void 0!==u&&e instanceof u)t=f(e),r=!0;else{var n=l.keys(e),i=n.length;t=new Array(2*i);for(var a=0;a<i;++a){var o=n[a];t[a]=e[o],t[a+i]=o}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function o(t){var r,o=n(t);return c(o)?(r=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new a(o).promise(),o instanceof e&&r._propagateFrom(o,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var u,s=r(338),c=s.isObject,l=r(339);"function"==typeof Map&&(u=Map);var f=function(){function e(e,n){this[t]=e,this[t+r]=n,t++}var t=0,r=0;return function(n){r=n.size,t=0;var i=new Array(2*n.size);return n.forEach(e,i),i}}(),h=function(e){for(var t=new u,r=e.length/2|0,n=0;n<r;++n){var i=e[r+n],a=e[n];t.set(i,a)}return t};s.inherits(a,t),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){var n;if(this._isMap)n=h(this._values);else{n={};for(var i=this.length(),a=0,o=this.length();a<o;++a)n[this._values[a+i]]=this._values[a]}return this._resolve(n),!0}return!1},a.prototype.shouldCopyValues=function(){return!1},a.prototype.getActualLength=function(e){return e>>1},e.prototype.props=function(){return o(this)},e.props=function(e){return o(e)}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i){function a(r,a){var s=n(r);if(s instanceof e)return u(s);if(r=o.asArray(r),null===r)return i("expecting an array or an iterable object but got "+o.classString(r));var c=new e(t);void 0!==a&&c._propagateFrom(a,3);for(var l=c._fulfill,f=c._reject,h=0,m=r.length;h<m;++h){var d=r[h];(void 0!==d||h in r)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var o=r(338),u=function(e){return e.then(function(t){return a(t,e)})};e.race=function(e){return a(e,void 0)},e.prototype.race=function(){return a(this,void 0)}}},function(e,t,r){"use strict";e.exports=function(e,t,n,i,a,o){function u(t,r,n,i){this.constructor$(t);var o=h();this._fn=null===o?r:m.domainBind(o,r),void 0!==n&&(n=e.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,i===a?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function s(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function c(e,t,r,i){if("function"!=typeof t)return n("expecting a function but got "+m.classString(t));var a=new u(e,t,r,i);return a.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var r=i(this.value,this.array._promise);return r instanceof e?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(t){var r=this.array,n=r._promise,i=d(r._fn);n._pushContext();var a;a=void 0!==r._eachValues?i.call(n._boundValue(),t,this.index,this.length):i.call(n._boundValue(),this.accum,t,this.index,this.length),a instanceof e&&(r._currentCancellable=a);var u=n._popContext();return o.checkForgottenReturns(a,u,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n),a}var h=e._getDomain,m=r(338),d=m.tryCatch;m.inherits(u,t),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==a&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},u.prototype._iterate=function(t){this._values=t;var r,n,i=t.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=e.resolve(t[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var a={accum:null,value:t[n],index:n,length:i,array:this};r=r._then(l,void 0,void 0,a,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),
r._then(s,s,void 0,r,this)},e.prototype.reduce=function(e,t){return c(this,e,t,null)},e.reduce=function(e,t,r,n){return c(e,t,r,n)}}},function(e,t,r){"use strict";e.exports=function(e,t,n){function i(e){this.constructor$(e)}var a=e.PromiseInspection,o=r(338);o.inherits(i,t),i.prototype._promiseResolved=function(e,t){this._values[e]=t;var r=++this._totalResolved;return r>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var r=new a;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},i.prototype._promiseRejected=function(e,t){var r=new a;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},e.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},function(e,t,r){"use strict";e.exports=function(e,t,n){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function a(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new i(e),a=r.promise();return r.setHowMany(t),r.init(),a}var o=r(338),u=r(345).RangeError,s=r(345).AggregateError,c=o.isArray,l={};o.inherits(i,t),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=c(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new u(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(e,t){return a(e,t)},e.prototype.some=function(e){return a(this,e)},e._SomePromiseArray=i}},function(e,t){"use strict";e.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}}},function(e,t){"use strict";e.exports=function(e,t){function r(){return a(this)}function n(e,r){return i(e,r,t,t)}var i=e.reduce,a=e.all;e.prototype.each=function(e){return i(this,e,t,0)._then(r,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,n){return i(e,n,t,0)._then(r,void 0,void 0,e,void 0)},e.mapSeries=n}},function(e,t){"use strict";e.exports=function(e){function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}var r=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},function(e,t,r){"use strict";function n(e,t,r,n,i,a,u,l,m){if(l&&"function"==typeof l||(l=function(){}),m||!n.citrix||n.agentPort!==-1){var d={url:c.UrlUtil.create(e,t,n,m),method:r,headers:{"Accept-Language":"en-US"},responseType:"json"};return a&&(d.data=a),u&&(d.params=u),n.apiKey&&(d.headers.apikey=n.apiKey),n.jwt&&(d.headers.Authorization="Bearer "+n.jwt),n.tokenCompatible&&i&&(d.headers[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),new s(function(e,t){o.default.request(d).then(function(t){return l(null,t.data),e(t.data)}).catch(function(e){return e.response?e.response.data?(l(e.response.data,null),t(e.response.data)):(l(e.response,null),t(e.response)):(l(e,null),t(e))})})}var p={description:"Running in Citrix environment but no Agent port was defined in config.",status:400,code:"801"};return l(p,null),s.reject(p)}function i(e,t,r,n,i,a,u){if(u&&"function"==typeof u||(u=function(){}),n.citrix&&n.agentPort===-1){var f={description:"Running in Citrix environment but no Agent port was defined in config.",status:400,code:"801"};return u(f,null),s.reject(f)}var m={url:c.UrlUtil.create(e,t,n,!0),method:r,headers:(d={"Accept-Language":"en-US","X-Consumer-Username":"testorg.testapp.v1"},d[h.AUTH_TOKEN_HEADER]=l.get(h.BROWSER_AUTH_TOKEN),d),responseType:"json"};return i&&(m.data=i),a&&(m.params=a),n.jwt&&(m.headers.Authorization="Bearer "+n.jwt),new s(function(e,t){o.default.request(m).then(function(t){return u(null,t.data),e(t.data)}).catch(function(e){return e.response?(u(e.response,null),t(e.response)):(u(e,null),t(e))})});var d}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(375),u=r(328),s=r(336),c=r(400),l=r(402),f=r(405),h=function(){function e(e){this.cfg=e}return e.prototype.get=function(t,r,i,a){return n(t,r,"GET",this.cfg,e.SHOULD_SEND_TOKEN,void 0,i,a)},e.prototype.post=function(t,r,i,a,o){return n(t,r,"POST",this.cfg,e.SHOULD_SEND_TOKEN,i,a,o)},e.prototype.put=function(t,r,i,a,o){return n(t,r,"PUT",this.cfg,e.SHOULD_SEND_TOKEN,i,a,o)},e}();h.AUTH_TOKEN_HEADER="X-Authentication-Token",h.BROWSER_AUTH_TOKEN="t1c-js-browser-id-token",h.SHOULD_SEND_TOKEN=!0,t.GenericConnection=h;var m=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r}return a(t,e),t.prototype.get=function(e,t,r,i){var a=u.omit(this.cfg,"apiKey");return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i)},t.prototype.getSkipCitrix=function(e,t,r,i){var a=u.omit(this.cfg,"apiKey");return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t.prototype.post=function(e,t,r,i,a){var o=u.omit(this.cfg,"apiKey");return n(e,t,"POST",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.put=function(e,t,r,i,a){var o=u.omit(this.cfg,"apiKey");return n(e,t,"PUT",o,h.SHOULD_SEND_TOKEN,r,i,a)},t}(h);t.LocalAuthConnection=m;var d=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r}return a(t,e),t.prototype.get=function(e,t,r,i){var a=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i)},t.prototype.getSkipCitrix=function(e,t,r,i){var a=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"GET",a,h.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t.prototype.post=function(e,t,r,i,a){var o=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"POST",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.put=function(e,t,r,i,a){var o=u.omit(this.cfg,["apiKey","jwt"]);return n(e,t,"PUT",o,h.SHOULD_SEND_TOKEN,r,i,a)},t.prototype.requestFile=function(e,t,r,n){var i=u.omit(this.cfg,["apiKey","jwt"]);return n&&"function"==typeof n||(n=function(){}),new s(function(a,u){var s={};i.tokenCompatible&&h.SHOULD_SEND_TOKEN&&(s[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),o.default.post(c.UrlUtil.create(e,t,i,!1),r,{responseType:"blob",headers:s}).then(function(e){return n(null,e),a(e)},function(e){return e.response?e.response.data?(n(e.response.data,null),u(e.response.data)):(n(e.response,null),u(e.response)):(n(e,null),u(e))})})},t.prototype.putFile=function(e,t,r,n,i){var a=u.omit(this.cfg,["apiKey","jwt"]);i&&"function"==typeof i||(i=function(){});var l=new FormData;l.append("path",r.path),l.append("file",r.file,r.fileName);var m={"Content-Type":"multipart/form-data"};return a.tokenCompatible&&h.SHOULD_SEND_TOKEN&&(m[h.AUTH_TOKEN_HEADER]=f.BrowserFingerprint.get()),new s(function(r,n){o.default.put(c.UrlUtil.create(e,t,a,!1),l,{headers:m}).then(function(e){return i(null,e.data),r(e.data)},function(e){return e.response?e.response.data?(i(e.response.data,null),n(e.response.data)):(i(e.response,null),n(e.response)):(i(e,null),n(e))})})},t}(h);t.LocalConnection=d;var p=function(e){function t(t){var r=e.call(this,t)||this;return r.cfg=t,r.SHOULD_SEND_TOKEN=!1,r}return a(t,e),t.prototype.get=function(e,t,r,i){var a=u.omit(this.cfg,"jwt");return n(e,t,"GET",a,this.SHOULD_SEND_TOKEN,void 0,r,i,!0)},t.prototype.post=function(e,t,r,i,a){var o=u.omit(this.cfg,"jwt");return n(e,t,"POST",o,this.SHOULD_SEND_TOKEN,r,i,a,!0)},t.prototype.put=function(e,t,r,i,a){var o=u.omit(this.cfg,"jwt");return n(e,t,"PUT",o,this.SHOULD_SEND_TOKEN,r,i,a,!0)},t}(h);t.RemoteConnection=p;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=void 0,t}return a(t,e),t.prototype.get=function(e,t,r,n){return i(e,t,"GET",this.config,void 0,r,n)},t.prototype.post=function(e,t,r,n,a){return i(e,t,"POST",this.config,r,n,a)},t.prototype.put=function(e,t,r,n,a){return i(e,t,"PUT",this.config,r,n,a)},t}(h);t.LocalTestConnection=v},function(e,t,r){e.exports=r(376)},function(e,t,r){"use strict";function n(e){var t=new o(e),r=a(o.prototype.request,t);return i.extend(r,o.prototype,t),i.extend(r,t),r}var i=r(377),a=r(378),o=r(379),u=r(380),s=n(u);s.Axios=o,s.create=function(e){return n(i.merge(u,e))},s.Cancel=r(397),s.CancelToken=r(398),s.isCancel=r(394),s.all=function(e){return Promise.all(e)},s.spread=r(399),e.exports=s,e.exports.default=s},function(e,t,r){"use strict";function n(e){return"[object Array]"===_.call(e)}function i(e){return"[object ArrayBuffer]"===_.call(e)}function a(e){return"undefined"!=typeof FormData&&e instanceof FormData}function o(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function u(e){return"string"==typeof e}function s(e){return"number"==typeof e}function c(e){return"undefined"==typeof e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===_.call(e)}function h(e){return"[object File]"===_.call(e)}function m(e){return"[object Blob]"===_.call(e)}function d(e){return"[object Function]"===_.call(e)}function p(e){return l(e)&&d(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function w(){function e(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=w(t[r],e):t[r]=e}for(var t={},r=0,n=arguments.length;r<n;r++)b(arguments[r],e);return t}function k(e,t,r){return b(t,function(t,n){r&&"function"==typeof t?e[n]=S(t,r):e[n]=t}),e}var S=r(378),_=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:i,isFormData:a,isArrayBufferView:o,isString:u,isNumber:s,isObject:l,isUndefined:c,isDate:f,isFile:h,isBlob:m,isFunction:d,isStream:p,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:b,merge:w,extend:k,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new o,response:new o}}var i=r(380),a=r(377),o=r(391),u=r(392),s=r(395),c=r(396);n.prototype.request=function(e){"string"==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),e=a.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url));var t=[u,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},a.forEach(["delete","get","head"],function(e){n.prototype[e]=function(t,r){return this.request(a.merge(r||{},{method:e,url:t}))}}),a.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(a.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},function(e,t,r){(function(t){"use strict";function n(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function i(){var e;return"undefined"!=typeof XMLHttpRequest?e=r(382):"undefined"!=typeof t&&(e=r(382)),e}var a=r(377),o=r(381),u=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},c={adapter:i(),transformRequest:[function(e,t){return o(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(u,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(e){c.headers[e]={}}),a.forEach(["post","put","patch"],function(e){c.headers[e]=a.merge(s)}),e.exports=c}).call(t,r(330))},function(e,t,r){"use strict";var n=r(377);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){(function(t){"use strict";var n=r(377),i=r(383),a=r(386),o=r(387),u=r(388),s=r(384),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(389);e.exports=function(e){return new Promise(function(l,f){var h=e.data,m=e.headers;n.isFormData(h)&&delete m["Content-Type"];var d=new XMLHttpRequest,p="onreadystatechange",v=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||u(e.url)||(d=new window.XDomainRequest,p="onload",v=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";m.Authorization="Basic "+c(g+":"+y)}if(d.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[p]=function(){if(d&&(4===d.readyState||v)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?d.response:d.responseText,n={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:t,config:e,request:d};i(l,f,n),d=null}},d.onerror=function(){f(s("Network Error",e)),d=null},d.ontimeout=function(){f(s("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),d=null},n.isStandardBrowserEnv()){var b=r(390),w=(e.withCredentials||u(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;w&&(m[e.xsrfHeaderName]=w)}if("setRequestHeader"in d&&n.forEach(m,function(e,t){"undefined"==typeof h&&"content-type"===t.toLowerCase()?delete m[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(e){if("json"!==d.responseType)throw e}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===h&&(h=null),d.send(h)})}}).call(t,r(330))},function(e,t,r){"use strict";var n=r(384);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r)):e(r)}},function(e,t,r){"use strict";var n=r(385);e.exports=function(e,t,r,i){var a=new Error(e);return n(a,t,r,i)}},function(e,t){"use strict";e.exports=function(e,t,r,n){return e.config=t,r&&(e.code=r),e.response=n,e}},function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=r(377);e.exports=function(e,t,r){if(!t)return e;var a;if(r)a=r(t);else if(i.isURLSearchParams(t))a=t.toString();else{var o=[];i.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))}))}),a=o.join("&")}return a&&(e+=(e.indexOf("?")===-1?"?":"&")+a),e}},function(e,t,r){"use strict";var n=r(377);e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t&&(a[t]=a[t]?a[t]+", "+r:r)}),a):a}},function(e,t,r){"use strict";var n=r(377);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(r){var i=n.isString(r)?e(r):r;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function r(){this.message="String contains an invalid character"}function n(e){for(var t,n,a=String(e),o="",u=0,s=i;a.charAt(0|u)||(s="=",u%1);o+=s.charAt(63&t>>8-u%1*8)){if(n=a.charCodeAt(u+=.75),n>255)throw new r;t=t<<8|n}return o}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=n},function(e,t,r){"use strict";var n=r(377);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,i,a,o){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(i)&&u.push("path="+i),n.isString(a)&&u.push("domain="+a),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,r){"use strict";function n(){this.handlers=[]}var i=r(377);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=r(377),a=r(393),o=r(394),u=r(380);e.exports=function(e){n(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||u.adapter;return t(e).then(function(t){return n(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(n(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(377);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),t(r.reason))})}var i=r(397);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e,t=new n(function(t){e=t});return{token:t,cancel:e}},e.exports=n},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(401),i=function(){function e(){}return e.create=function(e,t,r,i){return r.citrix&&r.agentPort!==-1&&!i?e+n.AgentClient.urlPrefix(r.agentPort)+t:e+t},e}();t.UrlUtil=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.url=e,this.connection=t}return e.urlPrefix=function(t){return e.AGENT_PATH+"/"+t},e.prototype.get=function(t,r){return this.connection.getSkipCitrix(this.url,e.AGENT_PATH,t,r)},e}();r.AGENT_PATH="/agent",t.AgentClient=r},function(e,t,r){(function(t){"use strict";function n(e,t){return 1===arguments.length?i(e):a(e,t)}function i(e){return JSON.parse(l.getItem(e))}function a(e,t){try{return l.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}}function o(e){return l.removeItem(e)}function u(){return l.clear()}var s=r(403),c=r(404),l="localStorage"in t&&t.localStorage?t.localStorage:s;n.set=a,n.get=i,n.remove=o,n.clear=u,n.on=c.on,n.off=c.off,e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){return e in o?o[e]:null}function n(e,t){return o[e]=t,!0}function i(e){var t=e in o;return!!t&&delete o[e]}function a(){return o={},!0}var o={};e.exports={getItem:r,setItem:n,removeItem:i,clear:a}},function(e,t){(function(t){"use strict";function r(){t.addEventListener?t.addEventListener("storage",n,!1):t.attachEvent?t.attachEvent("onstorage",n):t.onstorage=n}function n(e){function r(t){t(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=t.event);var n=o[e.key];n&&n.forEach(r)}function i(e,t){o[e]?o[e].push(t):o[e]=[t],u===!1&&r()}function a(e,t){var r=o[e];r.length>1?r.splice(r.indexOf(t),1):o[e]=[]}var o={},u=!1;e.exports={on:i,off:a}}).call(t,function(){return this}())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(406),i=r(402),a=r(407),o=r(328),u=function(){function e(){}return e.get=function(){return e.checkValidFingerprint()},e.checkValidFingerprint=function(){var t;try{t=i.get(e.BROWSER_AUTH_TOKEN_LOCATION)}catch(e){}return t||(t=e.generateFingerprint()),e.validateFingerprint(t)?t:e.generateFingerprint()},e.validateFingerprint=function(e){var t=o.join(o.dropRight(o.split(e,""),2),""),r=t.substr(1,8),n=t+a.fromBase36(r)%97;return n===e},e.generateFingerprint=function(){var t=n(),r=t.substr(1,8),o=t+a.fromBase36(r)%97;return i.set(e.BROWSER_AUTH_TOKEN_LOCATION,o),o},e}();u.BROWSER_AUTH_TOKEN_LOCATION="t1c-js-browser-id-token",t.BrowserFingerprint=u},function(e,t,r){!function(t){"use strict";var r="cuid",n=0,i=4,a=36,o=Math.pow(a,i),u=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},s=function(){return u((Math.random()*o<<0).toString(a),i)},c=function(){return n=n<o?n:0,n++,n-1},l=function(){var e,t="c",r=(new Date).getTime().toString(a),n=l.fingerprint(),o=s()+s();return e=u(c().toString(a),i),t+r+e+n+o};l.slug=function(){var e,t=(new Date).getTime().toString(36),r=l.fingerprint().slice(0,1)+l.fingerprint().slice(-1),n=s().slice(-2);return e=c().toString(36).slice(-4),t.slice(-2)+e+r+n},l.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return l.globalCount=function(){return e},e},l.fingerprint=function(){return u((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+l.globalCount().toString(36),4)},t.register?t.register(r,l):e.exports=l}(this.applitude||this)},function(e,t,r){function n(e,t){i["toBase"+e]=function(e){return i.toAlphabet(e,t)},i["fromBase"+e]=function(e){return i.fromAlphabet(e,t)}}var i=t;i.toAlphabet=function(e,t){var r=t.length,n=[];do n.push(e%r),e=Math.floor(e/r);while(e>0);for(var i=[];n.length;)i.push(t[n.pop()]);return i.join("")},i.fromAlphabet=function(e,t){for(var r,n=t.length,i=0,a=0;e.length;)r=e[e.length-1],e=e.substr(0,e.length-1),a+=Math.pow(n,i)*t.indexOf(r),i++;return a},i.NUMERALS="0123456789",i.LETTERS_LOWERCASE="abcdefghijklmnopqrstuvwxyz",i.LETTERS_UPPERCASE=i.LETTERS_LOWERCASE.toUpperCase(),i.KNOWN_ALPHABETS={};for(var a=2;a<=10;a++)i.KNOWN_ALPHABETS[a]=i.NUMERALS.substr(0,a);for(var a=11;a<=16;a++)i.KNOWN_ALPHABETS[a]=i.NUMERALS+i.LETTERS_LOWERCASE.substr(0,a-10);i.KNOWN_ALPHABETS[36]=i.NUMERALS+i.LETTERS_LOWERCASE,i.KNOWN_ALPHABETS[62]=i.NUMERALS+i.LETTERS_LOWERCASE+i.LETTERS_UPPERCASE,i.KNOWN_ALPHABETS[26]=i.LETTERS_LOWERCASE,i.KNOWN_ALPHABETS[52]=i.LETTERS_LOWERCASE+i.LETTERS_UPPERCASE,i.KNOWN_ALPHABETS[64]=i.LETTERS_UPPERCASE+i.LETTERS_LOWERCASE+i.NUMERALS+"+/",i.KNOWN_ALPHABETS[58]=i.KNOWN_ALPHABETS[62].replace(/[0OlI]/g,""),i.KNOWN_ALPHABETS[32]=i.NUMERALS+i.LETTERS_UPPERCASE.replace(/[ILOU]/g,"");for(var o in i.KNOWN_ALPHABETS)i.KNOWN_ALPHABETS.hasOwnProperty(o)&&n(o,i.KNOWN_ALPHABETS[o]);i.toBase=function(e,t){return i.toAlphabet(e,i.KNOWN_ALPHABETS[t])},i.fromBase=function(e,t){return i.fromAlphabet(e,i.KNOWN_ALPHABETS[t])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=r(336),a="/",o="?apikey=",u="/security",s="/system/status",c=u+"/jwt/issue",l=u+"/jwt/refresh",f="/download/gcl",h=u+"/keys/public",m="/devices",d=function(){function e(e,t,r){this.url=e,this.connection=t,this.cfg=r}return e.prototype.getUrl=function(){return this.url},e.prototype.getInfo=function(e){return this.connection.get(this.url,s,void 0,e)},e.prototype.getDevice=function(e,t){return this.connection.get(this.url,m+a+e,void 0,t)},e.prototype.getJWT=function(e){function t(t,n){r.connection.get(r.url,c,void 0,function(i,a){if(i){if(e)return e(i,null);n(i)}else{if(a&&a.token&&(r.cfg.jwt=a.token),e)return e(null,a);t(a)}})}var r=this;return e?void t():new i(function(e,r){t(e,r)})},e.prototype.refreshJWT=function(e){var t=this.cfg.jwt;if(t)return this.connection.post(this.url,l,{originalJWT:t},void 0,e);var r={code:"500",description:"No JWT available",status:412};return e?void e(r,null):i.reject(r)},e.prototype.getPubKey=function(e){return this.connection.get(this.url,h,void 0,e)},e.prototype.downloadLink=function(e,t){function r(r,i){n.connection.post(n.url,f,e,void 0,function(e,a){if(!e){var u={url:n.cfg.dsUrlBase+a.path+o+n.cfg.apiKey,success:!0};return t?t(null,u):r(u)}return t?t(e,null):void i(e)})}var n=this;return t?void r():new i(function(e,t){r(e,t)})},e.prototype.register=function(e,t,r){var i=n.merge({uuid:t,version:e.core_version},n.omit(e,"core_version"));return this.connection.put(this.url,m+a+t,i,void 0,r)},e.prototype.sync=function(e,t,r){var i=n.merge({uuid:t,version:e.core_version},n.omit(e,"core_version"));return this.connection.post(this.url,m+a+t,i,void 0,r)},e}();t.DSClient=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="/challenge",n="/certs/validate-chain",i="/system/status",a="/signature/validate",o=function(){function e(e,t){this.url=e,this.connection=t}return e.prototype.getUrl=function(){return this.url},e.prototype.validateSignature=function(e,t){return this.connection.post(this.url,a,e,void 0,t)},e.prototype.getInfo=function(e){return this.connection.get(this.url,i,void 0,e)},e.prototype.getChallenge=function(e,t){return this.connection.get(this.url,r,{digest:e},t)},e.prototype.validateChallengeSignedHash=function(e,t){return this.connection.post(this.url,r,e,void 0,t)},e.prototype.validateCertificateChain=function(e,t){return this.connection.post(this.url,n,e,void 0,t)},e}();t.OCVClient=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(411),i=r(524),a=r(525),o=r(526),u=r(527),s=r(528),c=r(529),l=r(530),f=r(531),h=r(532),m=r(533),d=r(534),p=r(535),v=r(536),g="/plugins/",y=g+"beid",b=g+"luxeid",w=g+"dnie",k=g+"emv",S=g+"luxtrust",_=g+"mobib",C=g+"ocra",P=g+"aventra",A=g+"oberthur",O=g+"piv",E=g+"pteid",I=g+"safenet",x=g+"readerapi",B=function(){function e(e,t){this.url=e,this.connection=t}return e.prototype.createDNIe=function(e){return new m.DNIe(this.url,w,this.connection,e)},e.prototype.createEidBE=function(e){return new i.EidBe(this.url,y,this.connection,e)},e.prototype.createEidLUX=function(e,t){return new a.EidLux(this.url,b,this.connection,e,t)},e.prototype.createEidPT=function(e){return new d.EidPt(this.url,E,this.connection,e)},e.prototype.createEmv=function(e){return new n.EMV(this.url,k,this.connection,e)},e.prototype.createLuxTrust=function(e){return new u.LuxTrust(this.url,S,this.connection,e)},e.prototype.createMobib=function(e){return new o.Mobib(this.url,_,this.connection,e)},e.prototype.createOcra=function(e){return new s.Ocra(this.url,C,this.connection,e)},e.prototype.createAventraNO=function(e){return new c.Aventra(this.url,P,this.connection,e)},e.prototype.createOberthurNO=function(e){return new l.Oberthur(this.url,A,this.connection,e)},e.prototype.createPIV=function(e){return new f.PIV(this.url,O,this.connection,e)},e.prototype.createSafeNet=function(e){return new h.SafeNet(this.url,I,this.connection,e)},e.prototype.createRemoteLoading=function(e){return new p.RemoteLoading(this.url,x,this.connection,e)},e.prototype.createBelfius=function(e){return new v.Belfius(this.url,x,this.connection,e)},e}();t.PluginFactory=B},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.applicationData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.APPLICATION_DATA),void 0,e)},t.prototype.applications=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.APPLICATIONS),void 0,e)},t.prototype.iccPublicKeyCertificate=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ICC_PUBLIC_KEY_CERT),{aid:e},void 0,r)},t.prototype.issuerPublicKeyCertificate=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ISSUER_PUBLIC_KEY_CERT),{aid:e},void 0,r)},t}(i.GenericPinCard);a.APPLICATIONS="/applications",a.APPLICATION_DATA="/application-data",a.ISSUER_PUBLIC_KEY_CERT="/issuer-public-key-certificate",a.ICC_PUBLIC_KEY_CERT="/icc-public-key-certificate",t.EMV=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);
};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(413),a=r(414),o=r(335),u=r(523),s=function(){function e(e,t,r){this.baseUrl=e,this.containerUrl=t,this.connection=r}return e.prototype.containerSuffix=function(e){return e&&e.length?this.containerUrl+e:this.containerUrl},e}();t.GenericContainer=s;var c=function(e){function t(t,r,n,i){var a=e.call(this,t,r,n)||this;return a.baseUrl=t,a.containerUrl=r,a.connection=n,a.reader_id=i,a}return n(t,e),t.prototype.containerSuffix=function(e){return e&&e.length?this.containerUrl+"/"+this.reader_id+e:this.containerUrl+"/"+this.reader_id},t}(s);t.GenericReaderContainer=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allData=function(e,t){var r=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(),r.params).then(function(e){return a.CertParser.process(e,r.parseCerts,t)},function(e){return o.ResponseHandler.error(e,t)})},t}(c);t.GenericSmartCard=l;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.verifyPin=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t}(l);f.VERIFY_PIN="/verify-pin",t.GenericPinCard=f;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allAlgoRefsForAuthentication=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.AUTHENTICATE),void 0,e)},t.prototype.allAlgoRefsForSigning=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGN_DATA),void 0,e)},t.prototype.allCerts=function(e,r){var n=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),n.params).then(function(e){return a.CertParser.process(e,n.parseCerts,r)},function(e){return o.ResponseHandler.error(e,r)})},t.prototype.authenticate=function(e,r){var n=this;return e.algorithm_reference=e.algorithm_reference.toLocaleLowerCase(),i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,void 0,r)})},t.prototype.signData=function(e,r){var n=this;return e.algorithm_reference&&(e.algorithm_reference=e.algorithm_reference.toLocaleLowerCase()),i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,void 0,r)})},t.prototype.getCertificate=function(e,r){var n=this;return n.connection.get(this.baseUrl,n.containerSuffix(t.ALL_CERTIFICATES+e),void 0).then(function(e){return a.CertParser.process(e,r.parseCerts,r.callback)},function(e){return o.ResponseHandler.error(e,r.callback)})},t}(f);h.ALL_CERTIFICATES="/certificates",h.AUTHENTICATE="/authenticate",h.CERT_ROOT="/root",h.CERT_AUTHENTICATION="/authentication",h.CERT_NON_REPUDIATION="/non-repudiation",h.CERT_ISSUER="/issuer",h.CERT_SIGNING="/signing",h.CERT_ENCRYPTION="/encryption",h.CERT_CITIZEN="/citizen",h.CERT_RRN="/rrn",h.SIGN_DATA="/sign",t.GenericCertCard=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allAlgoRefsForAuthentication=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.AUTHENTICATE),void 0,e)},t.prototype.allAlgoRefsForSigning=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGN_DATA),void 0,e)},t.prototype.allData=function(e,t,r){var n=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.post(this.baseUrl,this.containerSuffix(),t,n.params).then(function(e){return a.CertParser.process(e,n.parseCerts,r)},function(e){return o.ResponseHandler.error(e,r)})},t.prototype.allCerts=function(e,r,n){var i=u.RequestHandler.determineOptionsWithFilter(e);return this.connection.post(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),r,i.params).then(function(e){return a.CertParser.process(e,i.parseCerts,n)},function(e){return o.ResponseHandler.error(e,n)})},t.prototype.verifyPin=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t.prototype.signData=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,void 0,r)})},t.prototype.authenticate=function(e,r){var n=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,void 0,r)})},t.prototype.getCertificate=function(e,r,n,u){var s=this,c=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,r.pin).then(function(){return c.connection.post(s.baseUrl,c.containerSuffix(t.ALL_CERTIFICATES+e),r,u)}).then(function(e){return a.CertParser.process(e,n.parseCerts,n.callback)}).catch(function(e){return o.ResponseHandler.error(e,n.callback)})},t.prototype.getCertificateArray=function(e,r,n,u){var s=this,c=this;return i.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,r.pin).then(function(){return c.connection.post(s.baseUrl,c.containerSuffix(t.ALL_CERTIFICATES+e),r,u)}).then(function(e){return a.CertParser.process(e,n.parseCerts,n.callback)}).catch(function(e){return o.ResponseHandler.error(e,n.callback)})},t}(c);m.ALL_CERTIFICATES="/certificates",m.AUTHENTICATE="/authenticate",m.CERT_AUTHENTICATION="/authentication",m.CERT_NON_REPUDIATION="/non-repudiation",m.CERT_INTERMEDIATE="/intermediate",m.CERT_ROOT="/root",m.CERT_SIGNING="/signing",m.SIGN_DATA="/sign",m.VERIFY_PIN="/verify-pin",t.GenericSecuredCertCard=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(336),i="/card-readers",a=function(){function e(){}return e.check=function(e,t,r,a){return new n(function(n,o){e.cfg.forceHardwarePinpad?e.get(t,i+"/"+r,void 0).then(function(e){e.data.pinpad?a?o({data:{message:"Strict pinpad enforcement is enabled. This request was sent with a PIN, but the reader has a pinpad."}}):n():a?n():o({data:{message:"Strict pinpad enforcement is enabled. This request was sent without a PIN, but the reader does not have a pinpad."}})},function(e){o(e)}):n()})},e}();t.PinEnforcer=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=r(415),a=r(417),o=r(418),u=r(335),s=function(){function e(){}return e.process=function(t,r,i){if(t&&t.data&&"object"==typeof t.data&&!n.isArray(t.data))n.forEach(t.data,function(i,a){if(a.indexOf("certificate")>-1&&("string"==typeof i&&(t.data[a]={base64:i},r&&(t.data[a].parsed=e.processCert(i))),n.isArray(i))){var o=[];n.forEach(i,function(t){var n={base64:t};r&&(n.parsed=e.processCert(t)),o.push(n)}),t.data[a]=o}});else if(n.isArray(t.data)){var a=[];n.forEach(t.data,function(t){if("string"==typeof t){var n={base64:t};r&&(n.parsed=e.processCert(t)),a.push(n)}else{var n=t;r&&(n.parsed=e.processCert(t.base64)),a.push(n)}}),t.data=a}else{var o={base64:t.data};r&&(o.parsed=e.processCert(t.data)),t.data=o}return u.ResponseHandler.response(t,i)},e.processCert=function(t){var r=a.atob(t),n=e.str2ab(r),u=i.fromBER(n);return new o.Certificate({schema:u.result})},e.str2ab=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return t},e}();t.CertParser=s},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){function n(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}var i=t,a=new k({},Object);if((0,m.checkBufferParams)(new v,e,t,r)===!1)return a.error="Wrong input parameters",{offset:-1,result:a};var o=new Uint8Array(e,t,r);if(0===o.length)return this.error="Zero buffer length",{offset:-1,result:a};var u=a.idBlock.fromBER(e,t,r);if(a.warnings.concat(a.idBlock.warnings),u===-1)return a.error=a.idBlock.error,{offset:-1,result:a};if(t=u,r-=a.idBlock.blockLength,u=a.lenBlock.fromBER(e,t,r),a.warnings.concat(a.lenBlock.warnings),u===-1)return a.error=a.lenBlock.error,{offset:-1,result:a};if(t=u,r-=a.lenBlock.blockLength,a.idBlock.isConstructed===!1&&a.lenBlock.isIndefiniteForm===!0)return a.error="Indefinite length form used for primitive encoding form",{offset:-1,result:a};var s=k;switch(a.idBlock.tagClass){case 1:if(a.idBlock.tagNumber>=37&&a.idBlock.isHexOnly===!1)return a.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:a};switch(a.idBlock.tagNumber){case 0:if(a.idBlock.isConstructed===!0&&a.lenBlock.length>0)return a.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:a};s=O;break;case 1:s=I;break;case 2:s=U;break;case 3:s=T;break;case 4:s=V;break;case 5:s=N;break;case 6:s=F;break;case 10:s=M;break;case 12:s=q;break;case 14:s=he;break;case 15:return a.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:a};case 16:s=x;break;case 17:s=B;break;case 18:s=X;break;case 19:s=Y;break;case 20:s=Z;break;case 21:s=ee;break;case 22:s=te;break;case 23:s=oe;break;case 24:s=ue;break;case 25:s=re;break;case 26:s=ne;break;case 27:s=ie;break;case 28:s=z;break;case 29:s=ae;break;case 30:s=W;break;case 31:s=se;break;case 32:s=ce;break;case 33:s=le;break;case 34:s=fe;break;default:var c=void 0;c=a.idBlock.isConstructed===!0?new P:new _,c.idBlock=a.idBlock,c.lenBlock=a.lenBlock,c.warnings=a.warnings,a=c,u=a.fromBER(e,t,r)}break;case 2:case 3:case 4:default:s=a.idBlock.isConstructed===!0?P:_}return a=n(a,s),u=a.fromBER(e,t,a.lenBlock.isIndefiniteForm===!0?r:a.lenBlock.length),a.valueBeforeDecode=e.slice(i,i+a.blockLength),{offset:u,result:a}}function u(e){if(0===e.byteLength){var t=new k({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return o(e,0,e.byteLength)}function s(e,t,r){if(r instanceof me){for(var n=!1,i=0;i<r.value.length;i++){var a=s(e,t,r.value[i]);if(a.verified===!0)return{verified:!0,result:e}}if(n===!1){var o={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(o.name=r.name),o}}if(r instanceof de)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var c=r.idBlock.toBER(!1);if(0===c.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};var l=r.idBlock.fromBER(c,0,c.byteLength);if(l===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty("tagClass")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("tagNumber")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(r.idBlock.hasOwnProperty("isConstructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly===!0){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var f=new Uint8Array(r.idBlock.valueHex),h=new Uint8Array(t.idBlock.valueHex);if(f.length!==h.length)return{verified:!1,result:e};for(var m=0;m<f.length;m++)if(f[m]!==h[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),r.idBlock.isConstructed===!0){var d=0,p={verified:!1},v=r.valueBlock.value.length;if(v>0&&r.valueBlock.value[0]instanceof pe&&(v=t.valueBlock.value.length),0===v)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var g=!0,y=0;y<r.valueBlock.value.length;y++)g=g&&(r.valueBlock.value[y].optional||!1);return g===!0?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var b=0;b<v;b++)if(b-d>=t.valueBlock.value.length){if(r.valueBlock.value[b].optional===!1){var w={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],w.name=r.name)),w}}else if(r.valueBlock.value[0]instanceof pe){if(p=s(e,t.valueBlock.value[b],r.valueBlock.value[0].value),p.verified===!1){if(r.valueBlock.value[0].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),p;d++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var k={};k="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local===!0?t:e,"undefined"==typeof k[r.valueBlock.value[0].name]&&(k[r.valueBlock.value[0].name]=[]),k[r.valueBlock.value[0].name].push(t.valueBlock.value[b])}}else if(p=s(e,t.valueBlock.value[b-d],r.valueBlock.value[b]),p.verified===!1){if(r.valueBlock.value[b].optional!==!0)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),p;d++}if(p.verified===!1){var S={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],S.name=r.name)),S}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var _=u(t.valueBlock.valueHex);if(_.offset===-1){var C={verified:!1,result:_.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],C.name=r.name)),C}return s(e,_.result,r.primitiveSchema)}return{verified:!0,result:e}}function c(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=u(e);return r.offset===-1?{verified:!1,result:r.result}:s(r.result,r.result,t)}function l(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=void 0;var f=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.fromBER=u,t.compareSchema=s,t.verifySchema=c,t.fromJSON=l;var m=r(416),d=(new Uint8Array([0]),[new Uint8Array([1])]),p="0123456789",v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.blockLength=(0,m.getParametersValue)(t,"blockLength",0),this.error=(0,m.getParametersValue)(t,"error",""),this.warnings=(0,m.getParametersValue)(t,"warnings",[]),"valueBeforeDecode"in t?this.valueBeforeDecode=t.valueBeforeDecode.slice(0):this.valueBeforeDecode=new ArrayBuffer(0)}return h(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,m.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),g=function(e){return function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);return 0===n.length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly!==!0?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):e===!0?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),t}(e)},y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"idBlock"in e?(r.isHexOnly=(0,m.getParametersValue)(e.idBlock,"isHexOnly",!1),r.valueHex=(0,m.getParametersValue)(e.idBlock,"valueHex",new ArrayBuffer(0)),r.tagClass=(0,m.getParametersValue)(e.idBlock,"tagClass",-1),r.tagNumber=(0,m.getParametersValue)(e.idBlock,"tagNumber",-1),r.isConstructed=(0,m.getParametersValue)(e.idBlock,"isConstructed",!1)):(r.tagClass=-1,r.tagNumber=-1,r.isConstructed=!1),r}return i(t,e),h(t,[{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,r=void 0,n=void 0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),n=new Uint8Array(r),!e){var i=this.tagNumber;i&=31,t|=i,n[0]=t}return r}if(this.isHexOnly===!1){var a=(0,m.utilToBase)(this.tagNumber,7),o=new Uint8Array(a),u=a.byteLength;if(r=new ArrayBuffer(u+1),n=new Uint8Array(r),n[0]=31|t,!e){for(var s=0;s<u-1;s++)n[s+1]=128|o[s];n[u]=o[u-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r),n[0]=31|t,e===!1){for(var c=new Uint8Array(this.valueHex),l=0;l<c.length-1;l++)n[l+1]=128|c[l];n[this.valueHex.byteLength]=c[c.length-1]}return r}},{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;var i=192&n[0];switch(i){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&n[0]),this.isHexOnly=!1;var a=31&n[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{var o=1;this.valueHex=new ArrayBuffer(255);for(var u=255,s=new Uint8Array(this.valueHex);128&n[o];){if(s[o-1]=127&n[o],o++,o>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(o===u){u+=255;for(var c=new ArrayBuffer(u),l=new Uint8Array(c),f=0;f<s.length;f++)l[f]=s[f];this.valueHex=new ArrayBuffer(u),s=new Uint8Array(this.valueHex)}}this.blockLength=o+1,s[o-1]=127&n[o];for(var h=new ArrayBuffer(o),d=new Uint8Array(h),p=0;p<o;p++)d[p]=s[p];this.valueHex=new ArrayBuffer(o),s=new Uint8Array(this.valueHex),s.set(d),this.blockLength<=9?this.tagNumber=(0,m.utilFromBase)(s,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),t}(g(v)),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"lenBlock"in e?(r.isIndefiniteForm=(0,m.getParametersValue)(e.lenBlock,"isIndefiniteForm",!1),r.longFormUsed=(0,m.getParametersValue)(e.lenBlock,"longFormUsed",!1),r.length=(0,m.getParametersValue)(e.lenBlock,"length",0)):(r.isIndefiniteForm=!1,r.longFormUsed=!1,r.length=0),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm===!0)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),this.longFormUsed===!1)return this.length=n[0],this.blockLength=1,t+this.blockLength;var i=127&n[0];if(i>8)return this.error="Too big integer",-1;if(i+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var a=new Uint8Array(i),o=0;o<i;o++)a[o]=n[o+1];return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,m.utilFromBase)(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=i+1,t+this.blockLength}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=128),t;if(this.longFormUsed===!0){var n=(0,m.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength+1),e===!0)return t;var i=new Uint8Array(n);r=new Uint8Array(t),r[0]=128|n.byteLength;for(var a=0;a<n.byteLength;a++)r[a+1]=i[a];return t}return t=new ArrayBuffer(1),e===!1&&(r=new Uint8Array(t),r[0]=this.length),t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),t}(v),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),t}(v),k=t.BaseBlock=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;a(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"name"in e&&(i.name=e.name),"optional"in e&&(i.optional=e.optional),"primitiveSchema"in e&&(i.primitiveSchema=e.primitiveSchema),i.idBlock=new y(e),i.lenBlock=new b(e),i.valueBlock=new r(e),i}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=this.idBlock.toBER(e),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var i=this.lenBlock.toBER(e);t=(0,m.utilConcatBuf)(r,i);var a=void 0;if(a=e===!1?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=(0,m.utilConcatBuf)(t,a),this.lenBlock.isIndefiniteForm===!0){var o=new ArrayBuffer(2);if(e===!1){var u=new Uint8Array(o);u[0]=0,u[1]=0}t=(0,m.utilConcatBuf)(t,o)}return t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),t}(v),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"valueHex"in e?r.valueHex=e.valueHex.slice(0):r.valueHex=new ArrayBuffer(0),r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!0),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),a=0;a<n.length;a++)i[a]=n[a];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),t}(w),_=t.Primitive=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,S));return r.idBlock.isConstructed=!1,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),t}(k),C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value=(0,m.getParametersValue)(e,"value",[]),r.isIndefiniteForm=(0,m.getParametersValue)(e,"isIndefiniteForm",!1),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){function n(e,t){return e===!0?1:t}var i=t,a=r;if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var u=new Uint8Array(e,t,r);if(0===u.length)return this.warnings.push("Zero buffer length"),t;for(var s=t;n(this.isIndefiniteForm,r)>0;){var c=o(e,s,r);if(c.offset===-1)return this.error=c.result.error,this.warnings.concat(c.result.warnings),-1;if(s=c.offset,this.blockLength+=c.result.blockLength,r-=c.result.blockLength,this.value.push(c.result),this.isIndefiniteForm===!0&&c.result.constructor.blockName()===O.blockName())break}return this.isIndefiniteForm===!0&&(this.value[this.value.length-1].constructor.blockName()===O.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(i,i+a),s}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,m.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var r=0;r<this.value.length;r++)e.value.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),t}(w),P=t.Constructed=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,C));return r.idBlock.isConstructed=!0,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),t}(k),A=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),t}(w),O=t.EndOfContent=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,A));return r.idBlock.tagClass=1,r.idBlock.tagNumber=0,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),t}(k),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.value=(0,m.getParametersValue)(e,"value",!1),r.isHexOnly=(0,m.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e)r.valueHex=e.valueHex.slice(0);else if(r.valueHex=new ArrayBuffer(1),r.value===!0){var i=new Uint8Array(r.valueHex);i[0]=255}return r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.value=0!==n[0],this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),a=0;a<n.length;a++)i[a]=n[a];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];
return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),t}(w),I=t.Boolean=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,E));return r.idBlock.tagClass=1,r.idBlock.tagNumber=1,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Boolean"}}]),t}(k),x=t.Sequence=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=16,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Sequence"}}]),t}(P),B=t.Set=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=17,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Set"}}]),t}(P),N=t.Null=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v));return r.idBlock.tagClass=1,r.idBlock.tagNumber=5,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(e===!0)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),t}(k),j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isConstructed=(0,m.getParametersValue)(e,"isConstructed",!1),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,r,n){var i=0;if(this.isConstructed===!0){if(this.isHexOnly=!1,i=C.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(var a=0;a<this.value.length;a++){var o=this.value[a].constructor.blockName();if(o===O.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==V.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n),this.blockLength=n;return i}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return C.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return e===!0?t:0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),t}(g(C)),V=t.OctetString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,j));return r.idBlock.tagClass=1,r.idBlock.tagNumber=4,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r):f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n)}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),t}(k),R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.unusedBits=(0,m.getParametersValue)(e,"unusedBits",0),r.isConstructed=(0,m.getParametersValue)(e,"isConstructed",!1),r.blockLength=r.valueHex.byteLength+1,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(this.isConstructed===!0){if(n=C.prototype.fromBER.call(this,e,t,r),n===-1)return n;for(var i=0;i<this.value.length;i++){var a=this.value[i].constructor.blockName();if(a===O.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(a!==T.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[i].unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[i].unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var u=new Uint8Array(this.valueHex),s=0;s<r-1;s++)u[s]=o[s+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isConstructed===!0)return C.prototype.toBER.call(this,e);if(e===!0)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var i=0;i<this.valueHex.byteLength;i++)n[i+1]=t[i];return r}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),t}(g(C)),T=t.BitString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,R));return r.idBlock.tagClass=1,r.idBlock.tagNumber=3,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,r,n){return 0===n?r:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n))}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),t}(k),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"value"in e&&(r.valueDec=e.value),r}return i(t,e),h(t,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.fromBER(e,t,r);if(i===-1)return i;var a=new Uint8Array(this._valueHex);if(0===a[0]&&0!==(128&a[1])){var o=new ArrayBuffer(this._valueHex.byteLength-1),u=new Uint8Array(o);u.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=o.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var s=new ArrayBuffer(n),c=new Uint8Array(s);c.set(a,n-this._valueHex.byteLength),this._valueHex=s.slice(0)}return i}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!==(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0===(128&t[1]):var i=new ArrayBuffer(this._valueHex.byteLength-1),a=new Uint8Array(i);a.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=i.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,r,n){var i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n);return i===-1?i:(this.blockLength=n,r+n)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),i=new Uint8Array(t),a=n.slice(0),o=a.length-1,u=i.slice(0),s=u.length-1,c=0,l=s<o?o:s,f=0,h=l;h>=0;h--,f++){switch(!0){case f<u.length:c=a[o-f]+u[s-f]+r[0];break;default:c=a[o-f]+r[0]}switch(r[0]=c/10,!0){case f>=a.length:a=(0,m.utilConcatView)(new Uint8Array([c%10]),a);break;default:a[o-f]=c%10}}return r[0]>0&&(a=(0,m.utilConcatView)(r,a)),a.slice(0)}function t(e){if(e>=d.length)for(var t=d.length;t<=e;t++){for(var r=new Uint8Array([0]),n=d[t-1].slice(0),i=n.length-1;i>=0;i--){var a=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=a[0]/10,n[i]=a[0]%10}r[0]>0&&(n=(0,m.utilConcatView)(r,n)),d.push(n)}return d[e]}function r(e,t){for(var r=0,n=new Uint8Array(e),i=new Uint8Array(t),a=n.slice(0),o=a.length-1,u=i.slice(0),s=u.length-1,c=void 0,l=0,f=s;f>=0;f--,l++)switch(c=a[o-l]-u[s-l]-r,!0){case c<0:r=1,a[o-l]=c+10;break;default:r=0,a[o-l]=c}if(r>0)for(var h=o-s+1;h>=0;h--,l++){if(c=a[o-l]-r,!(c<0)){r=0,a[o-l]=c;break}r=1,a[o-l]=c+10}return a.slice()}for(var n=8*this._valueHex.byteLength-1,i=new Uint8Array(8*this._valueHex.byteLength/3),a=0,o=void 0,u=new Uint8Array(this._valueHex),s="",c=!1,l=this._valueHex.byteLength-1;l>=0;l--){o=u[l];for(var f=0;f<8;f++){if(1===(1&o))switch(a){case n:i=r(t(a),i),s="-";break;default:i=e(i,t(a))}a++,o>>=1}}for(var h=0;h<i.length;h++)i[h]&&(c=!0),c&&(s+=p.charAt(i[h]));return c===!1&&(s+=p.charAt(0)),s}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=m.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,m.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),t}(g(w)),U=t.Integer=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,D));return r.idBlock.tagClass=1,r.idBlock.tagNumber=2,r}return i(t,e),h(t,[{key:"isEqual",value:function(e){return e instanceof t?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,m.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,m.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new t({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,r=new t({valueHex:this.valueBlock.valueHex});return r.valueBlock.fromDER(r.valueBlock.valueHex,0,r.valueBlock.valueHex.byteLength,e),r}}],[{key:"blockName",value:function(){return"Integer"}}]),t}(k),M=t.Enumerated=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=10,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Enumerated"}}]),t}(U),H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.valueDec=(0,m.getParametersValue)(e,"valueDec",-1),r.isFirstSid=(0,m.getParametersValue)(e,"isFirstSid",!1),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if((0,m.checkBufferParams)(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var i=new Uint8Array(this.valueHex),a=0;a<r&&(i[a]=127&n[a],this.blockLength++,0!==(128&n[a]));a++);for(var o=new ArrayBuffer(this.blockLength),u=new Uint8Array(o),s=0;s<this.blockLength;s++)u[s]=i[s];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!==(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,m.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.isHexOnly){if(e===!0)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(var i=0;i<this.blockLength-1;i++)r[i]=128|n[i];return r[this.blockLength-1]=n[this.blockLength-1],t}var a=(0,m.utilToBase)(this.valueDec,7);if(0===a.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(a.byteLength),e===!1){var o=new Uint8Array(a);r=new Uint8Array(t);for(var u=0;u<a.byteLength-1;u++)r[u]=128|o[u];r[a.byteLength-1]=o[a.byteLength-1]}return t}},{key:"toString",value:function(){var e="";if(this.isHexOnly===!0)e=(0,m.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),t}(g(v)),L=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.fromString((0,m.getParametersValue)(e,"value","")),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var i=new H;if(n=i.fromBER(e,n,r),n===-1)return this.blockLength=0,this.error=i.error,n;0===this.value.length&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,m.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",i=!1;do if(r=e.indexOf(".",t),n=r===-1?e.substr(t):e.substr(t,r-t),t=r+1,i){var a=this.value[0],o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=[],!1}var u=parseInt(n,10);if(isNaN(u))return!0;a.valueDec=u+o,i=!1}else{var s=new H;if(s.valueDec=parseInt(n,10),isNaN(s.valueDec))return!0;0===this.value.length&&(s.isFirstSid=!0,i=!0),this.value.push(s)}while(r!==-1);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e+="."),t?(n="{"+n+"}",this.value[r].isFirstSid?e="2.{"+n+" - 80}":e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),t}(w),F=t.ObjectIdentifier=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,L));return r.idBlock.tagClass=1,r.idBlock.tagNumber=6,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),t}(k),K=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),t}(g(v)),q=t.Utf8String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,K));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=12,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '+e+", using raw string")}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),i=0;i<r;i++)n[i]=t.charCodeAt(i);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),t}(k),J=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),t}(g(v)),W=t.BmpString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,J));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=30,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var i=r[n];r[n]=r[n+1],r[n+1]=i}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,m.utilToBase)(e.charCodeAt(n),8),a=new Uint8Array(i);if(!(a.length>2))for(var o=2-a.length,u=a.length-1;u>=0;u--)r[2*n+u+o]=a[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),t}(k),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),t}(g(v)),z=t.UniversalString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,G));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=28,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,m.utilToBase)(e.charCodeAt(n),8),a=new Uint8Array(i);if(!(a.length>4))for(var o=4-a.length,u=a.length-1;u>=0;u--)r[4*n+u+o]=a[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),t}(k),$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value="",r.isHexOnly=!0,r}return i(t,e),h(t,[{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),t}(g(v)),Q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,$));return"value"in e&&r.fromString(e.value),r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),t}(k),X=t.NumericString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=18,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"NumericString"}}]),t}(Q),Y=t.PrintableString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=19,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"PrintableString"}}]),t}(Q),Z=t.TeletexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=20,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"TeletexString"}}]),t}(Q),ee=t.VideotexString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=21,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"VideotexString"}}]),t}(Q),te=t.IA5String=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=22,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"IA5String"}}]),t}(Q),re=t.GraphicString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=25,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"GraphicString"}}]),t}(Q),ne=t.VisibleString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=26,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"VisibleString"}}]),t}(Q),ie=t.GeneralString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=27,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"GeneralString"}}]),t}(Q),ae=t.CharacterString=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=29,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"CharacterString"}}]),t}(Q),oe=t.UTCTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var i=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)i[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=23,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi,r=t.exec(e);if(null===r)return void(this.error="Wrong input string for convertion");var n=parseInt(r[1],10);n>=50?this.year=1900+n:this.year=2e3+n,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,m.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,m.padNumber)(this.month,2),e[2]=(0,m.padNumber)(this.day,2),e[3]=(0,m.padNumber)(this.hour,2),e[4]=(0,m.padNumber)(this.minute,2),e[5]=(0,m.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),t}(ne),ue=t.GeneralizedTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.millisecond=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var i=new Uint8Array(r.valueBlock.valueHex),o=0;o<e.value.length;o++)i[o]=e.value.charCodeAt(o)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=24,r}return i(t,e),h(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?r:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t=!1,r="",n="",i=0,a=void 0,o=0,u=0;if("Z"===e[e.length-1])r=e.substr(0,e.length-1),t=!0;else{var s=new Number(e[e.length-1]);if(isNaN(s.valueOf()))throw new Error("Wrong input string for convertion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for convertion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for convertion")}else{var c=1,l=r.indexOf("+"),f="";
if(l===-1&&(l=r.indexOf("-"),c=-1),l!==-1){if(f=r.substr(l+1),r=r.substr(0,l),2!==f.length&&4!==f.length)throw new Error("Wrong input string for convertion");var h=new Number(f.substr(0,2));if(isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");if(o=c*h,4===f.length){if(h=new Number(f.substr(2,2)),isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");u=c*h}}}var m=r.indexOf(".");if(m===-1&&(m=r.indexOf(",")),m!==-1){var d=new Number("0"+r.substr(m));if(isNaN(d.valueOf()))throw new Error("Wrong input string for convertion");i=d.valueOf(),n=r.substr(0,m)}else n=r;switch(!0){case 8===n.length:if(a=/(\d{4})(\d{2})(\d{2})/gi,m!==-1)throw new Error("Wrong input string for convertion");break;case 10===n.length:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var p=60*i;this.minute=Math.floor(p),p=60*(p-this.minute),this.second=Math.floor(p),p=1e3*(p-this.second),this.millisecond=Math.floor(p)}break;case 12===n.length:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var v=60*i;this.second=Math.floor(v),v=1e3*(v-this.second),this.millisecond=Math.floor(v)}break;case 14===n.length:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,m!==-1){var g=1e3*i;this.millisecond=Math.floor(g)}break;default:throw new Error("Wrong input string for convertion")}var y=a.exec(n);if(null===y)throw new Error("Wrong input string for convertion");for(var b=1;b<y.length;b++)switch(b){case 1:this.year=parseInt(y[b],10);break;case 2:this.month=parseInt(y[b],10);break;case 3:this.day=parseInt(y[b],10);break;case 4:this.hour=parseInt(y[b],10)+o;break;case 5:this.minute=parseInt(y[b],10)+u;break;case 6:this.second=parseInt(y[b],10);break;default:throw new Error("Wrong input string for convertion")}if(t===!1){var w=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=w.getUTCFullYear(),this.month=w.getUTCMonth(),this.day=w.getUTCDay(),this.hour=w.getUTCHours(),this.minute=w.getUTCMinutes(),this.second=w.getUTCSeconds(),this.millisecond=w.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,m.padNumber)(this.year,4)),e.push((0,m.padNumber)(this.month,2)),e.push((0,m.padNumber)(this.day,2)),e.push((0,m.padNumber)(this.hour,2)),e.push((0,m.padNumber)(this.minute,2)),e.push((0,m.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,m.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),t}(ne),se=t.DATE=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=31,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"DATE"}}]),t}(q),ce=t.TimeOfDay=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=32,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),t}(q),le=t.DateTime=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=33,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"DateTime"}}]),t}(q),fe=t.Duration=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=34,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"Duration"}}]),t}(q),he=t.TIME=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=14,r}return i(t,e),h(t,null,[{key:"blockName",value:function(){return"TIME"}}]),t}(q),me=t.Choice=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.value=(0,m.getParametersValue)(t,"value",[]),this.optional=(0,m.getParametersValue)(t,"optional",!1)},de=t.Any=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,m.getParametersValue)(t,"name",""),this.optional=(0,m.getParametersValue)(t,"optional",!1)},pe=t.Repeated=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,m.getParametersValue)(t,"name",""),this.optional=(0,m.getParametersValue)(t,"optional",!1),this.value=(0,m.getParametersValue)(t,"value",new de),this.local=(0,m.getParametersValue)(t,"local",!1)};t.RawData=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.data=(0,m.getParametersValue)(t,"data",new ArrayBuffer(0))}return h(e,[{key:"fromBER",value:function(e,t,r){this.data=e.slice(t,r)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data}}]),e}()},function(e,t){"use strict";function r(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function n(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,n="",i=!0,a=!1,o=void 0;try{for(var u,s=new Uint8Array(e,t,r)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=c.toString(16).toUpperCase();n=n+(1===l.length?"0":"")+l}}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}return n}function a(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)}function o(e,t){for(var r=0,n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function u(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=r||-1,i=e,a=0,o=Math.pow(2,t),u=1;u<8;u++){if(e<o){var s=void 0;if(n<0)s=new ArrayBuffer(u),a=u;else{if(n<u)return new ArrayBuffer(0);s=new ArrayBuffer(n),a=n}for(var c=new Uint8Array(s),l=u-1;l>=0;l--){var f=Math.pow(2,l*t);c[a-l-1]=Math.floor(i/f),i-=c[a-l-1]*f}return s}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function s(){for(var e=0,t=0,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=!0,o=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;e+=l.byteLength}}catch(e){o=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw u}}var f=new ArrayBuffer(e),h=new Uint8Array(f),m=!0,d=!1,p=void 0;try{for(var v,g=n[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var y=v.value;h.set(new Uint8Array(y),t),t+=y.byteLength}}catch(e){d=!0,p=e}finally{try{!m&&g.return&&g.return()}finally{if(d)throw p}}return f}function c(){for(var e=0,t=0,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=!0,o=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;e+=l.length}}catch(e){o=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw u}}var f=new ArrayBuffer(e),h=new Uint8Array(f),m=!0,d=!1,p=void 0;try{for(var v,g=n[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var y=v.value;h.set(y,t),t+=y.length}}catch(e){d=!0,p=e}finally{try{!m&&g.return&&g.return()}finally{if(d)throw p}}return h}function l(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0===(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(n),a=0;a<this.valueHex.byteLength;a++)i[a]=0;i[0]=128&e[0];for(var u=o(i,8),s=new ArrayBuffer(this.valueHex.byteLength),c=new Uint8Array(s),l=0;l<this.valueHex.byteLength;l++)c[l]=e[l];c[0]&=127;var f=o(c,8);return f-u}function f(e){for(var t=e<0?e*-1:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var i=r-t,a=u(i,8,n),o=new Uint8Array(a);return o[0]|=128,a}var s=u(t,8,n),c=new Uint8Array(s);if(128&c[0]){var l=s.slice(0),f=new Uint8Array(l);s=new ArrayBuffer(s.byteLength+1),c=new Uint8Array(s);for(var h=0;h<l.byteLength;h++)c[h+1]=f[h];c[0]=0}return s}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function h(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function m(e,t){for(var r=e.toString(10),n=t-r.length,i=new Array(n),a=0;a<n;a++)i[a]="0";var o=i.join("");return o.concat(r)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0,a=0,o=0,u="",s=t?w:b;if(n){for(var c=0,l=0;l<e.length;l++)if(0!==e.charCodeAt(l)){c=l;break}e=e.slice(c)}for(;i<e.length;){var f=e.charCodeAt(i++);i>=e.length&&(a=1);var h=e.charCodeAt(i++);i>=e.length&&(o=1);var m=e.charCodeAt(i++),d=f>>2,p=(3&f)<<4|h>>4,v=(15&h)<<2|m>>6,g=63&m;1===a?v=g=64:1===o&&(g=64),u+=r?64===v?""+s.charAt(d)+s.charAt(p):64===g?""+s.charAt(d)+s.charAt(p)+s.charAt(v):""+s.charAt(d)+s.charAt(p)+s.charAt(v)+s.charAt(g):""+s.charAt(d)+s.charAt(p)+s.charAt(v)+s.charAt(g)}return u}function p(e){function t(e){for(var t=0;t<64;t++)if(a.charAt(t)===e)return t;return 64}function r(e){return 64===e?0:e}for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?w:b,o=0,u="";o<e.length;){var s=t(e.charAt(o++)),c=o>=e.length?0:t(e.charAt(o++)),l=o>=e.length?0:t(e.charAt(o++)),f=o>=e.length?0:t(e.charAt(o++)),h=r(s)<<2|r(c)>>4,m=(15&r(c))<<4|r(l)>>2,d=(3&r(l))<<6|r(f);u+=String.fromCharCode(h),64!==l&&(u+=String.fromCharCode(m)),64!==f&&(u+=String.fromCharCode(d))}if(i){for(var p=u.length,v=-1,g=p-1;g>=0;g--)if(0!==u.charCodeAt(g)){v=g;break}v!==-1&&(u=u.slice(0,v+1))}return u}function v(e){var t="",r=new Uint8Array(e),n=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;t+=String.fromCharCode(s)}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return t}function g(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function y(e){var t=Math.log(e)/k,r=Math.floor(t),n=Math.round(t);return r===n?r:n}Object.defineProperty(t,"__esModule",{value:!0}),t.getUTCDate=r,t.getParametersValue=n,t.bufferToHexCodes=i,t.checkBufferParams=a,t.utilFromBase=o,t.utilToBase=u,t.utilConcatBuf=s,t.utilConcatView=c,t.utilDecodeTC=l,t.utilEncodeTC=f,t.isEqualBuffer=h,t.padNumber=m,t.toBase64=d,t.fromBase64=p,t.arrayBufferToString=v,t.stringToArrayBuffer=g,t.nearestPowerOf2=y;var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",k=Math.log(2)},function(e,t,r){!function(){function e(e){this.message=e}var r=t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",r.btoa||(r.btoa=function(t){for(var r,i,a=String(t),o=0,u=n,s="";a.charAt(0|o)||(u="=",o%1);s+=u.charAt(63&r>>8-o%1*8)){if(i=a.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return s}),r.atob||(r.atob=function(t){var r=String(t).replace(/[=]+$/,"");if(r.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,a,o=0,u=0,s="";a=r.charAt(u++);~a&&(i=o%4?64*i+a:a,o++%4)?s+=String.fromCharCode(255&i>>(-2*o&6)):0)a=n.indexOf(a);return s})}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeStampResp=t.TimeStampReq=t.Time=t.TSTInfo=t.TBSRequest=t.SubjectDirectoryAttributes=t.SingleResponse=t.SignerInfo=t.SignedData=t.SignedAndUnsignedAttributes=t.Signature=t.SecretBag=t.SafeContents=t.SafeBag=t.RevokedCertificate=t.RevocationInfoChoices=void 0,t.ResponseData=t.ResponseBytes=t.Request=t.RelativeDistinguishedNames=t.RecipientKeyIdentifier=t.RecipientInfo=t.RecipientIdentifier=t.RecipientEncryptedKeys=t.RecipientEncryptedKey=t.RSASSAPSSParams=t.RSAPublicKey=t.RSAPrivateKey=t.RSAESOAEPParams=t.PublicKeyInfo=t.PrivateKeyUsagePeriod=t.PrivateKeyInfo=t.PolicyQualifierInfo=t.PolicyMappings=t.PolicyMapping=t.PolicyInformation=t.PolicyConstraints=t.PasswordRecipientinfo=t.PKIStatusInfo=t.PKCS8ShroudedKeyBag=t.PFX=t.PBKDF2Params=t.PBES2Params=t.OtherRevocationInfoFormat=t.OtherRecipientInfo=t.OtherPrimeInfo=t.OtherKeyAttribute=t.OtherCertificateFormat=t.OriginatorPublicKey=t.OriginatorInfo=t.OriginatorIdentifierOrKey=t.OCSPResponse=t.OCSPRequest=t.NameConstraints=t.MessageImprint=t.MacData=t.KeyTransRecipientInfo=t.KeyBag=t.KeyAgreeRecipientInfo=t.KeyAgreeRecipientIdentifier=t.KEKRecipientInfo=t.KEKIdentifier=t.IssuingDistributionPoint=t.IssuerAndSerialNumber=t.InfoAccess=t.GeneratorsDriver=t.GeneralSubtree=t.GeneralNames=t.GeneralName=t.Extensions=t.Extension=t.ExtKeyUsage=t.EnvelopedData=t.EncryptedData=t.EncryptedContentInfo=t.EncapsulatedContentInfo=t.ECPublicKey=t.ECPrivateKey=t.ECCCMSSharedInfo=t.DistributionPoint=t.DigestInfo=t.CryptoEngine=t.ContentInfo=t.CertificationRequest=t.CertificateSet=t.CertificateRevocationList=t.CertificatePolicies=t.CertificateChainValidationEngine=t.Certificate=t.CertID=t.CertBag=t.CRLDistributionPoints=t.CRLBag=t.BasicOCSPResponse=t.BasicConstraints=t.AuthorityKeyIdentifier=t.AuthenticatedSafe=t.AttributeTypeAndValue=t.Attribute=t.AltName=t.AlgorithmIdentifier=t.Accuracy=t.AccessDescription=t.kdf=t.kdfWithCounter=t.getHashAlgorithm=t.getAlgorithmByOID=t.createECDSASignatureFromCMS=t.stringPrep=t.createCMSECDSASignature=t.getAlgorithmParameters=t.getOIDByAlgorithm=t.getRandomValues=t.getCrypto=t.getEngine=t.setEngine=void 0;var i=r(419),a=r(431),o=n(a),u=r(435),s=n(u),c=r(420),l=n(c),f=r(436),h=n(f),m=r(427),d=n(m),p=r(434),v=n(p),g=r(437),y=n(g),b=r(464),w=n(b),k=r(452),S=n(k),_=r(496),C=n(_),P=r(469),A=n(P),O=r(457),E=n(O),I=r(446),x=n(I),B=r(499),N=n(B),j=r(447),V=n(j),R=r(500),T=n(R),D=r(459),U=n(D),M=r(470),H=n(M),L=r(475),F=n(L),K=r(502),q=n(K),J=r(438),W=n(J),G=r(422),z=n(G),$=r(503),Q=n($),X=r(458),Y=n(X),Z=r(495),ee=n(Z),te=r(428),re=n(te),ne=r(424),ie=n(ne),ae=r(504),oe=n(ae),ue=r(443),se=n(ue),ce=r(442),le=n(ce),fe=r(473),he=n(fe),me=r(466),de=n(me),pe=r(449),ve=n(pe),ge=r(468),ye=n(ge),be=r(432),we=n(be),ke=r(454),Se=n(ke),_e=r(456),Ce=n(_e),Pe=r(501),Ae=n(Pe),Oe=r(467),Ee=n(Oe),Ie=r(481),xe=n(Ie),Be=r(453),Ne=n(Be),je=r(491),Ve=n(je),Re=r(490),Te=n(Re),De=r(487),Ue=n(De),Me=r(482),He=n(Me),Le=r(505),Fe=n(Le),Ke=r(479),qe=n(Ke),Je=r(506),We=n(Je),Ge=r(507),ze=n(Ge),$e=r(455),Qe=n($e),Xe=r(508),Ye=n(Xe),Ze=r(512),et=n(Ze),tt=r(483),rt=n(tt),nt=r(474),it=n(nt),at=r(484),ot=n(at),ut=r(514),st=n(ut),ct=r(489),lt=n(ct),ft=r(430),ht=n(ft),mt=r(493),dt=n(mt),pt=r(477),vt=n(pt),gt=r(445),yt=n(gt),bt=r(444),wt=n(bt),kt=r(515),St=n(kt),_t=r(441),Ct=n(_t),Pt=r(520),At=n(Pt),Ot=r(492),Et=n(Ot),It=r(465),xt=n(It),Bt=r(460),Nt=n(Bt),jt=r(463),Vt=n(jt),Rt=r(462),Tt=n(Rt),Dt=r(461),Ut=n(Dt),Mt=r(426),Ht=n(Mt),Lt=r(451),Ft=n(Lt),Kt=r(423),qt=n(Kt),Jt=r(494),Wt=n(Jt),Gt=r(429),zt=n(Gt),$t=r(425),Qt=n($t),Xt=r(421),Yt=n(Xt),Zt=r(486),er=n(Zt),tr=r(485),rr=n(tr),nr=r(480),ir=n(nr),ar=r(478),or=n(ar),ur=r(488),sr=n(ur),cr=r(433),lr=n(cr),fr=r(510),hr=n(fr),mr=r(513),dr=n(mr),pr=r(497),vr=n(pr),gr=r(476),yr=n(gr),br=r(471),wr=n(br),kr=r(440),Sr=n(kr),_r=r(439),Cr=n(_r),Pr=r(472),Ar=n(Pr),Or=r(511),Er=n(Or),Ir=r(518),xr=n(Ir),Br=r(516),Nr=n(Br),jr=r(517),Vr=n(jr),Rr=r(498),Tr=n(Rr),Dr=r(450),Ur=n(Dr),Mr=r(509),Hr=n(Mr),Lr=r(519),Fr=n(Lr),Kr=r(448),qr=n(Kr),Jr=r(521),Wr=n(Jr),Gr=r(522),zr=n(Gr);t.setEngine=i.setEngine,t.getEngine=i.getEngine,t.getCrypto=i.getCrypto,t.getRandomValues=i.getRandomValues,t.getOIDByAlgorithm=i.getOIDByAlgorithm,t.getAlgorithmParameters=i.getAlgorithmParameters,t.createCMSECDSASignature=i.createCMSECDSASignature,t.stringPrep=i.stringPrep,t.createECDSASignatureFromCMS=i.createECDSASignatureFromCMS,t.getAlgorithmByOID=i.getAlgorithmByOID,t.getHashAlgorithm=i.getHashAlgorithm,t.kdfWithCounter=i.kdfWithCounter,t.kdf=i.kdf,t.AccessDescription=o.default,t.Accuracy=s.default,t.AlgorithmIdentifier=l.default,t.AltName=h.default,t.Attribute=d.default,t.AttributeTypeAndValue=v.default,t.AuthenticatedSafe=y.default,t.AuthorityKeyIdentifier=w.default,t.BasicConstraints=S.default,t.BasicOCSPResponse=C.default,t.CRLBag=A.default,t.CRLDistributionPoints=E.default,t.CertBag=x.default,t.CertID=N.default,t.Certificate=V.default,t.CertificateChainValidationEngine=T.default,t.CertificatePolicies=U.default,t.CertificateRevocationList=H.default,t.CertificateSet=F.default,t.CertificationRequest=q.default,t.ContentInfo=W.default,t.CryptoEngine=z.default,t.DigestInfo=Q.default,t.DistributionPoint=Y.default,t.ECCCMSSharedInfo=ee.default,t.ECPrivateKey=re.default,t.ECPublicKey=ie.default,t.EncapsulatedContentInfo=oe.default,t.EncryptedContentInfo=se.default,t.EncryptedData=le.default,t.EnvelopedData=he.default,t.ExtKeyUsage=de.default,t.Extension=ve.default,t.Extensions=ye.default,t.GeneralName=we.default,t.GeneralNames=Se.default,t.GeneralSubtree=Ce.default,t.GeneratorsDriver=Ae.default,t.InfoAccess=Ee.default,t.IssuerAndSerialNumber=xe.default,t.IssuingDistributionPoint=Ne.default,t.KEKIdentifier=Ve.default,t.KEKRecipientInfo=Te.default,t.KeyAgreeRecipientIdentifier=Ue.default,t.KeyAgreeRecipientInfo=He.default,t.KeyBag=Fe.default,t.KeyTransRecipientInfo=qe.default,t.MacData=We.default,t.MessageImprint=ze.default,t.NameConstraints=Qe.default,t.OCSPRequest=Ye.default,t.OCSPResponse=et.default,t.OriginatorIdentifierOrKey=rt.default,t.OriginatorInfo=it.default,t.OriginatorPublicKey=ot.default,t.OtherCertificateFormat=st.default,t.OtherKeyAttribute=lt.default,t.OtherPrimeInfo=ht.default,t.OtherRecipientInfo=dt.default,t.OtherRevocationInfoFormat=vt.default,t.PBES2Params=yt.default,t.PBKDF2Params=wt.default,t.PFX=St.default,t.PKCS8ShroudedKeyBag=Ct.default,t.PKIStatusInfo=At.default,t.PasswordRecipientinfo=Et.default,t.PolicyConstraints=xt.default,t.PolicyInformation=Nt.default,t.PolicyMapping=Vt.default,t.PolicyMappings=Tt.default,t.PolicyQualifierInfo=Ut.default,t.PrivateKeyInfo=Ht.default,t.PrivateKeyUsagePeriod=Ft.default,t.PublicKeyInfo=qt.default,t.RSAESOAEPParams=Wt.default,t.RSAPrivateKey=zt.default,t.RSAPublicKey=Qt.default,t.RSASSAPSSParams=Yt.default,t.RecipientEncryptedKey=er.default,t.RecipientEncryptedKeys=rr.default,t.RecipientIdentifier=ir.default,t.RecipientInfo=or.default,t.RecipientKeyIdentifier=sr.default,t.RelativeDistinguishedNames=lr.default,t.Request=hr.default,t.ResponseBytes=dr.default,t.ResponseData=vr.default,t.RevocationInfoChoices=yr.default,t.RevokedCertificate=wr.default,t.SafeBag=Sr.default,t.SafeContents=Cr.default,t.SecretBag=Ar.default,t.Signature=Er.default,t.SignedAndUnsignedAttributes=xr.default,t.SignedData=Nr.default,t.SignerInfo=Vr.default,t.SingleResponse=Tr.default,t.SubjectDirectoryAttributes=Ur.default,t.TBSRequest=Hr.default,t.TSTInfo=Fr.default,t.Time=qr.default,t.TimeStampReq=Wr.default,t.TimeStampResp=zr.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t,r){A={name:e,crypto:t,subtle:r}}function o(){return A}function u(){if(null!==A.subtle)return A.subtle}function s(e){if(null!==A.crypto)return A.crypto.getRandomValues(e);throw new Error("No support for Web Cryptography API")}function c(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}function l(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:s(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:s(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e3},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}function f(e){if(e.byteLength%2!==0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t),n=new Uint8Array(r);n.set(new Uint8Array(e,0,t));var i=new b.Integer({valueHex:r}),a=new ArrayBuffer(t),o=new Uint8Array(a);o.set(new Uint8Array(e,t,t));var u=new b.Integer({valueHex:a});return new b.Sequence({value:[i.convertToDER(),u.convertToDER()]}).toBER(!1)}function h(e){var t=e.replace(/^\s+|\s+$/g,"");return t=t.replace(/\s+/g," "),t=t.toLowerCase()}function m(e){if(e instanceof b.Sequence==!1)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof b.Integer==!1)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof b.Integer==!1)return new ArrayBuffer(0);var t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();return(0,w.utilConcatBuf)(t.valueBlock.valueHex,r.valueBlock.valueHex)}function d(e){switch(e){case"1.2.840.113549.1.1.1":case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}function p(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new _.default({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=d(r.hashAlgorithm.algorithmId);if("name"in n==!1)return"";t=n.name}else t="SHA-1"}catch(e){}}return t}function v(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');var i=new ArrayBuffer(4),a=new Uint8Array(i);a[0]=0,a[1]=0,a[2]=0,a[3]=r;var o=new ArrayBuffer(0),s=u();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):(o=(0,w.utilConcatBuf)(o,t),o=(0,w.utilConcatBuf)(o,i),o=(0,w.utilConcatBuf)(o,n),s.digest({name:e},o).then(function(e){return{counter:r,result:e}}))}function g(e,t,r,n){var i=0,a=1,o=[];switch(e.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');
if(n instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var u=r/i;Math.floor(u)>0&&(a=Math.floor(u),u-a>0&&a++);for(var s=1;s<=a;s++)o.push(v(e,t,s,n));return Promise.all(o).then(function(e){for(var t=new ArrayBuffer(0),n=1,i=!0;i;){i=!1;var a=!0,o=!1,u=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;if(l.counter===n){t=(0,w.utilConcatBuf)(t,l.result),i=!0;break}}}catch(e){o=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw u}}n++}if(r>>=3,t.byteLength>r){for(var f=new ArrayBuffer(r),h=new Uint8Array(f),m=new Uint8Array(t),d=0;d<r;d++)h[d]=m[d];return f}return t})}Object.defineProperty(t,"__esModule",{value:!0}),t.setEngine=a,t.getEngine=o,t.getCrypto=u,t.getRandomValues=s,t.getOIDByAlgorithm=c,t.getAlgorithmParameters=l,t.createCMSECDSASignature=f,t.stringPrep=h,t.createECDSASignatureFromCMS=m,t.getAlgorithmByOID=d,t.getHashAlgorithm=p,t.kdfWithCounter=v,t.kdf=g;var y=r(415),b=i(y),w=r(416),k=r(420),S=(n(k),r(421)),_=n(S),C=r(422),P=n(C),A={name:"none",crypto:null,subtle:null};!function(){if("undefined"!=typeof self&&"crypto"in self){var e="webcrypto",t=self.crypto,r=null;if("webkitSubtle"in self.crypto){try{r=self.crypto.webkitSubtle}catch(e){r=self.crypto.subtle}e="safari"}"subtle"in self.crypto&&(r=self.crypto.subtle),A={name:e,crypto:t,subtle:new P.default({name:e,crypto:r})}}}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.algorithmId=(0,s.getParametersValue)(t,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in t&&(this.algorithmParams=(0,s.getParametersValue)(t,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new u.ObjectIdentifier({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof u.Any==!1&&e.push(this.algorithmParams),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof u.Any==!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new u.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof u.Any;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",optional:t.optional||!1,value:[new u.ObjectIdentifier({name:t.algorithmIdentifier||""}),new u.Any({name:t.algorithmParams||"",optional:!0})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,c.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=(0,c.getParametersValue)(t,"saltLength",e.defaultValues("saltLength")),this.trailerField=(0,c.getParametersValue)(t,"trailerField",e.defaultValues("trailerField")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSASSA_PSS_params");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new f.default({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new s.Integer({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new s.Integer({value:this.trailerField})]})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null});case"maskGenAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[f.default.schema(t.hashAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[f.default.schema(t.maskGenAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new s.Integer({name:t.saltLength||""})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new s.Integer({name:t.trailerField||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(423),f=n(l),h=r(426),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.crypto=(0,c.getParametersValue)(t,"crypto",{}),this.name=(0,c.getParametersValue)(t,"name","")}return o(e,[{key:"importKey",value:function(e,t,r,n,i){var a=this,o={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.crypto.importKey("raw",t,r,n,i);case"spki":var u=s.fromBER(t);if(u.offset===-1)return Promise.reject("Incorrect keyData");var l=new f.default;try{l.fromSchema(u.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="PS1";break;case"SHA-256":o.alg="PS256";break;case"SHA-384":o.alg="PS384";break;case"SHA-512":o.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(i=["verify"],o.kty="RSA",o.ext=n,o.key_ops=i,"1.2.840.113549.1.1.1"!==l.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId);if("alg"in o==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RS1";break;case"SHA-256":o.alg="RS256";break;case"SHA-384":o.alg="RS384";break;case"SHA-512":o.alg="RS512";break;default:return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId)}var h=l.toJSON(),d=!0,p=!1,v=void 0;try{for(var g,y=Object.keys(h)[Symbol.iterator]();!(d=(g=y.next()).done);d=!0){var b=g.value;o[b]=h[b]}}catch(e){p=!0,v=e}finally{try{!d&&y.return&&y.return()}finally{if(p)throw v}}break;case"ECDSA":i=["verify"];case"ECDH":if(o={kty:"EC",ext:n,key_ops:i},"1.2.840.10045.2.1"!==l.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId);var w=l.toJSON(),k=!0,S=!1,_=void 0;try{for(var C,P=Object.keys(w)[Symbol.iterator]();!(k=(C=P.next()).done);k=!0){var A=C.value;o[A]=w[A]}}catch(e){S=!0,_=e}finally{try{!k&&P.return&&P.return()}finally{if(S)throw _}}break;case"RSA-OAEP":if(o.kty="RSA",o.ext=n,o.key_ops=i,"safari"===this.name.toLowerCase())o.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RSA-OAEP-1";break;case"SHA-256":o.alg="RSA-OAEP-256";break;case"SHA-384":o.alg="RSA-OAEP-384";break;case"SHA-512":o.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect public key algorithm: "+l.algorithm.algorithmId)}var O=l.toJSON(),E=!0,I=!1,x=void 0;try{for(var B,N=Object.keys(O)[Symbol.iterator]();!(E=(B=N.next()).done);E=!0){var j=B.value;o[j]=O[j]}}catch(e){I=!0,x=e}finally{try{!E&&N.return&&N.return()}finally{if(I)throw x}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"pkcs8":var V=new m.default,R=s.fromBER(t);if(R.offset===-1)return Promise.reject("Incorrect keyData");try{V.fromSchema(R.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="PS1";break;case"SHA-256":o.alg="PS256";break;case"SHA-384":o.alg="PS384";break;case"SHA-512":o.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(i=["sign"],o.kty="RSA",o.ext=n,o.key_ops=i,"1.2.840.113549.1.1.1"!==V.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: "+V.privateKeyAlgorithm.algorithmId);if("alg"in o==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RS1";break;case"SHA-256":o.alg="RS256";break;case"SHA-384":o.alg="RS384";break;case"SHA-512":o.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var T=V.toJSON(),D=!0,U=!1,M=void 0;try{for(var H,L=Object.keys(T)[Symbol.iterator]();!(D=(H=L.next()).done);D=!0){var F=H.value;o[F]=T[F]}}catch(e){U=!0,M=e}finally{try{!D&&L.return&&L.return()}finally{if(U)throw M}}break;case"ECDSA":i=["sign"];case"ECDH":if(o={kty:"EC",ext:n,key_ops:i},"1.2.840.10045.2.1"!==V.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: "+V.privateKeyAlgorithm.algorithmId);var K=V.toJSON(),q=!0,J=!1,W=void 0;try{for(var G,z=Object.keys(K)[Symbol.iterator]();!(q=(G=z.next()).done);q=!0){var $=G.value;o[$]=K[$]}}catch(e){J=!0,W=e}finally{try{!q&&z.return&&z.return()}finally{if(J)throw W}}break;case"RSA-OAEP":if(o.kty="RSA",o.ext=n,o.key_ops=i,"safari"===this.name.toLowerCase())o.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":o.alg="RSA-OAEP-1";break;case"SHA-256":o.alg="RSA-OAEP-256";break;case"SHA-384":o.alg="RSA-OAEP-384";break;case"SHA-512":o.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var Q=V.toJSON(),X=!0,Y=!1,Z=void 0;try{for(var ee,te=Object.keys(Q)[Symbol.iterator]();!(X=(ee=te.next()).done);X=!0){var re=ee.value;o[re]=Q[re]}}catch(e){Y=!0,Z=e}finally{try{!X&&te.return&&te.return()}finally{if(Y)throw Z}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"jwk":o=t;break;default:return Promise.reject("Incorrect format: "+e)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(function(){return a.crypto.importKey("jwk",(0,c.stringToArrayBuffer)(JSON.stringify(o)),r,n,i)}).then(function(e){return e},function(e){return a.crypto.importKey("jwk",o,r,n,i)}):this.crypto.importKey("jwk",o,r,n,i)}},{key:"exportKey",value:function(e,t){var r=this.crypto.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(function(e){return e instanceof ArrayBuffer?JSON.parse((0,c.arrayBufferToString)(e)):e})),e.toLowerCase()){case"raw":return this.crypto.exportKey("raw",t);case"spki":r=r.then(function(e){var t=new f.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(function(e){var t=new m.default;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: "+e)}return r}},{key:"convert",value:function(e,t,r,n,i,a){var o=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(function(){return o.importKey("raw",r,n,i,a)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("raw",r,n,i,a)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve().then(function(){return o.importKey("raw",r,n,i,a)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("spki",r,n,i,a)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(function(){return o.importKey("spki",r,n,i,a)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,i,a)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(function(){return o.importKey("pkcs8",r,n,i,a)}).then(function(e){return o.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,i,a)}).then(function(e){return o.exportKey("raw",e)});case"spki":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,i,a)}).then(function(e){return o.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return o.importKey("jwk",r,n,i,a)}).then(function(e){return o.exportKey("pkcs8",e)});case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: "+t)}default:return Promise.reject("Incorrect inputFormat: "+e)}}},{key:"encrypt",value:function(){var e;return(e=this.crypto).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.crypto).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.crypto).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.crypto).verify.apply(e,arguments)}},{key:"digest",value:function(){var e;return(e=this.crypto).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.crypto).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.crypto).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.crypto).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.crypto).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.crypto).unwrapKey.apply(e,arguments)}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(420),h=n(f),m=r(424),d=n(m),p=r(425),v=n(p),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithm=(0,c.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=(0,c.getParametersValue)(t,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in t&&(this.parsedKey=(0,c.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PUBLIC_KEY_INFO");switch(this.algorithm=new h.default({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":"algorithmParams"in this.algorithm&&this.algorithm.algorithmParams instanceof s.ObjectIdentifier&&(this.parsedKey=new d.default({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex}));break;case"1.2.840.113549.1.1.1":var n=s.fromBER(this.subjectPublicKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new v.default({schema:n.result}))}}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}var t=this.parsedKey.toJSON(),r=!0,n=!1,i=void 0;try{for(var a,o=Object.keys(t)[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var u=a.value;e[u]=t[u]}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new d.default({json:e}),this.algorithm=new h.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new s.ObjectIdentifier({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new v.default({json:e}),this.algorithm=new h.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new s.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.subjectPublicKey=new s.BitString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if("undefined"==typeof e)return Promise.reject("Need to provide publicKey input parameter");var n=(0,l.getCrypto)();return"undefined"==typeof n?Promise.reject("Unable to create WebCrypto object"):(t=t.then(function(){return n.exportKey("spki",e)}),t=t.then(function(e){var t=s.fromBER(e);try{r.fromSchema(t.result)}catch(e){return Promise.reject("Error during initializing object from schema")}},function(e){return Promise.reject("Error during exporting public key: "+e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new h.default;case"subjectPublicKey":return new s.BitString;default:throw new Error("Invalid member name for PublicKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[h.default.schema(t.algorithm||{}),new s.BitString({name:t.subjectPublicKey||""})]})}}]),e}();t.default=g},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.x=(0,s.getParametersValue)(t,"x",e.defaultValues("x")),this.y=(0,s.getParametersValue)(t,"y",e.defaultValues("y")),this.namedCurve=(0,s.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return a(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==!1)throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=new Uint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var r=void 0;switch(this.namedCurve){case"1.2.840.10045.3.1.7":r=32;break;case"1.3.132.0.34":r=48;break;case"1.3.132.0.35":r=66;break;default:throw new Error("Incorrect curve OID: "+this.namedCurve)}if(e.byteLength!==2*r+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,r+1),this.y=e.slice(1+r,2*r+1)}},{key:"toSchema",value:function(){return new u.RawData({data:(0,s.utilConcatBuf)(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}return{crv:e,x:(0,s.toBase64)((0,s.arrayBufferToString)(this.x),!0,!0,!0),y:(0,s.toBase64)((0,s.arrayBufferToString)(this.y),!0,!0,!0)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');if(this.x=(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.x,!0)).slice(0,t),!("y"in e))throw new Error('Absent mandatory parameter "y"');this.y=(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.y,!0)).slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return(0,s.isEqualBuffer)(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: "+t)}}},{key:"schema",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new u.RawData}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.modulus=(0,s.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,s.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:(0,s.toBase64)((0,s.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,s.toBase64)((0,s.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.n,!0)).slice(0,256)}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":return new u.Integer;case"publicExponent":return new u.Integer;default:throw new Error("Invalid member name for RSAPublicKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.modulus||""}),new u.Integer({name:t.publicExponent||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=r(427),m=n(h),d=r(428),p=n(d),v=r(429),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKeyAlgorithm=(0,c.getParametersValue)(t,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=(0,c.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"attributes"in t&&(this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),"parsedKey"in t&&(this.parsedKey=(0,c.getParametersValue)(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new f.default({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,function(e){return new m.default({schema:e})})),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var n=s.fromBER(this.privateKey.valueBlock.valueHex);n.offset!==-1&&(this.parsedKey=new g.default({schema:n.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof s.ObjectIdentifier){var i=s.fromBER(this.privateKey.valueBlock.valueHex);i.offset!==-1&&(this.parsedKey=new p.default({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:i.result}))}}}},{key:"toSchema",value:function(){var e=[new s.Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}var r=this.parsedKey.toJSON(),n=!0,i=!1,a=void 0;try{for(var o,u=Object.keys(r)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;t[s]=r[s]}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new p.default({json:e}),this.privateKeyAlgorithm=new f.default({algorithmId:"1.2.840.10045.2.1",algorithmParams:new s.ObjectIdentifier({value:this.parsedKey.namedCurve
})});break;case"RSA":this.parsedKey=new g.default({json:e}),this.privateKeyAlgorithm=new f.default({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new s.Null});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.privateKey=new s.OctetString({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new f.default;case"privateKey":return new s.OctetString;case"attributes":return[];default:throw new Error("Invalid member name for PrivateKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),f.default.schema(t.privateKeyAlgorithm||{}),new s.OctetString({name:t.privateKey||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.attributes||"",value:m.default.schema()})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,s.getParametersValue)(t,"type",e.defaultValues("type")),this.values=(0,s.getParametersValue)(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{type:"type",values:"values"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTRIBUTE");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.type}),new u.Set({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.type||""}),new u.Set({name:t.setName||"",value:[new u.Repeated({name:t.values||"",value:new u.Any})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(424),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.privateKey=(0,c.getParametersValue)(t,"privateKey",e.defaultValues("privateKey")),"namedCurve"in t&&(this.namedCurve=(0,c.getParametersValue)(t,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in t&&(this.publicKey=(0,c.getParametersValue)(t,"publicKey",e.defaultValues("publicKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var n={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(n.namedCurve=this.namedCurve),this.publicKey=new f.default(n)}}},{key:"toSchema",value:function(){var e=[new s.Integer({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.ObjectIdentifier({value:this.namedCurve})]})),"publicKey"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new s.BitString({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==!1||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:(0,c.toBase64)((0,c.arrayBufferToString)(this.privateKey.valueBlock.valueHex),!0,!0,!0)};if("publicKey"in this){var n=this.publicKey.toJSON();r.x=n.x,r.y=n.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');this.privateKey=new s.OctetString({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.d,!0)).slice(0,t)}),"x"in e&&"y"in e&&(this.publicKey=new f.default({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new s.OctetString;case"namedCurve":return"";case"publicKey":return new f.default;default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return f.default.compareWithDefault("namedCurve",r.namedCurve)&&f.default.compareWithDefault("x",r.x)&&f.default.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.OctetString({name:t.privateKey||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.ObjectIdentifier({name:t.namedCurve||""})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.BitString({name:t.publicKey||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(430),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.modulus=(0,c.getParametersValue)(t,"modulus",e.defaultValues("modulus")),this.publicExponent=(0,c.getParametersValue)(t,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=(0,c.getParametersValue)(t,"privateExponent",e.defaultValues("privateExponent")),this.prime1=(0,c.getParametersValue)(t,"prime1",e.defaultValues("prime1")),this.prime2=(0,c.getParametersValue)(t,"prime2",e.defaultValues("prime2")),this.exponent1=(0,c.getParametersValue)(t,"exponent1",e.defaultValues("exponent1")),this.exponent2=(0,c.getParametersValue)(t,"exponent2",e.defaultValues("exponent2")),this.coefficient=(0,c.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in t&&(this.otherPrimeInfos=(0,c.getParametersValue)(t,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new s.Sequence({value:Array.from(this.otherPrimeInfos,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={n:(0,c.toBase64)((0,c.arrayBufferToString)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:(0,c.toBase64)((0,c.arrayBufferToString)(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:(0,c.toBase64)((0,c.arrayBufferToString)(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:(0,c.toBase64)((0,c.arrayBufferToString)(this.prime1.valueBlock.valueHex),!0,!0,!0),q:(0,c.toBase64)((0,c.arrayBufferToString)(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:(0,c.toBase64)((0,c.arrayBufferToString)(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:(0,c.toBase64)((0,c.arrayBufferToString)(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:(0,c.toBase64)((0,c.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,function(e){return e.toJSON()})),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new s.Integer({valueHex:(0,c.stringToArrayBuffer)((0,c.fromBase64)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,function(e){return new f.default({json:e})}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":return new s.Integer;case"publicExponent":return new s.Integer;case"privateExponent":return new s.Integer;case"prime1":return new s.Integer;case"prime2":return new s.Integer;case"exponent1":return new s.Integer;case"exponent2":return new s.Integer;case"coefficient":return new s.Integer;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Integer({name:t.modulus||""}),new s.Integer({name:t.publicExponent||""}),new s.Integer({name:t.privateExponent||""}),new s.Integer({name:t.prime1||""}),new s.Integer({name:t.prime2||""}),new s.Integer({name:t.exponent1||""}),new s.Integer({name:t.exponent2||""}),new s.Integer({name:t.coefficient||""}),new s.Sequence({optional:!0,value:[new s.Repeated({name:t.otherPrimeInfosName||"",value:f.default.schema(t.otherPrimeInfo||{})})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.prime=(0,s.getParametersValue)(t,"prime",e.defaultValues("prime")),this.exponent=(0,s.getParametersValue)(t,"exponent",e.defaultValues("exponent")),this.coefficient=(0,s.getParametersValue)(t,"coefficient",e.defaultValues("coefficient")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new u.Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:(0,s.toBase64)((0,s.arrayBufferToString)(this.prime.valueBlock.valueHex),!0,!0),d:(0,s.toBase64)((0,s.arrayBufferToString)(this.exponent.valueBlock.valueHex),!0,!0),t:(0,s.toBase64)((0,s.arrayBufferToString)(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new u.Integer({valueHex:(0,s.stringToArrayBuffer)((0,s.fromBase64)(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":return new u.Integer;case"exponent":return new u.Integer;case"coefficient":return new u.Integer;default:throw new Error("Invalid member name for OtherPrimeInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.prime||""}),new u.Integer({name:t.exponent||""}),new u.Integer({name:t.coefficient||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.accessMethod=(0,c.getParametersValue)(t,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=(0,c.getParametersValue)(t,"accessLocation",e.defaultValues("accessLocation")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new f.default({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.ObjectIdentifier({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new f.default;default:throw new Error("Invalid member name for AccessDescription class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.accessMethod||""}),f.default.schema(t.accessLocation||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,h.getParametersValue)(e,"names",{});return new f.Sequence({optional:t,value:[new f.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Constructed({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new f.Choice({value:[new f.NumericString,new f.PrintableString]})]}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new f.Primitive({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new f.Constructed({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new f.Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new f.Constructed({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new f.Repeated({value:new f.PrintableString})]})]})}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new f.Sequence({optional:e,value:[new f.PrintableString,new f.PrintableString]})}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new f.Set({optional:e,value:[new f.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new f.Any]})]})}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(415),f=i(l),h=r(416),m=r(433),d=n(m),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,h.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,h.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return c(e,[{key:"fromSchema",value:function(t){var r=f.compareSchema(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GENERAL_NAME");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var n=r.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;var i=n.toBER(!1);this.value=f.fromBER(i).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new d.default({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new f.OctetString({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var a=r.result.blockName;a.idBlock.tagClass=1,a.idBlock.tagNumber=6;var o=a.toBER(!1);this.value=f.fromBER(o).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new f.Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new f.IA5String({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new f.Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var n=new f.ObjectIdentifier({value:this.value});return n.idBlock.tagClass=3,n.idBlock.tagNumber=this.type,n;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type};return"string"==typeof this.value?e.value=this.value:e.value=this.value.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,h.getParametersValue)(e,"names",{});return new f.Choice({value:[new f.Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new f.ObjectIdentifier,new f.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new f.Any]})]}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new f.Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[o(t.builtInStandardAttributes||{},!1),u(!0),s(!0)]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[d.default.schema(t.directoryName||{})]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new f.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new f.Choice({value:[new f.TeletexString,new f.PrintableString,new f.UniversalString,new f.Utf8String,new f.BmpString]})]}),new f.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new f.Choice({value:[new f.TeletexString,new f.PrintableString,new f.UniversalString,new f.Utf8String,new f.BmpString]})]})]}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new f.Primitive({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(415),c=i(s),l=r(416),f=r(434),h=n(f),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.typesAndValues=(0,l.getParametersValue)(t,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=(0,l.getParametersValue)(t,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RDN");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,function(e){return new h.default({schema:e})})),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){if(0===this.valueBeforeDecode.byteLength)return new c.Sequence({value:[new c.Set({value:Array.from(this.typesAndValues,function(e){return e.toSchema()})})]});var e=c.fromBER(this.valueBeforeDecode);return e.result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,function(e){return e.toJSON()})}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r=!0,n=!1,i=void 0;try{for(var a,u=this.typesAndValues.entries()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=o(a.value,2),c=s[0],f=s[1];if(f.isEqual(t.typesAndValues[c])===!1)return!1}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}return!0}return t instanceof ArrayBuffer&&(0,l.isEqualBuffer)(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"",value:[new c.Repeated({name:t.repeatedSequence||"",value:new c.Set({value:[new c.Repeated({name:t.repeatedSet||"",value:h.default.schema(t.typeAndValue||{})})]})})]})}}]),e}();t.default=m},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=r(419),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,s.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,s.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTR_TYPE_AND_VALUE");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.type!==t.type)return!1;if(this.value instanceof u.Utf8String&&t.value instanceof u.Utf8String||this.value instanceof u.BmpString&&t.value instanceof u.BmpString||this.value instanceof u.UniversalString&&t.value instanceof u.UniversalString||this.value instanceof u.NumericString&&t.value instanceof u.NumericString||this.value instanceof u.PrintableString&&t.value instanceof u.PrintableString||this.value instanceof u.TeletexString&&t.value instanceof u.TeletexString||this.value instanceof u.VideotexString&&t.value instanceof u.VideotexString||this.value instanceof u.IA5String&&t.value instanceof u.IA5String||this.value instanceof u.GraphicString&&t.value instanceof u.GraphicString||this.value instanceof u.VisibleString&&t.value instanceof u.VisibleString||this.value instanceof u.GeneralString&&t.value instanceof u.GeneralString||this.value instanceof u.CharacterString&&t.value instanceof u.CharacterString){
var r=(0,c.stringPrep)(this.value.valueBlock.value),n=(0,c.stringPrep)(t.value.valueBlock.value);if(0!==r.localeCompare(n))return!1}else if((0,s.isEqualBuffer)(this.value.valueBeforeDecode,t.value.valueBeforeDecode)===!1)return!1;return!0}return t instanceof ArrayBuffer&&(0,s.isEqualBuffer)(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.type||""}),new u.Any({name:t.value||""})]})}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"seconds"in t&&(this.seconds=(0,s.getParametersValue)(t,"seconds",e.defaultValues("seconds"))),"millis"in t&&(this.millis=(0,s.getParametersValue)(t,"millis",e.defaultValues("millis"))),"micros"in t&&(this.micros=(0,s.getParametersValue)(t,"micros",e.defaultValues("micros"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for tsp.Accuracy");if("seconds"in r.result&&(this.seconds=r.result.seconds.valueBlock.valueDec),"millis"in r.result){var n=new u.Integer({valueHex:r.result.millis.valueBlock.valueHex});this.millis=n.valueBlock.valueDec}if("micros"in r.result){var i=new u.Integer({valueHex:r.result.micros.valueBlock.valueHex});this.micros=i.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("seconds"in this&&e.push(new u.Integer({value:this.seconds})),"millis"in this){var t=new u.Integer({value:this.millis});e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHex}))}if("micros"in this){var r=new u.Integer({value:this.micros});e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:r.valueBlock.valueHex}))}return new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}],[{key:"defaultValues",value:function(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error("Invalid member name for Accuracy class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"seconds":case"millis":case"micros":return r===e.defaultValues(t);default:throw new Error("Invalid member name for Accuracy class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",optional:!0,value:[new u.Integer({optional:!0,name:t.seconds||""}),new u.Primitive({name:t.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Primitive({name:t.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.altNames=(0,c.getParametersValue)(t,"altNames",e.defaultValues("altNames")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{altNames:"altNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.altNames,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.altNames||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(415),l=i(c),f=r(416),h=r(438),m=n(h),d=r(439),p=n(d),v=r(473),g=n(v),y=r(442),b=n(y),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.safeContents=(0,f.getParametersValue)(t,"safeContents",e.defaultValues("safeContents")),"parsedValue"in t&&(this.parsedValue=(0,f.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema({names:{contentInfos:"contentInfos"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthenticatedSafe");this.safeContents=Array.from(r.result.contentInfos,function(e){return new m.default({schema:e})})}},{key:"toSchema",value:function(){return new l.Sequence({value:Array.from(this.safeContents,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeContents:Array.from(this.safeContents,function(e){return e.toJSON()})}}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');var r=Promise.resolve();this.parsedValue={safeContents:[]};var n=!0,i=!1,a=void 0;try{for(var s,c=this.safeContents.entries()[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var f=u(s.value,2),h=f[0],m=f[1];switch(m.contentType){case"1.2.840.113549.1.7.1":if(m.content instanceof l.OctetString==!1)return Promise.reject('Wrong type of "this.safeContents[j].content"');var d=l.fromBER(m.content.valueBlock.valueHex);if(d.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "content.content"');this.parsedValue.safeContents.push({privacyMode:0,value:new p.default({schema:d.result})});break;case"1.2.840.113549.1.7.3":var v=function(){var n=new g.default({schema:m.content});if("recipientCertificate"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientCertificate" in "parameters.safeContents[j]"')};var i=e.safeContents[h].recipientCertificate;if("recipientKey"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientKey" in "parameters.safeContents[j]"')};var a=e.safeContents[h].recipientKey;r=r.then(function(){return n.decrypt(0,{recipientCertificate:i,recipientPrivateKey:a})}),r=r.then(function(e){var r=l.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:2,value:new p.default({schema:r.result})}),Promise.resolve())})}();if("object"===("undefined"==typeof v?"undefined":o(v)))return v.v;break;case"1.2.840.113549.1.7.6":var y=function(){var n=new b.default({schema:m.content});if("password"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "password" in "parameters.safeContents[j]"')};var i=e.safeContents[h].password;r=r.then(function(){return n.decrypt({password:i})},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=l.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:1,value:new p.default({schema:r.result})}),Promise.resolve())},function(e){return Promise.reject(e)})}();if("object"===("undefined"==typeof y?"undefined":o(y)))return y.v;break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '+m.contentType)}}}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return r}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please run "parseValues" first or add "parsedValue" manually');if(this.parsedValue instanceof Object==!1)return Promise.reject('The "this.parsedValue" must has "Object" type');if(this.parsedValue.safeContents instanceof Array==!1)return Promise.reject('The "this.parsedValue.safeContents" must has "Array" type');if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.parsedValue.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');var r=Promise.resolve();this.safeContents=[];var n=!0,i=!1,a=void 0;try{for(var s,c=this.parsedValue.safeContents.entries()[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var f=u(s.value,2),h=f[0],d=f[1];if("privacyMode"in d==!1)return Promise.reject('The "privacyMode" is a mandatory parameter for "content"');if("value"in d==!1)return Promise.reject('The "value" is a mandatory parameter for "content"');if(d.value instanceof p.default==!1)return Promise.reject('The "content.value" must has "SafeContents" type');switch(d.privacyMode){case 0:!function(){var e=d.value.toSchema().toBER(!1);r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.1",content:new l.OctetString({valueHex:e})}))})}();break;case 1:!function(){var n=new b.default,i=e.safeContents[h];i.contentToEncrypt=d.value.toSchema().toBER(!1),r=r.then(function(){return n.encrypt(i)},function(e){return Promise.reject(e)}),r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.6",content:n.toSchema()}))},function(e){return Promise.reject(e)})}();break;case 2:var v=function(){var n=new g.default,i=d.value.toSchema().toBER(!1);if("encryptingCertificate"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptingCertificate" in "parameters.safeContents[i]"')};if("encryptionAlgorithm"in e.safeContents[h]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptionAlgorithm" in "parameters.safeContents[i]"')};switch(!0){case"aes-cbc"===e.safeContents[h].encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===e.safeContents[h].encryptionAlgorithm.name.toLowerCase():break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '+e.safeContents[h].encryptionAlgorithm)}}switch(!0){case 128===e.safeContents[h].encryptionAlgorithm.length:case 192===e.safeContents[h].encryptionAlgorithm.length:case 256===e.safeContents[h].encryptionAlgorithm.length:break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '+e.safeContents[h].encryptionAlgorithm.length)}}var a=e.safeContents[h].encryptionAlgorithm;n.addRecipientByCertificate(e.safeContents[h].encryptingCertificate),r=r.then(function(){return n.encrypt(a,i)}),r=r.then(function(){t.safeContents.push(new m.default({contentType:"1.2.840.113549.1.7.3",content:n.toSchema()}))})}();if("object"===("undefined"==typeof v?"undefined":o(v)))return v.v;break;default:return Promise.reject('Incorrect value for "content.privacyMode": '+d.privacyMode)}}}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"safeContents":return[];case"parsedValue":return{};default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeContents":return 0===t.length;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return new l.Sequence({name:t.blockName||"",value:[new l.Repeated({name:t.contentInfos||"",value:m.default.schema()})]})}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.contentType=(0,s.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.content=(0,s.getParametersValue)(t,"content",e.defaultValues("content")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_CONTENT_INFO");this.contentType=r.result.contentType.valueBlock.toString(),this.content=r.result.content}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.contentType}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}},{key:"toJSON",value:function(){var e={contentType:this.contentType};return this.content instanceof u.Any||(e.content=this.content.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"content":return new u.Any;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"contentType":return""===t;case"content":return t instanceof u.Any;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new u.Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new u.ObjectIdentifier({name:t.contentType||"contentType"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.content||"content"})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(440),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.safeBags=(0,c.getParametersValue)(t,"safeBags",e.defaultValues("safeBags")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{safeBags:"safeBags"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SafeContents");this.safeBags=Array.from(r.result.safeBags,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.safeBags,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeBags:Array.from(this.safeBags,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"safeBags":return[];default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeBags":return 0===t.length;default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.safeBags||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(427),f=n(l),h=r(426),m=n(h),d=r(441),p=n(d),v=r(446),g=n(v),y=r(469),b=n(y),w=r(472),k=n(w),S=r(439),_=n(S),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.bagId=(0,c.getParametersValue)(t,"bagId",e.defaultValues("bagId")),this.bagValue=(0,c.getParametersValue)(t,"bagValue",e.defaultValues("bagValue")),"bagAttributes"in t&&(this.bagAttributes=(0,c.getParametersValue)(t,"bagAttributes",e.defaultValues("bagAttributes"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{bagId:"bagId",bagValue:"bagValue",bagAttributes:"bagAttributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SafeBag");switch(this.bagId=r.result.bagId.valueBlock.toString(),this.bagId){case"1.2.840.113549.1.12.10.1.1":this.bagValue=new m.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.2":this.bagValue=new p.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.3":this.bagValue=new g.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.4":this.bagValue=new b.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.5":this.bagValue=new k.default({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.6":this.bagValue=new _.default({schema:r.result.bagValue});break;default:throw new Error('Invalid "bagId" for SafeBag: '+this.bagId)}"bagAttributes"in r.result&&(this.bagAttributes=Array.from(r.result.bagAttributes,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[new s.ObjectIdentifier({value:this.bagId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return"bagAttributes"in this&&e.push(new s.Set({value:Array.from(this.bagAttributes,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return"bagAttributes"in this&&(e.bagAttributes=Array.from(this.bagAttributes,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"bagId":return"";case"bagValue":return new s.Any;case"bagAttributes":return[];default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"bagId":return""===t;case"bagValue":return t instanceof s.Any;case"bagAttributes":return 0===t.length;default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.bagId||"bagId"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.bagValue||"bagValue"})]}),new s.Set({optional:!0,value:[new s.Repeated({name:t.bagAttributes||"bagAttributes",value:f.default.schema()})]})]})}}]),e}();t.default=C},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=r(442),m=n(h),d=r(443),p=n(d),v=r(426),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.encryptionAlgorithm=(0,c.getParametersValue)(t,"encryptionAlgorithm",e.defaultValues("encryptionAlgorithm")),this.encryptedData=(0,c.getParametersValue)(t,"encryptedData",e.defaultValues("encryptedData")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{encryptionAlgorithm:{names:{blockName:"encryptionAlgorithm"}},encryptedData:"encryptedData"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8ShroudedKeyBag");this.encryptionAlgorithm=new f.default({schema:r.result.encryptionAlgorithm}),this.encryptedData=r.result.encryptedData}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}},{key:"toJSON",value:function(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}},{key:"parseInternalValues",value:function(e){var t=this,r=Promise.resolve(),n=new m.default({encryptedContentInfo:new p.default({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});return r=r.then(function(){return n.decrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=s.fromBER(e);return r.offset===-1?Promise.reject("Error during parsing ASN.1 data"):void(t.parsedValue=new g.default({schema:r.result}))},function(e){return Promise.reject(e)})}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please initialize "parsedValue" first');var r=Promise.resolve(),n=new m.default;return r=r.then(function(){return e.contentToEncrypt=t.parsedValue.toSchema().toBER(!1),n.encrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(){t.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,t.encryptedData=n.encryptedContentInfo.encryptedContent})}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptionAlgorithm":return new f.default;case"encryptedData":return new s.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"encryptionAlgorithm":return f.default.compareWithDefault("algorithmId",r.algorithmId)&&"algorithmParams"in r==!1;case"encryptedData":return r.isEqual(e.defaultValues(t));case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.encryptionAlgorithm||{names:{blockName:"encryptionAlgorithm"}}),new s.Choice({value:[new s.OctetString({name:t.encryptedData||"encryptedData"}),new s.OctetString({idBlock:{isConstructed:!0},name:t.encryptedData||"encryptedData"})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(443),h=n(f),m=r(427),d=n(m),p=r(444),v=n(p),g=r(420),y=n(g),b=r(445),w=n(b),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.encryptedContentInfo=(0,c.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,c.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_ENCRYPTED_DATA");this.version=r.result.version.valueBlock.valueDec,this.encryptedContentInfo=new h.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new d.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"encrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==!1)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');var r=(0,l.getOIDByAlgorithm)(e.contentEncryptionAlgorithm);if(""===r)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var n=(0,l.getOIDByAlgorithm)({name:"PBKDF2"});if(""===n)return Promise.reject("Can not find OID for PBKDF2");var i=(0,l.getOIDByAlgorithm)({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===i)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '+e.hmacHashAlgorithm);var a=(0,l.getCrypto)();if("undefined"==typeof a)return Promise.reject("Unable to create WebCrypto object");var o=Promise.resolve(),u=new ArrayBuffer(16),c=new Uint8Array(u);(0,l.getRandomValues)(c);var f=new ArrayBuffer(64),m=new Uint8Array(f);(0,l.getRandomValues)(m);var d=new Uint8Array(e.contentToEncrypt),p=new v.default({salt:new s.OctetString({valueHex:f}),iterationCount:e.iterationCount,prf:new y.default({algorithmId:i,algorithmParams:new s.Null})});return o=o.then(function(){var t=new Uint8Array(e.password);return a.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),o=o.then(function(t){return a.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:m,iterations:e.iterationCount},t,e.contentEncryptionAlgorithm,!1,["encrypt"])},function(e){return Promise.reject(e)}),o=o.then(function(t){return a.encrypt({name:e.contentEncryptionAlgorithm.name,iv:c},t,d)},function(e){return Promise.reject(e)}),o=o.then(function(e){var i=new w.default({keyDerivationFunc:new y.default({algorithmId:n,algorithmParams:p.toSchema()}),encryptionScheme:new y.default({algorithmId:r,algorithmParams:new s.OctetString({valueHex:u})})});t.encryptedContentInfo=new h.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new y.default({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:i.toSchema()
}),encryptedContent:new s.OctetString({valueHex:e})})},function(e){return Promise.reject(e)})}},{key:"decrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("1.2.840.113549.1.5.13"!==this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '+this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=(0,l.getCrypto)();if("undefined"==typeof r)return Promise.reject("Unable to create WebCrypto object");var n=Promise.resolve(),i=void 0;try{i=new w.default({schema:this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}var a=void 0;try{a=new v.default({schema:i.keyDerivationFunc.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}var o=(0,l.getAlgorithmByOID)(i.encryptionScheme.algorithmId);if("name"in o==!1)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '+i.encryptionScheme.algorithmId);var u=i.encryptionScheme.algorithmParams.valueBlock.valueHex,s=new Uint8Array(u),f=a.salt.valueBlock.valueHex,h=new Uint8Array(f),m=a.iterationCount,d="SHA-1";if("prf"in a){var p=(0,l.getAlgorithmByOID)(a.prf.algorithmId);if("name"in p==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");d=p.hash.name}return n=n.then(function(){return r.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),n=n.then(function(e){return r.deriveKey({name:"PBKDF2",hash:{name:d},salt:h,iterations:m},e,o,!1,["decrypt"])},function(e){return Promise.reject(e)}),n=n.then(function(e){var n=new ArrayBuffer(0);if(t.encryptedContentInfo.encryptedContent.idBlock.isConstructed===!1)n=t.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var i=!0,a=!1,u=void 0;try{for(var l,f=t.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var h=l.value;n=(0,c.utilConcatBuf)(n,h.valueBlock.valueHex)}}catch(e){a=!0,u=e}finally{try{!i&&f.return&&f.return()}finally{if(a)throw u}}}return r.decrypt({name:o.name,iv:s},e,n)},function(e){return Promise.reject(e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"encryptedContentInfo":return new h.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"version":return 0===t;case"encryptedContentInfo":return h.default.compareWithDefault("contentType",t.contentType)&&h.default.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&h.default.compareWithDefault("encryptedContent",t.encryptedContent);case"unprotectedAttrs":return 0===t.length;default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),h.default.schema(t.encryptedContentInfo||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.unprotectedAttrs||"",value:d.default.schema()})]})]})}}]),e}();t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,e),this.contentType=(0,c.getParametersValue)(t,"contentType",e.defaultValues("contentType")),this.contentEncryptionAlgorithm=(0,c.getParametersValue)(t,"contentEncryptionAlgorithm",e.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in t&&(this.encryptedContent=t.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&this.encryptedContent.idBlock.isConstructed===!1)){for(var r=new s.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,i=this.encryptedContent.valueBlock.valueHex.byteLength;i>0;){for(var o=new Uint8Array(this.encryptedContent.valueBlock.valueHex,n,n+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-n:1024),u=new ArrayBuffer(o.length),l=new Uint8Array(u),f=0;f<l.length;f++)l[f]=o[f];r.valueBlock.value.push(new s.OctetString({valueHex:u})),i-=o.length,n+=o.length}this.encryptedContent=r}"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new f.default({schema:r.result.contentEncryptionAlgorithm}),"encryptedContent"in r.result&&(this.encryptedContent=r.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}},{key:"toSchema",value:function(){var e={isIndefiniteForm:!1},t=[];if(t.push(new s.ObjectIdentifier({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;var r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new s.Sequence({lenBlock:e,value:t})}},{key:"toJSON",value:function(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new f.default;case"encryptedContent":return new s.OctetString;default:throw new Error("Invalid member name for EncryptedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"contentType":return""===r;case"contentEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedContent":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for EncryptedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.contentType||""}),f.default.schema(t.contentEncryptionAlgorithm||{}),new s.Choice({value:[new s.Constructed({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({value:new s.OctetString})]}),new s.Primitive({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.salt=(0,c.getParametersValue)(t,"salt",e.defaultValues("salt")),this.iterationCount=(0,c.getParametersValue)(t,"iterationCount",e.defaultValues("iterationCount")),this.keyLength=(0,c.getParametersValue)(t,"keyLength",e.defaultValues("keyLength")),this.prf=(0,c.getParametersValue)(t,"prf",e.defaultValues("prf")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PBKDF2_params");this.salt=r.result.salt,this.iterationCount=r.result.iterationCount.valueBlock.valueDec,"keyLength"in r.result&&(this.keyLength=r.result.keyLength.valueBlock.valueDec),"prf"in r.result&&(this.prf=new f.default({schema:r.result.prf}))}},{key:"toSchema",value:function(){var t=[];return t.push(this.salt),t.push(new s.Integer({value:this.iterationCount})),e.defaultValues("keyLength")!==this.keyLength&&t.push(new s.Integer({value:this.keyLength})),e.defaultValues("prf").isEqual(this.prf)===!1&&t.push(this.prf.toSchema()),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return e.defaultValues("keyLength")!==this.keyLength&&(t.keyLength=this.keyLength),e.defaultValues("prf").isEqual(this.prf)===!1&&(t.prf=this.prf.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new f.default;default:throw new Error("Invalid member name for PBKDF2Params class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Choice({value:[new s.OctetString({name:t.saltPrimitive||""}),f.default.schema(t.saltConstructed||{})]}),new s.Integer({name:t.iterationCount||""}),new s.Integer({name:t.keyLength||"",optional:!0}),f.default.schema(t.prf||{names:{optional:!0}})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyDerivationFunc=(0,c.getParametersValue)(t,"keyDerivationFunc",e.defaultValues("keyDerivationFunc")),this.encryptionScheme=(0,c.getParametersValue)(t,"encryptionScheme",e.defaultValues("encryptionScheme")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PBES2_params");this.keyDerivationFunc=new f.default({schema:r.result.keyDerivationFunc}),this.encryptionScheme=new f.default({schema:r.result.encryptionScheme})}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}},{key:"toJSON",value:function(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyDerivationFunc":return new f.default;case"encryptionScheme":return new f.default;default:throw new Error("Invalid member name for PBES2Params class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.keyDerivationFunc||{}),f.default.schema(t.encryptionScheme||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(447),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certId=(0,c.getParametersValue)(t,"certId",e.defaultValues("certId")),this.certValue=(0,c.getParametersValue)(t,"certValue",e.defaultValues("certValue")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{id:"certId",value:"certValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertBag");switch(this.certId=r.result.certId.valueBlock.toString(),this.certValue=r.result.certValue,this.certId){case"1.2.840.113549.1.9.22.1":var n=s.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new f.default({schema:n.result});break;case"1.2.840.113549.1.9.22.2":default:throw new Error('Incorrect "certId" value in CertBag: '+this.certId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.22.1",this.certValue=new s.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new s.Sequence({value:[new s.ObjectIdentifier({value:this.certId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}},{key:"toJSON",value:function(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certId":return"";case"certValue":return new s.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certId":return""===t;case"certValue":return t instanceof s.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.id||"id"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.value||"value"})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"tbsCertificate",value:[new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Integer({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new c.Integer({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),m.default.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),p.default.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new c.Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[g.default.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),g.default.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),p.default.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),b.default.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new c.Primitive({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new c.Primitive({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[_.default.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(415),c=i(s),l=r(416),f=r(419),h=r(420),m=n(h),d=r(433),p=n(d),v=r(448),g=n(v),y=r(423),b=n(y),w=r(449),k=n(w),S=r(468),_=n(S),C=r(421),P=n(C),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.serialNumber=(0,l.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,l.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.notBefore=(0,l.getParametersValue)(t,"notBefore",e.defaultValues("notBefore")),this.notAfter=(0,l.getParametersValue)(t,"notAfter",e.defaultValues("notAfter")),this.subject=(0,l.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,l.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in t&&(this.issuerUniqueID=(0,l.getParametersValue)(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in t&&(this.subjectUniqueID=(0,l.getParametersValue)(t,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in t&&(this.extensions=(0,l.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CERT");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new m.default({schema:r.result["tbsCertificate.signature"]}),this.issuer=new p.default({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new g.default({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new g.default({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new p.default({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new b.default({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],function(e){return new k.default({schema:e})})),this.signatureAlgorithm=new m.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Integer({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new c.Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"subjectUniqueID"in this&&t.push(new c.Primitive({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[this.extensions.toSchema()]})),"extensions"in this&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new c.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})]})),new c.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={};if(t===!1){if(0===this.tbs.length)return e.schema().value[0];r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=(0,l.bufferToHexCodes)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=(0,l.bufferToHexCodes)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,f.getCrypto)();if("undefined"==typeof t)return Promise.reject("Unable to create WebCrypto object");if(null===e){e={};var r=(0,f.getHashAlgorithm)(this.signatureAlgorithm);if(""===r)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var n=(0,f.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmId);if(e.algorithm=(0,f.getAlgorithmParameters)(n.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=r),"ECDSA"===n.name){var i=!1;if("algorithmParams"in this.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in this.subjectPublicKeyInfo.algorithm.algorithmParams&&1===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(i=!0),i===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var a=(0,f.getAlgorithmByOID)(this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in a==!1)return Promise.reject("Unsupported named curve algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());e.algorithm.algorithm.namedCurve=a.name}}var o=this.subjectPublicKeyInfo.toSchema(),u=o.toBER(!1),s=new Uint8Array(u);return t.importKey("spki",s,e.algorithm.algorithm,!0,e.algorithm.usages)}},{key:"getKeyHash",value:function(){var e=(0,f.getCrypto)();return"undefined"==typeof e?Promise.reject("Unable to create WebCrypto object"):e.digest({name:"sha-1"},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);a.hashAlgorithm=new m.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var u=new P.default(a);this.signature=new m.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(i.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Promise.resolve(),n={},i=this.signatureValue,a=this.tbs;if(null!==t?n=t.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),n instanceof b.default==!1)return Promise.reject("Please provide issuer certificate as a parameter");var o=(0,f.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");var u=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===u?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:n.algorithm.algorithmId;var r=(0,f.getAlgorithmByOID)(t);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+t);var i=(0,f.getAlgorithmParameters)(r.name,"importkey");if("hash"in i.algorithm&&(i.algorithm.hash.name=u),"ECDSA"===r.name){var a=!1;if("algorithmParams"in n.algorithm==!0&&"idBlock"in n.algorithm.algorithmParams&&1===n.algorithm.algorithmParams.idBlock.tagClass&&6===n.algorithm.algorithmParams.idBlock.tagNumber&&(a=!0),a===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var s=(0,f.getAlgorithmByOID)(n.algorithm.algorithmParams.valueBlock.toString());if("name"in s==!1)return Promise.reject("Unsupported named curve algorithm: "+n.algorithm.algorithmParams.valueBlock.toString());i.algorithm.namedCurve=s.name}var c=n.toSchema(),l=c.toBER(!1),h=new Uint8Array(l);return o.importKey("spki",h,i.algorithm,!0,i.usages)}),r=r.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=u);var n=i.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var s=c.fromBER(n);n=(0,f.createECDSASignatureFromCMS)(s.result)}if("RSA-PSS"===t.algorithm.name){var l=void 0;try{l=new P.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var m=(0,f.getAlgorithmByOID)(l.hashAlgorithm.algorithmId);if("name"in m==!1)return Promise.reject("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithmId);h=m.name}r.algorithm.hash.name=h}return o.verify(r.algorithm,t,new Uint8Array(n),new Uint8Array(a))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new c.Integer;case"signature":return new m.default;case"issuer":return new p.default;case"notBefore":return new g.default;case"notAfter":return new g.default;case"subject":return new p.default;case"subjectPublicKeyInfo":return new b.default;case"issuerUniqueID":return new ArrayBuffer(0);case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new m.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for Certificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"",value:[o(t.tbsCertificate),m.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.type=(0,s.getParametersValue)(t,"type",e.defaultValues("type")),this.value=(0,s.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TIME");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new u.UTCTime({valueDate:this.value})),1===this.type&&(e=new u.GeneralizedTime({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":
return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,s.getParametersValue)(e,"names",{});return new u.Choice({optional:t,value:[new u.UTCTime({name:r.utcTimeName||""}),new u.GeneralizedTime({name:r.generalTimeName||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(450),f=n(l),h=r(451),m=n(h),d=r(436),p=n(d),v=r(452),g=n(v),y=r(453),b=n(y),w=r(454),k=n(w),S=r(455),_=n(S),C=r(457),P=n(C),A=r(459),O=n(A),E=r(462),I=n(E),x=r(464),B=n(x),N=r(465),j=n(N),V=r(466),R=n(V),T=r(467),D=n(T),U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.extnID=(0,c.getParametersValue)(t,"extnID",e.defaultValues("extnID")),this.critical=(0,c.getParametersValue)(t,"critical",e.defaultValues("critical")),"extnValue"in t?this.extnValue=new s.OctetString({valueHex:t.extnValue}):this.extnValue=e.defaultValues("extnValue"),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSION");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,r=s.fromBER(this.extnValue.valueBlock.valueHex),r.offset!==-1)switch(this.extnID){case"2.5.29.9":this.parsedValue=new f.default({schema:r.result});break;case"2.5.29.14":this.parsedValue=r.result;break;case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":this.parsedValue=new m.default({schema:r.result});break;case"2.5.29.17":case"2.5.29.18":this.parsedValue=new p.default({schema:r.result});break;case"2.5.29.19":this.parsedValue=new g.default({schema:r.result});break;case"2.5.29.20":case"2.5.29.27":this.parsedValue=r.result;break;case"2.5.29.21":this.parsedValue=r.result;break;case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":this.parsedValue=new b.default({schema:r.result});break;case"2.5.29.29":this.parsedValue=new k.default({schema:r.result});break;case"2.5.29.30":this.parsedValue=new _.default({schema:r.result});break;case"2.5.29.31":case"2.5.29.46":this.parsedValue=new P.default({schema:r.result});break;case"2.5.29.32":this.parsedValue=new O.default({schema:r.result});break;case"2.5.29.33":this.parsedValue=new I.default({schema:r.result});break;case"2.5.29.35":this.parsedValue=new B.default({schema:r.result});break;case"2.5.29.36":this.parsedValue=new j.default({schema:r.result});break;case"2.5.29.37":this.parsedValue=new R.default({schema:r.result});break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":this.parsedValue=new D.default({schema:r.result})}}},{key:"toSchema",value:function(){var t=[];return t.push(new s.ObjectIdentifier({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new s.Boolean({value:this.critical})),t.push(this.extnValue),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new s.OctetString;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.extnID||""}),new s.Boolean({name:t.critical||"",optional:!0}),new s.OctetString({name:t.extnValue||""})]})}}]),e}();t.default=U},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(427),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.attributes||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"notBefore"in t&&(this.notBefore=(0,s.getParametersValue)(t,"notBefore",e.defaultValues("notBefore"))),"notAfter"in t&&(this.notAfter=(0,s.getParametersValue)(t,"notAfter",e.defaultValues("notAfter"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var n=new u.GeneralizedTime;n.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if("notAfter"in r.result){var i=new u.GeneralizedTime({valueHex:r.result.notAfter.valueBlock.valueHex});i.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=i.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new u.GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new u.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new u.GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHex})),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":return new Date;case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Primitive({name:t.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Primitive({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cA=(0,s.getParametersValue)(t,"cA",!1),"pathLenConstraint"in t&&(this.pathLenConstraint=(0,s.getParametersValue)(t,"pathLenConstraint",0)),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(r.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=r.result.pathLenConstraint:this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new u.Boolean({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof u.Integer?t.push(this.pathLenConstraint):t.push(new u.Integer({value:this.pathLenConstraint}))),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof u.Integer?t.pathLenConstraint=this.pathLenConstraint.toJSON():t.pathLenConstraint=this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Boolean({optional:!0,name:t.cA||""}),new u.Integer({optional:!0,name:t.pathLenConstraint||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=r(433),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,c.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=(0,c.getParametersValue)(t,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=(0,c.getParametersValue)(t,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in t&&(this.onlySomeReasons=(0,c.getParametersValue)(t,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=(0,c.getParametersValue)(t,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=(0,c.getParametersValue)(t,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new f.default({schema:e})});break;case 1===r.result.distributionPoint.idBlock.tagNumber:r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new m.default({schema:r.result.distributionPoint});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var n=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==n[0]}if("onlyContainsCACerts"in r.result){var i=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==i[0]}if("onlySomeReasons"in r.result){var a=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=a[0]}if("indirectCRL"in r.result){var o=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==o[0]}if("onlyContainsAttributeCerts"in r.result){var u=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==u[0]}}},{key:"toSchema",value:function(){var t=[];if("distributionPoint"in this){var r=void 0;this.distributionPoint instanceof Array?r=new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):(r=this.distributionPoint.toSchema(),r.idBlock.tagClass=3,r.idBlock.tagNumber=1),t.push(r)}if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var n=new ArrayBuffer(1),i=new Uint8Array(n);i[0]=this.onlySomeReasons,t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:n}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&t.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?t.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):t.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":return!1;case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":return!1;case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Choice({value:[new s.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.distributionPointNames||"",value:f.default.schema()})]}),new s.Constructed({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})]}),new s.Primitive({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.Primitive({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new s.Primitive({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new s.Primitive({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new s.Primitive({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.names=(0,c.getParametersValue)(t,"names",e.defaultValues("names")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.names,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.names,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({value:[new s.Repeated({name:t.blockName||"names",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(456),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"permittedSubtrees"in t&&(this.permittedSubtrees=(0,c.getParametersValue)(t,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in t&&(this.excludedSubtrees=(0,c.getParametersValue)(t,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,function(e){return new f.default({schema:e})})),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:Array.from(this.permittedSubtrees,function(e){return e.toSchema()})})]})),"excludedSubtrees"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Sequence({value:Array.from(this.excludedSubtrees,function(e){return e.toSchema()})})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,function(e){return e.toJSON()})),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":return[];case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.permittedSubtrees||"",value:f.default.schema()})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.excludedSubtrees||"",value:f.default.schema()})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.base=(0,c.getParametersValue)(t,"base",e.defaultValues("base")),this.minimum=(0,c.getParametersValue)(t,"minimum",e.defaultValues("minimum")),"maximum"in t&&(this.maximum=(0,c.getParametersValue)(t,"maximum",e.defaultValues("maximum"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ");this.base=new f.default({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.valueBlock.isHexOnly?this.minimum=r.result.minimum:this.minimum=r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(r.result.maximum.valueBlock.isHexOnly?this.maximum=r.result.maximum:this.maximum=r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t=0;t=this.minimum instanceof s.Integer?this.minimum:new s.Integer({value:this.minimum}),e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r=0;r=this.maximum instanceof s.Integer?this.maximum:new s.Integer({value:this.maximum}),e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new f.default;case"minimum":return 0;case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.base||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({name:t.minimum||""})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Integer({name:t.maximum||""})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(458),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.distributionPoints=(0,c.getParametersValue)(t,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.distributionPoints,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.distributionPoints||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=r(433),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"distributionPoint"in t&&(this.distributionPoint=(0,c.getParametersValue)(t,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in t&&(this.reasons=(0,c.getParametersValue)(t,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in t&&(this.cRLIssuer=(0,c.getParametersValue)(t,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new f.default({schema:e})})),1===r.result.distributionPoint.idBlock.tagNumber&&(r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new m.default({schema:r.result.distributionPoint}))),"reasons"in r.result&&(this.reasons=new s.BitString({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];if("distributionPoint"in this){var t=void 0;t=this.distributionPoint instanceof Array?new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new s.Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new s.BitString;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: "+e)}}},{key:"schema",
value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Choice({value:[new s.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.distributionPointNames||"",value:f.default.schema()})]}),new s.Constructed({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})]}),new s.Primitive({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.Constructed({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new s.Repeated({name:t.cRLIssuerNames||"",value:f.default.schema()})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(460),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certificatePolicies=(0,c.getParametersValue)(t,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.certificatePolicies,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.certificatePolicies||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(461),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.policyIdentifier=(0,c.getParametersValue)(t,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in t&&(this.policyQualifiers=(0,c.getParametersValue)(t,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,function(e){return new f.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.ObjectIdentifier({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new s.Sequence({value:Array.from(this.policyQualifiers,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.policyIdentifier||""}),new s.Sequence({optional:!0,value:[new s.Repeated({name:t.policyQualifiers||"",value:f.default.schema()})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.policyQualifierId=(0,s.getParametersValue)(t,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=(0,s.getParametersValue)(t,"qualifier",e.defaultValues("qualifier")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new u.Any;default:throw new Error("Invalid member name for PolicyQualifierInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.policyQualifierId||""}),new u.Any({name:t.qualifier||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(463),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.mappings=(0,c.getParametersValue)(t,"mappings",e.defaultValues("mappings")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{mappings:"mappings"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.mappings,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.mappings||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.issuerDomainPolicy=(0,s.getParametersValue)(t,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=(0,s.getParametersValue)(t,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.issuerDomainPolicy}),new u.ObjectIdentifier({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":return"";case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.issuerDomainPolicy||""}),new u.ObjectIdentifier({name:t.subjectDomainPolicy||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"keyIdentifier"in t&&(this.keyIdentifier=(0,c.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in t&&(this.authorityCertIssuer=(0,c.getParametersValue)(t,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in t&&(this.authorityCertSerialNumber=(0,c.getParametersValue)(t,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(r.result.keyIdentifier.idBlock.tagClass=1,r.result.keyIdentifier.idBlock.tagNumber=4,this.keyIdentifier=r.result.keyIdentifier),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,function(e){return new f.default({schema:e})})),"authorityCertSerialNumber"in r.result&&(r.result.authorityCertSerialNumber.idBlock.tagClass=1,r.result.authorityCertSerialNumber.idBlock.tagNumber=2,this.authorityCertSerialNumber=r.result.authorityCertSerialNumber)}},{key:"toSchema",value:function(){var e=[];if("keyIdentifier"in this){var t=this.keyIdentifier;t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("authorityCertIssuer"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Sequence({value:Array.from(this.authorityCertIssuer,function(e){return e.toSchema()})})]})),"authorityCertSerialNumber"in this){var r=this.authorityCertSerialNumber;r.idBlock.tagClass=3,r.idBlock.tagNumber=2,e.push(r)}return new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,function(e){return e.toJSON()})),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new s.OctetString;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new s.Integer;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Primitive({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.authorityCertIssuer||"",value:f.default.schema()})]}),new s.Primitive({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),"requireExplicitPolicy"in t&&(this.requireExplicitPolicy=(0,s.getParametersValue)(t,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in t&&(this.inhibitPolicyMapping=(0,s.getParametersValue)(t,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var n=r.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;var i=n.toBER(!1),a=u.fromBER(i);this.requireExplicitPolicy=a.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var o=r.result.inhibitPolicyMapping;o.idBlock.tagClass=1,o.idBlock.tagNumber=2;var s=o.toBER(!1),c=u.fromBER(s);this.inhibitPolicyMapping=c.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){var t=new u.Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new u.Integer({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":return 0;case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Primitive({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new u.Primitive({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyPurposes=(0,s.getParametersValue)(t,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,function(e){return e.valueBlock.toString()})}},{key:"toSchema",value:function(){return new u.Sequence({value:Array.from(this.keyPurposes,function(e){return new u.ObjectIdentifier({value:e})})})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Repeated({name:t.keyPurposes||"",value:new u.ObjectIdentifier})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(431),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.accessDescriptions=(0,c.getParametersValue)(t,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.accessDescriptions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.accessDescriptions||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(449),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{extensions:"extensions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSIONS");this.extensions=Array.from(r.result.extensions,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.extensions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({optional:t,name:r.blockName||"",value:[new s.Repeated({name:r.extensions||"",value:f.default.schema(r.extension||{})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(470),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.crlId=(0,c.getParametersValue)(t,"crlId",e.defaultValues("crlId")),this.crlValue=(0,c.getParametersValue)(t,"crlValue",e.defaultValues("crlValue")),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{id:"crlId",value:"crlValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLBag");switch(this.crlId=r.result.crlId.valueBlock.toString(),this.crlValue=r.result.crlValue,this.crlId){case"1.2.840.113549.1.9.23.1":var n=s.fromBER(this.certValue.valueBlock.valueHex);this.parsedValue=new f.default({schema:n.result});break;default:throw new Error('Incorrect "crlId" value in CertBag: '+this.crlId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.23.1",this.certValue=new s.OctetString({valueHex:this.parsedValue.toSchema().toBER(!1)})),new s.Sequence({value:[new s.ObjectIdentifier({value:this.crlId}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"crlId":return"";case"crlValue":return new s.Any;case"parsedValue":return{};default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"crlId":return""===t;case"crlValue":return t instanceof s.Any;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.ObjectIdentifier({name:t.id||"id"}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Any({name:t.value||"value"})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"tbsCertList",value:[new c.Integer({optional:!0,name:t.tbsCertListVersion||"tbsCertList.version",value:2}),m.default.schema(t.signature||{names:{blockName:"tbsCertList.signature"}}),p.default.schema(t.issuer||{names:{blockName:"tbsCertList.issuer"}}),g.default.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),g.default.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new c.Sequence({optional:!0,value:[new c.Repeated({name:t.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new c.Sequence({value:[new c.Integer,g.default.schema(),k.default.schema({},!0)]})})]}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[k.default.schema(t.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(415),c=i(s),l=r(416),f=r(419),h=r(420),m=n(h),d=r(433),p=n(d),v=r(448),g=n(v),y=r(471),b=n(y),w=r(468),k=n(w),S=r(421),_=n(S),C=r(423),P=n(C),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),this.issuer=(0,l.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.thisUpdate=(0,l.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,l.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"revokedCertificates"in t&&(this.revokedCertificates=(0,l.getParametersValue)(t,"revokedCertificates",e.defaultValues("revokedCertificates"))),"crlExtensions"in t&&(this.crlExtensions=(0,l.getParametersValue)(t,"crlExtensions",e.defaultValues("crlExtensions"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRL");this.tbs=r.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in r.result&&(this.version=r.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new m.default({schema:r.result["tbsCertList.signature"]}),this.issuer=new p.default({schema:r.result["tbsCertList.issuer"]}),this.thisUpdate=new g.default({schema:r.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in r.result&&(this.nextUpdate=new g.default({schema:r.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in r.result&&(this.revokedCertificates=Array.from(r.result["tbsCertList.revokedCertificates"],function(e){return new b.default({schema:e})})),"tbsCertList.extensions"in r.result&&(this.crlExtensions=new k.default({schema:r.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new m.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return this.version!==e.defaultValues("version")&&t.push(new c.Integer({value:this.version})),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&t.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&t.push(new c.Sequence({value:Array.from(this.revokedCertificates,function(e){return e.toSchema()})})),"crlExtensions"in this&&t.push(new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new c.Sequence({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),
signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==e.defaultValues("version")&&(t.version=this.version),"nextUpdate"in this&&(t.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(t.revokedCertificates=Array.from(this.revokedCertificates,function(e){return e.toJSON()})),"crlExtensions"in this&&(t.crlExtensions=this.crlExtensions.toJSON()),t}},{key:"isCertificateRevoked",value:function(e){if(this.issuer.isEqual(e.issuer)===!1)return!1;if("revokedCertificates"in this==!1)return!1;var t=!0,r=!1,n=void 0;try{for(var i,a=this.revokedCertificates[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.userCertificate.isEqual(e.serialNumber))return!0}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return!1}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");var n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: "+r);var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);a.hashAlgorithm=new m.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new m.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var u=new _.default(a);this.signature=new m.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(i.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=this.signatureValue,i=this.tbs,a=-1;if("issuerCertificate"in t&&(a=t.issuerCertificate.subjectPublicKeyInfo,this.issuer.isEqual(t.issuerCertificate.subject)===!1))return Promise.resolve(!1);if("publicKeyInfo"in t&&(a=t.publicKeyInfo),a instanceof P.default==!1)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this){var o=!0,u=!1,s=void 0;try{for(var l,h=this.crlExtensions.extensions[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var m=l.value;if(m.critical&&"parsedValue"in m==!1)return Promise.resolve(!1)}}catch(e){u=!0,s=e}finally{try{!o&&h.return&&h.return()}finally{if(u)throw s}}}var d=(0,f.getCrypto)();if("undefined"==typeof d)return Promise.reject("Unable to create WebCrypto object");var p=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===p?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=(0,f.getAlgorithmByOID)(e.signature.algorithmId);if("name"in t==="")return Promise.reject("Unsupported public key algorithm: "+e.signature.algorithmId);var r=(0,f.getAlgorithmParameters)(t.name,"importkey");if("hash"in r.algorithm&&(r.algorithm.hash.name=p),"ECDSA"===t.name){var n=!1;if("algorithmParams"in a.algorithm==!0&&"idBlock"in a.algorithm.algorithmParams&&1===a.algorithm.algorithmParams.idBlock.tagClass&&6===a.algorithm.algorithmParams.idBlock.tagNumber&&(n=!0),n===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var i=(0,f.getAlgorithmByOID)(a.algorithm.algorithmParams.valueBlock.toString());if("name"in i==!1)return Promise.reject("Unsupported named curve algorithm: "+a.algorithm.algorithmParams.valueBlock.toString());r.algorithm.namedCurve=i.name}var o=a.toSchema(),u=o.toBER(!1),s=new Uint8Array(u);return d.importKey("spki",s,r.algorithm,!0,r.usages)}),r=r.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=p);var a=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var o=c.fromBER(a);a=(0,f.createECDSASignatureFromCMS)(o.result)}if("RSA-PSS"===t.algorithm.name){var u=void 0;try{u=new _.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in u?r.algorithm.saltLength=u.saltLength:r.algorithm.saltLength=20;var s="SHA-1";if("hashAlgorithm"in u){var l=(0,f.getAlgorithmByOID)(u.hashAlgorithm.algorithmId);if("name"in l==!1)return Promise.reject("Unrecognized hash algorithm: "+u.hashAlgorithm.algorithmId);s=l.name}r.algorithm.hash.name=s}return d.verify(r.algorithm,t,new Uint8Array(a),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new m.default;case"issuer":return new p.default;case"thisUpdate":return new g.default;case"nextUpdate":return new g.default;case"revokedCertificates":return[];case"crlExtensions":return new k.default;case"signatureAlgorithm":return new m.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for CertificateRevocationList class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"CertificateList",value:[o(e),m.default.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(448),f=n(l),h=r(468),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.userCertificate=(0,c.getParametersValue)(t,"userCertificate",e.defaultValues("userCertificate")),this.revocationDate=(0,c.getParametersValue)(t,"revocationDate",e.defaultValues("revocationDate")),"crlEntryExtensions"in t&&(this.crlEntryExtensions=(0,c.getParametersValue)(t,"crlEntryExtensions",e.defaultValues("crlEntryExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for REV_CERT");this.userCertificate=r.result.userCertificate,this.revocationDate=new f.default({schema:r.result.revocationDate}),"crlEntryExtensions"in r.result&&(this.crlEntryExtensions=new m.default({schema:r.result.crlEntryExtensions}))}},{key:"toSchema",value:function(){var e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"userCertificate":return new s.Integer;case"revocationDate":return new f.default;case"crlEntryExtensions":return new m.default;default:throw new Error("Invalid member name for RevokedCertificate class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.userCertificate||"userCertificate"}),f.default.schema({names:{utcTimeName:t.revocationDate||"revocationDate",generalTimeName:t.revocationDate||"revocationDate"}}),m.default.schema({names:{blockName:t.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.secretTypeId=(0,s.getParametersValue)(t,"secretTypeId",e.defaultValues("secretTypeId")),this.secretValue=(0,s.getParametersValue)(t,"secretValue",e.defaultValues("secretValue")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{id:"secretTypeId",value:"secretValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SecretBag");this.secretTypeId=r.result.secretTypeId.valueBlock.toString(),this.secretValue=r.result.secretValue}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.secretTypeId}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"secretTypeId":return"";case"secretValue":return new u.Any;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"secretTypeId":return""===t;case"secretValue":return t instanceof u.Any;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.id||"id"}),new u.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.value||"value"})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(474),h=n(f),m=r(478),d=n(m),p=r(443),v=n(p),g=r(427),y=n(g),b=r(420),w=n(b),k=r(494),S=n(k),_=r(479),C=n(_),P=r(481),A=n(P),O=r(486),E=n(O),I=r(487),x=n(I),B=r(482),N=n(B),j=r(485),V=n(j),R=r(490),T=n(R),D=r(491),U=n(D),M=r(444),H=n(M),L=r(492),F=n(L),K=r(495),q=n(K),J=r(483),W=n(J),G=r(484),z=n(G),$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),"originatorInfo"in t&&(this.originatorInfo=(0,c.getParametersValue)(t,"originatorInfo",e.defaultValues("originatorInfo"))),this.recipientInfos=(0,c.getParametersValue)(t,"recipientInfos",e.defaultValues("recipientInfos")),this.encryptedContentInfo=(0,c.getParametersValue)(t,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in t&&(this.unprotectedAttrs=(0,c.getParametersValue)(t,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",originatorInfo:"originatorInfo",recipientInfos:"recipientInfos",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_ENVELOPED_DATA");this.version=r.result.version.valueBlock.valueDec,"originatorInfo"in r.result&&(r.result.originatorInfo.idBlock.tagClass=1,r.result.originatorInfo.idBlock.tagNumber=16,this.originatorInfo=new h.default({schema:r.result.originatorInfo})),this.recipientInfos=Array.from(r.result.recipientInfos,function(e){return new d.default({schema:e})}),this.encryptedContentInfo=new v.default({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new y.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),"originatorInfo"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new s.Set({value:Array.from(this.recipientInfos,function(e){return e.toSchema()})})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version};return"originatorInfo"in this&&(e.originatorInfo=this.originatorInfo.toJSON()),e.recipientInfos=Array.from(this.recipientInfos,function(e){return e.toJSON()}),e.encryptedContentInfo=this.encryptedContentInfo.toJSON(),"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"addRecipientByCertificate",value:function(e,t,r){var n=t||{};if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)r=1;else{if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")===-1)throw new Error("Unknown type of certificate's public key: "+e.subjectPublicKeyInfo.algorithm.algorithmId);r=2}switch("oaepHashAlgorithm"in n==!1&&(n.oaepHashAlgorithm="SHA-512"),"kdfAlgorithm"in n==!1&&(n.kdfAlgorithm="SHA-512"),"kekEncryptionLength"in n==!1&&(n.kekEncryptionLength=256),r){case 1:var i=(0,l.getOIDByAlgorithm)({name:"RSA-OAEP"});if(""===i)throw new Error("Can not find OID for OAEP");var a=(0,l.getOIDByAlgorithm)({name:n.oaepHashAlgorithm});if(""===a)throw new Error("Unknown OAEP hash algorithm: "+n.oaepHashAlgorithm);var o=new w.default({algorithmId:a,algorithmParams:new s.Null}),u=new S.default({hashAlgorithm:o,maskGenAlgorithm:new w.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:o.toSchema()})}),c=new C.default({version:0,rid:new A.default({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new w.default({algorithmId:i,algorithmParams:u.toSchema()}),recipientCertificate:e});this.recipientInfos.push(new d.default({variant:1,value:c}));break;case 2:var f=new E.default({rid:new x.default({variant:1,value:new A.default({issuer:e.issuer,serialNumber:e.serialNumber})})}),h=(0,l.getOIDByAlgorithm)({name:"AES-KW",length:n.kekEncryptionLength});if(""===h)throw new Error("Unknown length for key encryption algorithm: "+n.kekEncryptionLength);var m=new w.default({algorithmId:h,algorithmParams:new s.Null}),p=(0,l.getOIDByAlgorithm)({name:"ECDH",kdf:n.kdfAlgorithm});if(""===p)throw new Error("Unknown KDF algorithm: "+n.kdfAlgorithm);var v=new ArrayBuffer(64),g=new Uint8Array(v);(0,l.getRandomValues)(g);var y=new N.default({version:3,ukm:new s.OctetString({valueHex:v}),keyEncryptionAlgorithm:new w.default({algorithmId:p,algorithmParams:m.toSchema()}),recipientEncryptedKeys:new V.default({encryptedKeys:[f]}),recipientCertificate:e});this.recipientInfos.push(new d.default({variant:2,value:y}));break;default:throw new Error('Unknown "variant" value: '+r)}return!0}},{key:"addRecipientByPreDefinedData",value:function(e,t,r){var n=t||{};if(e instanceof ArrayBuffer==!1)throw new Error('Please pass "preDefinedData" in ArrayBuffer type');if(0===e.byteLength)throw new Error("Pre-defined data could have zero length");if("keyIdentifier"in n==!1){var i=new ArrayBuffer(16),a=new Uint8Array(i);(0,l.getRandomValues)(a),n.keyIdentifier=i}switch("hmacHashAlgorithm"in n==!1&&(n.hmacHashAlgorithm="SHA-512"),"iterationCount"in n==!1&&(n.iterationCount=2048),"keyEncryptionAlgorithm"in n==!1&&(n.keyEncryptionAlgorithm={name:"AES-KW",length:256}),"keyEncryptionAlgorithmParams"in n==!1&&(n.keyEncryptionAlgorithmParams=new s.Null),r){case 1:var o=(0,l.getOIDByAlgorithm)(n.keyEncryptionAlgorithm);if(""===o)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var u=new T.default({version:4,kekid:new U.default({keyIdentifier:new s.OctetString({valueHex:n.keyIdentifier})}),keyEncryptionAlgorithm:new w.default({algorithmId:o,algorithmParams:n.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new d.default({variant:3,value:u}));break;case 2:var c=(0,l.getOIDByAlgorithm)({name:"PBKDF2"});if(""===c)throw new Error("Can not find OID for PBKDF2");var f=new ArrayBuffer(64),h=new Uint8Array(f);(0,l.getRandomValues)(h);var m=(0,l.getOIDByAlgorithm)({name:"HMAC",hash:{name:n.hmacHashAlgorithm}});if(""===m)throw new Error('Incorrect value for "hmacHashAlgorithm": '+n.hmacHashAlgorithm);var p=new H.default({salt:new s.OctetString({valueHex:f}),iterationCount:n.iterationCount,prf:new w.default({algorithmId:m,algorithmParams:new s.Null})}),v=(0,l.getOIDByAlgorithm)(n.keyEncryptionAlgorithm);if(""===v)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var g=new F.default({version:0,keyDerivationAlgorithm:new w.default({algorithmId:c,algorithmParams:p.toSchema()}),keyEncryptionAlgorithm:new w.default({algorithmId:v,algorithmParams:n.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new d.default({variant:4,value:g}));break;default:throw new Error('Unknown value for "variant": '+r)}}},{key:"encrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,n=void 0,i=void 0,a=void 0,o=void 0;return t=t.then(function(){var t=y.recipientInfos[e].value.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof s.ObjectIdentifier==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);var r=t.valueBlock.toString();switch(r){case"1.2.840.10045.3.1.7":i="P-256",a=256;break;case"1.3.132.0.34":i="P-384",a=384;break;case"1.3.132.0.35":i="P-521",a=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return i},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return r=e.publicKey,n=e.privateKey,k.exportKey("spki",r)},function(e){return Promise.reject(e)}),t=t.then(function(t){return o=t,y.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:i},usages:[]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.deriveBits({name:"ECDH",public:e},n,a)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new w.default({schema:y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),n=(0,l.getAlgorithmByOID)(r.algorithmId);if("name"in n==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var i=n.length,a=new ArrayBuffer(4),o=new Uint8Array(a),u=3;u>=0;u--)o[u]=i,i>>=8;var c=new q.default({keyInfo:new w.default({algorithmId:r.algorithmId,algorithmParams:new s.Null}),entityUInfo:y.recipientInfos[e].value.ukm,suppPubInfo:new s.OctetString({valueHex:a})}),f=c.toSchema().toBER(!1),h=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in h==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):(0,l.kdf)(h.kdf,t,n.length,f)},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.importKey("raw",e,{name:"AES-KW"},!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.wrapKey("raw",m,e,{name:"AES-KW"})},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=s.fromBER(o),n=new W.default;n.variant=3,n.value=new z.default({schema:r.result}),"algorithmParams"in n.value.algorithm&&delete n.value.algorithm.algorithmParams,y.recipientInfos[e].value.originator=n,y.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve();return t=t.then(function(){var t=y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new S.default({schema:t}),n=(0,l.getAlgorithmByOID)(r.hashAlgorithm.algorithmId);return"name"in n==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):y.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:n.name}},usages:["encrypt","wrapKey"]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.encrypt(e.algorithm,e,p)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return r=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):k.importKey("raw",new Uint8Array(y.recipientInfos[e].value.preDefinedKEK),r,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.wrapKey("raw",m,e,r)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve(),r=void 0,n=void 0;return t=t.then(function(){if("keyDerivationAlgorithm"in y.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in y.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new H.default({schema:y.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return Promise.resolve()},function(e){return Promise.reject(e)}),t=t.then(function(){var t=new Uint8Array(y.recipientInfos[e].value.password);return k.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if(n=(0,l.getAlgorithmByOID)(y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in n==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+y.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var i="SHA-1";if("prf"in r){var a=(0,l.getAlgorithmByOID)(r.prf.algorithmId);if("name"in a==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");i=a.hash.name}var o=new Uint8Array(r.salt.valueBlock.valueHex),u=r.iterationCount;return k.deriveKey({name:"PBKDF2",hash:{name:i},salt:o,iterations:u},t,n,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return k.wrapKey("raw",m,e,n)},function(e){return Promise.reject(e)}),t=t.then(function(t){y.recipientInfos[e].value.encryptedKey=new s.OctetString({valueHex:t})},function(e){return Promise.reject(e)})}var o=this,u=Promise.resolve(),c=new ArrayBuffer(16),f=new Uint8Array(c);(0,l.getRandomValues)(f);var h=new Uint8Array(t),m=void 0,d=void 0,p=void 0,g=[],y=this,b=(0,l.getOIDByAlgorithm)(e);if(""===b)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var k=(0,l.getCrypto)();return"undefined"==typeof k?Promise.reject("Unable to create WebCrypto object"):(u=u.then(function(){return k.generateKey(e,!0,["encrypt"])}),u=u.then(function(t){return m=t,k.encrypt({name:e.name,iv:f},m,h)},function(e){return Promise.reject(e)}),u=u.then(function(e){return d=e,k.exportKey("raw",m)},function(e){return Promise.reject(e)}).then(function(e){return p=e,!0},function(e){return Promise.reject(e)}),u=u.then(function(){o.version=2,o.encryptedContentInfo=new v.default({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new w.default({algorithmId:b,algorithmParams:new s.OctetString({valueHex:c})}),encryptedContent:new s.OctetString({valueHex:d})})},function(e){return Promise.reject(e)}),u=u.then(function(){for(var e=0;e<o.recipientInfos.length;e++){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=n(e);break;case 2:t=r(e);break;case 3:t=i(e);break;case 4:t=a(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}g.push(t)}return Promise.all(g)},function(e){return Promise.reject(e)}))}},{key:"decrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,n=void 0,i=void 0,a=void 0;return t=t.then(function(){if("recipientCertificate"in f==!1)return Promise.reject('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo"');if("recipientPrivateKey"in f==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');var t=f.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof s.ObjectIdentifier==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);switch(i=t.valueBlock.toString()){case"1.2.840.10045.3.1.7":r="P-256",n=256;break;case"1.3.132.0.34":r="P-384",n=384;break;case"1.3.132.0.35":r="P-521",n=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return m.importKey("pkcs8",f.recipientPrivateKey,{name:"ECDH",namedCurve:r},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(t){a=t,"algorithmParams"in h.recipientInfos[e].value.originator.value.algorithm==!1&&(h.recipientInfos[e].value.originator.value.algorithm.algorithmParams=new s.ObjectIdentifier({value:i}));var n=h.recipientInfos[e].value.originator.value.toSchema().toBER(!1);return m.importKey("spki",n,{name:"ECDH",namedCurve:r},!0,[])},function(e){return Promise.reject(e)}),t=t.then(function(e){return m.deriveBits({name:"ECDH",public:e},a,n)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new w.default({schema:h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),n=(0,l.getAlgorithmByOID)(r.algorithmId);if("name"in n==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var i=n.length,a=new ArrayBuffer(4),o=new Uint8Array(a),u=3;u>=0;u--)o[u]=i,i>>=8;var c=new q.default({keyInfo:new w.default({algorithmId:r.algorithmId,algorithmParams:new s.Null}),entityUInfo:h.recipientInfos[e].value.ukm,suppPubInfo:new s.OctetString({valueHex:a})}),f=c.toSchema().toBER(!1),m=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in m==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):(0,l.kdf)(m.kdf,t,n.length,f)},function(e){return Promise.reject(e)}),t=t.then(function(e){return m.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHex,t,{name:"AES-KW"},r,!0,["decrypt"])},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve();return t=t.then(function(){if("recipientPrivateKey"in f==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');var t=h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new S.default({schema:t}),n=(0,l.getAlgorithmByOID)(r.hashAlgorithm.algorithmId);return"name"in n==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):m.importKey("pkcs8",f.recipientPrivateKey,{name:"RSA-OAEP",hash:{name:n.name}},!0,["decrypt"])},function(e){return Promise.reject(e)}),t=t.then(function(t){return m.decrypt(t.algorithm,t,h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex)},function(e){return Promise.reject(e)}),t=t.then(function(e){var t=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in t==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.importKey("raw",e,t,!0,["decrypt"])},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return"preDefinedData"in f==!1?Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"'):(r=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):m.importKey("raw",f.preDefinedData,r,!0,["unwrapKey"]))},function(e){return Promise.reject(e)}),t=t.then(function(t){var n=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in n==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,r,n,!0,["decrypt"])},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve(),r=void 0,n=void 0;return t=t.then(function(){if("preDefinedData"in f==!1)return Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if("keyDerivationAlgorithm"in h.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in h.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new H.default({schema:h.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return m.importKey("raw",f.preDefinedData,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if(n=(0,l.getAlgorithmByOID)(h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in n==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+h.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);
var i="SHA-1";if("prf"in r){var a=(0,l.getAlgorithmByOID)(r.prf.algorithmId);if("name"in a==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");i=a.hash.name}var o=new Uint8Array(r.salt.valueBlock.valueHex),u=r.iterationCount;return m.deriveKey({name:"PBKDF2",hash:{name:i},salt:o,iterations:u},t,n,!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=(0,l.getAlgorithmByOID)(h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+h.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):m.unwrapKey("raw",h.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,n,r,!0,["decrypt"])},function(e){return Promise.reject(e)})}var o=this,u=Promise.resolve(),f=t||{},h=this;if(e+1>this.recipientInfos.length)return Promise.reject('Maximum value for "index" is: '+(this.recipientInfos.length-1));var m=(0,l.getCrypto)();return"undefined"==typeof m?Promise.reject("Unable to create WebCrypto object"):(u=u.then(function(){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=n(e);break;case 2:t=r(e);break;case 3:t=i(e);break;case 4:t=a(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}return t},function(e){return Promise.reject(e)}),u=u.then(function(e){var t=(0,l.getAlgorithmByOID)(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in t==!1)return Promise.reject('Incorrect "contentEncryptionAlgorithm": '+o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,n=new Uint8Array(r),i=new ArrayBuffer(0);if(o.encryptedContentInfo.encryptedContent.idBlock.isConstructed===!1)i=o.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var a=!0,u=!1,s=void 0;try{for(var f,h=o.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var d=f.value;i=(0,c.utilConcatBuf)(i,d.valueBlock.valueHex)}}catch(e){u=!0,s=e}finally{try{!a&&h.return&&h.return()}finally{if(u)throw s}}}return m.decrypt({name:t.name,iv:n},e,i)},function(e){return Promise.reject(e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originatorInfo":return new h.default;case"recipientInfos":return[];case"encryptedContentInfo":return new v.default;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EnvelopedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"originatorInfo":return 0===r.certs.certificates.length&&0===r.crls.crls.length;case"recipientInfos":case"unprotectedAttrs":return 0===r.length;case"encryptedContentInfo":return v.default.compareWithDefault("contentType",r.contentType)&&v.default.compareWithDefault("contentEncryptionAlgorithm",r.contentEncryptionAlgorithm)&&v.default.compareWithDefault("encryptedContent",r.encryptedContent);default:throw new Error("Invalid member name for EnvelopedData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Constructed({name:t.originatorInfo||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:h.default.schema().valueBlock.value}),new s.Set({value:[new s.Repeated({name:t.recipientInfos||"",value:d.default.schema()})]}),v.default.schema(t.encryptedContentInfo||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.unprotectedAttrs||"",value:y.default.schema()})]})]})}}]),e}();t.default=$},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(475),f=n(l),h=r(476),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certs=(0,c.getParametersValue)(t,"certs",e.defaultValues("certs")),this.crls=(0,c.getParametersValue)(t,"crls",e.defaultValues("crls")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{certs:"certs",crls:"crls"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorInfo");r.result.certs.idBlock.tagClass=1,r.result.certs.idBlock.tagNumber=17,this.certs=new f.default({schema:r.result.certs}),r.result.crls.idBlock.tagClass=1,r.result.crls.idBlock.tagNumber=17,this.crls=new m.default({schema:r.result.crls})}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})]})}},{key:"toJSON",value:function(){return{certs:this.certs.toJSON(),crls:this.crls.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certs":return new f.default;case"crls":return new m.default;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certs":return 0===t.certificates.length;case"crls":return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({name:t.certs||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),new s.Constructed({name:t.crls||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(447),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certificates=(0,c.getParametersValue)(t,"certificates",e.defaultValues("certificates")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_CERTIFICATE_SET");this.certificates=Array.from(r.result.certificates,function(e){return 1===e.idBlock.tagClass?new f.default({schema:e}):e})}},{key:"toSchema",value:function(){return new s.Set({value:Array.from(this.certificates,function(e){return e instanceof f.default?e.toSchema():e})})}},{key:"toJSON",value:function(){return{certificates:Array.from(this.certificates,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificates":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Set({name:t.blockName||"",value:[new s.Repeated({name:t.certificates||"",value:new s.Choice({value:[f.default.schema(),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new s.Any]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new s.Any]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new s.ObjectIdentifier,new s.Any]})]})})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(415),c=i(s),l=r(416),f=r(470),h=n(f),m=r(477),d=n(m),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.crls=(0,l.getParametersValue)(t,"crls",e.defaultValues("crls")),this.otherRevocationInfos=(0,l.getParametersValue)(t,"otherRevocationInfos",e.defaultValues("otherRevocationInfos")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema({names:{crls:"crls"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CSM_REVOCATION_INFO_CHOICES");var n=!0,i=!1,a=void 0;try{for(var o,u=r.result.crls[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;1===s.idBlock.tagClass?this.crls.push(new h.default({schema:s})):this.otherRevocationInfos.push(new d.default({schema:s}))}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}}},{key:"toSchema",value:function(){var e=[];return e.push.apply(e,a(Array.from(this.crls,function(e){return e.toSchema()}))),e.push.apply(e,a(Array.from(this.otherRevocationInfos,function(e){var t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new c.Set({value:e})}},{key:"toJSON",value:function(){return{crls:Array.from(this.crls,function(e){return e.toJSON()}),otherRevocationInfos:Array.from(this.otherRevocationInfos,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"crls":return[];case"otherRevocationInfos":return[];default:throw new Error("Invalid member name for RevocationInfoChoices class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Set({name:t.blockName||"",value:[new c.Repeated({name:t.crls||"",value:new c.Choice({value:[h.default.schema(),new c.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new c.ObjectIdentifier,new c.Any]})]})})]})}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.otherRevInfoFormat=(0,s.getParametersValue)(t,"otherRevInfoFormat",e.defaultValues("otherRevInfoFormat")),this.otherRevInfo=(0,s.getParametersValue)(t,"otherRevInfo",e.defaultValues("otherRevInfo")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=r.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=r.result.otherRevInfo}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.otherRevInfoFormat}),this.otherRevInfo]})}},{key:"toJSON",value:function(){var e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof u.Any||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new u.Any;default:throw new Error("Invalid member name for OtherRevocationInfoFormat class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.otherRevInfoFormat||"otherRevInfoFormat"}),new u.Any({name:t.otherRevInfo||"otherRevInfo"})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(479),f=n(l),h=r(482),m=n(h),d=r(490),p=n(d),v=r(492),g=n(v),y=r(493),b=n(y),w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_RECIPIENT_INFO");if(1===r.result.blockName.idBlock.tagClass)this.variant=1,this.value=new f.default({schema:r.result.blockName});else{var n=r.result.blockName.idBlock.tagNumber;switch(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,n){case 1:this.variant=2,this.value=new m.default({schema:r.result.blockName});break;case 2:this.variant=3,this.value=new p.default({schema:r.result.blockName});break;case 3:this.variant=4,this.value=new g.default({schema:r.result.blockName});break;case 4:this.variant=5,this.value=new b.default({schema:r.result.blockName});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}},{key:"toSchema",value:function(){var e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"variant":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for RecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1},value:m.default.schema().valueBlock.value}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2},value:p.default.schema().valueBlock.value}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:3},value:g.default.schema().valueBlock.value}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:4},value:b.default.schema().valueBlock.value})]})}}]),e}();t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=r(447),m=n(h),d=r(480),p=n(d),v=r(481),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.rid=(0,c.getParametersValue)(t,"rid",e.defaultValues("rid")),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.recipientCertificate=(0,c.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",rid:{names:{blockName:"rid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyTransRecipientInfo");this.version=r.result.version.valueBlock.valueDec,3===r.result.rid.idBlock.tagClass?this.rid=r.result.rid.valueBlock.value[0]:this.rid=new g.default({schema:r.result.rid}),this.keyEncryptionAlgorithm=new f.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return this.rid instanceof g.default?(this.version=0,e.push(new s.Integer({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new s.Integer({value:this.version})),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.rid]}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new s.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"rid":return{};case"keyEncryptionAlgorithm":return new f.default;case"encryptedKey":return new s.OctetString;case"recipientCertificate":return new m.default;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"rid":return 0===Object.keys(r).length;case"keyEncryptionAlgorithm":case"encryptedKey":return r.isEqual(e.defaultValues(t));case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),p.default.schema(t.rid||{}),f.default.schema(t.keyEncryptionAlgorithm||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(481),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):(this.variant=2,this.value=r.result.blockName.valueBlock.value[0])}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.value]});default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"values":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema({names:{blockName:t.blockName||""}}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:[new s.OctetString]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(433),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.issuer=(0,c.getParametersValue)(t,"issuer",e.defaultValues("issuer")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new f.default({schema:r.result.issuer}),this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}},{key:"toJSON",value:function(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuer":return new f.default;case"serialNumber":return new s.Integer;default:throw new Error("Invalid member name for IssuerAndSerialNumber class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.issuer||{}),new s.Integer({name:t.serialNumber||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(483),f=n(l),h=r(420),m=n(h),d=r(485),p=n(d),v=r(447),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.originator=(0,c.getParametersValue)(t,"originator",e.defaultValues("originator")),"ukm"in t&&(this.ukm=(0,c.getParametersValue)(t,"ukm",e.defaultValues("ukm"))),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.recipientEncryptedKeys=(0,c.getParametersValue)(t,"recipientEncryptedKeys",e.defaultValues("recipientEncryptedKeys")),this.recipientCertificate=(0,c.getParametersValue)(t,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",originator:{names:{blockName:"originator"}},ukm:"ukm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},recipientEncryptedKeys:{names:{blockName:"recipientEncryptedKeys"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.originator=new f.default({schema:r.result.originator}),"ukm"in r.result&&(this.ukm=r.result.ukm),this.keyEncryptionAlgorithm=new m.default({schema:r.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new p.default({schema:r.result.recipientEncryptedKeys})}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),"ukm"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,originator:this.originator.toJSON()};return"ukm"in this&&(e.ukm=this.ukm.toJSON()),e.keyEncryptionAlgorithm=this.keyEncryptionAlgorithm.toJSON(),e.recipientEncryptedKeys=this.recipientEncryptedKeys.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originator":return new f.default;case"ukm":return new s.OctetString;case"keyEncryptionAlgorithm":return new m.default;case"recipientEncryptedKeys":return new p.default;case"recipientCertificate":return new g.default;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return 0===r;case"originator":return r.variant===-1&&"value"in r==!1;case"ukm":return r.isEqual(e.defaultValues("ukm"));case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"recipientEncryptedKeys":return 0===r.encryptedKeys.length;case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[f.default.schema(t.originator||{})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.OctetString({name:t.ukm||""})]}),m.default.schema(t.keyEncryptionAlgorithm||{}),p.default.schema(t.recipientEncryptedKeys||{})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(481),f=n(l),h=r(484),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),"value"in t&&(this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorIdentifierOrKey");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):0===r.result.blockName.idBlock.tagNumber?(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=r.result.blockName):(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.variant=3,this.value=new m.default({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:var e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e;default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema({names:{blockName:t.blockName||""
}}),new s.Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||""}),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||"",value:m.default.schema().valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithm=(0,c.getParametersValue)(t,"algorithm",e.defaultValues("algorithm")),this.publicKey=(0,c.getParametersValue)(t,"publicKey",e.defaultValues("publicKey")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},publicKey:"publicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OriginatorPublicKey");this.algorithm=new f.default({schema:r.result.algorithm}),this.publicKey=r.result.publicKey}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}},{key:"toJSON",value:function(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new f.default;case"publicKey":return new s.BitString;default:throw new Error("Invalid member name for OriginatorPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"algorithm":case"publicKey":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for OriginatorPublicKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.algorithm||{}),new s.BitString({name:t.publicKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(486),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.encryptedKeys=(0,c.getParametersValue)(t,"encryptedKeys",e.defaultValues("encryptedKeys")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{RecipientEncryptedKeys:"RecipientEncryptedKeys"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKeys");this.encryptedKeys=Array.from(r.result.RecipientEncryptedKeys,function(e){return new f.default({schema:e})})}},{key:"toSchema",value:function(){return new s.Sequence({value:Array.from(this.encryptedKeys,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{encryptedKeys:Array.from(this.encryptedKeys,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptedKeys":return[];default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"encryptedKeys":return 0===t.length;default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Repeated({name:t.RecipientEncryptedKeys||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(487),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.rid=(0,c.getParametersValue)(t,"rid",e.defaultValues("rid")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{rid:{names:{blockName:"rid"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKey");this.rid=new f.default({schema:r.result.rid}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"rid":return new f.default;case"encryptedKey":return new s.OctetString;default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"rid":return r.variant===-1&&"value"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.rid||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(481),f=n(l),h=r(488),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.variant=(0,c.getParametersValue)(t,"variant",e.defaultValues("variant")),this.value=(0,c.getParametersValue)(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{blockName:"blockName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new f.default({schema:r.result.blockName})):(this.variant=2,r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.value=new m.default({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new s.Any}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return t===-1;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Choice({value:[f.default.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||""}}),new s.Constructed({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:m.default.schema(t.rKeyId||{names:{blockName:t.blockName||""}}).valueBlock.value})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(489),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.subjectKeyIdentifier=(0,c.getParametersValue)(t,"subjectKeyIdentifier",e.defaultValues("subjectKeyIdentifier")),"date"in t&&(this.date=(0,c.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,c.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{subjectKeyIdentifier:"subjectKeyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RecipientKeyIdentifier");this.subjectKeyIdentifier=r.result.subjectKeyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new f.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.subjectKeyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"subjectKeyIdentifier":return new s.OctetString;case"date":return new s.GeneralizedTime;case"other":return new f.default;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"subjectKeyIdentifier":return r.isEqual(e.defaultValues("subjectKeyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return""===r.keyAttrId&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.OctetString({name:t.subjectKeyIdentifier||""}),new s.GeneralizedTime({optional:!0,name:t.date||""}),f.default.schema(t.other||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.keyAttrId=(0,s.getParametersValue)(t,"keyAttrId",e.defaultValues("keyAttrId")),"keyAttr"in t&&(this.keyAttr=(0,s.getParametersValue)(t,"keyAttr",e.defaultValues("keyAttr"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{keyAttrId:"keyAttrId",keyAttr:"keyAttr"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherKeyAttribute");this.keyAttrId=r.result.keyAttrId.valueBlock.toString(),"keyAttr"in r.result&&(this.keyAttr=r.result.keyAttr)}},{key:"toSchema",value:function(){var e=[];return e.push(new u.ObjectIdentifier({value:this.keyAttrId})),"keyAttr"in this&&e.push(this.keyAttr.toSchema()),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyAttrId:this.keyAttrId};return"keyAttr"in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyAttrId":return"";case"keyAttr":return{};default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"keyAttrId":return""===t;case"keyAttr":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({optional:t.optional||!0,name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.keyAttrId||""}),new u.Any({optional:!0,name:t.keyAttr||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(491),f=n(l),h=r(420),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.kekid=(0,c.getParametersValue)(t,"kekid",e.defaultValues("kekid")),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.preDefinedKEK=(0,c.getParametersValue)(t,"preDefinedKEK",e.defaultValues("preDefinedKEK")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",kekid:{names:{blockName:"kekid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KEKRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.kekid=new f.default({schema:r.result.kekid}),this.keyEncryptionAlgorithm=new m.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new s.Sequence({value:[new s.Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{version:this.version,kekid:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"kekid":return new f.default;case"keyEncryptionAlgorithm":return new m.default;case"encryptedKey":return new s.OctetString;case"preDefinedKEK":return new ArrayBuffer(0);default:throw new Error("Invalid member name for KEKRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"KEKRecipientInfo":return r===e.defaultValues("version");case"kekid":return r.compareWithDefault("keyIdentifier",r.keyIdentifier)&&"date"in r==!1&&"other"in r==!1;case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"preDefinedKEK":return 0===r.byteLength;default:throw new Error("Invalid member name for KEKRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),f.default.schema(t.kekid||{}),m.default.schema(t.keyEncryptionAlgorithm||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(489),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyIdentifier=(0,c.getParametersValue)(t,"keyIdentifier",e.defaultValues("keyIdentifier")),"date"in t&&(this.date=(0,c.getParametersValue)(t,"date",e.defaultValues("date"))),"other"in t&&(this.other=(0,c.getParametersValue)(t,"other",e.defaultValues("other"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for KEKIdentifier");this.keyIdentifier=r.result.keyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new f.default({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyIdentifier:this.keyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new s.OctetString;case"date":return new s.GeneralizedTime;case"other":return new f.default;default:throw new Error("Invalid member name for KEKIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyIdentifier":return r.isEqual(e.defaultValues("keyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return r.compareWithDefault("keyAttrId",r.keyAttrId)&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for KEKIdentifier class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.OctetString({name:t.keyIdentifier||""}),new s.GeneralizedTime({optional:!0,name:t.date||""}),f.default.schema(t.other||{})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),"keyDerivationAlgorithm"in t&&(this.keyDerivationAlgorithm=(0,c.getParametersValue)(t,"keyDerivationAlgorithm",e.defaultValues("keyDerivationAlgorithm"))),this.keyEncryptionAlgorithm=(0,c.getParametersValue)(t,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=(0,c.getParametersValue)(t,"encryptedKey",e.defaultValues("encryptedKey")),this.password=(0,c.getParametersValue)(t,"password",e.defaultValues("password")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",keyDerivationAlgorithm:"keyDerivationAlgorithm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PasswordRecipientinfo");this.version=r.result.version.valueBlock.valueDec,"keyDerivationAlgorithm"in r.result&&(r.result.keyDerivationAlgorithm.idBlock.tagClass=1,r.result.keyDerivationAlgorithm.idBlock.tagNumber=16,this.keyDerivationAlgorithm=new f.default({schema:r.result.keyDerivationAlgorithm})),this.keyEncryptionAlgorithm=new f.default({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),"keyDerivationAlgorithm"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new s.Sequence({value:e})}},{key:"toJSON",value:function(){return{version:this.version,keyDerivationAlgorithm:this.keyDerivationAlgorithm.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"keyDerivationAlgorithm":return new f.default;case"keyEncryptionAlgorithm":return new f.default;case"encryptedKey":return new s.OctetString;case"password":return new ArrayBuffer(0);default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===-1;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"password":return 0===r.byteLength;default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||""}),new s.Constructed({name:t.keyDerivationAlgorithm||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:f.default.schema().valueBlock.value}),f.default.schema(t.keyEncryptionAlgorithm||{}),new s.OctetString({name:t.encryptedKey||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.oriType=(0,s.getParametersValue)(t,"oriType",e.defaultValues("oriType")),this.oriValue=(0,s.getParametersValue)(t,"oriValue",e.defaultValues("oriValue")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{oriType:"oriType",oriValue:"oriValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherRecipientInfo");this.oriType=r.result.oriType.valueBlock.toString(),this.oriValue=r.result.oriValue}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.oriType}),this.oriValue]})}},{key:"toJSON",value:function(){var t={oriType:this.oriType};return e.compareWithDefault("oriValue",this.oriValue)===!1&&(t.oriValue=this.oriValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"oriType":return"";case"oriValue":return{};default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"oriType":return""===t;case"oriValue":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.oriType||""}),new u.Any({name:t.oriValue||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=(0,c.getParametersValue)(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.pSourceAlgorithm=(0,c.getParametersValue)(t,"pSourceAlgorithm",e.defaultValues("pSourceAlgorithm")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},pSourceAlgorithm:{names:{blockName:"pSourceAlgorithm"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAESOAEPParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new f.default({schema:r.result.maskGenAlgorithm})),"pSourceAlgorithm"in r.result&&(this.pSourceAlgorithm=new f.default({schema:r.result.pSourceAlgorithm}))}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||(t.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null});case"maskGenAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new f.default({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Null}).toSchema()});case"pSourceAlgorithm":return new f.default({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new s.OctetString({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:throw new Error("Invalid member name for RSAESOAEPParams class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Constructed({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[f.default.schema(t.hashAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[f.default.schema(t.maskGenAlgorithm||{})]}),new s.Constructed({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[f.default.schema(t.pSourceAlgorithm||{})]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyInfo=(0,c.getParametersValue)(t,"keyInfo",e.defaultValues("keyInfo")),
"entityUInfo"in t&&(this.entityUInfo=(0,c.getParametersValue)(t,"entityUInfo",e.defaultValues("entityUInfo"))),this.suppPubInfo=(0,c.getParametersValue)(t,"suppPubInfo",e.defaultValues("suppPubInfo")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{keyInfo:{names:{blockName:"keyInfo"}},entityUInfo:"entityUInfo",suppPubInfo:"suppPubInfo"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ECC_CMS_SharedInfo");this.keyInfo=new f.default({schema:r.result.keyInfo}),"entityUInfo"in r.result&&(this.entityUInfo=r.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=r.result.suppPubInfo.valueBlock.value[0]}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyInfo.toSchema()),"entityUInfo"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={keyInfo:this.keyInfo.toJSON()};return"entityUInfo"in this&&(e.entityUInfo=this.entityUInfo.toJSON()),e.suppPubInfo=this.suppPubInfo.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyInfo":return new f.default;case"entityUInfo":return new s.OctetString;case"suppPubInfo":return new s.OctetString;default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyInfo":case"entityUInfo":case"suppPubInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.keyInfo||{}),new s.Constructed({name:t.entityUInfo||"",idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new s.OctetString]}),new s.Constructed({name:t.suppPubInfo||"",idBlock:{tagClass:3,tagNumber:2},value:[new s.OctetString]})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(415),c=i(s),l=r(416),f=r(419),h=r(497),m=n(h),d=r(420),p=n(d),v=r(447),g=n(v),y=r(499),b=n(y),w=r(421),k=n(w),S=r(433),_=n(S),C=r(500),P=n(C),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbsResponseData=(0,l.getParametersValue)(t,"tbsResponseData",e.defaultValues("tbsResponseData")),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,l.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,l.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_BASIC_RESPONSE");this.tbsResponseData=new m.default({schema:r.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new p.default({schema:r.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=r.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in r.result&&(this.certs=Array.from(r.result["BasicOCSPResponse.certs"],function(e){return new g.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new c.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new c.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new c.Sequence({value:e})}},{key:"toJSON",value:function(){var e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}},{key:"getCertificateStatus",value:function(e,t){var r=this,n=Promise.resolve(),i={isForCertificate:!1,status:2},a={},o=[],u=[],s=!0,c=!1,l=void 0;try{for(var h,m=this.tbsResponseData.responses[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var d=h.value,p=(0,f.getAlgorithmByOID)(d.certID.hashAlgorithm.algorithmId);if("name"in p==!1)return Promise.reject("Wrong CertID hashing algorithm: "+d.certID.hashAlgorithm.algorithmId);if(p.name in a==!1){a[p.name]=1;var v=new b.default;o.push(v),u.push(v.createForCertificate(e,{hashAlgorithm:p.name,issuerCertificate:t}))}}}catch(e){c=!0,l=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw l}}return n=n.then(function(){return Promise.all(u)}),n=n.then(function(){var e=!0,t=!1,n=void 0;try{for(var a,u=r.tbsResponseData.responses[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var s=a.value,c=!0,l=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var d=h.value;if(s.certID.isEqual(d)){i.isForCertificate=!0;try{switch(s.certStatus.idBlock.isConstructed){case!0:1===s.certStatus.idBlock.tagNumber&&(i.status=1);break;case!1:switch(s.certStatus.idBlock.tagNumber){case 0:i.status=0;break;case 2:i.status=2}}}catch(e){}return i}}}catch(e){l=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(l)throw f}}}}catch(e){t=!0,n=e}finally{try{!e&&u.return&&u.return()}finally{if(t)throw n}}return i})}},{key:"sign",value:function(e,t){var r=this;if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof t)t="SHA-1";else{var n=(0,f.getOIDByAlgorithm)({name:t});if(""===n)return Promise.reject("Unsupported hash algorithm: "+t)}var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==t.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:t});if(""===o)return Promise.reject("Unsupported hash algorithm: "+t);a.hashAlgorithm=new p.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new p.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var u=new k.default(a);this.signatureAlgorithm=new p.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbsResponseData.tbs=this.tbsResponseData.toSchema(!0).toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(i.algorithm,e,new Uint8Array(this.tbsResponseData.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),r.signature=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){function e(e){if(e.issuer.isEqual(n.issuer)===!0&&e.serialNumber.isEqual(n.serialNumber)===!0)return null;var t=!1,r=!0,i=!1,a=void 0;try{for(var o,u=e.extensions[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;"2.5.29.19"===s.extnID&&"cA"in s.parsedValue&&s.parsedValue.cA===!0&&(t=!0)}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("certs"in this==!1)return Promise.reject("No certificates attached to the BasicOCSPResponce");var n=null,i=new Uint8Array(this.tbsResponseData.tbs),a=-1,u=Promise.resolve(),s="",h=[];"trustedCerts"in r&&(h=r.trustedCerts);var m=(0,f.getCrypto)();if("undefined"==typeof m)return Promise.reject("Unable to create WebCrypto object");if(s=(0,f.getHashAlgorithm)(this.signatureAlgorithm),""===s)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var d=0,p={};if(this.tbsResponseData.responderID instanceof _.default)d=0,p=this.tbsResponseData.responderID;else{if(!(this.tbsResponseData.responderID instanceof c.OctetString))return Promise.reject("Wrong value for responderID");d=1,p=this.tbsResponseData.responderID}return u=0===d?u.then(function(){var e=!0,r=!1,n=void 0;try{for(var i,u=t.certs.entries()[Symbol.iterator]();!(e=(i=u.next()).done);e=!0){var s=o(i.value,2),c=s[0],l=s[1];if(l.subject.isEqual(p)){a=c;break}}}catch(e){r=!0,n=e}finally{try{!e&&u.return&&u.return()}finally{if(r)throw n}}}):u.then(function(){return Promise.all(Array.from(t.certs,function(e){return m.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,n=!1,i=void 0;try{for(var u,s=t.certs.entries()[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=o(u.value,2),f=c[0];c[1];if((0,l.isEqualBuffer)(e[f],p.valueBlock.valueHex)){a=f;break}}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}})}),u=u.then(function(){return a===-1?Promise.reject("Correct certificate was not found in OCSP response"):(n=t.certs[a],Promise.all(Array.from(t.certs,function(t){return e(t)})).then(function(e){var t=[];t.push(n);var r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;null!==s&&t.push(s)}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}var c=new P.default({certs:t,trustedCerts:h});return c.verify().then(function(e){return e.result===!0?Promise.resolve():Promise.reject("Validation of signer's certificate failed")},function(e){return Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return Promise.reject("Error during checking certificates for CA flag: "+e)}))}),u=u.then(function(){var e=void 0;e="1.2.840.113549.1.1.10"===t.certs[a].signatureAlgorithm.algorithmId?t.certs[a].signatureAlgorithm.algorithmId:t.certs[a].subjectPublicKeyInfo.algorithm.algorithmId;var r=(0,f.getAlgorithmByOID)(e);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+e);var n=r.name,i=(0,f.getAlgorithmParameters)(n,"importkey");if("hash"in i.algorithm&&(i.algorithm.hash.name=s),"ECDSA"===n){if(t.certs[a].subjectPublicKeyInfo.algorithm.algorithmParams instanceof c.ObjectIdentifier==!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var o=(0,f.getAlgorithmByOID)(t.certs[a].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in o==!1)return Promise.reject("Unsupported named curve algorithm: "+t.certs[a].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());i.algorithm.namedCurve=o.name}var u=t.certs[a].subjectPublicKeyInfo.toSchema(),l=u.toBER(!1),h=new Uint8Array(l);return m.importKey("spki",h,i.algorithm,!0,i.usages)}),u=u.then(function(e){var r=(0,f.getAlgorithmParameters)(e.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=s);var n=t.signature.valueBlock.valueHex;if("ECDSA"===e.algorithm.name){var a=c.fromBER(n);n=(0,f.createECDSASignatureFromCMS)(a.result)}if("RSA-PSS"===e.algorithm.name){var o=void 0;try{o=new k.default({schema:t.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in o?r.algorithm.saltLength=o.saltLength:r.algorithm.saltLength=20;var u="SHA-1";if("hashAlgorithm"in o){var l=(0,f.getAlgorithmByOID)(o.hashAlgorithm.algorithmId);if("name"in l==!1)return Promise.reject("Unrecognized hash algorithm: "+o.hashAlgorithm.algorithmId);u=l.name}r.algorithm.hash.name=u}return m.verify(r.algorithm,e,new Uint8Array(n),i)})}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsResponseData":return new m.default;case"signatureAlgorithm":return new p.default;case"signature":return new c.BitString;case"certs":return[];default:throw new Error("Invalid member name for BasicOCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":var n=m.default.compareWithDefault("tbs",r.tbs)&&m.default.compareWithDefault("responderID",r.responderID)&&m.default.compareWithDefault("producedAt",r.producedAt)&&m.default.compareWithDefault("responses",r.responses);return"responseExtensions"in r&&(n=n&&m.default.compareWithDefault("responseExtensions",r.responseExtensions)),n;case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for BasicOCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.blockName||"BasicOCSPResponse",value:[m.default.schema(t.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),p.default.schema(t.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new c.BitString({name:t.signature||"BasicOCSPResponse.signature"}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Sequence({value:[new c.Repeated({name:"BasicOCSPResponse.certs",value:g.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=A},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(433),f=n(l),h=r(498),m=n(h),d=r(449),p=n(d),v=r(468),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.responderID=(0,c.getParametersValue)(t,"responderID",e.defaultValues("responderID")),this.producedAt=(0,c.getParametersValue)(t,"producedAt",e.defaultValues("producedAt")),this.responses=(0,c.getParametersValue)(t,"responses",e.defaultValues("responses")),"responseExtensions"in t&&(this.responseExtensions=(0,c.getParametersValue)(t,"responseExtensions",e.defaultValues("responseExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ocsp.ResponseData");this.tbs=r.result.ResponseData.valueBeforeDecode,"ResponseData.version"in r.result&&(this.version=r.result["ResponseData.version"].valueBlock.valueDec),1===r.result["ResponseData.responderID"].idBlock.tagNumber?this.responderID=new f.default({schema:r.result["ResponseData.responderID"].valueBlock.value[0]}):this.responderID=r.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=r.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(r.result["ResponseData.responses"],function(e){return new m.default({schema:e})}),"ResponseData.responseExtensions"in r.result&&(this.responseExtensions=Array.from(r.result["ResponseData.responseExtensions"].valueBlock.value,function(e){return new p.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=s.fromBER(this.tbs).result}else{var n=[];"version"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({value:this.version})]})),this.responderID instanceof f.default?n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),n.push(new s.GeneralizedTime({valueDate:this.producedAt})),n.push(new s.Sequence({value:Array.from(this.responses,function(e){return e.toSchema()})})),"responseExtensions"in this&&n.push(new s.Sequence({value:Array.from(this.responseExtensions,function(e){return e.toSchema()})})),r=new s.Sequence({value:n})}return r}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,function(e){return e.toJSON()})),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error("Invalid member name for ResponseData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"responderID":return 0===Object.keys(r).length;case"producedAt":return r===e.defaultValues(t);case"responses":case"responseExtensions":return 0===r.length;default:throw new Error("Invalid member name for ResponseData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"ResponseData",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({name:t.version||"ResponseData.version"})]}),new s.Choice({value:[new s.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[f.default.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new s.Constructed({name:t.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new s.OctetString({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new s.GeneralizedTime({name:t.producedAt||"ResponseData.producedAt"}),new s.Sequence({value:[new s.Repeated({name:"ResponseData.responses",value:m.default.schema(t.response||{})})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[g.default.schema(t.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(499),f=n(l),h=r(449),m=n(h),d=r(468),p=n(d),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certID=(0,c.getParametersValue)(t,"certID",e.defaultValues("certID")),this.certStatus=(0,c.getParametersValue)(t,"certStatus",e.defaultValues("certStatus")),this.thisUpdate=(0,c.getParametersValue)(t,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in t&&(this.nextUpdate=(0,c.getParametersValue)(t,"nextUpdate",e.defaultValues("nextUpdate"))),"singleExtensions"in t&&(this.singleExtensions=(0,c.getParametersValue)(t,"singleExtensions",e.defaultValues("singleExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new f.default({schema:r.result.certID}),this.certStatus=r.result.certStatus,this.thisUpdate=r.result.thisUpdate.toDate(),"nextUpdate"in r.result&&(this.nextUpdate=r.result.nextUpdate.toDate()),"singleExtensions"in r.result&&(this.singleExtensions=Array.from(r.result.singleExtensions.valueBlock.value,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new s.GeneralizedTime({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new s.GeneralizedTime({valueDate:this.nextUpdate})),"singleExtensions"in this&&e.push(new s.Sequence({value:Array.from(this.singleExtensions,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"certID":return new f.default;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error("Invalid member name for SingleResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"certID":return f.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&f.default.compareWithDefault("issuerNameHash",r.issuerNameHash)&&f.default.compareWithDefault("issuerKeyHash",r.issuerKeyHash)&&f.default.compareWithDefault("serialNumber",r.serialNumber);case"certStatus":return 0===Object.keys(r).length;case"thisUpdate":case"nextUpdate":return r===e.defaultValues(t);default:throw new Error("Invalid member name for SingleResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.certID||{}),new s.Choice({value:[new s.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new s.Constructed({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new s.GeneralizedTime,new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Enumerated]})]}),new s.Primitive({name:t.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new s.GeneralizedTime({name:t.thisUpdate||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.GeneralizedTime({name:t.nextUpdate||""})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[p.default.schema(t.singleExtensions||{})]})]})}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(420),h=n(f),m=r(447),d=(n(m),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.issuerNameHash=(0,c.getParametersValue)(t,"issuerNameHash",e.defaultValues("issuerNameHash")),this.issuerKeyHash=(0,c.getParametersValue)(t,"issuerKeyHash",e.defaultValues("issuerKeyHash")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new h.default({schema:r.result.hashAlgorithm}),this.issuerNameHash=r.result.issuerNameHash,this.issuerKeyHash=r.result.issuerKeyHash,this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}},{key:"isEqual",value:function(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&((0,c.isEqualBuffer)(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)!==!1&&((0,c.isEqualBuffer)(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)!==!1&&!!this.serialNumber.isEqual(e.serialNumber)))}},{key:"createForCertificate",value:function(e,t){var r=this,n=Promise.resolve(),i=void 0,a=(0,l.getCrypto)();if("undefined"==typeof a)return Promise.reject("Unable to create WebCrypto object");if("hashAlgorithm"in t==!1)return Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"');var o=(0,l.getOIDByAlgorithm)({name:t.hashAlgorithm});return""===o?Promise.reject('Incorrect "hashAlgorithm": '+this.hashAlgorithm):(this.hashAlgorithm=new h.default({algorithmId:o,algorithmParams:new s.Null}),"issuerCertificate"in t?(i=t.issuerCertificate,this.serialNumber=e.serialNumber,n=n.then(function(){return a.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1))},function(e){return Promise.reject(e)}),n=n.then(function(e){r.issuerNameHash=new s.OctetString({valueHex:e});var n=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex;return a.digest({name:t.hashAlgorithm},n)},function(e){return Promise.reject(e)}).then(function(e){r.issuerKeyHash=new s.OctetString({valueHex:e})},function(e){return Promise.reject(e)})):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new h.default;case"issuerNameHash":case"issuerKeyHash":return new s.OctetString;case"serialNumber":return new s.Integer;default:throw new Error("Invalid member name for CertID class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for CertID class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[h.default.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||""}}),new s.OctetString({name:t.issuerNameHash||""}),new s.OctetString({name:t.issuerKeyHash||""}),new s.Integer({name:t.serialNumber||""})]})}}]),e}());t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(416),s=r(419),c=r(470),l=(n(c),r(447)),f=(n(l),r(501)),h=n(f),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.trustedCerts=(0,u.getParametersValue)(t,"trustedCerts",e.defaultValues("trustedCerts")),this.certs=(0,u.getParametersValue)(t,"certs",e.defaultValues("certs")),this.crls=(0,u.getParametersValue)(t,"crls",e.defaultValues("crls")),this.ocsps=(0,u.getParametersValue)(t,"ocsps",e.defaultValues("ocsps")),this.checkDate=(0,u.getParametersValue)(t,"checkDate",e.defaultValues("checkDate")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"sort",value:function(){function e(e,t){var r,n,i,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=[],!e.subject.isEqual(e.issuer)){o.next=12;break}return o.prev=2,o.next=5,e.verify();case 5:if(n=o.sent,n!==!0){o.next=8;break}return o.abrupt("return",[t]);case 8:o.next=12;break;case 10:o.prev=10,o.t0=o.catch(2);case 12:i=0;case 13:if(!(i<v.length)){o.next=26;break}return o.prev=14,o.next=17,e.verify(v[i]);case 17:a=o.sent,a===!0&&r.push(i),o.next=23;break;case 21:o.prev=21,o.t1=o.catch(14);case 23:i++,o.next=13;break;case 26:return o.abrupt("return",r.length?r:[-1]);case 27:case"end":return o.stop()}},c,this,[[2,10],[14,21]])}function t(r,n){var i,a,o,u,s,c,f,h,m,d;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=function(e){for(var t=!0,r=0;r<e.length;r++){for(var n=0;n<e.length;n++)if(n!==r&&e[r]===e[n]){t=!1;break}if(!t)break}return t},i=[],l.next=4,e(r,n);case 4:if(o=l.sent,1!==o.length||o[0]!==-1){l.next=7;break}throw new Error("Incorrect result");case 7:if(1!==o.length){l.next=17;break}if(o[0]!==n){l.next=11;break}return i.push(o),l.abrupt("return",i);case 11:return l.next=13,t(v[o[0]],o[0]);case 13:for(u=l.sent,s=0;s<u.length;s++)c=u[s].slice(),c.splice(0,0,o[0]),a(c)?i.push(c):i.push(u[s]);l.next=29;break;case 17:f=0;case 18:if(!(f<o.length)){l.next=29;break}if(o[f]!==n){l.next=22;break}return i.push([o[f]]),l.abrupt("continue",26);case 22:return l.next=24,t(v[o[f]],o[f]);case 24:for(h=l.sent,m=0;m<h.length;m++)d=h[m].slice(),d.splice(0,0,o[f]),a(d)?i.push(d):i.push(h[m]);case 26:f++,l.next=18;break;case 29:return l.abrupt("return",i);case 30:case"end":return l.stop()}},l,this)}function r(e){var t,r,n,a,o,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=[],r=[],n=[],t.push.apply(t,i(v.filter(function(t){return e.issuer.isEqual(t.subject)}))),0!==t.length){s.next=6;break}return s.abrupt("return",{status:1,statusMessage:"No certificate's issuers"});case 6:if(r.push.apply(r,i(g.crls.filter(function(t){
return t.issuer.isEqual(e.issuer)}))),0!==r.length){s.next=9;break}return s.abrupt("return",{status:1,statusMessage:"No CRLs for specific certificate issuer"});case 9:a=0;case 10:if(!(a<r.length)){s.next=32;break}if(!(r[a].nextUpdate.value<g.checkDate)){s.next=13;break}return s.abrupt("continue",29);case 13:o=0;case 14:if(!(o<t.length)){s.next=29;break}return s.prev=15,s.next=18,r[a].verify({issuerCertificate:t[o]});case 18:if(u=s.sent,!u){s.next=22;break}return n.push({crl:r[a],certificate:t[o]}),s.abrupt("break",29);case 22:s.next=26;break;case 24:s.prev=24,s.t0=s.catch(15);case 26:o++,s.next=14;break;case 29:a++,s.next=10;break;case 32:if(!n.length){s.next=34;break}return s.abrupt("return",{status:0,statusMessage:"",result:n});case 34:return s.abrupt("return",{status:1,statusMessage:"No valid CRLs found"});case 35:case"end":return s.stop()}},f,this,[[15,24]])}function n(e,t){var r,n,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=(0,s.getAlgorithmByOID)(e.signatureAlgorithm.algorithmId),"name"in r!=!1){a.next=3;break}return a.abrupt("return",1);case 3:if("hash"in r!=!1){a.next=5;break}return a.abrupt("return",1);case 5:n=0;case 6:if(!(n<g.ocsps.length)){a.next=17;break}return a.next=9,g.ocsps[n].getCertificateStatus(e,t);case 9:if(i=a.sent,!i.isForCertificate){a.next=14;break}if(0!==i.status){a.next=13;break}return a.abrupt("return",0);case 13:return a.abrupt("return",1);case 14:n++,a.next=6;break;case 17:return a.abrupt("return",2);case 18:case"end":return a.stop()}},m,this)}function a(e){var t,r,n,i,a,o,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=!1,r=!1,n=!1,i=!1,!("extensions"in e)){s.next=20;break}a=0;case 6:if(!(a<e.extensions.length)){s.next=14;break}if(e.extensions[a].critical!==!0||"parsedValue"in e.extensions[a]!=!1){s.next=9;break}return s.abrupt("return",{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: "+e.extensions[a].extnID});case 9:"2.5.29.15"===e.extensions[a].extnID&&(n=!0,o=new Uint8Array(e.extensions[a].parsedValue.valueBlock.valueHex),4===(4&o[0])&&(r=!0),2===(2&o[0])&&(i=!0)),"2.5.29.19"===e.extensions[a].extnID&&"cA"in e.extensions[a].parsedValue&&e.extensions[a].parsedValue.cA===!0&&(t=!0);case 11:a++,s.next=6;break;case 14:if(r!==!0||t!==!1){s.next=16;break}return s.abrupt("return",{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'});case 16:if(n!==!0||t!==!0||r!==!1){s.next=18;break}return s.abrupt("return",{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'});case 18:if(t!==!0||n!==!0||!u||i!==!1){s.next=20;break}return s.abrupt("return",{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'});case 20:if(t!==!1){s.next=22;break}return s.abrupt("return",{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"});case 22:return s.abrupt("return",{result:!0,resultCode:0,resultMessage:""});case 23:case"end":return s.stop()}},d,this)}function o(e,t){var i,o,u,s,c,l,f,h,m,d;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:i=0;case 1:if(!(i<e.length)){p.next=7;break}if(!(e[i].notBefore.value>t||e[i].notAfter.value<t)){p.next=4;break}return p.abrupt("return",{result:!1,resultCode:8,resultMessage:"Certificate validity period is out of checking date"});case 4:i++,p.next=1;break;case 7:if(!(e.length<2)){p.next=9;break}return p.abrupt("return",{result:!1,resultCode:9,resultMessage:"Too short certificate path"});case 9:o=e.length-2;case 10:if(!(o>=0)){p.next=17;break}if(e[o].issuer.isEqual(e[o].subject)!==!1){p.next=14;break}if(e[o].issuer.isEqual(e[o+1].subject)!==!1){p.next=14;break}return p.abrupt("return",{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"});case 14:o--,p.next=10;break;case 17:if(0===g.crls.length&&0===g.ocsps.length){p.next=58;break}u=0;case 19:if(!(u<e.length-2)){p.next=58;break}if(s=void 0,c=void 0,0===g.ocsps.length){p.next=32;break}return p.next=25,n(e[u],e[u+1]);case 25:s=p.sent,p.t0=s,p.next=0===p.t0?29:1===p.t0?30:2===p.t0?31:32;break;case 29:return p.abrupt("continue",55);case 30:return p.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"});case 31:return p.abrupt("break",32);case 32:if(0===g.crls.length){p.next=53;break}return p.next=35,r(e[u]);case 35:if(c=p.sent,!c.status){p.next=38;break}throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: "+c.statusMessage};case 38:l=0;case 39:if(!(l<c.result.length)){p.next=51;break}if(f=c.result[l].crl.isCertificateRevoked(e[u]),!f){p.next=43;break}return p.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"});case 43:return p.next=45,a(c.result[l].certificate,!0);case 45:if(h=p.sent,h.result!==!1){p.next=48;break}return p.abrupt("return",{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"});case 48:l++,p.next=39;break;case 51:p.next=55;break;case 53:if(2!==s){p.next=55;break}return p.abrupt("return",{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"});case 55:u++,p.next=19;break;case 58:m=1;case 59:if(!(m<e.length)){p.next=68;break}return p.next=62,a(e[m]);case 62:if(d=p.sent,d.result!==!1){p.next=65;break}return p.abrupt("return",{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"});case 65:m++,p.next=59;break;case 68:return p.abrupt("return",{result:!0});case 69:case"end":return p.stop()}},p,this)}var c=regeneratorRuntime.mark(e),l=regeneratorRuntime.mark(t),f=regeneratorRuntime.mark(r),m=regeneratorRuntime.mark(n),d=regeneratorRuntime.mark(a),p=regeneratorRuntime.mark(o),v=[],g=this;return(0,h.default)(regeneratorRuntime.mark(function e(){var r,n,a,s,c,l,f,h,m,d,p,y,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.push.apply(v,i(g.trustedCerts)),v.push.apply(v,i(g.certs)),r=0;case 3:if(!(r<v.length)){e.next=18;break}n=0;case 5:if(!(n<v.length)){e.next=15;break}if(r!==n){e.next=8;break}return e.abrupt("continue",12);case 8:if(!(0,u.isEqualBuffer)(v[r].tbs,v[n].tbs)){e.next=12;break}return v.splice(n,1),r=0,e.abrupt("break",15);case 12:n++,e.next=5;break;case 15:r++,e.next=3;break;case 18:return a=void 0,s=[v[v.length-1]],e.next=22,t(v[v.length-1],v.length-1);case 22:if(a=e.sent,0!==a.length){e.next=25;break}return e.abrupt("return",{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"});case 25:c=0;case 26:if(!(c<a.length)){e.next=48;break}l=!1,f=0;case 29:if(!(f<a[c].length)){e.next=44;break}h=v[a[c][f]],m=0;case 32:if(!(m<g.trustedCerts.length)){e.next=39;break}if(!(0,u.isEqualBuffer)(h.tbs,g.trustedCerts[m].tbs)){e.next=36;break}return l=!0,e.abrupt("break",39);case 36:m++,e.next=32;break;case 39:if(!l){e.next=41;break}return e.abrupt("break",44);case 41:f++,e.next=29;break;case 44:l||(a.splice(c,1),c=0);case 45:c++,e.next=26;break;case 48:if(0!==a.length){e.next=50;break}throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};case 50:for(d=a[0].length,p=0,y=0;y<a.length;y++)a[y].length<d&&(d=a[y].length,p=y);for(b=0;b<a[p].length;b++)s.push(v[a[p][b]]);return e.next=56,o(s,g.checkDate);case 56:if(a=e.sent,a.result!==!1){e.next=59;break}throw a;case 59:return e.abrupt("return",s);case 60:case"end":return e.stop()}},e,this)}))}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===this.certs.length)return Promise.reject("Empty certificate array");var r=Promise.resolve(),n=[];n.push("2.5.29.32.0");var i=!1,a=!1,o=!1,u=[],c=[],l=[];"initialPolicySet"in t&&(n=t.initialPolicySet),"initialExplicitPolicy"in t&&(i=t.initialExplicitPolicy),"initialPolicyMappingInhibit"in t&&(a=t.initialPolicyMappingInhibit),"initialInhibitPolicy"in t&&(o=t.initialInhibitPolicy),"initialPermittedSubtreesSet"in t&&(u=t.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in t&&(c=t.initialExcludedSubtreesSet),"initialRequiredNameForms"in t&&(l=t.initialRequiredNameForms);var f=i,h=a,m=o,d=new Array(3);d[0]=!1,d[1]=!1,d[2]=!1;var p=0,v=0,g=0,y=u,b=c,w=l,k=1;return r=this.sort().then(function(t){e.certs=t}),r=r.then(function(){var t=[];t.push("2.5.29.32.0");for(var r=[],i=new Array(e.certs.length-1),a=0;a<e.certs.length-1;a++)i[a]=!0;r.push(i);for(var o=new Array(e.certs.length-1),u=new Array(e.certs.length-1),s=f?e.certs.length-1:-1,c=e.certs.length-2;c>=0;c--,k++)if("extensions"in e.certs[c]){for(var l=0;l<e.certs[c].extensions.length;l++){if("2.5.29.32"===e.certs[c].extensions[l].extnID){u[c]=e.certs[c].extensions[l].parsedValue;for(var y=0;y<t.length;y++)if("2.5.29.32.0"===t[y]){delete r[y][c];break}for(var b=0;b<e.certs[c].extensions[l].parsedValue.certificatePolicies.length;b++){for(var w=-1,S=0;S<t.length;S++)if(e.certs[c].extensions[l].parsedValue.certificatePolicies[b].policyIdentifier===t[S]){w=S;break}if(w===-1){t.push(e.certs[c].extensions[l].parsedValue.certificatePolicies[b].policyIdentifier);var _=new Array(e.certs.length-1);_[c]=!0,r.push(_)}else r[w][c]=!0}}if("2.5.29.33"===e.certs[c].extensions[l].extnID){if(h)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};o[c]=e.certs[c].extensions[l].parsedValue}"2.5.29.36"===e.certs[c].extensions[l].extnID&&f===!1&&(0===e.certs[c].extensions[l].parsedValue.requireExplicitPolicy?(f=!0,s=c):d[0]===!1?(d[0]=!0,p=e.certs[c].extensions[l].parsedValue.requireExplicitPolicy):p=p>e.certs[c].extensions[l].parsedValue.requireExplicitPolicy?e.certs[c].extensions[l].parsedValue.requireExplicitPolicy:p,0===e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping?h=!0:d[1]===!1?(d[1]=!0,v=e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1):v=v>e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1?e.certs[c].extensions[l].parsedValue.inhibitPolicyMapping+1:v),"2.5.29.54"===e.certs[c].extensions[l].extnID&&m===!1&&(0===e.certs[c].extensions[l].parsedValue.valueBlock.valueDec?m=!0:d[2]===!1?(d[2]=!0,g=e.certs[c].extensions[l].parsedValue.valueBlock.valueDec):g=g>e.certs[c].extensions[l].parsedValue.valueBlock.valueDec?e.certs[c].extensions[l].parsedValue.valueBlock.valueDec:g)}if(m===!0){for(var C=-1,P=0;P<t.length;P++)if("2.5.29.32.0"===t[P]){C=P;break}C!==-1&&delete r[0][c]}f===!1&&d[0]===!0&&(p--,0===p&&(f=!0,s=c,d[0]=!1)),h===!1&&d[1]===!0&&(v--,0===v&&(h=!0,d[1]=!1)),m===!1&&d[2]===!0&&(g--,0===g&&(m=!0,d[2]=!1))}for(var A=0;A<e.certs.length-1;A++)if(A<e.certs.length-2&&"undefined"!=typeof o[A+1])for(var O=0;O<o[A+1].mappings.length;O++){if("2.5.29.32.0"===o[A+1].mappings[O].issuerDomainPolicy||"2.5.29.32.0"===o[A+1].mappings[O].subjectDomainPolicy)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};for(var E=-1,I=-1,x=0;x<t.length;x++)t[x]===o[A+1].mappings[O].issuerDomainPolicy&&(E=x),t[x]===o[A+1].mappings[O].subjectDomainPolicy&&(I=x);"undefined"!=typeof r[E][A]&&delete r[E][A];for(var B=0;B<u[A].certificatePolicies.length;B++)if(o[A+1].mappings[O].subjectDomainPolicy===u[A].certificatePolicies[B].policyIdentifier&&E!==-1&&I!==-1)for(var N=0;N<=A;N++)"undefined"!=typeof r[I][N]&&(r[E][N]=!0,delete r[I][N])}for(var j=0;j<t.length;j++)if("2.5.29.32.0"===t[j])for(var V=0;V<s;V++)delete r[j][V];for(var R=[],T=0;T<r.length;T++){for(var D=!0,U=0;U<e.certs.length-1;U++){var M=!1;if(U<s&&"2.5.29.32.0"===t[T]&&t.length>1){D=!1;break}if("undefined"==typeof r[T][U]){if(U>=s)for(var H=0;H<t.length;H++)if("2.5.29.32.0"===t[H]){r[H][U]===!0&&(M=!0);break}if(!M){D=!1;break}}}D===!0&&R.push(t[T])}var L=[];if(1===n.length&&"2.5.29.32.0"===n[0]&&f===!1)L=n;else if(1===R.length&&"2.5.29.32.0"===R[0])L=n;else for(var F=0;F<R.length;F++)for(var K=0;K<n.length;K++)if(n[K]===R[F]||"2.5.29.32.0"===n[K]){L.push(R[F]);break}return{result:L.length>0,resultCode:0,resultMessage:L.length>0?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:R,userConstrPolicies:L,explicitPolicyIndicator:f,policyMappings:o}}),r=r.then(function(t){function r(e,t){var r=(0,s.stringPrep)(e),n=(0,s.stringPrep)(t),i=r.split("."),a=n.split("."),o=i.length,u=a.length;if(0===o||0===u||o<u)return!1;for(var c=0;c<o;c++)if(0===i[c].length)return!1;for(var l=0;l<u;l++)if(0===a[l].length){if(0===l){if(1===u)return!1;continue}return!1}for(var f=0;f<u;f++)if(0!==a[u-1-f].length&&0!==i[o-1-f].localeCompare(a[u-1-f]))return!1;return!0}function n(e,t){var n=(0,s.stringPrep)(e),i=(0,s.stringPrep)(t),a=n.split("@"),o=i.split("@");if(0===a.length||0===o.length||a.length<o.length)return!1;if(1===o.length){var u=r(a[1],o[0]);if(u){var c=a[1].split("."),l=o[0].split(".");return 0===l[0].length||c.length===l.length}return!1}return 0===n.localeCompare(i)}function i(e,t){var n=(0,s.stringPrep)(e),i=(0,s.stringPrep)(t),a=n.split("/"),o=i.split("/");if(o.length>1)return!1;if(a.length>1)for(var u=0;u<a.length;u++)if(a[u].length>0&&":"!==a[u].charAt(a[u].length-1)){var c=a[u].split(":");n=c[0];break}var l=r(n,i);if(l){var f=n.split("."),h=i.split(".");return 0===h[0].length||f.length===h.length}return!1}function a(e,t){var r=new Uint8Array(e.valueBlock.valueHex),n=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===n.length){for(var i=0;i<4;i++)if((r[i]^n[i])&n[i+4])return!1;return!0}if(16===r.length&&32===n.length){for(var a=0;a<16;a++)if((r[a]^n[a])&n[a+16])return!1;return!0}return!1}function o(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;for(var r=!0,n=0,i=0;i<t.typesAndValues.length;i++){for(var a=!1,o=n;o<e.typesAndValues.length;o++)if(a=e.typesAndValues[o].isEqual(t.typesAndValues[i]),e.typesAndValues[o].type===t.typesAndValues[i].type&&(r=r&&a),a===!0){if(0===n||n===o){n=o+1;break}return!1}if(a===!1)return!1}return 0!==n&&r}if(t.result===!1)return t;k=1;for(var u=e.certs.length-2;u>=0;u--,k++){var c=[],l=[],f=[];if("extensions"in e.certs[u])for(var h=0;h<e.certs[u].extensions.length;h++)"2.5.29.30"===e.certs[u].extensions[h].extnID&&("permittedSubtrees"in e.certs[u].extensions[h].parsedValue&&(l=l.concat(e.certs[u].extensions[h].parsedValue.permittedSubtrees)),"excludedSubtrees"in e.certs[u].extensions[h].parsedValue&&(f=f.concat(e.certs[u].extensions[h].parsedValue.excludedSubtrees))),"2.5.29.17"===e.certs[u].extensions[h].extnID&&(c=c.concat(e.certs[u].extensions[h].parsedValue.altNames));for(var m=w.length<=0,d=0;d<w.length;d++)switch(w[d].base.type){case 4:if(w[d].base.value.typesAndValues.length!==e.certs[u].subject.typesAndValues.length)continue;m=!0;for(var p=0;p<e.certs[u].subject.typesAndValues.length;p++)if(e.certs[u].subject.typesAndValues[p].type!==w[d].base.value.typesAndValues[p].type){m=!1;break}if(m===!0)break}if(m===!1)return t.result=!1,t.resultCode=21,t.resultMessage="No neccessary name form found",Promise.reject(t);var v=[];v[0]=[],v[1]=[],v[2]=[],v[3]=[],v[4]=[];for(var g=0;g<y.length;g++)switch(y[g].base.type){case 1:v[0].push(y[g]);break;case 2:v[1].push(y[g]);break;case 4:v[2].push(y[g]);break;case 6:v[3].push(y[g]);break;case 7:v[4].push(y[g])}for(var S=0;S<5;S++){for(var _=!1,C=!1,P=v[S],A=0;A<P.length;A++){switch(S){case 0:if(c.length>0)for(var O=0;O<c.length;O++)1===c[O].type&&(C=!0,_=_||n(c[O].value,P[A].base.value));else for(var E=0;E<e.certs[u].subject.typesAndValues.length;E++)"1.2.840.113549.1.9.1"!==e.certs[u].subject.typesAndValues[E].type&&"0.9.2342.19200300.100.1.3"!==e.certs[u].subject.typesAndValues[E].type||(C=!0,_=_||n(e.certs[u].subject.typesAndValues[E].value.valueBlock.value,P[A].base.value));break;case 1:if(c.length>0)for(var I=0;I<c.length;I++)2===c[I].type&&(C=!0,_=_||r(c[I].value,P[A].base.value));break;case 2:C=!0,_=o(e.certs[u].subject,P[A].base.value);break;case 3:if(c.length>0)for(var x=0;x<c.length;x++)6===c[x].type&&(C=!0,_=_||i(c[x].value,P[A].base.value));break;case 4:if(c.length>0)for(var B=0;B<c.length;B++)7===c[B].type&&(C=!0,_=_||a(c[B].value,P[A].base.value))}if(_)break}if(_===!1&&P.length>0&&C)return t.result=!1,t.resultCode=41,t.resultMessage='Failed to meet "permitted sub-trees" name constraint',Promise.reject(t)}for(var N=!1,j=0;j<b.length;j++){switch(b[j].base.type){case 1:if(c.length>=0)for(var V=0;V<c.length;V++)1===c[V].type&&(N=N||n(c[V].value,b[j].base.value));else for(var R=0;R<e.subject.typesAndValues.length;R++)"1.2.840.113549.1.9.1"!==e.subject.typesAndValues[R].type&&"0.9.2342.19200300.100.1.3"!==e.subject.typesAndValues[R].type||(N=N||n(e.subject.typesAndValues[R].value.valueBlock.value,b[j].base.value));break;case 2:if(c.length>0)for(var T=0;T<c.length;T++)2===c[T].type&&(N=N||r(c[T].value,b[j].base.value));break;case 4:N=N||o(e.certs[u].subject,b[j].base.value);break;case 6:if(c.length>0)for(var D=0;D<c.length;D++)6===c[D].type&&(N=N||i(c[D].value,b[j].base.value));break;case 7:if(c.length>0)for(var U=0;U<c.length;U++)7===c[U].type&&(N=N||a(c[U].value,b[j].base.value))}if(N)break}if(N===!0)return t.result=!1,t.resultCode=42,t.resultMessage='Failed to meet "excluded sub-trees" name constraint',Promise.reject(t);y=y.concat(l),b=b.concat(f)}return t}),r=r.then(function(e){return e},function(e){if(e instanceof Object){if("resultMessage"in e)return e;if("message"in e)return{result:!1,resultCode:-1,resultMessage:e.message}}return{result:!1,resultCode:-1,resultMessage:e}})}}],[{key:"defaultValues",value:function(e){switch(e){case"trustedCerts":return[];case"certs":return[];case"crls":return[];case"ocsps":return[];case"checkDate":return new Date;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: "+e)}}}]),e}();t.default=m},function(e,t){"use strict";function r(e){if(!n(e)){if(!i(e))throw new Error("Only generator instance of generator function is a valid input");e=e()}return new Promise(function(t,a){var o=function(t){var r=void 0;try{r=e.throw(t)}catch(e){return a(e)}return u(r)},u=function u(s){var c=void 0;try{c=e.next(s)}catch(e){return a(e)}switch(!0){case c.value instanceof Promise:return c.done?t(c.value):c.value.then(u,o);case i(c.value):case n(c.value):return c.done?r(c.value).then(function(e){t(e)},o):r(c.value).then(u,o);case"function"==typeof c.value:c.value=c.value();default:return c.done?t(c.value):u(c.value)}};u()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=function(e){return"undefined"!=typeof e&&("function"==typeof e.next&&"function"==typeof e.throw)},i=function(e){if("undefined"==typeof e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||n(e))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({name:t.CertificationRequestInfo||"CertificationRequestInfo",value:[new c.Integer({name:t.CertificationRequestInfoVersion||"CertificationRequestInfo.version"}),p.default.schema(t.subject||{names:{blockName:"CertificationRequestInfo.subject"}}),m.default.schema({names:{blockName:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new c.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new c.Repeated({optional:!0,name:t.CertificationRequestInfoAttributes||"CertificationRequestInfo.attributes",value:b.default.schema(t.attributes||{})})]})]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(415),c=i(s),l=r(416),f=r(419),h=r(423),m=n(h),d=r(433),p=n(d),v=r(420),g=n(v),y=r(427),b=n(y),w=r(421),k=n(w),S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,l.getParametersValue)(t,"tbs",e.defaultValues("tbs")),this.version=(0,l.getParametersValue)(t,"version",e.defaultValues("version")),this.subject=(0,l.getParametersValue)(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=(0,l.getParametersValue)(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"attributes"in t&&(this.attributes=(0,l.getParametersValue)(t,"attributes",e.defaultValues("attributes"))),this.signatureAlgorithm=(0,l.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=(0,l.getParametersValue)(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return u(e,[{key:"fromSchema",value:function(t){var r=c.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS10");this.tbs=r.result.CertificationRequestInfo.valueBeforeDecode,this.version=r.result["CertificationRequestInfo.version"].valueBlock.valueDec,this.subject=new p.default({schema:r.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new m.default({schema:r.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in r.result&&(this.attributes=Array.from(r.result["CertificationRequestInfo.attributes"],function(e){return new b.default({schema:e})})),this.signatureAlgorithm=new g.default({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var e=[new c.Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return"attributes"in this&&e.push(new c.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new c.Sequence({value:e})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.length)return e.schema();r=c.fromBER(this.tbs).result}else r=this.encodeTBS();return new c.Sequence({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var e={tbs:(0,l.bufferToHexCodes)(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");var n=(0,f.getOIDByAlgorithm)({name:r});if(""===n)return Promise.reject("Unsupported hash algorithm: {$hashAlgorithm}");var i=(0,f.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=(0,f.getOIDByAlgorithm)(i.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==r.toUpperCase()){var o=(0,f.getOIDByAlgorithm)({name:r});if(""===o)return Promise.reject("Unsupported hash algorithm: "+r);a.hashAlgorithm=new g.default({algorithmId:o,algorithmParams:new c.Null}),a.maskGenAlgorithm=new g.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var u=new k.default(a);this.signatureAlgorithm=new g.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var s=(0,f.getCrypto)();return"undefined"==typeof s?Promise.reject("Unable to create WebCrypto object"):s.sign(i.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,f.createCMSECDSASignature)(e)),t.signatureValue=new c.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=Promise.resolve(),r=this.subjectPublicKeyInfo,n=this.signatureValue,i=this.tbs,a=(0,f.getCrypto)();if("undefined"==typeof a)return Promise.reject("Unable to create WebCrypto object");var o=(0,f.getHashAlgorithm)(this.signatureAlgorithm);return""===o?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(t=t.then(function(){var t=void 0;t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:e.subjectPublicKeyInfo.algorithm.algorithmId;var n=(0,f.getAlgorithmByOID)(t);if("name"in n==!1)return Promise.reject("Unsupported public key algorithm: "+t);var i=n.name,u=(0,f.getAlgorithmParameters)(i,"importkey");if("hash"in u.algorithm&&(u.algorithm.hash.name=o),"ECDSA"===n.name){var s=!1;if("algorithmParams"in r.algorithm==!0&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(s=!0),s===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var c=(0,f.getAlgorithmByOID)(r.algorithm.algorithmParams.valueBlock.toString());if("name"in c==!1)return Promise.reject("Unsupported named curve algorithm: "+r.algorithm.algorithmParams.valueBlock.toString());u.algorithm.namedCurve=c.name}var l=r.toSchema(),h=l.toBER(!1),m=new Uint8Array(h);return a.importKey("spki",m,u.algorithm,!0,u.usages)}),t=t.then(function(t){var r=(0,f.getAlgorithmParameters)(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=o);var u=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name){var s=c.fromBER(u);u=(0,f.createECDSASignatureFromCMS)(s.result)}if("RSA-PSS"===t.algorithm.name){var l=void 0;try{l=new k.default({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var m=(0,f.getAlgorithmByOID)(l.hashAlgorithm.algorithmId);if("name"in m==!1)return Promise.reject("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithmId);h=m.name}r.algorithm.hash.name=h}return a.verify(r.algorithm,t,new Uint8Array(u),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"subject":return new p.default;case"subjectPublicKeyInfo":return new m.default;case"attributes":return[];case"signatureAlgorithm":return new g.default;case"signatureValue":return new c.BitString;default:throw new Error("Invalid member name for CertificationRequest class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.getParametersValue)(e,"names",{});return new c.Sequence({value:[o(t.certificationRequestInfo||{}),new c.Sequence({name:t.signatureAlgorithm||"signatureAlgorithm",value:[new c.ObjectIdentifier,new c.Any({optional:!0})]}),new c.BitString({name:t.signatureValue||"signatureValue"})]})}}]),e}();t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.digestAlgorithm=(0,c.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),this.digest=(0,c.getParametersValue)(t,"digest",e.defaultValues("digest")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{digestAlgorithm:{names:{blockName:"digestAlgorithm"}},digest:"digest"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DigestInfo");this.digestAlgorithm=new f.default({schema:r.result.digestAlgorithm}),this.digest=r.result.digest}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}},{key:"toJSON",value:function(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"digestAlgorithm":return new f.default;case"digest":return new s.OctetString;default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"digestAlgorithm":return f.default.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==!1;case"digest":return t.isEqual(this.constructor.defaultValues(e));default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.digestAlgorithm||{names:{blockName:"digestAlgorithm"}}),new s.OctetString({name:t.digest||"digest"})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),this.eContentType=(0,s.getParametersValue)(t,"eContentType",e.defaultValues("eContentType")),"eContent"in t&&(this.eContent=(0,s.getParametersValue)(t,"eContent",e.defaultValues("eContent")),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&this.eContent.idBlock.isConstructed===!1)){for(var r=new u.OctetString({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,a=this.eContent.valueBlock.valueHex.byteLength;a>0;){for(var o=new Uint8Array(this.eContent.valueBlock.valueHex,n,n+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-n:65536),c=new ArrayBuffer(o.length),l=new Uint8Array(c),f=0;f<l.length;f++)l[f]=o[f];r.valueBlock.value.push(new u.OctetString({valueHex:c})),a-=o.length,n+=o.length}this.eContent=r}"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{eContentType:"eContentType",eContent:"eContent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=r.result.eContentType.valueBlock.toString(),"eContent"in r.result&&(this.eContent=r.result.eContent);
}},{key:"toSchema",value:function(){var t=[];return t.push(new u.ObjectIdentifier({value:this.eContentType})),"eContent"in this&&e.compareWithDefault("eContent",this.eContent)===!1&&t.push(new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new u.Sequence({value:t})}},{key:"toJSON",value:function(){var t={eContentType:this.eContentType};return"eContent"in this&&e.compareWithDefault("eContent",this.eContent)===!1&&(t.eContent=this.eContent.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"eContentType":return"";case"eContent":return new u.OctetString;default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"eContentType":return""===r;case"eContent":return r.isEqual(e.defaultValues("eContent"));default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.eContentType||""}),new u.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new u.Any({name:t.eContent||""})]})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(426),s=n(u),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(s.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(503),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.mac=(0,c.getParametersValue)(t,"mac",e.defaultValues("mac")),this.macSalt=(0,c.getParametersValue)(t,"macSalt",e.defaultValues("macSalt")),"iterations"in t&&(this.iterations=(0,c.getParametersValue)(t,"iterations",e.defaultValues("iterations"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{mac:{names:{blockName:"mac"}},macSalt:"macSalt",iterations:"iterations"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for MacData");this.mac=new f.default({schema:r.result.mac}),this.macSalt=r.result.macSalt,"iterations"in r.result&&(this.iterations=r.result.iterations.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[this.mac.toSchema(),this.macSalt];return"iterations"in this&&e.push(new s.Integer({value:this.iterations})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return"iterations"in this&&(e.iterations=this.iterations.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"mac":return new f.default;case"macSalt":return new s.OctetString;case"iterations":return 1;default:throw new Error("Invalid member name for MacData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"mac":return f.default.compareWithDefault("digestAlgorithm",r.digestAlgorithm)&&f.default.compareWithDefault("digest",r.digest);case"macSalt":return r.isEqual(e.defaultValues(t));case"iterations":return r===e.defaultValues(t);default:throw new Error("Invalid member name for MacData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",optional:t.optional||!0,value:[f.default.schema(t.mac||{names:{blockName:"mac"}}),new s.OctetString({name:t.macSalt||"macSalt"}),new s.Integer({optional:!0,name:t.iterations||"iterations"})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=(0,c.getParametersValue)(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.hashedMessage=(0,c.getParametersValue)(t,"hashedMessage",e.defaultValues("hashedMessage")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new f.default({schema:r.result.hashAlgorithm}),this.hashedMessage=r.result.hashedMessage}},{key:"toSchema",value:function(){return new s.Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new f.default;case"hashedMessage":return new s.OctetString;default:throw new Error("Invalid member name for MessageImprint class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"hashedMessage":return 0===r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for MessageImprint class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.hashAlgorithm||{}),new s.OctetString({name:t.hashedMessage||""})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(509),h=n(f),m=r(511),d=n(m),p=r(510),v=n(p),g=r(499),y=n(g),b=r(447),w=(n(b),r(420)),k=n(w),S=r(421),_=n(S),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbsRequest=(0,c.getParametersValue)(t,"tbsRequest",e.defaultValues("tbsRequest")),"optionalSignature"in t&&(this.optionalSignature=(0,c.getParametersValue)(t,"optionalSignature",e.defaultValues("optionalSignature"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_REQUEST");this.tbsRequest=new h.default({schema:r.result.tbsRequest}),"optionalSignature"in r.result&&(this.optionalSignature=new d.default({schema:r.result.optionalSignature}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(this.tbsRequest.toSchema(e)),"optionalSignature"in this&&t.push(this.optionalSignature.toSchema()),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var e={tbsRequest:this.tbsRequest.toJSON()};return"optionalSignature"in this&&(e.optionalSignature=this.optionalSignature.toJSON()),e}},{key:"createForCertificate",value:function(e,t){var r=this,n=Promise.resolve(),i=new y.default;return n=n.then(function(){return i.createForCertificate(e,t)}),n=n.then(function(){r.tbsRequest=new h.default({requestList:[new v.default({reqCert:i})]})},function(e){return Promise.reject(e)})}},{key:"sign",value:function(e,t){var r=this;if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof t)t="SHA-1";else{var n=(0,l.getOIDByAlgorithm)({name:t});if(""===n)return Promise.reject("Unsupported hash algorithm: "+t)}if("optionalSignature"in this==!1)return Promise.reject('Need to create "optionalSignature" field before signing');var i=(0,l.getAlgorithmParameters)(e.algorithm.name,"sign");switch(i.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.optionalSignature.signatureAlgorithm.algorithmId=(0,l.getOIDByAlgorithm)(i.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var a={};if("SHA-1"!==t.toUpperCase()){var o=(0,l.getOIDByAlgorithm)({name:t});if(""===o)return Promise.reject("Unsupported hash algorithm: "+t);a.hashAlgorithm=new k.default({algorithmId:o,algorithmParams:new s.Null}),a.maskGenAlgorithm=new k.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(a.saltLength=i.algorithm.saltLength);var u=new _.default(a);this.optionalSignature.signatureAlgorithm=new k.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:u.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}var c=this.tbsRequest.toSchema(!0).toBER(!1),f=(0,l.getCrypto)();return"undefined"==typeof f?Promise.reject("Unable to create WebCrypto object"):f.sign(i.algorithm,e,new Uint8Array(c)).then(function(e){"ECDSA"===i.algorithm.name&&(e=(0,l.createCMSECDSASignature)(e)),r.optionalSignature.signature=new s.BitString({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsRequest":return new h.default;case"optionalSignature":return new d.default;default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"tbsRequest":return h.default.compareWithDefault("tbs",t.tbs)&&h.default.compareWithDefault("version",t.version)&&h.default.compareWithDefault("requestorName",t.requestorName)&&h.default.compareWithDefault("requestList",t.requestList)&&h.default.compareWithDefault("requestExtensions",t.requestExtensions);case"optionalSignature":return d.default.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&d.default.compareWithDefault("signature",t.signature)&&d.default.compareWithDefault("certs",t.certs);default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"OCSPRequest",value:[h.default.schema(t.tbsRequest||{names:{blockName:"tbsRequest"}}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[d.default.schema(t.optionalSignature||{names:{blockName:"optionalSignature"}})]})]})}}]),e}();t.default=C},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(432),f=n(l),h=r(510),m=n(h),d=r(449),p=n(d),v=r(468),g=n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=(0,c.getParametersValue)(t,"tbs",e.defaultValues("tbs")),"version"in t&&(this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version"))),"requestorName"in t&&(this.requestorName=(0,c.getParametersValue)(t,"requestorName",e.defaultValues("requestorName"))),this.requestList=(0,c.getParametersValue)(t,"requestList",e.defaultValues("requestList")),"requestExtensions"in t&&(this.requestExtensions=(0,c.getParametersValue)(t,"requestExtensions",e.defaultValues("requestExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TBSRequest");this.tbs=r.result.TBSRequest.valueBeforeDecode,"TBSRequest.version"in r.result&&(this.version=r.result["TBSRequest.version"].valueBlock.valueDec),"TBSRequest.requestorName"in r.result&&(this.requestorName=new f.default({schema:r.result["TBSRequest.requestorName"]})),this.requestList=Array.from(r.result["TBSRequest.requests"],function(e){return new m.default({schema:e})}),"TBSRequest.requestExtensions"in r.result&&(this.requestExtensions=Array.from(r.result["TBSRequest.requestExtensions"].valueBlock.value,function(e){return new p.default({schema:e})}))}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;if(t===!1){if(0===this.tbs.byteLength)return e.schema();r=s.fromBER(this.tbs).result}else{var n=[];"version"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({value:this.version})]})),"requestorName"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),n.push(new s.Sequence({value:Array.from(this.requestList,function(e){return e.toSchema()})})),"requestExtensions"in this&&n.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new s.Sequence({value:Array.from(this.requestExtensions,function(e){return e.toSchema()})})]})),r=new s.Sequence({value:n})}return r}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"requestorName"in this&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,function(e){return e.toJSON()}),"requestExtensions"in this&&(e.requestExtensions=Array.from(this.requestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"requestorName":return new f.default;case"requestList":case"requestExtensions":return[];default:throw new Error("Invalid member name for TBSRequest class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"version":return r===e.defaultValues(t);case"requestorName":return r.type===f.default.defaultValues("type")&&0===Object.keys(r.value).length;case"requestList":case"requestExtensions":return 0===r.length;default:throw new Error("Invalid member name for TBSRequest class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TBSRequest",value:[new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Integer({name:t.TBSRequestVersion||"TBSRequest.version"})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[f.default.schema(t.requestorName||{names:{blockName:"TBSRequest.requestorName"}})]}),new s.Sequence({name:t.requestList||"TBSRequest.requestList",value:[new s.Repeated({name:t.requests||"TBSRequest.requests",value:m.default.schema(t.requestNames||{})})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[g.default.schema(t.extensions||{names:{blockName:t.requestExtensions||"TBSRequest.requestExtensions"}})]})]})}}]),e}();t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(499),f=n(l),h=r(449),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.reqCert=(0,c.getParametersValue)(t,"reqCert",e.defaultValues("reqCert")),"singleRequestExtensions"in t&&(this.singleRequestExtensions=(0,c.getParametersValue)(t,"singleRequestExtensions",e.defaultValues("singleRequestExtensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{reqCert:{names:{blockName:"reqCert"}},singleRequestExtensions:{names:{blockName:"singleRequestExtensions"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for Request");this.reqCert=new f.default({schema:r.result.reqCert}),"singleRequestExtensions"in r.result&&(this.singleRequestExtensions=Array.from(r.result.singleRequestExtensions.valueBlock.value,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.reqCert.toSchema()),"singleRequestExtensions"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:Array.from(this.singleRequestExtensions,function(e){return e.toSchema()})})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={reqCert:this.reqCert.toJSON()};return"singleRequestExtensions"in this&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"reqCert":return new f.default;case"singleRequestExtensions":return[];default:throw new Error("Invalid member name for Request class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"reqCert":return r.isEqual(e.defaultValues(t));case"singleRequestExtensions":return 0===r.length;default:throw new Error("Invalid member name for Request class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.reqCert||{}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[m.default.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||""}})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=r(447),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),"certs"in t&&(this.certs=(0,c.getParametersValue)(t,"certs",e.defaultValues("certs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signature:"signature",certs:"certs"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ocsp.Signature");this.signatureAlgorithm=new f.default({schema:r.result.signatureAlgorithm}),this.signature=r.result.signature,"certs"in r.result&&(this.certs=Array.from(r.result.certs,function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"signatureAlgorithm":return new f.default;case"signature":return new s.BitString;case"certs":return[];default:throw new Error("Invalid member name for Signature class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for Signature class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[f.default.schema(t.signatureAlgorithm||{}),new s.BitString({name:t.signature||""}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Sequence({value:[new s.Repeated({name:t.certs||"",value:m.default.schema(t.certs||{})})]})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(513),f=n(l),h=r(496),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.responseStatus=(0,c.getParametersValue)(t,"responseStatus",e.defaultValues("responseStatus")),"responseBytes"in t&&(this.responseBytes=(0,c.getParametersValue)(t,"responseBytes",e.defaultValues("responseBytes"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OCSP_RESPONSE");this.responseStatus=r.result.responseStatus,"responseBytes"in r.result&&(this.responseBytes=new f.default({schema:r.result.responseBytes}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.responseStatus),"responseBytes"in this&&e.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={responseStatus:this.responseStatus.toJSON()};return"responseBytes"in this&&(e.responseBytes=this.responseBytes.toJSON()),e}},{key:"getCertificateStatus",value:function(e,t){var r=void 0,n={isForCertificate:!1,status:2};if("responseBytes"in this==!1)return n;if("1.3.6.1.5.5.7.48.1.1"!==this.responseBytes.responseType)return n;try{var i=s.fromBER(this.responseBytes.response.valueBlock.valueHex);r=new m.default({schema:i.result})}catch(e){return n}return r.getCertificateStatus(e,t)}},{key:"sign",value:function(e,t){if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var r=s.fromBER(this.responseBytes.response.valueBlock.valueHex),n=new m.default({schema:r.result});return n.sign(e,t)}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}},{key:"verify",value:function(){if("responseBytes"in this==!1)return Promise.reject("Empty ResponseBytes field");if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var e=s.fromBER(this.responseBytes.response.valueBlock.valueHex),t=new m.default({schema:e.result});return t.verify()}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}}],[{key:"defaultValues",value:function(e){switch(e){case"responseStatus":return new s.Enumerated;case"responseBytes":return new f.default;default:throw new Error("Invalid member name for OCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseStatus":return r.isEqual(e.defaultValues(t));case"responseBytes":return f.default.compareWithDefault("responseType",r.responseType)&&f.default.compareWithDefault("response",r.response);default:throw new Error("Invalid member name for OCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"OCSPResponse",value:[new s.Enumerated({name:t.responseStatus||"responseStatus"}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[f.default.schema(t.responseBytes||{names:{blockName:"responseBytes"}})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.responseType=(0,s.getParametersValue)(t,"responseType",e.defaultValues("responseType")),this.response=(0,s.getParametersValue)(t,"response",e.defaultValues("response")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{responseType:"responseType",response:"response"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ResponseBytes");this.responseType=r.result.responseType.valueBlock.toString(),this.response=r.result.response}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.responseType}),this.response]})}},{key:"toJSON",value:function(){return{responseType:this.responseType,response:this.response.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"responseType":return"";case"response":return new u.OctetString;default:throw new Error("Invalid member name for ResponseBytes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseType":return""===r;case"response":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ResponseBytes class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.responseType||""}),new u.OctetString({name:t.response||""})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.otherCertFormat=(0,s.getParametersValue)(t,"otherCertFormat",e.defaultValues("otherCertFormat")),this.otherCert=(0,s.getParametersValue)(t,"otherCert",e.defaultValues("otherCert")),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=r.result.otherCertFormat.valueBlock.toString(),this.otherCert=r.result.otherCert}},{key:"toSchema",value:function(){return new u.Sequence({value:[new u.ObjectIdentifier({value:this.otherCertFormat}),this.otherCert]})}},{key:"toJSON",value:function(){var e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof u.Any||(e.otherCert=this.otherCert.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new u.Any;default:throw new Error("Invalid member name for OtherCertificateFormat class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.ObjectIdentifier({name:t.otherCertFormat||"otherCertFormat"}),new u.Any({name:t.otherCert||"otherCert"})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(438),h=n(f),m=r(506),d=n(m),p=r(503),v=n(p),g=r(420),y=n(g),b=r(516),w=n(b),k=r(504),S=n(k),_=r(427),C=n(_),P=r(517),A=n(P),O=r(481),E=n(O),I=r(518),x=n(I),B=r(437),N=n(B),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.authSafe=(0,c.getParametersValue)(t,"authSafe",e.defaultValues("authSafe")),"macData"in t&&(this.macData=(0,c.getParametersValue)(t,"macData",e.defaultValues("macData"))),"parsedValue"in t&&(this.parsedValue=(0,c.getParametersValue)(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{version:"version",authSafe:{names:{blockName:"authSafe"}},macData:{names:{blockName:"macData"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PFX");this.version=r.result.version.valueBlock.valueDec,this.authSafe=new h.default({schema:r.result.authSafe}),"macData"in r.result&&(this.macData=new d.default({schema:r.result.macData}))}},{key:"toSchema",value:function(){var e=[new s.Integer({value:this.version}),this.authSafe.toSchema()];return"macData"in this&&e.push(this.macData.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,authSafe:this.authSafe.toJSON()};return"macData"in this&&(e.macData=this.macData.toJSON()),e}},{key:"makeInternalValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("parsedValue"in this==!1)return Promise.reject('Please call "parseValues" function first in order to make "parsedValue" data');if("integrityMode"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "integrityMode" inside "parsedValue"');var r=Promise.resolve(),n=(0,l.getCrypto)();if("undefined"==typeof n)return Promise.reject("Unable to create WebCrypto object");if("authenticatedSafe"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "authenticatedSafe" in "parsedValue"');switch(this.parsedValue.integrityMode){case 0:if("iterations"in t==!1)return Promise.reject('Absent mandatory parameter "iterations"');if("pbkdf2HashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "pbkdf2HashAlgorithm"');if("hmacHashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("password"in t==!1)return Promise.reject('Absent mandatory parameter "password"');var i=new ArrayBuffer(64),a=new Uint8Array(i);(0,l.getRandomValues)(a);var o=void 0;switch(t.hmacHashAlgorithm.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "parameters.hmacHashAlgorithm" parameter: '+t.hmacHashAlgorithm)}var u={name:"HMAC",length:o,hash:{name:t.hmacHashAlgorithm}};r=r.then(function(){var e=new Uint8Array(t.password);return n.importKey("raw",e,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),r=r.then(function(e){return n.deriveKey({name:"PBKDF2",hash:{name:t.pbkdf2HashAlgorithm},salt:a,iterations:t.iterations},e,u,!1,["sign"])},function(e){return Promise.reject(e)}),r=r.then(function(t){e.authSafe=new h.default({contentType:"1.2.840.113549.1.7.1",content:new s.OctetString({valueHex:e.parsedValue.authenticatedSafe.toSchema().toBER(!1)})});var r=e.authSafe.content.toBER(!1),i=new Uint8Array(r);return n.sign(u,t,i)},function(e){return Promise.reject(e)}),r=r.then(function(r){e.macData=new d.default({mac:new v.default({digestAlgorithm:new y.default({algorithmId:(0,l.getOIDByAlgorithm)({name:t.hmacHashAlgorithm})}),digest:new s.OctetString({valueHex:r})}),macSalt:new s.OctetString({valueHex:i}),iterations:t.iterations})},function(e){return Promise.reject(e)});break;case 1:if("signingCertificate"in t==!1)return Promise.reject('Absent mandatory parameter "signingCertificate"');if("privateKey"in t==!1)return Promise.reject('Absent mandatory parameter "privateKey"');if("hashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');var c=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),f=new w.default({version:1,encapContentInfo:new S.default({eContentType:"1.2.840.113549.1.7.1",eContent:new s.OctetString({valueHex:c})}),certificates:[t.signingCertificate]});r=r.then(function(){return n.digest({name:t.hashAlgorithm},new Uint8Array(c))}),r=r.then(function(e){var r=[];r.push(new C.default({type:"1.2.840.113549.1.9.3",values:[new s.ObjectIdentifier({value:"1.2.840.113549.1.7.1"})]})),r.push(new C.default({type:"1.2.840.113549.1.9.5",values:[new s.UTCTime({valueDate:new Date})]})),r.push(new C.default({type:"1.2.840.113549.1.9.4",values:[new s.OctetString({valueHex:e})]})),f.signerInfos.push(new A.default({version:1,sid:new E.default({issuer:t.signingCertificate.issuer,serialNumber:t.signingCertificate.serialNumber}),signedAttrs:new x.default({type:0,attributes:r})}))},function(e){return Promise.reject("Error during making digest for message: "+e)}),r=r.then(function(){return f.sign(t.privateKey,0,t.hashAlgorithm)}),r=r.then(function(){e.authSafe=new h.default({contentType:"1.2.840.113549.1.7.2",content:f.toSchema(!0)})},function(e){return Promise.reject("Error during making signature: "+e)});break;default:return Promise.reject('Parameter "integrityMode" has unknown value: '+t.integrityMode)}return r}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');"checkIntegrity"in e==!1&&(e.checkIntegrity=!0);var r=Promise.resolve(),n=(0,l.getCrypto)();if("undefined"==typeof n)return Promise.reject("Unable to create WebCrypto object");switch(this.parsedValue={},this.authSafe.contentType){case"1.2.840.113549.1.7.1":if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if(this.parsedValue.integrityMode=0,this.authSafe.content instanceof s.OctetString==!1)return Promise.reject('Wrong type of "this.authSafe.content"');var i=s.fromBER(this.authSafe.content.valueBlock.valueHex);if(i.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');if(this.parsedValue.authenticatedSafe=new N.default({schema:i.result}),e.checkIntegrity){if("macData"in this==!1)return Promise.reject('Absent "macData" value, can not check PKCS# data integrity');var a=(0,l.getAlgorithmByOID)(this.macData.mac.digestAlgorithm.algorithmId);if("name"in a==!1)return Promise.reject("Unsupported digest algorithm: "+this.macData.mac.digestAlgorithm.algorithmId);var o=void 0;switch(a.name.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "hashAlgorithm": '+a.name)}var u={name:"HMAC",length:o,hash:{name:a.name}};r=r.then(function(){var t=new Uint8Array(e.password);return n.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),r=r.then(function(e){return n.deriveKey({name:"PBKDF2",hash:{name:a.name},salt:new Uint8Array(t.macData.macSalt.valueBlock.valueHex),iterations:t.macData.iterations},e,u,!1,["verify"])},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=t.authSafe.content.toBER(!1),i=new Uint8Array(r);return n.verify(u,e,new Uint8Array(t.macData.mac.digest.valueBlock.valueHex),i)},function(e){return Promise.reject(e)}),r=r.then(function(e){if(e===!1)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject(e)})}break;case"1.2.840.113549.1.7.2":this.parsedValue.integrityMode=1;var f=new w.default({schema:this.authSafe.content});if("eContent"in f.encapContentInfo==!1)return Promise.reject('Absent of attached data in "cmsSigned.encapContentInfo"');if(f.encapContentInfo.eContent instanceof s.OctetString==!1)return Promise.reject('Wrong type of "cmsSigned.encapContentInfo.eContent"');var h=new ArrayBuffer(0);if(f.encapContentInfo.eContent.idBlock.isConstructed===!1)h=f.encapContentInfo.eContent.valueBlock.valueHex;else for(var m=0;m<f.encapContentInfo.eContent.valueBlock.value.length;m++)h=(0,c.utilConcatBuf)(h,f.encapContentInfo.eContent.valueBlock.value[m].valueBlock.valueHex);var d=s.fromBER(h);if(d.offset===-1)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');this.parsedValue.authenticatedSafe=new N.default({schema:d.result}),r=r.then(function(){return f.verify({signer:0,checkChain:!1})}).then(function(e){if(e===!1)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject("Error during integrity verification: "+e)});break;default:return Promise.reject('Incorrect value for "this.authSafe.contentType": '+this.authSafe.contentType)}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 3;case"authSafe":return new h.default;case"macData":return new d.default;case"parsedValue":return{};default:throw new Error("Invalid member name for PFX class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"authSafe":return h.default.compareWithDefault("contentType",r.contentType)&&h.default.compareWithDefault("content",r.content);case"macData":return d.default.compareWithDefault("mac",r.mac)&&d.default.compareWithDefault("macSalt",r.macSalt)&&d.default.compareWithDefault("iterations",r.iterations);case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PFX class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"",value:[new s.Integer({name:t.version||"version"}),h.default.schema(t.authSafe||{names:{blockName:"authSafe"}}),d.default.schema(t.macData||{names:{blockName:"macData",optional:!0}})]})}}]),e}();t.default=j},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(415),l=i(c),f=r(416),h=r(419),m=r(420),d=n(m),p=r(504),v=n(p),g=r(447),y=n(g),b=r(514),w=n(b),k=r(470),S=n(k),_=r(477),C=n(_),P=r(517),A=n(P),O=r(475),E=n(O),I=r(476),x=n(I),B=r(481),N=n(B),j=r(519),V=n(j),R=r(500),T=n(R),D=r(496),U=n(D),M=r(421),H=n(M),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.version=(0,f.getParametersValue)(t,"version",e.defaultValues("version")),this.digestAlgorithms=(0,f.getParametersValue)(t,"digestAlgorithms",e.defaultValues("digestAlgorithms")),this.encapContentInfo=(0,f.getParametersValue)(t,"encapContentInfo",e.defaultValues("encapContentInfo")),"certificates"in t&&(this.certificates=(0,f.getParametersValue)(t,"certificates",e.defaultValues("certificates"))),"crls"in t&&(this.crls=(0,f.getParametersValue)(t,"crls",e.defaultValues("crls"))),this.signerInfos=(0,f.getParametersValue)(t,"signerInfos",e.defaultValues("signerInfos")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){var r=l.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_SIGNED_DATA");this.version=r.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in r.result&&(this.digestAlgorithms=Array.from(r.result["SignedData.digestAlgorithms"],function(e){return new d.default({schema:e})})),this.encapContentInfo=new v.default({schema:r.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in r.result&&(this.certificates=Array.from(r.result["SignedData.certificates"],function(e){return 1===e.idBlock.tagClass?new y.default({schema:e}):3===e.idBlock.tagClass&&3===e.idBlock.tagNumber?(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new w.default({schema:e})):new y.default})),"SignedData.crls"in r.result&&(this.crls=Array.from(r.result["SignedData.crls"],function(e){return 1===e.idBlock.tagClass?new S.default({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new C.default({schema:e}))})),"SignedData.signerInfos"in r.result&&(this.signerInfos=Array.from(r.result["SignedData.signerInfos"],function(e){return new A.default({schema:e})}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(new l.Integer({value:this.version})),t.push(new l.Set({value:Array.from(this.digestAlgorithms,function(t){return t.toSchema(e)})})),t.push(this.encapContentInfo.toSchema()),"certificates"in this&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.certificates,function(t){if(t instanceof w.default){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=3,r}return t.toSchema(e)})})),"crls"in this&&t.push(new l.Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,function(t){if(t instanceof C.default){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return t.toSchema(e)})})),t.push(new l.Set({value:Array.from(this.signerInfos,function(t){return t.toSchema(e)})})),new l.Sequence({value:t})}},{key:"toJSON",value:function(){var e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,function(e){return e.toJSON()}),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,function(e){return e.toJSON()})),"crls"in this&&(e.crls=Array.from(this.crls,function(e){return e.toJSON()})),e.signerInfos=Array.from(this.signerInfos,function(e){return e.toJSON()}),e}},{key:"verify",value:function(){function e(e){if(e.issuer.isEqual(A.issuer)===!0&&e.serialNumber.isEqual(A.serialNumber)===!0)return null;var t=!1,r=!0,n=!1,i=void 0;try{for(var a,o=e.extensions[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var u=a.value;"2.5.29.19"===u.extnID&&"cA"in u.parsedValue&&u.parsedValue.cA===!0&&(t=!0)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.signer,i=void 0===n?-1:n,o=r.data,s=void 0===o?new ArrayBuffer(0):o,c=r.trustedCerts,m=void 0===c?[]:c,d=r.checkDate,p=void 0===d?new Date:d,v=r.checkChain,g=void 0!==v&&v,b=(r.includeSignerCertificate,r.extendedMode),w=void 0!==b&&b,k=Promise.resolve(),_=new ArrayBuffer(0),C=void 0,P="",A={},O=(0,h.getCrypto)();return"undefined"==typeof O?Promise.reject("Unable to create WebCrypto object"):i===-1?w?Promise.reject({date:p,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to get signer index from input parameters"):"certificates"in this==!1?w?Promise.reject({date:p,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("No certificates attached to this signed data"):(k=this.signerInfos[i].sid instanceof N.default?k.then(function(){var e=!0,r=!1,n=void 0;try{for(var a,o=t.certificates[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value;if(u instanceof y.default!=!1&&u.issuer.isEqual(t.signerInfos[i].sid.issuer)&&u.serialNumber.isEqual(t.signerInfos[i].sid.serialNumber))return A=u,Promise.resolve()}}catch(e){r=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw n}}return w?Promise.reject({date:p,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")}):k.then(function(){return Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof y.default}),function(e){return O.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,n=!1,a=void 0;try{for(var o,s=t.certificates.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=u(o.value,2),l=c[0],h=c[1];if(h instanceof y.default!=!1&&(0,f.isEqualBuffer)(e[l],t.signerInfos[i].sid.valueBlock.valueHex))return A=h,Promise.resolve()}}catch(e){n=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}return w?Promise.reject({date:p,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")},function(){return w?Promise.reject({date:p,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")})}),k=k.then(function(){if("1.2.840.113549.1.9.16.1.4"===t.encapContentInfo.eContentType){if("eContent"in t.encapContentInfo==!1)return!1;var e=l.fromBER(t.encapContentInfo.eContent.valueBlock.valueHex),r=void 0;try{r=new V.default({schema:e.result})}catch(e){return!1}return 0===s.byteLength?w?Promise.reject({date:p,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:A,signerCertificateVerified:null}):Promise.reject("Missed detached data input array"):r.verify({data:s})}return!0}),g&&(k=k.then(function(r){return r!==!1&&Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof y.default}),function(t){return e(t)})).then(function(e){var r,n=new T.default({checkDate:p,certs:Array.from(e.filter(function(e){return null!==e})),trustedCerts:m});if(n.certs.push(A),"crls"in t){var i=!0,o=!1,u=void 0;try{for(var s,c=t.crls[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;l instanceof S.default?n.crls.push(l):"1.3.6.1.5.5.7.48.1.1"===l.otherRevInfoFormat&&n.ocsps.push(new U.default({schema:l.otherRevInfo}))}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}}return"ocsps"in t&&(r=n.ocsps).push.apply(r,a(t.ocsps)),n.verify().then(function(e){return e.result===!0?Promise.resolve(!0):w?Promise.reject({date:p,code:5,message:"Validation of signer's certificate failed: "+e.resultMessage,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed")},function(e){return w?Promise.reject({date:p,code:5,message:"Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e),signatureVerified:null,signerCertificate:A,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return w?Promise.reject({date:p,code:6,message:"Error during checking certificates for CA flag: "+e,signatureVerified:null,signerCertificate:A,signerCertificateVerified:null}):Promise.reject("Error during checking certificates for CA flag: "+e)})})),k=k.then(function(e){if(e===!1)return!1;var r=(0,h.getAlgorithmByOID)(t.signerInfos[i].digestAlgorithm.algorithmId);return"name"in r==!1?w?Promise.reject({date:p,code:7,message:"Unsupported signature algorithm: "+t.signerInfos[i].digestAlgorithm.algorithmId,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Unsupported signature algorithm: "+t.signerInfos[i].digestAlgorithm.algorithmId):(P=r.name,!0)}),k=k.then(function(e){if(e===!1)return!1;if("eContent"in t.encapContentInfo)if(1===t.encapContentInfo.eContent.idBlock.tagClass&&4===t.encapContentInfo.eContent.idBlock.tagNumber)if(t.encapContentInfo.eContent.idBlock.isConstructed===!1)s=t.encapContentInfo.eContent.valueBlock.valueHex;else{var r=!0,n=!1,a=void 0;try{for(var o,u=t.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;s=(0,f.utilConcatBuf)(s,c.valueBlock.valueHex)}}catch(e){n=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}}else s=t.encapContentInfo.eContent.valueBlock.valueHex;else if(0===s.byteLength)return w?Promise.reject({date:p,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Missed detached data input array");if("signedAttrs"in t.signerInfos[i]){var l=!1,h=!1,m=!0,d=!1,v=void 0;try{for(var g,y=t.signerInfos[i].signedAttrs.attributes[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;if("1.2.840.113549.1.9.3"===b.type&&(l=!0),"1.2.840.113549.1.9.4"===b.type&&(h=!0,_=b.values[0].valueBlock.valueHex),l&&h)break}}catch(e){d=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(d)throw v}}if(l===!1)return w?Promise.reject({date:p,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject('Attribute "content-type" is a mandatory attribute for "signed attributes"');if(h===!1)return w?Promise.reject({date:p,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject('Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0}),k=k.then(function(e){if(e===!1)return!1;var t=void 0;t="1.2.840.113549.1.1.10"===A.signatureAlgorithm.algorithmId?A.signatureAlgorithm.algorithmId:A.subjectPublicKeyInfo.algorithm.algorithmId;var r=(0,h.getAlgorithmByOID)(t);if("name"in r==!1)return w?Promise.reject({date:p,code:11,message:"Unsupported public key algorithm: "+t,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Unsupported public key algorithm: "+t);var n=(0,h.getAlgorithmParameters)(r.name,"importkey");if("hash"in n.algorithm&&(n.algorithm.hash.name=P),"ECDSA"===r.name){var i=!1;if("algorithmParams"in A.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in A.subjectPublicKeyInfo.algorithm.algorithmParams&&1===A.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===A.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(i=!0),i===!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var a=(0,h.getAlgorithmByOID)(A.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in a==!1)return Promise.reject("Unsupported named curve algorithm: "+A.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());n.algorithm.namedCurve=a.name}var o=A.subjectPublicKeyInfo.toSchema(),u=o.toBER(!1),s=new Uint8Array(u);return O.importKey("spki",s,n.algorithm,!0,n.usages)}),k=k.then(function(e){return"boolean"!=typeof e&&(C=e,!("signedAttrs"in t.signerInfos[i])||O.digest(P,new Uint8Array(s)))}).then(function(e){return e!==!1&&(!("signedAttrs"in t.signerInfos[i])||!!(0,f.isEqualBuffer)(e,_)&&(s=t.signerInfos[i].signedAttrs.encodedValue,!0))}).then(function(e){if(e===!1)return!1;var r=(0,h.getAlgorithmParameters)(C.algorithm.name,"verify");if("hash"in r.algorithm&&(r.algorithm.hash.name=P),"RSA-PSS"===C.algorithm.name){var n=void 0;try{n=new H.default({schema:t.signerInfos[i].signatureAlgorithm.algorithmParams})}catch(e){return w?Promise.reject({date:p,code:12,message:e,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject(e)}"saltLength"in n?r.algorithm.saltLength=n.saltLength:r.algorithm.saltLength=20;var a="SHA-1";if("hashAlgorithm"in n){var o=(0,h.getAlgorithmByOID)(n.hashAlgorithm.algorithmId);if("name"in o==!1)return w?Promise.reject({date:p,code:13,message:"Unrecognized hash algorithm: "+n.hashAlgorithm.algorithmId,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Unrecognized hash algorithm: "+n.hashAlgorithm.algorithmId);a=o.name}r.algorithm.hash.name=a}var u=t.signerInfos[i].signature.valueBlock.valueHex;if("ECDSA"===C.algorithm.name){var c=l.fromBER(u);u=(0,h.createECDSASignatureFromCMS)(c.result)}return O.verify(r.algorithm,C,new Uint8Array(u),new Uint8Array(s))}),k=k.then(function(e){return w?{date:p,code:14,message:"",signatureVerified:e,signerCertificate:A,signerCertificateVerified:!0}:e},function(e){return w?"code"in e?Promise.reject(e):Promise.reject({date:p,code:15,message:"Error during verification: "+e.message,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject(e)}))}},{key:"sign",value:function(e,t,r,n){var i=this;n=n||new ArrayBuffer(0);var a="";if("undefined"==typeof e)return Promise.reject("Need to provide a private key for signing");if("undefined"==typeof r&&(r="SHA-1"),a=(0,h.getOIDByAlgorithm)({name:r}),""===a)return Promise.reject("Unsupported hash algorithm: "+r);0===this.digestAlgorithms.filter(function(e){return e.algorithmId===a}).length&&this.digestAlgorithms.push(new d.default({algorithmId:a,algorithmParams:new l.Null})),this.signerInfos[t].digestAlgorithm=new d.default({algorithmId:a,algorithmParams:new l.Null});var o=(0,h.getAlgorithmParameters)(e.algorithm.name,"sign");switch(o.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signerInfos[t].signatureAlgorithm.algorithmId=(0,h.getOIDByAlgorithm)(o.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":o.algorithm.saltLength=32;break;case"SHA-384":o.algorithm.saltLength=48;break;case"SHA-512":o.algorithm.saltLength=64}var u={};if("SHA-1"!==r.toUpperCase()){if(a=(0,h.getOIDByAlgorithm)({name:r}),""===a)return Promise.reject("Unsupported hash algorithm: "+r);u.hashAlgorithm=new d.default({algorithmId:a,algorithmParams:new l.Null}),u.maskGenAlgorithm=new d.default({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.hashAlgorithm.toSchema()})}20!==o.algorithm.saltLength&&(u.saltLength=o.algorithm.saltLength);var s=new H.default(u);this.signerInfos[t].signatureAlgorithm=new d.default({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}if("signedAttrs"in this.signerInfos[t])if(0!==this.signerInfos[t].signedAttrs.encodedValue.byteLength)n=this.signerInfos[t].signedAttrs.encodedValue;else{n=this.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1);var c=new Uint8Array(n);c[0]=49}else if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(this.encapContentInfo.eContent.idBlock.isConstructed===!1)n=this.encapContentInfo.eContent.valueBlock.valueHex;else{var m=!0,p=!1,v=void 0;try{for(var g,y=this.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;n=(0,f.utilConcatBuf)(n,b.valueBlock.valueHex)}}catch(e){p=!0,v=e}finally{try{!m&&y.return&&y.return()}finally{if(p)throw v}}}else n=this.encapContentInfo.eContent.valueBlock.valueHex;else if(0===n.byteLength)return Promise.reject("Missed detached data input array");var w=(0,h.getCrypto)();return"undefined"==typeof w?Promise.reject("Unable to create WebCrypto object"):w.sign(o.algorithm,e,new Uint8Array(n)).then(function(e){return"ECDSA"===o.algorithm.name&&(e=(0,h.createCMSECDSASignature)(e)),i.signerInfos[t].signature=new l.OctetString({valueHex:e}),e},function(e){return Promise.reject("Signing error: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new v.default;case"certificates":return[];case"crls":return[];case"signerInfos":return[];default:throw new Error("Invalid member name for SignedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"encapContentInfo":return new v.default;case"digestAlgorithms":case"certificates":case"crls":case"signerInfos":return 0===r.length;default:throw new Error("Invalid member name for SignedData class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.getParametersValue)(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new l.Sequence({name:t.blockName||"SignedData",optional:t.optional,value:[new l.Integer({name:t.version||"SignedData.version"}),new l.Set({value:[new l.Repeated({name:t.digestAlgorithms||"SignedData.digestAlgorithms",value:d.default.schema()})]}),v.default.schema(t.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:E.default.schema(t.certificates||{names:{certificates:"SignedData.certificates"}}).valueBlock.value}),new l.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:x.default.schema(t.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new l.Set({value:[new l.Repeated({name:t.signerInfos||"SignedData.signerInfos",value:A.default.schema()})]})]})}}]),e}();t.default=L},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(420),f=n(l),h=r(518),m=n(h),d=r(481),p=n(d),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.sid=(0,c.getParametersValue)(t,"sid",e.defaultValues("sid")),this.digestAlgorithm=(0,c.getParametersValue)(t,"digestAlgorithm",e.defaultValues("digestAlgorithm")),"signedAttrs"in t&&(this.signedAttrs=(0,c.getParametersValue)(t,"signedAttrs",e.defaultValues("signedAttrs"))),this.signatureAlgorithm=(0,c.getParametersValue)(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=(0,c.getParametersValue)(t,"signature",e.defaultValues("signature")),"unsignedAttrs"in t&&(this.unsignedAttrs=(0,c.getParametersValue)(t,"unsignedAttrs",e.defaultValues("unsignedAttrs"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CMS_SIGNER_INFO");
this.version=r.result["SignerInfo.version"].valueBlock.valueDec;var n=r.result["SignerInfo.sid"];1===n.idBlock.tagClass?this.sid=new p.default({schema:n}):this.sid=n,this.digestAlgorithm=new f.default({schema:r.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in r.result&&(this.signedAttrs=new m.default({type:0,schema:r.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new f.default({schema:r.result["SignerInfo.signatureAlgorithm"]}),this.signature=r.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in r.result&&(this.unsignedAttrs=new m.default({type:1,schema:r.result["SignerInfo.unsignedAttrs"]}))}},{key:"toSchema",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t=[];return t.push(new s.Integer({value:this.version})),this.sid instanceof p.default?t.push(this.sid.toSchema()):t.push(this.sid),t.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&e.compareWithDefault("signedAttrs",this.signedAttrs)===!1&&t.push(this.signedAttrs.toSchema()),t.push(this.signatureAlgorithm.toSchema()),t.push(this.signature),"unsignedAttrs"in this&&e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)===!1&&t.push(this.unsignedAttrs.toSchema()),new s.Sequence({value:t})}},{key:"toJSON",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t={version:this.version};return this.sid instanceof s.Any||(t.sid=this.sid.toJSON()),t.digestAlgorithm=this.digestAlgorithm.toJSON(),e.compareWithDefault("signedAttrs",this.signedAttrs)===!1&&(t.signedAttrs=this.signedAttrs.toJSON()),t.signatureAlgorithm=this.signatureAlgorithm.toJSON(),t.signature=this.signature.toJSON(),e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)===!1&&(t.unsignedAttrs=this.unsignedAttrs.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"sid":return new s.Any;case"digestAlgorithm":return new f.default;case"signedAttrs":return new m.default({type:0});case"signatureAlgorithm":return new f.default;case"signature":return new s.OctetString;case"unsignedAttrs":return new m.default({type:1});default:throw new Error("Invalid member name for SignerInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return e.defaultValues("version")===r;case"sid":return r instanceof s.Any;case"digestAlgorithm":return r instanceof f.default!=!1&&r.isEqual(e.defaultValues("digestAlgorithm"));case"signedAttrs":return m.default.compareWithDefault("type",r.type)&&m.default.compareWithDefault("attributes",r.attributes)&&m.default.compareWithDefault("encodedValue",r.encodedValue);case"signatureAlgorithm":return r instanceof f.default!=!1&&r.isEqual(e.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return m.default.compareWithDefault("type",r.type)&&m.default.compareWithDefault("attributes",r.attributes)&&m.default.compareWithDefault("encodedValue",r.encodedValue);default:throw new Error("Invalid member name for SignerInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:"SignerInfo",value:[new s.Integer({name:t.version||"SignerInfo.version"}),new s.Choice({value:[p.default.schema(t.sid||{names:{blockName:"SignerInfo.sid"}}),new s.Constructed({optional:!0,name:t.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new s.OctetString]})]}),f.default.schema(t.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),m.default.schema(t.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),f.default.schema(t.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new s.OctetString({name:t.signature||"SignerInfo.signature"}),m.default.schema(t.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}}]),e}();t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(427),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=(0,c.getParametersValue)(t,"type",e.defaultValues("type")),this.attributes=(0,c.getParametersValue)(t,"attributes",e.defaultValues("attributes")),this.encodedValue=(0,c.getParametersValue)(t,"encodedValue",e.defaultValues("encodedValue")),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema({names:{tagNumber:this.type,attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SignedUnsignedAttributes");this.type=r.result.idBlock.tagNumber,this.encodedValue=r.result.valueBeforeDecode;var n=new Uint8Array(this.encodedValue);if(n[0]=49,"attributes"in r.result!=!1)this.attributes=Array.from(r.result.attributes,function(e){return new f.default({schema:e})});else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}},{key:"toSchema",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues("type");case"attributes":return 0===r.length;case"encodedValue":return 0===r.byteLength;default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Constructed({name:t.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber},value:[new s.Repeated({name:t.attributes||"",value:f.default.schema()})]})}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(419),f=r(507),h=n(f),m=r(435),d=n(m),p=r(432),v=n(p),g=r(449),y=n(g),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.policy=(0,c.getParametersValue)(t,"policy",e.defaultValues("policy")),this.messageImprint=(0,c.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),this.serialNumber=(0,c.getParametersValue)(t,"serialNumber",e.defaultValues("serialNumber")),this.genTime=(0,c.getParametersValue)(t,"genTime",e.defaultValues("genTime")),"accuracy"in t&&(this.accuracy=(0,c.getParametersValue)(t,"accuracy",e.defaultValues("accuracy"))),"ordering"in t&&(this.ordering=(0,c.getParametersValue)(t,"ordering",e.defaultValues("ordering"))),"nonce"in t&&(this.nonce=(0,c.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"tsa"in t&&(this.tsa=(0,c.getParametersValue)(t,"tsa",e.defaultValues("tsa"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TST_INFO");this.version=r.result["TSTInfo.version"].valueBlock.valueDec,this.policy=r.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new h.default({schema:r.result["TSTInfo.messageImprint"]}),this.serialNumber=r.result["TSTInfo.serialNumber"],this.genTime=r.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in r.result&&(this.accuracy=new d.default({schema:r.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in r.result&&(this.ordering=r.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in r.result&&(this.nonce=r.result["TSTInfo.nonce"]),"TSTInfo.tsa"in r.result&&(this.tsa=new v.default({schema:r.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in r.result&&(this.extensions=Array.from(r.result["TSTInfo.extensions"],function(e){return new y.default({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new s.Integer({value:this.version})),e.push(new s.ObjectIdentifier({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new s.GeneralizedTime({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new s.Boolean({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),e}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),n=void 0,i=void 0,a=void 0,o=(0,l.getCrypto)();if("undefined"==typeof o)return Promise.reject("Unable to create WebCrypto object");if(!("data"in t))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');n=t.data,"notBefore"in t&&(i=t.notBefore),"notAfter"in t&&(a=t.notAfter);var u=(0,l.getAlgorithmByOID)(this.messageImprint.hashAlgorithm.algorithmId);return"name"in u==!1?Promise.reject("Unsupported signature algorithm: "+this.messageImprint.hashAlgorithm.algorithmId):r=r.then(function(){return o.digest(u.name,new Uint8Array(n))}).then(function(t){return(0,c.isEqualBuffer)(t,e.messageImprint.hashedMessage.valueBlock.valueHex)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new h.default;case"serialNumber":return new s.Integer;case"genTime":return new Date(0,0,0);case"accuracy":return new d.default;case"ordering":return!1;case"nonce":return new s.Integer;case"tsa":return new v.default;case"extensions":return[];default:throw new Error("Invalid member name for TSTInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"policy":case"genTime":case"ordering":return r===e.defaultValues(t);case"messageImprint":return h.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&h.default.compareWithDefault("hashedMessage",r.hashedMessage);case"serialNumber":case"nonce":return r.isEqual(e.defaultValues(t));case"accuracy":return d.default.compareWithDefault("seconds",r.seconds)&&d.default.compareWithDefault("millis",r.millis)&&d.default.compareWithDefault("micros",r.micros);case"tsa":return v.default.compareWithDefault("type",r.type)&&v.default.compareWithDefault("value",r.value);case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TSTInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TSTInfo",value:[new s.Integer({name:t.version||"TSTInfo.version"}),new s.ObjectIdentifier({name:t.policy||"TSTInfo.policy"}),h.default.schema(t.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new s.Integer({name:t.serialNumber||"TSTInfo.serialNumber"}),new s.GeneralizedTime({name:t.genTime||"TSTInfo.genTime"}),d.default.schema(t.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new s.Boolean({name:t.ordering||"TSTInfo.ordering",optional:!0}),new s.Integer({name:t.nonce||"TSTInfo.nonce",optional:!0}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[v.default.schema(t.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Repeated({name:t.extensions||"TSTInfo.extensions",value:y.default.schema(t.extension||{})})]})]})}}]),e}();t.default=b},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(415),u=n(o),s=r(416),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.status=(0,s.getParametersValue)(t,"status",e.defaultValues("status")),"statusStrings"in t&&(this.statusStrings=(0,s.getParametersValue)(t,"statusStrings",e.defaultValues("statusStrings"))),"failInfo"in t&&(this.failInfo=(0,s.getParametersValue)(t,"failInfo",e.defaultValues("failInfo"))),"schema"in t&&this.fromSchema(t.schema)}return a(e,[{key:"fromSchema",value:function(t){var r=u.compareSchema(t,t,e.schema({names:{status:"status",statusStrings:"statusStrings",failInfo:"failInfo"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKIStatusInfo");var n=r.result.status;if(n.valueBlock.isHexOnly===!0||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,"statusStrings"in r.result&&(this.statusStrings=r.result.statusStrings),"failInfo"in r.result&&(this.failInfo=r.result.failInfo)}},{key:"toSchema",value:function(){var e=[];return e.push(new u.Integer({value:this.status})),"statusStrings"in this&&e.push(new u.Sequence({optional:!0,value:this.statusStrings})),"failInfo"in this&&e.push(this.failInfo),new u.Sequence({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"statusStrings"in this&&(e.statusStrings=Array.from(this.statusStrings,function(e){return e.toJSON()})),"failInfo"in this&&(e.failInfo=this.failInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return 2;case"statusStrings":return[];case"failInfo":return new u.BitString;default:throw new Error("Invalid member name for PKIStatusInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"status":return r===e.defaultValues(t);case"statusStrings":return 0===r.length;case"failInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for PKIStatusInfo class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.getParametersValue)(e,"names",{});return new u.Sequence({name:t.blockName||"",value:[new u.Integer({name:t.status||""}),new u.Sequence({optional:!0,value:[new u.Repeated({name:t.statusStrings||"",value:new u.Utf8String})]}),new u.BitString({name:t.failInfo||"",optional:!0})]})}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(507),f=n(l),h=r(449),m=n(h),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=(0,c.getParametersValue)(t,"version",e.defaultValues("version")),this.messageImprint=(0,c.getParametersValue)(t,"messageImprint",e.defaultValues("messageImprint")),"reqPolicy"in t&&(this.reqPolicy=(0,c.getParametersValue)(t,"reqPolicy",e.defaultValues("reqPolicy"))),"nonce"in t&&(this.nonce=(0,c.getParametersValue)(t,"nonce",e.defaultValues("nonce"))),"certReq"in t&&(this.certReq=(0,c.getParametersValue)(t,"certReq",e.defaultValues("certReq"))),"extensions"in t&&(this.extensions=(0,c.getParametersValue)(t,"extensions",e.defaultValues("extensions"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TSP_REQUEST");this.version=r.result["TimeStampReq.version"].valueBlock.valueDec,this.messageImprint=new f.default({schema:r.result["TimeStampReq.messageImprint"]}),"TimeStampReq.reqPolicy"in r.result&&(this.reqPolicy=r.result["TimeStampReq.reqPolicy"].valueBlock.toString()),"TimeStampReq.nonce"in r.result&&(this.nonce=r.result["TimeStampReq.nonce"]),"TimeStampReq.certReq"in r.result&&(this.certReq=r.result["TimeStampReq.certReq"].valueBlock.value),"TimeStampReq.extensions"in r.result&&(this.extensions=Array.from(r.result["TimeStampReq.extensions"],function(e){return new m.default({schema:e})}))}},{key:"toSchema",value:function(){var t=[];return t.push(new s.Integer({value:this.version})),t.push(this.messageImprint.toSchema()),"reqPolicy"in this&&t.push(new s.ObjectIdentifier({value:this.reqPolicy})),"nonce"in this&&t.push(this.nonce),"certReq"in this&&e.compareWithDefault("certReq",this.certReq)===!1&&t.push(new s.Boolean({value:this.certReq})),"extensions"in this&&t.push(new s.Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new s.Sequence({value:t})}},{key:"toJSON",value:function(){var t={version:this.version,messageImprint:this.messageImprint.toJSON()};return"reqPolicy"in this&&(t.reqPolicy=this.reqPolicy),"nonce"in this&&(t.nonce=this.nonce.toJSON()),"certReq"in this&&e.compareWithDefault("certReq",this.certReq)===!1&&(t.certReq=this.certReq),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"messageImprint":return new f.default;case"reqPolicy":return"";case"nonce":return new s.Integer;case"certReq":return!1;case"extensions":return[];default:throw new Error("Invalid member name for TimeStampReq class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"reqPolicy":case"certReq":return r===e.defaultValues(t);case"messageImprint":return f.default.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&f.default.compareWithDefault("hashedMessage",r.hashedMessage);case"nonce":return r.isEqual(e.defaultValues(t));case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TimeStampReq class: "+t)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TimeStampReq",value:[new s.Integer({name:t.version||"TimeStampReq.version"}),f.default.schema(t.messageImprint||{names:{blockName:"TimeStampReq.messageImprint"}}),new s.ObjectIdentifier({name:t.reqPolicy||"TimeStampReq.reqPolicy",optional:!0}),new s.Integer({name:t.nonce||"TimeStampReq.nonce",optional:!0}),new s.Boolean({name:t.certReq||"TimeStampReq.certReq",optional:!0}),new s.Constructed({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Repeated({name:t.extensions||"TimeStampReq.extensions",value:m.default.schema()})]})]})}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(415),s=i(u),c=r(416),l=r(520),f=n(l),h=r(438),m=n(h),d=r(516),p=n(d),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.status=(0,c.getParametersValue)(t,"status",e.defaultValues("status")),"timeStampToken"in t&&(this.timeStampToken=(0,c.getParametersValue)(t,"timeStampToken",e.defaultValues("timeStampToken"))),"schema"in t&&this.fromSchema(t.schema)}return o(e,[{key:"fromSchema",value:function(t){var r=s.compareSchema(t,t,e.schema());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TSP_RESPONSE");this.status=new f.default({schema:r.result["TimeStampResp.status"]}),"TimeStampResp.timeStampToken"in r.result&&(this.timeStampToken=new m.default({schema:r.result["TimeStampResp.timeStampToken"]}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.status.toSchema()),"timeStampToken"in this&&e.push(this.timeStampToken.toSchema()),new s.Sequence({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"timeStampToken"in this&&(e.timeStampToken=this.timeStampToken.toJSON()),e}},{key:"sign",value:function(e,t){if("timeStampToken"in this==!1)return Promise.reject("timeStampToken is absent in TSP response");if("1.2.840.113549.1.7.2"!==this.timeStampToken.contentType)return Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType);var r=new m.default({schema:this.timeStampToken.content});return r.sign(e,0,t)}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{signer:0,trustedCerts:[],data:new ArrayBuffer(0)};if("timeStampToken"in this==!1)return Promise.reject("timeStampToken is absent in TSP response");if("1.2.840.113549.1.7.2"!==this.timeStampToken.contentType)return Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType);var t=new p.default({schema:this.timeStampToken.content});return t.verify(e)}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return new f.default;case"timeStampToken":return new m.default;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"status":return f.default.compareWithDefault("status",t.status)&&"statusStrings"in t==!1&&"failInfo"in t==!1;case"timeStampToken":return""===t.contentType&&t.content instanceof s.Any;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getParametersValue)(e,"names",{});return new s.Sequence({name:t.blockName||"TimeStampResp",value:[f.default.schema(t.status||{names:{blockName:"TimeStampResp.status"}}),m.default.schema(t.timeStampToken||{names:{blockName:"TimeStampResp.timeStampToken",optional:!0}})]})}}]),e}();t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=function(){function e(){}return e.determineOptions=function(e,t){var r={parseCerts:!1};return e?"function"==typeof e?r.callback=e:(r.callback=t,n.has(e,"parseCerts")&&(r.parseCerts=e.parseCerts)):"function"==typeof t&&(r.callback=t),r},e.determineOptionsWithFilter=function(e){var t={parseCerts:!1,params:{}};return n.isArray(e)?e.length&&(t.params.filter=e.join(",")):n.isObject(e)&&(n.has(e,"filters")&&n.isArray(e.filters)&&e.filters.length&&(t.params.filter=e.filters.join(",")),n.has(e,"parseCerts")&&(t.parseCerts=e.parseCerts)),t},e}();t.RequestHandler=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(413),o=r(523),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.rnData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.RN_DATA),void 0,e)},t.prototype.address=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ADDRESS),void 0,e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.citizenCertificate=function(e,r){return this.getCertificate(t.CERT_CITIZEN,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,o.RequestHandler.determineOptions(e,r))},t.prototype.rrnCertificate=function(e,r){return this.getCertificate(t.CERT_RRN,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this,o={private_key_reference:t.VERIFY_PRIV_KEY_REF};return e.pin&&(o.pin=e.pin),a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(i.GenericCertCard.VERIFY_PIN),o,void 0,r)})},t}(i.GenericCertCard);u.RN_DATA="/rn",u.ADDRESS="/address",u.PHOTO="/picture",u.VERIFY_PRIV_KEY_REF="non-repudiation",t.EidBe=u},function(e,t,r){"use strict";function n(e,t){return{filter:e.filter,pin:t}}function i(e){return{pin:e}}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(412),u=r(413),s=r(414),c=r(335),l=r(523),f=function(e){function t(t,r,n,i,a){var o=e.call(this,t,r,n,i)||this;return o.baseUrl=t,o.containerUrl=r,o.connection=n,o.reader_id=i,o.pin=a,o}return a(t,e),t.prototype.allDataFilters=function(){return["authentication-certificate","biometric","non-repudiation-certificate","picture","root-certificates"]},t.prototype.allCertFilters=function(){return["authentication-certificate","non-repudiation-certificate","root-certificates"]},t.prototype.allData=function(e,t){var r=l.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(),n(r.params,this.pin)).then(function(e){return s.CertParser.process(e,r.parseCerts,t)},function(e){return c.ResponseHandler.error(e,t)})},t.prototype.allCerts=function(e,r){var i=l.RequestHandler.determineOptionsWithFilter(e);return this.connection.get(this.baseUrl,this.containerSuffix(t.ALL_CERTIFICATES),n(i.params,this.pin)).then(function(e){return s.CertParser.process(e,i.parseCerts,r)},function(e){return c.ResponseHandler.error(e,r)})},t.prototype.biometric=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.BIOMETRIC),i(this.pin),e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),i(this.pin),e)},t.prototype.rootCertificate=function(e,r){return this.getCertificateArray(t.CERT_ROOT,l.RequestHandler.determineOptions(e,r),i(this.pin))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,l.RequestHandler.determineOptions(e,r),i(this.pin))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,l.RequestHandler.determineOptions(e,r),i(this.pin))},t.prototype.verifyPin=function(e,r){var n=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,i(n.pin),r)})},t.prototype.signData=function(e,r){var n=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.SIGN_DATA),e,i(n.pin),r)})},t.prototype.authenticate=function(e,r){var n=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.AUTHENTICATE),e,i(n.pin),r)})},t.prototype.signatureImage=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.SIGNATURE_IMAGE),i(this.pin),e)},t.prototype.getCertificate=function(e,r,n){var i=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,n.pin).then(function(){return i.connection.get(i.baseUrl,i.containerSuffix(t.ALL_CERTIFICATES+e),n).then(function(e){return s.CertParser.process(e,r.parseCerts,r.callback)},function(e){return c.ResponseHandler.error(e,r.callback)})})},t.prototype.getCertificateArray=function(e,r,n){var i=this;return u.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,n.pin).then(function(){return i.connection.get(i.baseUrl,i.containerSuffix(t.ALL_CERTIFICATES+e),n).then(function(e){return s.CertParser.process(e,r.parseCerts,r.callback)},function(e){return c.ResponseHandler.error(e,r.callback)})})},t}(o.GenericSecuredCertCard);f.BIOMETRIC="/biometric",f.ADDRESS="/address",f.PHOTO="/picture",f.SIGNATURE_IMAGE="/signature-image",t.EidLux=f},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,
new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a="/card-issuing",o="/contracts",u="/picture",s="/status",c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.cardIssuing=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(a),void 0,e)},t.prototype.contracts=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(o),void 0,e)},t.prototype.picture=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(u),void 0,e)},t.prototype.status=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(s),void 0,e)},t}(i.GenericSmartCard);t.Mobib=c},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(523),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.activated=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ACTIVATED),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,a.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,a.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,a.RequestHandler.determineOptions(e,r))},t}(i.GenericCertCard);o.ACTIVATED="/activated",t.LuxTrust=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(413),o=r(336),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.challenge=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.CHALLENGE),e,void 0,r)},function(e){return r(e,null)}):new o(function(r,i){a.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.CHALLENGE),e,void 0))},function(e){i(e)})})},t.prototype.readCounter=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.get(n.baseUrl,n.containerSuffix(t.READ_COUNTER),{pin:e.pin},r)},function(e){return r(e,null)}):new o(function(r,i){a.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.get(n.baseUrl,n.containerSuffix(t.READ_COUNTER),{pin:e.pin},void 0))},function(e){i(e)})})},t}(i.GenericPinCard);u.CHALLENGE="/challenge",u.READ_COUNTER="/counter",t.Ocra=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(413),o=r(523),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["applet-info","root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.issuerCertificate=function(e,r){return this.getCertificate(t.CERT_ISSUER,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,o.RequestHandler.determineOptions(e,r))},t.prototype.encryptionCertificate=function(e,r){return this.getCertificate(t.CERT_ENCRYPTION,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t.prototype.resetPin=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.RESET_PIN),e,void 0,r)},t}(i.GenericCertCard);u.DEFAULT_VERIFY_PIN="sign",u.RESET_PIN="/reset-pin",t.Aventra=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(413),o=r(523),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,o.RequestHandler.determineOptions(e,r))},t.prototype.issuerCertificate=function(e,r){return this.getCertificate(t.CERT_ISSUER,o.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,o.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,o.RequestHandler.determineOptions(e,r))},t.prototype.encryptionCertificate=function(e,r){return this.getCertificate(t.CERT_ENCRYPTION,o.RequestHandler.determineOptions(e,r))},t.prototype.verifyPin=function(e,r){var n=this;return a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.VERIFY_PIN),e,void 0,r)})},t}(i.GenericCertCard);t.Oberthur=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(413),o=r(336),u=r(523),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.allDataFilters=function(){return["applet-info","root_certificate","authentication-certificate","encryption_certificate","issuer_certificate","signing_certificate"]},t.prototype.allCertFilters=function(){return["authentication-certificate","signing_certificate"]},t.prototype.allKeyRefs=function(){return["authenticate","sign","encrypt"]},t.prototype.printedInformation=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.PRINTED_INFORMATION),e,void 0,r)},function(e){return r(e,null)}):new o(function(r,i){a.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.PRINTED_INFORMATION),e,void 0))},function(e){i(e)})})},t.prototype.facialImage=function(e,r){var n=this;return r&&"function"==typeof r?void a.PinEnforcer.check(this.connection,this.baseUrl,this.reader_id,e.pin).then(function(){return n.connection.post(n.baseUrl,n.containerSuffix(t.FACIAL_IMAGE),e,void 0,r)},function(e){return r(e,null)}):new o(function(r,i){a.PinEnforcer.check(n.connection,n.baseUrl,n.reader_id,e.pin).then(function(){r(n.connection.post(n.baseUrl,n.containerSuffix(t.FACIAL_IMAGE),e,void 0))},function(e){i(e)})})},t.prototype.authenticationCertificate=function(e,r,n){return this.getCertificate(t.CERT_AUTHENTICATION,e,u.RequestHandler.determineOptions(r,n))},t.prototype.signingCertificate=function(e,r,n){return this.getCertificate(t.CERT_SIGNING,e,u.RequestHandler.determineOptions(r,n))},t}(i.GenericSecuredCertCard);s.PRINTED_INFORMATION="/printed-information",s.FACIAL_IMAGE="/facial-image",t.PIV=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=r(414),a=r(335),o=r(333),u=r(523),s=function(){function e(t,r,n,i){this.baseUrl=t,this.containerUrl=r,this.connection=n,this.moduleConfig=i,o.os.family.indexOf("Win")>-1&&(this.os="win"),o.os.family.indexOf("OS X")>-1&&(this.os="mac"),this.os||(this.os="linux"),i&&i[this.os]?this.modulePath=i[this.os]:this.modulePath=e.DEFAULT_CONFIG[this.os]}return e.prototype.certificates=function(t,r,o){var s=this,c=n.extend({slot_id:t},{module:this.modulePath}),l=u.RequestHandler.determineOptions(r,o);return this.connection.post(this.baseUrl,this.containerSuffix(e.ALL_CERTIFICATES),c,void 0).then(function(e){return i.CertParser.process(e,l.parseCerts,l.callback)},function(r){if(s.moduleConfig){var o=n.extend({slot_id:t},{module:e.DEFAULT_CONFIG[s.os]});return s.connection.post(s.baseUrl,s.containerSuffix(e.ALL_CERTIFICATES),o,void 0).then(function(e){return i.CertParser.process(e,l.parseCerts,l.callback)},function(e){return a.ResponseHandler.error(e,l.callback)})}return a.ResponseHandler.error(r,l.callback)})},e.prototype.info=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.INFO),n,void 0).then(function(e){return a.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var i={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.INFO),i,void 0,t)}return a.ResponseHandler.error(n,t)})},e.prototype.signData=function(t,r){var n=this,i={module:this.modulePath,id:t.cert_id,slot_id:t.slot_id,pin:t.pin,data:t.data,digest:t.algorithm_reference};return this.connection.post(this.baseUrl,this.containerSuffix(e.SIGN),i,void 0).then(function(e){return a.ResponseHandler.response(e,r)},function(i){if(n.moduleConfig){var o={module:e.DEFAULT_CONFIG[n.os],id:t.cert_id,slot_id:t.slot_id,pin:t.pin,data:t.data,digest:t.algorithm_reference};return n.connection.post(n.baseUrl,n.containerSuffix(e.SIGN),o,void 0,r)}return a.ResponseHandler.error(i,r)})},e.prototype.slots=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.SLOTS),n,void 0).then(function(e){return a.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var i={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.SLOTS),i,void 0,t)}return a.ResponseHandler.error(n,t)})},e.prototype.slotsWithTokenPresent=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.SLOTS),n,{"token-present":"true"}).then(function(e){return a.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var i={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.SLOTS),i,{"token-present":"true"},t)}return a.ResponseHandler.error(n,t)})},e.prototype.tokens=function(t){var r=this,n={module:this.modulePath};return this.connection.post(this.baseUrl,this.containerSuffix(e.TOKENS),n,void 0).then(function(e){return a.ResponseHandler.response(e,t)},function(n){if(r.moduleConfig){var i={module:e.DEFAULT_CONFIG[r.os]};return r.connection.post(r.baseUrl,r.containerSuffix(e.TOKENS),i,void 0,t)}return a.ResponseHandler.error(n,t)})},e.prototype.containerSuffix=function(e){return this.containerUrl+e},e}();s.ALL_CERTIFICATES="/certificates",s.INFO="/info",s.SIGN="/sign",s.SLOTS="/slots",s.TOKENS="/tokens",s.DEFAULT_CONFIG={linux:"/usr/local/lib/libeTPkcs11.so",mac:"/usr/local/lib/libeTPkcs11.dylib",win:"C:\\Windows\\System32\\eTPKCS11.dll"},t.SafeNet=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(523),o=r(414),u=r(335),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.info=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.INFO),void 0,e)},t.prototype.intermediateCertificate=function(e,r){var n=a.RequestHandler.determineOptions(e,r),i=this;return i.connection.get(i.baseUrl,i.containerSuffix(t.ALL_CERTIFICATES+t.CERT_INTERMEDIATE),void 0).then(function(e){return o.CertParser.process(e,n.parseCerts,n.callback)},function(e){return u.ResponseHandler.error(e,n.callback)})},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,a.RequestHandler.determineOptions(e,r))},t.prototype.signingCertificate=function(e,r){return this.getCertificate(t.CERT_SIGNING,a.RequestHandler.determineOptions(e,r))},t}(i.GenericCertCard);s.INFO="/info",s.CERT_INTERMEDIATE="/intermediate",t.DNIe=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(412),a=r(523),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.idData=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ID_DATA),void 0,e)},t.prototype.idDataWithOutPhoto=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.ID_DATA),{photo:"false"},e)},t.prototype.address=function(e,r){return this.connection.post(this.baseUrl,this.containerSuffix(t.ADDRESS),e,void 0,r)},t.prototype.photo=function(e){return this.connection.get(this.baseUrl,this.containerSuffix(t.PHOTO),void 0,e)},t.prototype.rootCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT,a.RequestHandler.determineOptions(e,r))},t.prototype.rootAuthenticationCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT_AUTH,a.RequestHandler.determineOptions(e,r))},t.prototype.rootNonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_ROOT_NON_REP,a.RequestHandler.determineOptions(e,r))},t.prototype.authenticationCertificate=function(e,r){return this.getCertificate(t.CERT_AUTHENTICATION,a.RequestHandler.determineOptions(e,r))},t.prototype.nonRepudiationCertificate=function(e,r){return this.getCertificate(t.CERT_NON_REPUDIATION,a.RequestHandler.determineOptions(e,r))},t}(i.GenericCertCard);o.ADDRESS="/address",o.CERT_ROOT_AUTH="/root-authentication",o.CERT_ROOT_NON_REP="/root-non-repudiation",o.ID_DATA="/id",o.PHOTO="/photo",t.EidPt=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(328),a=r(412),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.optionalSessionIdParam=function(e){return e&&e.length?{"session-id":e}:void 0},t.prototype.atr=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.ATR),t.optionalSessionIdParam(e),r)},t.prototype.apdu=function(e,r,n){var a=this.containerSuffix(t.APDU);return i.isArray(e)&&(a=this.containerSuffix(t.APDUS)),this.connection.post(this.baseUrl,a,e,t.optionalSessionIdParam(r),n)},t.prototype.ccid=function(e,r,n,i){return this.connection.post(this.baseUrl,this.containerSuffix(t.CCID),{feature:e,apdu:r},t.optionalSessionIdParam(n),i)},t.prototype.ccidFeatures=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.CCID_FEATURES),t.optionalSessionIdParam(e),r)},t.prototype.command=function(e,r,n){if(i.isArray(e)){var a=[];return i.forEach(e,function(e){a.push({tx:e})}),this.connection.post(this.baseUrl,this.containerSuffix(t.CMDS),a,t.optionalSessionIdParam(r),n)}return this.connection.post(this.baseUrl,this.containerSuffix(t.CMD),{tx:e},t.optionalSessionIdParam(r),n)},t.prototype.closeSession=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.CLOSE_SESSION),t.optionalSessionIdParam(e),r)},t.prototype.isPresent=function(e,r){return this.connection.get(this.baseUrl,this.containerSuffix(t.IS_PRESENT),t.optionalSessionIdParam(e),r)},t.prototype.openSession=function(e,r){return e&&e>0?this.connection.post(this.baseUrl,this.containerSuffix(t.OPEN_SESSION),{timeout:e},void 0,r):this.connection.post(this.baseUrl,this.containerSuffix(t.OPEN_SESSION),{timeout:this.connection.cfg.defaultSessionTimeout},void 0,r)},t}(a.GenericReaderContainer);o.ATR="/atr",o.APDU="/apdu",o.APDUS="/apdus",o.CCID="/ccid",o.CCID_FEATURES="/ccid-features",o.CMD="/command",o.CMDS="/commands",o.CLOSE_SESSION="/close-session",o.IS_PRESENT="/is-present",o.OPEN_SESSION="/open-session",t.RemoteLoading=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(535),a=r(335),o=r(328),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.generateStxApdu=function(e,t){return t&&t.length?{cla:"F1",ins:"95",p1:"F7",p2:"E4",data:t+e}:{cla:"F1",ins:"95",p1:"F7",p2:"E4",data:"00"+e}},t.prototype.isBelfiusReader=function(e,r){var n=this;return e&&e.length?this.connection.get(this.baseUrl,"/card-readers/"+this.reader_id,void 0).then(function(i){return n.apdu(t.NONCE_APDU,e).then(function(e){return a.ResponseHandler.response({data:"9000"===e.data.sw,success:!0},r)})},function(e){return a.ResponseHandler.error(e,r)}):a.ResponseHandler.error({status:400,description:"Session ID is required!",code:"402"},r)},t.prototype.nonce=function(e,r){var n=this;return this.isBelfiusReader(e).then(function(i){return i.data?n.apdu(t.NONCE_APDU,e,r):a.ResponseHandler.error({status:400,description:"Reader is not compatible with this request.",code:"2"},r)})},t.prototype.stx=function(e,r,n){var i=this;return this.isBelfiusReader(r).then(function(u){if(u.data){if(e.length<=500)return i.apdu(t.generateStxApdu(e),r,n);for(var s=[],c=0;c<Math.ceil(e.length/500);c++)s.push(e.substr(500*c,500));return i.apdu(i.generateStxApdus(s),r).then(function(e){var t="";o.forEach(e.data,function(e){e.rx&&(t+=e.rx)});var r={data:{tx:e.data[e.data.length-1].tx,sw:e.data[e.data.length-1].sw},success:e.success};return"9000"===r.data.sw&&t.length>0&&(r.data.rx=t),a.ResponseHandler.response(r,n)})}return a.ResponseHandler.error({status:400,description:"Reader is not compatible with this request.",code:"2"},n)})},t.prototype.generateStxApdus=function(e){var r=[],n=e.length-1;return o.forEach(e,function(e,i){0===i?r.push(t.generateStxApdu(e,"01")):i===n?r.push(t.generateStxApdu(e,"02")):r.push(t.generateStxApdu(e,"03"))}),r},t}(i.RemoteLoading);u.NONCE_APDU={cla:"F1",ins:"95",p1:"F7",p2:"E4",data:"FE0000040001300000"},t.Belfius=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(524),i=r(335),a=r(328),o=r(538),u=r(529),s=r(336),c=function(){function e(){}return e.containerForReader=function(e,t,r){return this.checkPrerequisites(e,t,{}).then(function(e){return i.ResponseHandler.response({data:e.container,success:!0},r)}).catch(function(e){return i.ResponseHandler.error(e,r)})},e.dumpData=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(this.determineDataDumpMethod).then(e.doDataDump).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.authenticateCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanAuthenticate).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return i.ResponseHandler.response(e,t)}).catch(function(e){return i.ResponseHandler.error(e,t)})},e.signCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanSign).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return i.ResponseHandler.response(e,t)}).catch(function(e){return i.ResponseHandler.error(e,t)})},e.verifyPinCapable=function(e,t){return e.core().readersCardAvailable().then(this.checkCanVerifyPin).then(function(t){return{client:e,readers:t}}).then(this.filterByAvailableContainers).then(function(e){return i.ResponseHandler.response(e,t)}).catch(function(e){return i.ResponseHandler.error(e,t)})},e.authenticate=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(this.determineAlgorithm).then(e.doAuthenticate).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.sign=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(this.determineAlgorithm).then(e.doSign).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.verifyPin=function(t,r,n,a){return this.checkPrerequisites(t,r,n).then(e.doVerifyPin).then(function(e){return i.ResponseHandler.response(e,a)}).catch(function(e){return i.ResponseHandler.error(e,a)})},e.checkCanAuthenticate=function(e){return new s(function(t){e.data=a.filter(e.data,function(e){return o.CardUtil.canAuthenticate(e.card)}),t(e)})},e.checkCanSign=function(e){return new s(function(t){e.data=a.filter(e.data,function(e){return o.CardUtil.canSign(e.card)}),t(e)})},e.checkCanVerifyPin=function(e){return new s(function(t){e.data=a.filter(e.data,function(e){return o.CardUtil.canVerifyPin(e.card)}),t(e)})},e.filterByAvailableContainers=function(e){return e.client.core().plugins().then(function(t){return new s(function(r){e.readers.data=a.filter(e.readers.data,function(e){return a.find(t.data,function(t){return t.id===o.CardUtil.determineContainer(e.card)})}),r(e.readers)})})},e.checkPrerequisites=function(e,t,r){return e.core().readersCardAvailable().then(function(e){return{readerId:t,readers:e}}).then(this.checkReaderPresent).then(this.determineContainerForCard).then(function(t){return{client:e,container:t}}).then(this.checkContainerAvailable).then(function(e){return{client:e.client,readerId:t,container:e.container,data:r}})},e.checkReaderPresent=function(e){return new s(function(t,r){var n=a.find(e.readers.data,function(t){return t.id===e.readerId});n?t(n):r(e.readerId&&e.readerId.length?"No card found for this ID":"Reader ID is required.")})},e.checkContainerAvailable=function(e){return new s(function(t,r){e&&e.container?e.client.core().plugins().then(function(n){a.find(n.data,function(t){return t.id===e.container})?t(e):r("Container for this card is not available")}):r("Unknown card type")})},e.determineAlgorithm=function(e){return new s(function(t,r){e.data.algorithm_reference&&e.data.algorithm_reference.length||(e.data.algorithm_reference=o.CardUtil.defaultAlgo(e.container)),e.data.algorithm_reference?t(e):r("No algorithm reference provided and cannot determine default algorithm")})},e.determineContainerForCard=function(e){return new s(function(t,r){e&&e.card?t(o.CardUtil.determineContainer(e.card)):r("No card present in reader")})},e.determineDataDumpMethod=function(e){return new s(function(t,r){e.dumpMethod=o.CardUtil.dumpMethod(e.container),e.dumpOptions=o.CardUtil.dumpOptions(e.container),e.dumpMethod?t(e):r("Cannot determine method to use for data dump")})},e.doDataDump=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).allData({filters:[],parseCerts:!0}):e.dumpOptions?e.client[e.container](e.readerId)[e.dumpMethod](e.dumpOptions,e.data):e.client[e.container](e.readerId)[e.dumpMethod](e.data)},e.doSign=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).signData(e.data):e.client[e.container](e.readerId).signData(e.data)},e.doAuthenticate=function(e){return"luxeid"===e.container?e.client.luxeid(e.readerId,e.data.pin).authenticate(e.data):e.client[e.container](e.readerId).authenticate(e.data)},e.doVerifyPin=function(e){if("luxeid"===e.container)return e.client.luxeid(e.readerId,e.data.pin).verifyPin(e.data);if("beid"===e.container){var t={pin:e.data.pin,private_key_reference:n.EidBe.VERIFY_PRIV_KEY_REF};return e.client.beid(e.readerId).verifyPin(t)}if("aventra"===e.container){var t={pin:e.data.pin,private_key_reference:u.Aventra.DEFAULT_VERIFY_PIN};return e.client.aventra(e.readerId).verifyPin(t)}return e.client[e.container](e.readerId).verifyPin(e.data)},e}();t.GenericService=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(328),i=function(){function e(){}return e.canAuthenticate=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"piv":case"pteid":return!0;case"ocra":case"emv":case"mobib":default:return!1}},e.canSign=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"piv":case"pteid":return!0;case"ocra":case"emv":case"mobib":default:return!1}},e.canVerifyPin=function(e){var t=this.determineContainer(e);switch(t){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"oberthur":case"ocra":case"piv":case"pteid":case"emv":return!0;case"mobib":default:return!1}},e.determineContainer=function(e){function t(e,t){return!!n.find(e,function(e){return e.indexOf(t)>-1})}return n.isEmpty(e)||n.isEmpty(e.description)?void 0:t(e.description,"Belgium Electronic ID card")?"beid":t(e.description,"DNI electronico")?"dnie":t(e.description,"Grand Duchy of Luxembourg / Identity card with LuxTrust certificate (eID)")?"luxeid":t(e.description,"LuxTrust card")?"luxtrust":t(e.description,"Juridic Person's Token (PKI)")?"ocra":t(e.description,"MOBIB")?"mobib":t(e.description,"Mastercard")?"emv":t(e.description,"Oberthur")?"oberthur":t(e.description,"Aventra")?"aventra":t(e.description,"PIV")?"piv":t(e.description,"CIV")?"piv":t(e.description,"Portuguese")?"pteid":void 0},e.defaultAlgo=function(e){switch(e){case"aventra":case"beid":case"dnie":case"oberthur":case"piv":case"luxeid":case"luxtrust":case"pteid":return"sha256";default:return}},e.dumpMethod=function(e){switch(e){case"aventra":case"beid":case"dnie":case"emv":case"luxeid":case"luxtrust":case"mobib":case"oberthur":case"ocra":case"piv":case"pteid":return"allData";case"safenet":return"slots";default:return}},e.dumpOptions=function(e){switch(e){case"aventra":case"beid":case"dnie":case"luxeid":case"luxtrust":case"mobib":case"oberthur":case"ocra":case"piv":case"pteid":return{filters:[],parseCerts:!0};case"safenet":return;case"emv":return[];default:return}},e}();t.CardUtil=i}]);
//# sourceMappingURL=GCLLib.min.js.map